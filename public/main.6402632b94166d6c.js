"use strict";(self.webpackChunksaladejuegos=self.webpackChunksaladejuegos||[]).push([[179],{2313:(mn,ot,j)=>{j.d(ot,{nm:()=>Mn});var C=j(2432),Se=(j(4650),j(3692),j(259),j(5861)),Ne=j(6881),$e=j(4859),be=j(2090),Ze=j(1877);const de=new Map,ye={activated:!1,tokenObservers:[]},Me={initialized:!1,enabled:!1};function tt(te){return de.get(te)||Object.assign({},ye)}function Nt(){return Me}const Qt="https://content-firebaseappcheck.googleapis.com/v1",ft="exchangeDebugToken",Rt={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Je{constructor(he,Ie,He,Z,ve){if(this.operation=he,this.retryPolicy=Ie,this.getWaitDuration=He,this.lowerBound=Z,this.upperBound=ve,this.pending=null,this.nextErrorWaitInterval=Z,Z>ve)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(he){var Ie=this;return(0,Se.Z)(function*(){Ie.stop();try{Ie.pending=new be.BH,yield function vt(te){return new Promise(he=>{setTimeout(he,te)})}(Ie.getNextRun(he)),Ie.pending.resolve(),yield Ie.pending.promise,Ie.pending=new be.BH,yield Ie.operation(),Ie.pending.resolve(),yield Ie.pending.promise,Ie.process(!0).catch(()=>{})}catch(He){Ie.retryPolicy(He)?Ie.process(!1).catch(()=>{}):Ie.stop()}})()}getNextRun(he){if(he)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ie=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ie}}}const wt=new be.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Kt(te,he){return qt.apply(this,arguments)}function qt(){return(qt=(0,Se.Z)(function*({url:te,body:he},Ie){const He={"Content-Type":"application/json"},Z=Ie.getImmediate({optional:!0});if(Z){const br=yield Z.getHeartbeatsHeader();br&&(He["X-Firebase-Client"]=br)}const ve={method:"POST",body:JSON.stringify(he),headers:He};let qe,_t;try{qe=yield fetch(te,ve)}catch(br){throw wt.create("fetch-network-error",{originalErrorMessage:br?.message})}if(200!==qe.status)throw wt.create("fetch-status-error",{httpStatus:qe.status});try{_t=yield qe.json()}catch(br){throw wt.create("fetch-parse-error",{originalErrorMessage:br?.message})}const Xt=_t.ttl.match(/^([\d.]+)(s)$/);if(!Xt||!Xt[2]||isNaN(Number(Xt[1])))throw wt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_t.ttl}`});const $n=1e3*Number(Xt[1]),vn=Date.now();return{token:_t.token,expireTimeMillis:vn+$n,issuedAtTimeMillis:vn}})).apply(this,arguments)}const bt="firebase-app-check-database",Ht=1,It="firebase-app-check-store";let Ct=null;function nr(te,he){return pr.apply(this,arguments)}function pr(){return(pr=(0,Se.Z)(function*(te,he){const He=(yield function rn(){return Ct||(Ct=new Promise((te,he)=>{try{const Ie=indexedDB.open(bt,Ht);Ie.onsuccess=He=>{te(He.target.result)},Ie.onerror=He=>{var Z;he(wt.create("storage-open",{originalErrorMessage:null===(Z=He.target.error)||void 0===Z?void 0:Z.message}))},Ie.onupgradeneeded=He=>{0===He.oldVersion&&He.target.result.createObjectStore(It,{keyPath:"compositeKey"})}}catch(Ie){he(wt.create("storage-open",{originalErrorMessage:Ie?.message}))}}),Ct)}()).transaction(It,"readwrite"),ve=He.objectStore(It).put({compositeKey:te,value:he});return new Promise((qe,_t)=>{ve.onsuccess=Xt=>{qe()},He.onerror=Xt=>{var $n;_t(wt.create("storage-set",{originalErrorMessage:null===($n=Xt.target.error)||void 0===$n?void 0:$n.message}))}})})).apply(this,arguments)}const pn=new Ze.Yd("@firebase/app-check");function ui(te,he){return(0,be.hl)()?function tr(te,he){return nr(function Ur(te){return`${te.options.appId}-${te.name}`}(te),he)}(te,he).catch(Ie=>{pn.warn(`Failed to write token to IndexedDB. Error: ${Ie}`)}):Promise.resolve()}function Kr(){return ur.apply(this,arguments)}function ur(){return(ur=(0,Se.Z)(function*(){const te=Nt();if(te.enabled&&te.token)return te.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Gr={error:"UNKNOWN_ERROR"};function an(te){return be.US.encodeString(JSON.stringify(te),!1)}function dn(te){return hn.apply(this,arguments)}function hn(){return(hn=(0,Se.Z)(function*(te,he=!1){const Ie=te.app;!function xt(te){if(!tt(te).activated)throw wt.create("use-before-activation",{appName:te.name})}(Ie);const He=tt(Ie);let ve,Z=He.token;if(Z&&!Nn(Z)&&(He.token=void 0,Z=void 0),!Z){const Xt=yield He.cachedTokenPromise;Xt&&(Nn(Xt)?Z=Xt:yield ui(Ie,void 0))}if(!he&&Z&&Nn(Z))return{token:Z.token};let _t,qe=!1;if(function Qn(){return Nt().enabled}()){He.exchangeTokenPromise||(He.exchangeTokenPromise=Kt(function lt(te,he){const{projectId:Ie,appId:He,apiKey:Z}=te.options;return{url:`${Qt}/projects/${Ie}/apps/${He}:${ft}?key=${Z}`,body:{debug_token:he}}}(Ie,yield Kr()),te.heartbeatServiceProvider).finally(()=>{He.exchangeTokenPromise=void 0}),qe=!0);const Xt=yield He.exchangeTokenPromise;return yield ui(Ie,Xt),He.token=Xt,{token:Xt.token}}try{He.exchangeTokenPromise||(He.exchangeTokenPromise=He.provider.getToken().finally(()=>{He.exchangeTokenPromise=void 0}),qe=!0),Z=yield tt(Ie).exchangeTokenPromise}catch(Xt){"appCheck/throttled"===Xt.code?pn.warn(Xt.message):pn.error(Xt),ve=Xt}return Z?ve?_t=Nn(Z)?{token:Z.token,internalError:ve}:qr(ve):(_t={token:Z.token},He.token=Z,yield ui(Ie,Z)):_t=qr(ve),qe&&function Wr(te,he){const Ie=tt(te).tokenObservers;for(const He of Ie)try{"EXTERNAL"===He.type&&null!=he.error?He.error(he.error):He.next(he)}catch{}}(Ie,_t),_t})).apply(this,arguments)}function Er(te,he){const Ie=tt(te),He=Ie.tokenObservers.filter(Z=>Z.next!==he);0===He.length&&Ie.tokenRefresher&&Ie.tokenRefresher.isRunning()&&Ie.tokenRefresher.stop(),Ie.tokenObservers=He}function Vr(te){const{app:he}=te,Ie=tt(he);let He=Ie.tokenRefresher;He||(He=function ri(te){const{app:he}=te;return new Je((0,Se.Z)(function*(){let He;if(He=tt(he).token?yield dn(te,!0):yield dn(te),He.error)throw He.error;if(He.internalError)throw He.internalError}),()=>!0,()=>{const Ie=tt(he);if(Ie.token){let He=Ie.token.issuedAtTimeMillis+.5*(Ie.token.expireTimeMillis-Ie.token.issuedAtTimeMillis)+3e5;return He=Math.min(He,Ie.token.expireTimeMillis-3e5),Math.max(0,He-Date.now())}return 0},Rt.RETRIAL_MIN_WAIT,Rt.RETRIAL_MAX_WAIT)}(te),Ie.tokenRefresher=He),!He.isRunning()&&Ie.isTokenAutoRefreshEnabled&&He.start()}function Nn(te){return te.expireTimeMillis-Date.now()>0}function qr(te){return{token:an(Gr),error:te}}class Bn{constructor(he,Ie){this.app=he,this.heartbeatServiceProvider=Ie}_delete(){const{tokenObservers:he}=tt(this.app);for(const Ie of he)Er(this.app,Ie.next);return Promise.resolve()}}const Fe="app-check-internal";!function it(){(0,Ne._registerComponent)(new $e.wA("app-check",te=>function jn(te,he){return new Bn(te,he)}(te.getProvider("app").getImmediate(),te.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((te,he,Ie)=>{te.getProvider(Fe).initialize()})),(0,Ne._registerComponent)(new $e.wA(Fe,te=>function Hn(te){return{getToken:he=>dn(te,he),addTokenListener:he=>function yr(te,he,Ie,He){const{app:Z}=te,ve=tt(Z);if(ve.tokenObservers=[...ve.tokenObservers,{next:Ie,error:He,type:he}],ve.token&&Nn(ve.token)){const _t=ve.token;Promise.resolve().then(()=>{Ie({token:_t.token}),Vr(te)}).catch(()=>{})}ve.cachedTokenPromise.then(()=>Vr(te))}(te,"INTERNAL",he),removeTokenListener:he=>Er(te.app,he)}}(te.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)("@firebase/app-check","0.7.0")}();class Mn{constructor(){return(0,C.vb)("app-check")}}typeof window<"u"&&window},3692:(mn,ot,j)=>{j.d(ot,{Ot:()=>X,ZF:()=>nt,hX:()=>tt,z6:()=>Se});var C=j(259),p=j(4650),K=j(2432);class X{constructor(Je){return Je}}class Se{constructor(){return(0,C.C6)()}}const be=new p.OlP("angularfire2._apps"),Ze={provide:X,useFactory:function $e(Te){return Te&&1===Te.length?Te[0]:new X((0,C.Mq)())},deps:[[new p.FiY,be]]},de={provide:Se,deps:[[new p.FiY,be]]};function ye(Te){return(Je,vt)=>{const $t=Je.runOutsideAngular(()=>Te(vt));return new X($t)}}let Me=(()=>{class Te{constructor(vt){(0,C.KN)("angularfire",K.q4.full,"core"),(0,C.KN)("angularfire",K.q4.full,"app"),(0,C.KN)("angular",p.q4F.full,vt.toString())}}return Te.\u0275fac=function(vt){return new(vt||Te)(p.LFG(p.Lbi))},Te.\u0275mod=p.oAB({type:Te}),Te.\u0275inj=p.cJS({providers:[Ze,de]}),Te})();function tt(Te,...Je){return{ngModule:Me,providers:[{provide:be,useFactory:ye(Te),multi:!0,deps:[p.R0b,p.zs3,K.HU,...Je]}]}}const nt=(0,K.u3)(C.ZF,!0)},751:(mn,ot,j)=>{j.d(ot,{gx:()=>Qt,dh:()=>nt,fD:()=>je,Xb:()=>lt,v0:()=>Gt,AR:()=>wt,e5:()=>lr,w7:()=>Wr});var C=j(2432),p=j(4650),K=j(3692),X=j(259),Se=j(2313),Ne=j(8502),ye=(j(2090),j(6881),j(1877),j(4859),j(9751));function Me(Pe){return new ye.y(function(gt){return{unsubscribe:(0,Ne.x)(Pe,gt.next.bind(gt),gt.error.bind(gt),gt.complete.bind(gt))}})}class Qt{constructor(gt){return gt}}class nt{constructor(){return(0,C.vb)("auth")}}const ft=new p.OlP("angularfire2.auth-instances");function Te(Pe){return(gt,ct)=>{const ge=gt.runOutsideAngular(()=>Pe(ct));return new Qt(ge)}}const Je={provide:nt,deps:[[new p.FiY,ft]]},vt={provide:Qt,useFactory:function Rt(Pe,gt){const ct=(0,C.JM)("auth",Pe,gt);return ct&&new Qt(ct)},deps:[[new p.FiY,ft],K.Ot]};let $t=(()=>{class Pe{constructor(){(0,X.KN)("angularfire",C.q4.full,"auth")}}return Pe.\u0275fac=function(ct){return new(ct||Pe)},Pe.\u0275mod=p.oAB({type:Pe}),Pe.\u0275inj=p.cJS({providers:[vt,Je]}),Pe})();function wt(Pe,...gt){return{ngModule:$t,providers:[{provide:ft,useFactory:Te(Pe),multi:!0,deps:[p.R0b,p.zs3,C.HU,K.z6,[new p.FiY,Se.nm],...gt]}]}}const je=(0,C.u3)(Me,!0),lt=(0,C.u3)(Ne.a8,!0),Gt=(0,C.u3)(Ne.o,!0),lr=(0,C.u3)(Ne.a9,!0),Wr=(0,C.u3)(Ne.B,!0)},2371:(mn,ot,j)=>{j.d(ot,{ST:()=>Pt});var C=j(4650),p=j(4986),K=j(9751),X=j(8996),Se=j(9646),Ne=j(2432),$e=j(8675),be=j(4482),Ze=j(5403);function de(){return(0,be.e)((pe,V)=>{let ne,Fe=!1;pe.subscribe((0,Ze.x)(V,it=>{const Wt=ne;ne=it,Fe&&V.next([Wt,it]),Fe=!0}))})}var ye=j(4004),Me=j(5026),tt=j(4671);function Nt(pe,V){return pe===V}var Qt=j(9300),nt=j(2011),yt=j(6895),Rt=(j(9568),j(3942)),Te=j(2810),Je=j(2090),vt=j(4859);function je(pe,V){if(void 0===V)return{merge:!1};if(void 0!==V.mergeFields&&void 0!==V.merge)throw new Te.WA("invalid-argument",`Invalid options passed to function ${pe}(): You cannot specify both "merge" and "mergeFields".`);return V}function xt(){if(typeof Uint8Array>"u")throw new Te.WA("unimplemented","Uint8Arrays are not available in this environment.")}function ln(){if(!(0,Te.Me)())throw new Te.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class jt{constructor(V){this._delegate=V}static fromBase64String(V){return ln(),new jt(Te.Jj.fromBase64String(V))}static fromUint8Array(V){return xt(),new jt(Te.Jj.fromUint8Array(V))}toBase64(){return ln(),this._delegate.toBase64()}toUint8Array(){return xt(),this._delegate.toUint8Array()}isEqual(V){return this._delegate.isEqual(V._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Kt(pe){return function qt(pe,V){if("object"!=typeof pe||null===pe)return!1;const ne=pe;for(const Fe of V)if(Fe in ne&&"function"==typeof ne[Fe])return!0;return!1}(pe,["next","error","complete"])}class rt{enableIndexedDbPersistence(V,ne){return(0,Te.ST)(V._delegate,{forceOwnership:ne})}enableMultiTabIndexedDbPersistence(V){return(0,Te.fH)(V._delegate)}clearIndexedDbPersistence(V){return(0,Te.Fc)(V._delegate)}}class at{constructor(V,ne,Fe){this._delegate=ne,this._persistenceProvider=Fe,this.INTERNAL={delete:()=>this.terminate()},V instanceof Te.l7||(this._appCompat=V)}get _databaseId(){return this._delegate._databaseId}settings(V){const ne=this._delegate._getSettings();!V.merge&&ne.host!==V.host&&(0,Te.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),V.merge&&delete(V=Object.assign(Object.assign({},ne),V)).merge,this._delegate._setSettings(V)}useEmulator(V,ne,Fe={}){(0,Te.at)(this._delegate,V,ne,Fe)}enableNetwork(){return(0,Te.Ix)(this._delegate)}disableNetwork(){return(0,Te.TF)(this._delegate)}enablePersistence(V){let ne=!1,Fe=!1;return V&&(ne=!!V.synchronizeTabs,Fe=!!V.experimentalForceOwningTab,(0,Te.Wi)("synchronizeTabs",ne,"experimentalForceOwningTab",Fe)),ne?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,Fe)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,Te.Mx)(this._delegate)}onSnapshotsInSync(V){return(0,Te.sc)(this._delegate,V)}get app(){if(!this._appCompat)throw new Te.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(V){try{return new hr(this,(0,Te.hJ)(this._delegate,V))}catch(ne){throw rn(ne,"collection()","Firestore.collection()")}}doc(V){try{return new Ct(this,(0,Te.JU)(this._delegate,V))}catch(ne){throw rn(ne,"doc()","Firestore.doc()")}}collectionGroup(V){try{return new nr(this,(0,Te.B$)(this._delegate,V))}catch(ne){throw rn(ne,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(V){return(0,Te.i3)(this._delegate,ne=>V(new Ht(this,ne)))}batch(){return(0,Te.qY)(this._delegate),new It(new Te.PU(this._delegate,V=>(0,Te.GL)(this._delegate,V)))}loadBundle(V){return(0,Te.Pb)(this._delegate,V)}namedQuery(V){return(0,Te.L$)(this._delegate,V).then(ne=>ne?new nr(this,ne):null)}}class lt extends Te.u7{constructor(V){super(),this.firestore=V}convertBytes(V){return new jt(new Te.Jj(V))}convertReference(V){const ne=this.convertDocumentKey(V,this.firestore._databaseId);return Ct.forKey(ne,this.firestore,null)}}class Ht{constructor(V,ne){this._firestore=V,this._delegate=ne,this._userDataWriter=new lt(V)}get(V){const ne=Ur(V);return this._delegate.get(ne).then(Fe=>new _n(this._firestore,new Te.xU(this._firestore._delegate,this._userDataWriter,Fe._key,Fe._document,Fe.metadata,ne.converter)))}set(V,ne,Fe){const it=Ur(V);return Fe?(je("Transaction.set",Fe),this._delegate.set(it,ne,Fe)):this._delegate.set(it,ne),this}update(V,ne,Fe,...it){const Wt=Ur(V);return 2===arguments.length?this._delegate.update(Wt,ne):this._delegate.update(Wt,ne,Fe,...it),this}delete(V){const ne=Ur(V);return this._delegate.delete(ne),this}}class It{constructor(V){this._delegate=V}set(V,ne,Fe){const it=Ur(V);return Fe?(je("WriteBatch.set",Fe),this._delegate.set(it,ne,Fe)):this._delegate.set(it,ne),this}update(V,ne,Fe,...it){const Wt=Ur(V);return 2===arguments.length?this._delegate.update(Wt,ne):this._delegate.update(Wt,ne,Fe,...it),this}delete(V){const ne=Ur(V);return this._delegate.delete(ne),this}commit(){return this._delegate.commit()}}class Gt{constructor(V,ne,Fe){this._firestore=V,this._userDataWriter=ne,this._delegate=Fe}fromFirestore(V,ne){const Fe=new Te.$q(this._firestore._delegate,this._userDataWriter,V._key,V._document,V.metadata,null);return this._delegate.fromFirestore(new xn(this._firestore,Fe),ne??{})}toFirestore(V,ne){return ne?this._delegate.toFirestore(V,ne):this._delegate.toFirestore(V)}static getInstance(V,ne){const Fe=Gt.INSTANCES;let it=Fe.get(V);it||(it=new WeakMap,Fe.set(V,it));let Wt=it.get(ne);return Wt||(Wt=new Gt(V,new lt(V),ne),it.set(ne,Wt)),Wt}}Gt.INSTANCES=new WeakMap;class Ct{constructor(V,ne){this.firestore=V,this._delegate=ne,this._userDataWriter=new lt(V)}static forPath(V,ne,Fe){if(V.length%2!=0)throw new Te.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${V.canonicalString()} has ${V.length}`);return new Ct(ne,new Te.my(ne._delegate,Fe,new Te.Ky(V)))}static forKey(V,ne,Fe){return new Ct(ne,new Te.my(ne._delegate,Fe,V))}get id(){return this._delegate.id}get parent(){return new hr(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(V){try{return new hr(this.firestore,(0,Te.hJ)(this._delegate,V))}catch(ne){throw rn(ne,"collection()","DocumentReference.collection()")}}isEqual(V){return(V=(0,Je.m9)(V))instanceof Te.my&&(0,Te.Eo)(this._delegate,V)}set(V,ne){ne=je("DocumentReference.set",ne);try{return ne?(0,Te.pl)(this._delegate,V,ne):(0,Te.pl)(this._delegate,V)}catch(Fe){throw rn(Fe,"setDoc()","DocumentReference.set()")}}update(V,ne,...Fe){try{return 1===arguments.length?(0,Te.r7)(this._delegate,V):(0,Te.r7)(this._delegate,V,ne,...Fe)}catch(it){throw rn(it,"updateDoc()","DocumentReference.update()")}}delete(){return(0,Te.oe)(this._delegate)}onSnapshot(...V){const ne=Sn(V),Fe=tr(V,it=>new _n(this.firestore,new Te.xU(this.firestore._delegate,this._userDataWriter,it._key,it._document,it.metadata,this._delegate.converter)));return(0,Te.cf)(this._delegate,ne,Fe)}get(V){let ne;return ne="cache"===V?.source?(0,Te.kl)(this._delegate):"server"===V?.source?(0,Te.Xk)(this._delegate):(0,Te.QT)(this._delegate),ne.then(Fe=>new _n(this.firestore,new Te.xU(this.firestore._delegate,this._userDataWriter,Fe._key,Fe._document,Fe.metadata,this._delegate.converter)))}withConverter(V){return new Ct(this.firestore,this._delegate.withConverter(V?Gt.getInstance(this.firestore,V):null))}}function rn(pe,V,ne){return pe.message=pe.message.replace(V,ne),pe}function Sn(pe){for(const V of pe)if("object"==typeof V&&!Kt(V))return V;return{}}function tr(pe,V){var ne,Fe;let it;return it=Kt(pe[0])?pe[0]:Kt(pe[1])?pe[1]:"function"==typeof pe[0]?{next:pe[0],error:pe[1],complete:pe[2]}:{next:pe[1],error:pe[2],complete:pe[3]},{next:Wt=>{it.next&&it.next(V(Wt))},error:null===(ne=it.error)||void 0===ne?void 0:ne.bind(it),complete:null===(Fe=it.complete)||void 0===Fe?void 0:Fe.bind(it)}}class _n{constructor(V,ne){this._firestore=V,this._delegate=ne}get ref(){return new Ct(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(V){return this._delegate.data(V)}get(V,ne){return this._delegate.get(V,ne)}isEqual(V){return(0,Te.qK)(this._delegate,V._delegate)}}class xn extends _n{data(V){const ne=this._delegate.data(V);return(0,Te.K9)(void 0!==ne,"Document in a QueryDocumentSnapshot should exist"),ne}}class nr{constructor(V,ne){this.firestore=V,this._delegate=ne,this._userDataWriter=new lt(V)}where(V,ne,Fe){try{return new nr(this.firestore,(0,Te.IO)(this._delegate,(0,Te.ar)(V,ne,Fe)))}catch(it){throw rn(it,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(V,ne){try{return new nr(this.firestore,(0,Te.IO)(this._delegate,(0,Te.Xo)(V,ne)))}catch(Fe){throw rn(Fe,/(orderBy|where)\(\)/,"Query.$1()")}}limit(V){try{return new nr(this.firestore,(0,Te.IO)(this._delegate,(0,Te.b9)(V)))}catch(ne){throw rn(ne,"limit()","Query.limit()")}}limitToLast(V){try{return new nr(this.firestore,(0,Te.IO)(this._delegate,(0,Te.vh)(V)))}catch(ne){throw rn(ne,"limitToLast()","Query.limitToLast()")}}startAt(...V){try{return new nr(this.firestore,(0,Te.IO)(this._delegate,(0,Te.e0)(...V)))}catch(ne){throw rn(ne,"startAt()","Query.startAt()")}}startAfter(...V){try{return new nr(this.firestore,(0,Te.IO)(this._delegate,(0,Te.TQ)(...V)))}catch(ne){throw rn(ne,"startAfter()","Query.startAfter()")}}endBefore(...V){try{return new nr(this.firestore,(0,Te.IO)(this._delegate,(0,Te.Lx)(...V)))}catch(ne){throw rn(ne,"endBefore()","Query.endBefore()")}}endAt(...V){try{return new nr(this.firestore,(0,Te.IO)(this._delegate,(0,Te.Wu)(...V)))}catch(ne){throw rn(ne,"endAt()","Query.endAt()")}}isEqual(V){return(0,Te.iE)(this._delegate,V._delegate)}get(V){let ne;return ne="cache"===V?.source?(0,Te.UQ)(this._delegate):"server"===V?.source?(0,Te.zN)(this._delegate):(0,Te.PL)(this._delegate),ne.then(Fe=>new zr(this.firestore,new Te.W(this.firestore._delegate,this._userDataWriter,this._delegate,Fe._snapshot)))}onSnapshot(...V){const ne=Sn(V),Fe=tr(V,it=>new zr(this.firestore,new Te.W(this.firestore._delegate,this._userDataWriter,this._delegate,it._snapshot)));return(0,Te.cf)(this._delegate,ne,Fe)}withConverter(V){return new nr(this.firestore,this._delegate.withConverter(V?Gt.getInstance(this.firestore,V):null))}}class pr{constructor(V,ne){this._firestore=V,this._delegate=ne}get type(){return this._delegate.type}get doc(){return new xn(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class zr{constructor(V,ne){this._firestore=V,this._delegate=ne}get query(){return new nr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(V=>new xn(this._firestore,V))}docChanges(V){return this._delegate.docChanges(V).map(ne=>new pr(this._firestore,ne))}forEach(V,ne){this._delegate.forEach(Fe=>{V.call(ne,new xn(this._firestore,Fe))})}isEqual(V){return(0,Te.qK)(this._delegate,V._delegate)}}class hr extends nr{constructor(V,ne){super(V,ne),this.firestore=V,this._delegate=ne}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const V=this._delegate.parent;return V?new Ct(this.firestore,V):null}doc(V){try{return new Ct(this.firestore,void 0===V?(0,Te.JU)(this._delegate):(0,Te.JU)(this._delegate,V))}catch(ne){throw rn(ne,"doc()","CollectionReference.doc()")}}add(V){return(0,Te.ET)(this._delegate,V).then(ne=>new Ct(this.firestore,ne))}isEqual(V){return(0,Te.Eo)(this._delegate,V._delegate)}withConverter(V){return new hr(this.firestore,this._delegate.withConverter(V?Gt.getInstance(this.firestore,V):null))}}function Ur(pe){return(0,Te.Cf)(pe,Te.my)}class pn{constructor(...V){this._delegate=new Te.Lz(...V)}static documentId(){return new pn(Te.Xb.keyField().canonicalString())}isEqual(V){return(V=(0,Je.m9)(V))instanceof Te.Lz&&this._delegate._internalPath.isEqual(V._internalPath)}}class Nr{constructor(V){this._delegate=V}static serverTimestamp(){const V=(0,Te.Bt)();return V._methodName="FieldValue.serverTimestamp",new Nr(V)}static delete(){const V=(0,Te.AK)();return V._methodName="FieldValue.delete",new Nr(V)}static arrayUnion(...V){const ne=(0,Te.vr)(...V);return ne._methodName="FieldValue.arrayUnion",new Nr(ne)}static arrayRemove(...V){const ne=(0,Te.Ab)(...V);return ne._methodName="FieldValue.arrayRemove",new Nr(ne)}static increment(V){const ne=(0,Te.nP)(V);return ne._methodName="FieldValue.increment",new Nr(ne)}isEqual(V){return this._delegate.isEqual(V._delegate)}}const Sr={Firestore:at,GeoPoint:Te.F8,Timestamp:Te.EK,Blob:jt,Transaction:Ht,WriteBatch:It,DocumentReference:Ct,DocumentSnapshot:_n,Query:nr,QueryDocumentSnapshot:xn,QuerySnapshot:zr,CollectionReference:hr,FieldPath:pn,FieldValue:Nr,setLogLevel:function bt(pe){(0,Te.Ub)(pe)},CACHE_SIZE_UNLIMITED:Te.IX};!function gr(pe){(function ui(pe,V){pe.INTERNAL.registerComponent(new vt.wA("firestore-compat",ne=>{const Fe=ne.getProvider("app-compat").getImmediate(),it=ne.getProvider("firestore").getImmediate();return V(Fe,it)},"PUBLIC").setServiceProps(Object.assign({},Sr)))})(pe,(V,ne)=>new at(V,ne,new rt)),pe.registerVersion("@firebase/firestore-compat","0.3.8")}(Rt.Z);var cn=j(7579),Qn=j(6451),Kr=j(5363),ur=j(3900),Fr=j(6063);class Gr extends cn.x{constructor(V=1/0,ne=1/0,Fe=Fr.l){super(),this._bufferSize=V,this._windowTime=ne,this._timestampProvider=Fe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ne===1/0,this._bufferSize=Math.max(1,V),this._windowTime=Math.max(1,ne)}next(V){const{isStopped:ne,_buffer:Fe,_infiniteTimeWindow:it,_timestampProvider:Wt,_windowTime:Ut}=this;ne||(Fe.push(V),!it&&Fe.push(Wt.now()+Ut)),this._trimBuffer(),super.next(V)}_subscribe(V){this._throwIfClosed(),this._trimBuffer();const ne=this._innerSubscribe(V),{_infiniteTimeWindow:Fe,_buffer:it}=this,Wt=it.slice();for(let Ut=0;Ut<Wt.length&&!V.closed;Ut+=Fe?1:2)V.next(Wt[Ut]);return this._checkFinalizedStatuses(V),ne}_trimBuffer(){const{_bufferSize:V,_timestampProvider:ne,_buffer:Fe,_infiniteTimeWindow:it}=this,Wt=(it?1:2)*V;if(V<1/0&&Wt<Fe.length&&Fe.splice(0,Fe.length-Wt),!it){const Ut=ne.now();let Mn=0;for(let Fn=1;Fn<Fe.length&&Fe[Fn]<=Ut;Fn+=2)Mn=Fn;Mn&&Fe.splice(0,Mn+1)}}}var an=j(3099);function dn(pe,V,ne){let Fe,it=!1;return pe&&"object"==typeof pe?({bufferSize:Fe=1/0,windowTime:V=1/0,refCount:it=!1,scheduler:ne}=pe):Fe=pe??1/0,(0,an.B)({connector:()=>new Gr(Fe,V,ne),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:it})}var hn=j(590),Yt=j(576);function lr(pe,V){return(0,Yt.m)(V)?(0,ur.w)(()=>pe,V):(0,ur.w)(()=>pe)}var yr=j(9468),Er=j(2313);j(9260);const Wr=new C.OlP("angularfire2.auth.use-emulator"),Nn=new C.OlP("angularfire2.auth.settings"),qr=new C.OlP("angularfire2.auth.tenant-id"),Bn=new C.OlP("angularfire2.auth.langugage-code"),jn=new C.OlP("angularfire2.auth.use-device-language"),Hn=new C.OlP("angularfire.auth.persistence"),xr=(pe,V,ne,Fe,it,Wt,Ut,Mn)=>(0,nt.cc)(`${pe.name}.auth`,"AngularFireAuth",pe.name,()=>{const Fn=V.runOutsideAngular(()=>pe.auth());if(ne&&Fn.useEmulator(...ne),Fe&&(Fn.tenantId=Fe),Fn.languageCode=it,Wt&&Fn.useDeviceLanguage(),Ut)for(const[Ar,Mr]of Object.entries(Ut))Fn.settings[Ar]=Mr;return Mn&&Fn.setPersistence(Mn),Fn},[ne,Fe,it,Wt,Ut,Mn]);let Jn=(()=>{class pe{constructor(ne,Fe,it,Wt,Ut,Mn,Fn,Ar,Mr,Pi,Hi,ei){const Lr=new cn.x,Zt=(0,Se.of)(void 0).pipe((0,Kr.Q)(Ut.outsideAngular),(0,ur.w)(()=>Wt.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9568)))),(0,ye.U)(()=>(0,nt.on)(ne,Wt,Fe)),(0,ye.U)(zn=>xr(zn,Wt,Mn,Ar,Mr,Pi,Fn,Hi)),dn({bufferSize:1,refCount:!1}));if((0,yt.PM)(it))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Se.of)(null);else{Zt.pipe((0,hn.P)()).subscribe();const Tn=Zt.pipe((0,ur.w)(Xn=>Xn.getRedirectResult().then(Zn=>Zn,()=>null)),Ne.iC,dn({bufferSize:1,refCount:!1})),In=Zt.pipe((0,ur.w)(Xn=>new K.y(Zn=>({unsubscribe:Wt.runOutsideAngular(()=>Xn.onAuthStateChanged(fe=>Zn.next(fe),fe=>Zn.error(fe),()=>Zn.complete()))})))),Dn=Zt.pipe((0,ur.w)(Xn=>new K.y(Zn=>({unsubscribe:Wt.runOutsideAngular(()=>Xn.onIdTokenChanged(fe=>Zn.next(fe),fe=>Zn.error(fe),()=>Zn.complete()))}))));this.authState=Tn.pipe(lr(In),(0,yr.R)(Ut.outsideAngular),(0,Kr.Q)(Ut.insideAngular)),this.user=Tn.pipe(lr(Dn),(0,yr.R)(Ut.outsideAngular),(0,Kr.Q)(Ut.insideAngular)),this.idToken=this.user.pipe((0,ur.w)(Xn=>Xn?(0,X.D)(Xn.getIdToken()):(0,Se.of)(null))),this.idTokenResult=this.user.pipe((0,ur.w)(Xn=>Xn?(0,X.D)(Xn.getIdTokenResult()):(0,Se.of)(null))),this.credential=(0,Qn.T)(Tn,Lr,this.authState.pipe((0,Qt.h)(Xn=>!Xn))).pipe((0,ye.U)(Xn=>Xn?.user?Xn:null),(0,yr.R)(Ut.outsideAngular),(0,Kr.Q)(Ut.insideAngular))}return(0,nt.pX)(this,Zt,Wt,{spy:{apply:(zn,Tn,In)=>{(zn.startsWith("signIn")||zn.startsWith("createUser"))&&In.then(Dn=>Lr.next(Dn))}}})}}return pe.\u0275fac=function(ne){return new(ne||pe)(C.LFG(nt.Dh),C.LFG(nt.xv,8),C.LFG(C.Lbi),C.LFG(C.R0b),C.LFG(Ne.HU),C.LFG(Wr,8),C.LFG(Nn,8),C.LFG(qr,8),C.LFG(Bn,8),C.LFG(jn,8),C.LFG(Hn,8),C.LFG(Er.nm,8))},pe.\u0275prov=C.Yz7({token:pe,factory:pe.\u0275fac,providedIn:"any"}),pe})();function Pe(pe,V){return function De(pe,V=p.z){return new K.y(ne=>{let Fe;return null!=V?V.schedule(()=>{Fe=pe.onSnapshot({includeMetadataChanges:!0},ne)}):Fe=pe.onSnapshot({includeMetadataChanges:!0},ne),()=>{Fe?.()}})}(pe,V)}function ct(pe,V){return Pe(pe,V).pipe((0,ye.U)(ne=>({payload:ne,type:"query"})))}function ge(pe,V){return ct(pe,V).pipe((0,$e.O)(void 0),de(),(0,ye.U)(([ne,Fe])=>{const it=Fe.payload.docChanges(),Wt=it.map(Ut=>({type:Ut.type,payload:Ut}));return ne&&JSON.stringify(ne.payload.metadata)!==JSON.stringify(Fe.payload.metadata)&&Fe.payload.docs.forEach((Ut,Mn)=>{const Fn=it.find(Mr=>Mr.doc.ref.isEqual(Ut.ref)),Ar=ne?.payload.docs.find(Mr=>Mr.ref.isEqual(Ut.ref));Fn&&JSON.stringify(Fn.doc.metadata)===JSON.stringify(Ut.metadata)||!Fn&&Ar&&JSON.stringify(Ar.metadata)===JSON.stringify(Ut.metadata)||Wt.push({type:"modified",payload:{oldIndex:Mn,newIndex:Mn,type:"modified",doc:Ut}})}),Wt}))}function _e(pe,V,ne){return ge(pe,ne).pipe((0,Me.R)((Fe,it)=>function ee(pe,V,ne){return V.forEach(Fe=>{ne.indexOf(Fe.type)>-1&&(pe=function Y(pe,V){switch(V.type){case"added":if(!pe[V.newIndex]||!pe[V.newIndex].doc.ref.isEqual(V.doc.ref))return re(pe,V.newIndex,0,V);break;case"modified":if(null==pe[V.oldIndex]||pe[V.oldIndex].doc.ref.isEqual(V.doc.ref)){if(V.oldIndex!==V.newIndex){const ne=pe.slice();return ne.splice(V.oldIndex,1),ne.splice(V.newIndex,0,V),ne}return re(pe,V.newIndex,1,V)}break;case"removed":if(pe[V.oldIndex]&&pe[V.oldIndex].doc.ref.isEqual(V.doc.ref))return re(pe,V.oldIndex,1)}return pe}(pe,Fe))}),pe}(Fe,it.map(Wt=>Wt.payload),V),[]),function Ye(pe,V=tt.y){return pe=pe??Nt,(0,be.e)((ne,Fe)=>{let it,Wt=!0;ne.subscribe((0,Ze.x)(Fe,Ut=>{const Mn=V(Ut);(Wt||!pe(it,Mn))&&(Wt=!1,it=Mn,Fe.next(Ut))}))})}(),(0,ye.U)(Fe=>Fe.map(it=>({type:it.type,payload:it}))))}function re(pe,V,ne,...Fe){const it=pe.slice();return it.splice(V,ne,...Fe),it}function Ue(pe){return(!pe||0===pe.length)&&(pe=["added","removed","modified"]),pe}class me{constructor(V,ne,Fe){this.ref=V,this.query=ne,this.afs=Fe}stateChanges(V){let ne=ge(this.query,this.afs.schedulers.outsideAngular);return V&&V.length>0&&(ne=ne.pipe((0,ye.U)(Fe=>Fe.filter(it=>V.indexOf(it.type)>-1)))),ne.pipe((0,$e.O)(void 0),de(),(0,Qt.h)(([Fe,it])=>it.length>0||!Fe),(0,ye.U)(([Fe,it])=>it),Ne.iC)}auditTrail(V){return this.stateChanges(V).pipe((0,Me.R)((ne,Fe)=>[...ne,...Fe],[]))}snapshotChanges(V){const ne=Ue(V);return _e(this.query,ne,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(V={}){return ct(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(ne=>ne.payload.docs.map(Fe=>V.idField?Object.assign(Object.assign({},Fe.data()),{[V.idField]:Fe.id}):Fe.data())),Ne.iC)}get(V){return(0,X.D)(this.query.get(V)).pipe(Ne.iC)}add(V){return this.ref.add(V)}doc(V){return new Ee(this.ref.doc(V),this.afs)}}class Ee{constructor(V,ne){this.ref=V,this.afs=ne}set(V,ne){return this.ref.set(V,ne)}update(V){return this.ref.update(V)}delete(){return this.ref.delete()}collection(V,ne){const Fe=this.ref.collection(V),{ref:it,query:Wt}=mt(Fe,ne);return new me(it,Wt,this.afs)}snapshotChanges(){return function gt(pe,V){return Pe(pe,V).pipe((0,$e.O)(void 0),de(),(0,ye.U)(([ne,Fe])=>Fe.exists?ne?.exists?{payload:Fe,type:"modified"}:{payload:Fe,type:"added"}:{payload:Fe,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(V={}){return this.snapshotChanges().pipe((0,ye.U)(({payload:ne})=>V.idField?Object.assign(Object.assign({},ne.data()),{[V.idField]:ne.id}):ne.data()))}get(V){return(0,X.D)(this.ref.get(V)).pipe(Ne.iC)}}class ue{constructor(V,ne){this.query=V,this.afs=ne}stateChanges(V){return V&&0!==V.length?ge(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(ne=>ne.filter(Fe=>V.indexOf(Fe.type)>-1)),(0,Qt.h)(ne=>ne.length>0),Ne.iC):ge(this.query,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}auditTrail(V){return this.stateChanges(V).pipe((0,Me.R)((ne,Fe)=>[...ne,...Fe],[]))}snapshotChanges(V){const ne=Ue(V);return _e(this.query,ne,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(V={}){return ct(this.query,this.afs.schedulers.outsideAngular).pipe((0,ye.U)(Fe=>Fe.payload.docs.map(it=>V.idField?Object.assign({[V.idField]:it.id},it.data()):it.data())),Ne.iC)}get(V){return(0,X.D)(this.query.get(V)).pipe(Ne.iC)}}const ke=new C.OlP("angularfire2.enableFirestorePersistence"),Xe=new C.OlP("angularfire2.firestore.persistenceSettings"),Et=new C.OlP("angularfire2.firestore.settings"),tn=new C.OlP("angularfire2.firestore.use-emulator");function mt(pe,V=(ne=>ne)){return{query:V(pe),ref:pe}}let Pt=(()=>{class pe{constructor(ne,Fe,it,Wt,Ut,Mn,Fn,Ar,Mr,Pi,Hi,ei,Lr,Zt,zn,Tn,In){this.schedulers=Fn;const Dn=(0,nt.on)(ne,Mn,Fe),Xn=Mr;Pi&&xr(Dn,Mn,Hi,Lr,Zt,zn,ei,Tn),[this.firestore,this.persistenceEnabled$]=(0,nt.cc)(`${Dn.name}.firestore`,"AngularFirestore",Dn.name,()=>{const Zn=Mn.runOutsideAngular(()=>Dn.firestore());if(Wt&&Zn.settings(Wt),Xn&&Zn.useEmulator(...Xn),it&&!(0,yt.PM)(Ut)){const fe=()=>{try{return(0,X.D)(Zn.enablePersistence(Ar||void 0).then(()=>!0,()=>!1))}catch(te){return typeof console<"u"&&console.warn(te),(0,Se.of)(!1)}};return[Zn,Mn.runOutsideAngular(fe)]}return[Zn,(0,Se.of)(!1)]},[Wt,Xn,it])}collection(ne,Fe){let it;it="string"==typeof ne?this.firestore.collection(ne):ne;const{ref:Wt,query:Ut}=mt(it,Fe),Mn=this.schedulers.ngZone.run(()=>Wt);return new me(Mn,Ut,this)}collectionGroup(ne,Fe){const it=Fe||(Ut=>Ut),Wt=this.firestore.collectionGroup(ne);return new ue(it(Wt),this)}doc(ne){let Fe;Fe="string"==typeof ne?this.firestore.doc(ne):ne;const it=this.schedulers.ngZone.run(()=>Fe);return new Ee(it,this)}createId(){return this.firestore.collection("_").doc().id}}return pe.\u0275fac=function(ne){return new(ne||pe)(C.LFG(nt.Dh),C.LFG(nt.xv,8),C.LFG(ke,8),C.LFG(Et,8),C.LFG(C.Lbi),C.LFG(C.R0b),C.LFG(Ne.HU),C.LFG(Xe,8),C.LFG(tn,8),C.LFG(Jn,8),C.LFG(Wr,8),C.LFG(Nn,8),C.LFG(qr,8),C.LFG(Bn,8),C.LFG(jn,8),C.LFG(Hn,8),C.LFG(Er.nm,8))},pe.\u0275prov=C.Yz7({token:pe,factory:pe.\u0275fac,providedIn:"any"}),pe})()},2011:(mn,ot,j)=>{j.d(ot,{Dh:()=>be,GT:()=>Ne,cc:()=>Ye,hO:()=>tt,on:()=>de,pX:()=>Se,xv:()=>Ze});var C=j(4650),p=j(9260),K=j(2432);mn=j.hmd(mn);const X=["ngOnDestroy"],Se=(yt,ft,Rt,Te={})=>new Proxy(yt,{get:(Je,vt)=>Rt.runOutsideAngular(()=>{var $t;if(yt[vt])return!(null===($t=Te?.spy)||void 0===$t)&&$t.get&&Te.spy.get(vt,yt[vt]),yt[vt];if(X.indexOf(vt)>-1)return()=>{};const wt=ft.toPromise().then(je=>{const xt=je&&je[vt];return"function"==typeof xt?xt.bind(je):xt&&xt.then?xt.then(ln=>Rt.run(()=>ln)):Rt.run(()=>xt)});return new Proxy(()=>{},{get:(je,xt)=>wt[xt],apply:(je,xt,ln)=>wt.then(jt=>{var Kt;const qt=jt&&jt(...ln);return!(null===(Kt=Te?.spy)||void 0===Kt)&&Kt.apply&&Te.spy.apply(vt,ln,qt),qt})})})}),Ne=(yt,ft)=>{ft.forEach(Rt=>{Object.getOwnPropertyNames(Rt.prototype||Rt).forEach(Te=>{Object.defineProperty(yt.prototype,Te,Object.getOwnPropertyDescriptor(Rt.prototype||Rt,Te))})})};class $e{constructor(ft){return ft}}const be=new C.OlP("angularfire2.app.options"),Ze=new C.OlP("angularfire2.app.name");function de(yt,ft,Rt){const Je="object"==typeof Rt&&Rt||{};Je.name=Je.name||"string"==typeof Rt&&Rt||"[DEFAULT]";const $t=p.Z.apps.filter(wt=>wt&&wt.name===Je.name)[0]||ft.runOutsideAngular(()=>p.Z.initializeApp(yt,Je));try{JSON.stringify(yt)!==JSON.stringify($t.options)&&ye("error",`${$t.name} Firebase App already initialized with different options${mn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new $e($t)}const ye=(yt,...ft)=>{(0,C.X6Q)()&&typeof console<"u"&&console[yt](...ft)},Me={provide:$e,useFactory:de,deps:[be,C.R0b,[new C.FiY,Ze]]};let tt=(()=>{class yt{constructor(Rt){p.Z.registerVersion("angularfire",K.q4.full,"core"),p.Z.registerVersion("angularfire",K.q4.full,"app-compat"),p.Z.registerVersion("angular",C.q4F.full,Rt.toString())}static initializeApp(Rt,Te){return{ngModule:yt,providers:[{provide:be,useValue:Rt},{provide:Ze,useValue:Te}]}}}return yt.\u0275fac=function(Rt){return new(Rt||yt)(C.LFG(C.Lbi))},yt.\u0275mod=C.oAB({type:yt}),yt.\u0275inj=C.cJS({providers:[Me]}),yt})();function Ye(yt,ft,Rt,Te,Je){const[,vt,$t]=globalThis.\u0275AngularfireInstanceCache.find(wt=>wt[0]===yt)||[];if(vt)return function Nt(yt,ft){try{return yt.toString()===ft.toString()}catch{return yt===ft}}(Je,$t)||(nt("error",`${ft} was already initialized on the ${Rt} Firebase App with different settings.${Qt?" You may need to reload as Firebase is not HMR aware.":""}`),nt("warn",{is:Je,was:$t})),vt;{const wt=Te();return globalThis.\u0275AngularfireInstanceCache.push([yt,wt,Je]),wt}}const Qt=!!mn.hot,nt=(yt,...ft)=>{(0,C.X6Q)()&&typeof console<"u"&&console[yt](...ft)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},89:(mn,ot,j)=>{j.d(ot,{gg:()=>ln,hJ:()=>Sr,JU:()=>ur,_1:()=>nr,ad:()=>Nn,Cm:()=>Gt});var C=j(2432),p=j(4650),K=j(751),X=j(3692),Se=j(259),Ne=j(2313),$e=j(2810),be=j(9751),Ze=j(4004),de={includeMetadataChanges:!1};function tt(mt,Pt){return void 0===Pt&&(Pt={}),function Me(mt){return function ye(mt,Pt){return void 0===Pt&&(Pt=de),new be.y(function(wn){return{unsubscribe:(0,$e.cf)(mt,Pt,{next:wn.next.bind(wn),error:wn.error.bind(wn),complete:wn.complete.bind(wn)})}})}(mt,{includeMetadataChanges:!0})}(mt).pipe((0,Ze.U)(function(wn){return function Ye(mt,Pt){void 0===Pt&&(Pt={});var wn=mt.data();return!mt.exists()||"object"!=typeof wn||null===wn||Pt.idField&&(wn[Pt.idField]=mt.id),wn}(wn,Pt)}))}class ln{constructor(Pt){return Pt}}const jt="firestore",rt=new p.OlP("angularfire2.firestore-instances");function lt(mt){return(Pt,wn)=>{const pe=Pt.runOutsideAngular(()=>mt(wn));return new ln(pe)}}const bt={provide:class Kt{constructor(){return(0,C.vb)(jt)}},deps:[[new p.FiY,rt]]},Ht={provide:ln,useFactory:function at(mt,Pt){const wn=(0,C.JM)(jt,mt,Pt);return wn&&new ln(wn)},deps:[[new p.FiY,rt],X.Ot]};let It=(()=>{class mt{constructor(){(0,Se.KN)("angularfire",C.q4.full,"fst")}}return mt.\u0275fac=function(wn){return new(wn||mt)},mt.\u0275mod=p.oAB({type:mt}),mt.\u0275inj=p.cJS({providers:[Ht,bt]}),mt})();function Gt(mt,...Pt){return{ngModule:It,providers:[{provide:rt,useFactory:lt(mt),multi:!0,deps:[p.R0b,p.zs3,C.HU,X.z6,[new p.FiY,K.dh],[new p.FiY,Ne.nm],...Pt]}]}}const nr=(0,C.u3)(tt,!0),Sr=(0,C.u3)($e.hJ,!0),ur=(0,C.u3)($e.JU,!0),Nn=(0,C.u3)($e.ad,!0)},2432:(mn,ot,j)=>{j.d(ot,{q4:()=>Br,iC:()=>As,HU:()=>lo,vb:()=>ba,JM:()=>$o,n1:()=>Eu,u3:()=>mr});var C=j(4650),p=j(259),K=j(5861),X=j(6881),Se=j(2090),Ne=j(4859),$e=j(1877);j(4727);const Ze="@firebase/remote-config",Ye=new Se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class lt{constructor(we,Oe,et,Tt){this.client=we,this.storage=Oe,this.storageCache=et,this.logger=Tt}isCachedDataFresh(we,Oe){if(!Oe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const et=Date.now()-Oe,Tt=et<=we;return this.logger.debug(`Config fetch cache check. Cache age millis: ${et}. Cache max age millis (minimumFetchIntervalMillis setting): ${we}. Is cache hit: ${Tt}.`),Tt}fetch(we){var Oe=this;return(0,K.Z)(function*(){const[et,Tt]=yield Promise.all([Oe.storage.getLastSuccessfulFetchTimestampMillis(),Oe.storage.getLastSuccessfulFetchResponse()]);if(Tt&&Oe.isCachedDataFresh(we.cacheMaxAgeMillis,et))return Tt;we.eTag=Tt&&Tt.eTag;const Jt=yield Oe.client.fetch(we),en=[Oe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Jt.status&&en.push(Oe.storage.setLastSuccessfulFetchResponse(Jt)),yield Promise.all(en),Jt})()}}function bt(Ce=navigator){return Ce.languages&&Ce.languages[0]||Ce.language}class Ht{constructor(we,Oe,et,Tt,Jt,en){this.firebaseInstallations=we,this.sdkVersion=Oe,this.namespace=et,this.projectId=Tt,this.apiKey=Jt,this.appId=en}fetch(we){var Oe=this;return(0,K.Z)(function*(){const[et,Tt]=yield Promise.all([Oe.firebaseInstallations.getId(),Oe.firebaseInstallations.getToken()]),en=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Oe.projectId}/namespaces/${Oe.namespace}:fetch?key=${Oe.apiKey}`,Kn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":we.eTag||"*"},Ln={sdk_version:Oe.sdkVersion,app_instance_id:et,app_instance_id_token:Tt,app_id:Oe.appId,language_code:bt()},Un={method:"POST",headers:Kn,body:JSON.stringify(Ln)},cr=fetch(en,Un),Oi=new Promise((rs,yi)=>{we.signal.addEventListener(()=>{const sa=new Error("The operation was aborted.");sa.name="AbortError",yi(sa)})});let ti;try{yield Promise.race([cr,Oi]),ti=yield cr}catch(rs){let yi="fetch-client-network";throw"AbortError"===rs?.name&&(yi="fetch-timeout"),Ye.create(yi,{originalErrorMessage:rs?.message})}let li=ti.status;const Ho=ti.headers.get("ETag")||void 0;let ii,ki;if(200===ti.status){let rs;try{rs=yield ti.json()}catch(yi){throw Ye.create("fetch-client-parse",{originalErrorMessage:yi?.message})}ii=rs.entries,ki=rs.state}if("INSTANCE_STATE_UNSPECIFIED"===ki?li=500:"NO_CHANGE"===ki?li=304:("NO_TEMPLATE"===ki||"EMPTY_CONFIG"===ki)&&(ii={}),304!==li&&200!==li)throw Ye.create("fetch-status",{httpStatus:li});return{status:li,eTag:Ho,config:ii}})()}}class Ct{constructor(we,Oe){this.client=we,this.storage=Oe}fetch(we){var Oe=this;return(0,K.Z)(function*(){const et=(yield Oe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Oe.attemptFetch(we,et)})()}attemptFetch(we,{throttleEndTimeMillis:Oe,backoffCount:et}){var Tt=this;return(0,K.Z)(function*(){yield function It(Ce,we){return new Promise((Oe,et)=>{const Tt=Math.max(we-Date.now(),0),Jt=setTimeout(Oe,Tt);Ce.addEventListener(()=>{clearTimeout(Jt),et(Ye.create("fetch-throttle",{throttleEndTimeMillis:we}))})})}(we.signal,Oe);try{const Jt=yield Tt.client.fetch(we);return yield Tt.storage.deleteThrottleMetadata(),Jt}catch(Jt){if(!function Gt(Ce){if(!(Ce instanceof Se.ZR&&Ce.customData))return!1;const we=Number(Ce.customData.httpStatus);return 429===we||500===we||503===we||504===we}(Jt))throw Jt;const en={throttleEndTimeMillis:Date.now()+(0,Se.$s)(et),backoffCount:et+1};return yield Tt.storage.setThrottleMetadata(en),Tt.attemptFetch(we,en)}})()}}class tr{constructor(we,Oe,et,Tt,Jt){this.app=we,this._client=Oe,this._storageCache=et,this._storage=Tt,this._logger=Jt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _n(Ce,we){const Oe=Ce.target.error||void 0;return Ye.create(we,{originalErrorMessage:Oe&&Oe?.message})}const xn="app_namespace_store";class hr{constructor(we,Oe,et,Tt=function zr(){return new Promise((Ce,we)=>{try{const Oe=indexedDB.open("firebase_remote_config",1);Oe.onerror=et=>{we(_n(et,"storage-open"))},Oe.onsuccess=et=>{Ce(et.target.result)},Oe.onupgradeneeded=et=>{0===et.oldVersion&&et.target.result.createObjectStore(xn,{keyPath:"compositeKey"})}}catch(Oe){we(Ye.create("storage-open",{originalErrorMessage:Oe?.message}))}})}()){this.appId=we,this.appName=Oe,this.namespace=et,this.openDbPromise=Tt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(we){return this.set("last_fetch_status",we)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(we){return this.set("last_successful_fetch_timestamp_millis",we)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(we){return this.set("last_successful_fetch_response",we)}getActiveConfig(){return this.get("active_config")}setActiveConfig(we){return this.set("active_config",we)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(we){return this.set("active_config_etag",we)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(we){return this.set("throttle_metadata",we)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(we){var Oe=this;return(0,K.Z)(function*(){const et=yield Oe.openDbPromise;return new Promise((Tt,Jt)=>{const Kn=et.transaction([xn],"readonly").objectStore(xn),Ln=Oe.createCompositeKey(we);try{const Un=Kn.get(Ln);Un.onerror=cr=>{Jt(_n(cr,"storage-get"))},Un.onsuccess=cr=>{const Oi=cr.target.result;Tt(Oi?Oi.value:void 0)}}catch(Un){Jt(Ye.create("storage-get",{originalErrorMessage:Un?.message}))}})})()}set(we,Oe){var et=this;return(0,K.Z)(function*(){const Tt=yield et.openDbPromise;return new Promise((Jt,en)=>{const Ln=Tt.transaction([xn],"readwrite").objectStore(xn),Un=et.createCompositeKey(we);try{const cr=Ln.put({compositeKey:Un,value:Oe});cr.onerror=Oi=>{en(_n(Oi,"storage-set"))},cr.onsuccess=()=>{Jt()}}catch(cr){en(Ye.create("storage-set",{originalErrorMessage:cr?.message}))}})})()}delete(we){var Oe=this;return(0,K.Z)(function*(){const et=yield Oe.openDbPromise;return new Promise((Tt,Jt)=>{const Kn=et.transaction([xn],"readwrite").objectStore(xn),Ln=Oe.createCompositeKey(we);try{const Un=Kn.delete(Ln);Un.onerror=cr=>{Jt(_n(cr,"storage-delete"))},Un.onsuccess=()=>{Tt()}}catch(Un){Jt(Ye.create("storage-delete",{originalErrorMessage:Un?.message}))}})})()}createCompositeKey(we){return[this.appId,this.appName,this.namespace,we].join()}}class Ur{constructor(we){this.storage=we}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var we=this;return(0,K.Z)(function*(){const Oe=we.storage.getLastFetchStatus(),et=we.storage.getLastSuccessfulFetchTimestampMillis(),Tt=we.storage.getActiveConfig(),Jt=yield Oe;Jt&&(we.lastFetchStatus=Jt);const en=yield et;en&&(we.lastSuccessfulFetchTimestampMillis=en);const Kn=yield Tt;Kn&&(we.activeConfig=Kn)})()}setLastFetchStatus(we){return this.lastFetchStatus=we,this.storage.setLastFetchStatus(we)}setLastSuccessfulFetchTimestampMillis(we){return this.lastSuccessfulFetchTimestampMillis=we,this.storage.setLastSuccessfulFetchTimestampMillis(we)}setActiveConfig(we){return this.activeConfig=we,this.storage.setActiveConfig(we)}}function ui(){return gr.apply(this,arguments)}function gr(){return(gr=(0,K.Z)(function*(){if(!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch{return!1}})).apply(this,arguments)}!function pn(){(0,X._registerComponent)(new Ne.wA("remote-config",function Ce(we,{instanceIdentifier:Oe}){const et=we.getProvider("app").getImmediate(),Tt=we.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ye.create("registration-window");if(!(0,Se.hl)())throw Ye.create("indexed-db-unavailable");const{projectId:Jt,apiKey:en,appId:Kn}=et.options;if(!Jt)throw Ye.create("registration-project-id");if(!en)throw Ye.create("registration-api-key");if(!Kn)throw Ye.create("registration-app-id");const Ln=new hr(Kn,et.name,Oe=Oe||"firebase"),Un=new Ur(Ln),cr=new $e.Yd(Ze);cr.logLevel=$e.in.ERROR;const Oi=new Ht(Tt,X.SDK_VERSION,Oe,Jt,en,Kn),ti=new Ct(Oi,Ln),li=new lt(ti,Ln,Un,cr),Ho=new tr(et,li,Un,Ln,cr);return function $t(Ce){const we=(0,Se.m9)(Ce);we._initializePromise||(we._initializePromise=we._storageCache.loadFromStorage().then(()=>{we._isInitializationComplete=!0}))}(Ho),Ho},"PUBLIC").setMultipleInstances(!0)),(0,X.registerVersion)(Ze,"0.4.4"),(0,X.registerVersion)(Ze,"0.4.4","esm2017")}();var cn=j(2138);const Qn="analytics",Kr="firebase_id",ur="origin",Fr=6e4,Gr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",an="https://www.googletagmanager.com/gtag/js",dn=new $e.Yd("@firebase/analytics"),Yt=new Se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function lr(Ce){if(!Ce.startsWith(an)){const we=Yt.create("invalid-gtag-resource",{gtagURL:Ce});return dn.warn(we.message),""}return Ce}function yr(Ce){return Promise.all(Ce.map(we=>we.catch(Oe=>Oe)))}function Nn(){return(Nn=(0,K.Z)(function*(Ce,we,Oe,et,Tt,Jt){const en=et[Tt];try{if(en)yield we[en];else{const Ln=(yield yr(Oe)).find(Un=>Un.measurementId===Tt);Ln&&(yield we[Ln.appId])}}catch(Kn){dn.error(Kn)}Ce("config",Tt,Jt)})).apply(this,arguments)}function Bn(){return(Bn=(0,K.Z)(function*(Ce,we,Oe,et,Tt){try{let Jt=[];if(Tt&&Tt.send_to){let en=Tt.send_to;Array.isArray(en)||(en=[en]);const Kn=yield yr(Oe);for(const Ln of en){const Un=Kn.find(Oi=>Oi.measurementId===Ln),cr=Un&&we[Un.appId];if(!cr){Jt=[];break}Jt.push(cr)}}0===Jt.length&&(Jt=Object.values(we)),yield Promise.all(Jt),Ce("event",et,Tt||{})}catch(Jt){dn.error(Jt)}})).apply(this,arguments)}const Jn=30,Pe=new class De{constructor(we={},Oe=1e3){this.throttleMetadata=we,this.intervalMillis=Oe}getThrottleMetadata(we){return this.throttleMetadata[we]}setThrottleMetadata(we,Oe){this.throttleMetadata[we]=Oe}deleteThrottleMetadata(we){delete this.throttleMetadata[we]}};function gt(Ce){return new Headers({Accept:"application/json","x-goog-api-key":Ce})}function ge(){return(ge=(0,K.Z)(function*(Ce){var we;const{appId:Oe,apiKey:et}=Ce,Tt={method:"GET",headers:gt(et)},Jt=Gr.replace("{app-id}",Oe),en=yield fetch(Jt,Tt);if(200!==en.status&&304!==en.status){let Kn="";try{const Ln=yield en.json();null!==(we=Ln.error)&&void 0!==we&&we.message&&(Kn=Ln.error.message)}catch{}throw Yt.create("config-fetch-failed",{httpStatus:en.status,responseMessage:Kn})}return en.json()})).apply(this,arguments)}function ee(){return(ee=(0,K.Z)(function*(Ce,we=Pe,Oe){const{appId:et,apiKey:Tt,measurementId:Jt}=Ce.options;if(!et)throw Yt.create("no-app-id");if(!Tt){if(Jt)return{measurementId:Jt,appId:et};throw Yt.create("no-api-key")}const en=we.getThrottleMetadata(et)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Kn=new Ee;return setTimeout((0,K.Z)(function*(){Kn.abort()}),void 0!==Oe?Oe:Fr),re({appId:et,apiKey:Tt,measurementId:Jt},en,Kn,we)})).apply(this,arguments)}function re(Ce,we,Oe){return Y.apply(this,arguments)}function Y(){return Y=(0,K.Z)(function*(Ce,{throttleEndTimeMillis:we,backoffCount:Oe},et,Tt=Pe){var Jt;const{appId:en,measurementId:Kn}=Ce;try{yield function Ue(Ce,we){return new Promise((Oe,et)=>{const Tt=Math.max(we-Date.now(),0),Jt=setTimeout(Oe,Tt);Ce.addEventListener(()=>{clearTimeout(Jt),et(Yt.create("fetch-throttle",{throttleEndTimeMillis:we}))})})}(et,we)}catch(Ln){if(Kn)return dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Kn} provided in the "measurementId" field in the local Firebase config. [${Ln?.message}]`),{appId:en,measurementId:Kn};throw Ln}try{const Ln=yield function ct(Ce){return ge.apply(this,arguments)}(Ce);return Tt.deleteThrottleMetadata(en),Ln}catch(Ln){const Un=Ln;if(!function me(Ce){if(!(Ce instanceof Se.ZR&&Ce.customData))return!1;const we=Number(Ce.customData.httpStatus);return 429===we||500===we||503===we||504===we}(Un)){if(Tt.deleteThrottleMetadata(en),Kn)return dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Kn} provided in the "measurementId" field in the local Firebase config. [${Un?.message}]`),{appId:en,measurementId:Kn};throw Ln}const cr=503===Number(null===(Jt=Un?.customData)||void 0===Jt?void 0:Jt.httpStatus)?(0,Se.$s)(Oe,Tt.intervalMillis,Jn):(0,Se.$s)(Oe,Tt.intervalMillis),Oi={throttleEndTimeMillis:Date.now()+cr,backoffCount:Oe+1};return Tt.setThrottleMetadata(en,Oi),dn.debug(`Calling attemptFetch again in ${cr} millis`),re(Ce,Oi,et,Tt)}}),Y.apply(this,arguments)}class Ee{constructor(){this.listeners=[]}addEventListener(we){this.listeners.push(we)}abort(){this.listeners.forEach(we=>we())}}let ue,Wt;function Xe(){return(Xe=(0,K.Z)(function*(Ce,we,Oe,et,Tt){if(Tt&&Tt.global)Ce("event",Oe,et);else{const Jt=yield we;Ce("event",Oe,Object.assign(Object.assign({},et),{send_to:Jt}))}})).apply(this,arguments)}function Ar(){return(Ar=(0,K.Z)(function*(){if(!(0,Se.hl)())return dn.warn(Yt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Se.eu)()}catch(Ce){return dn.warn(Yt.create("indexeddb-unavailable",{errorInfo:Ce?.toString()}).message),!1}return!0})).apply(this,arguments)}function Pi(){return Pi=(0,K.Z)(function*(Ce,we,Oe,et,Tt,Jt,en){var Kn;const Ln=function _e(Ce){return ee.apply(this,arguments)}(Ce);Ln.then(li=>{Oe[li.measurementId]=li.appId,Ce.options.measurementId&&li.measurementId!==Ce.options.measurementId&&dn.warn(`The measurement ID in the local Firebase config (${Ce.options.measurementId}) does not match the measurement ID fetched from the server (${li.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(li=>dn.error(li)),we.push(Ln);const Un=function Fn(){return Ar.apply(this,arguments)}().then(li=>{if(li)return et.getId()}),[cr,Oi]=yield Promise.all([Ln,Un]);(function xr(Ce){const we=window.document.getElementsByTagName("script");for(const Oe of Object.values(we))if(Oe.src&&Oe.src.includes(an)&&Oe.src.includes(Ce))return Oe;return null})(Jt)||function Vr(Ce,we){const Oe=function Er(Ce,we){let Oe;return window.trustedTypes&&(Oe=window.trustedTypes.createPolicy(Ce,we)),Oe}("firebase-js-sdk-policy",{createScriptURL:lr}),et=document.createElement("script"),Tt=`${an}?l=${Ce}&id=${we}`;et.src=Oe?Oe?.createScriptURL(Tt):Tt,et.async=!0,document.head.appendChild(et)}(Jt,cr.measurementId),Wt&&(Tt("consent","default",Wt),function Ut(Ce){Wt=Ce}(void 0)),Tt("js",new Date);const ti=null!==(Kn=en?.config)&&void 0!==Kn?Kn:{};return ti[ur]="firebase",ti.update=!0,null!=Oi&&(ti[Kr]=Oi),Tt("config",cr.measurementId,ti),ue&&(Tt("set",ue),function Mn(Ce){ue=Ce}(void 0)),cr.measurementId}),Pi.apply(this,arguments)}class Hi{constructor(we){this.app=we}_delete(){return delete ei[this.app.options.appId],Promise.resolve()}}let ei={},Lr=[];const Zt={};let In,Dn,zn="dataLayer",Tn="gtag",Xn=!1;function te(Ce,we,Oe){!function fe(){const Ce=[];if((0,Se.ru)()&&Ce.push("This is a browser extension environment."),(0,Se.zI)()||Ce.push("Cookies are not available."),Ce.length>0){const we=Ce.map((et,Tt)=>`(${Tt+1}) ${et}`).join(" "),Oe=Yt.create("invalid-analytics-context",{errorInfo:we});dn.warn(Oe.message)}}();const et=Ce.options.appId;if(!et)throw Yt.create("no-app-id");if(!Ce.options.apiKey){if(!Ce.options.measurementId)throw Yt.create("no-api-key");dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${Ce.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ei[et])throw Yt.create("already-exists",{id:et});if(!Xn){!function ri(Ce){let we=[];Array.isArray(window[Ce])?we=window[Ce]:window[Ce]=we}(zn);const{wrappedGtag:Jt,gtagCore:en}=function Hn(Ce,we,Oe,et,Tt){let Jt=function(...en){window[et].push(arguments)};return window[Tt]&&"function"==typeof window[Tt]&&(Jt=window[Tt]),window[Tt]=function jn(Ce,we,Oe,et){function Jt(){return Jt=(0,K.Z)(function*(en,...Kn){try{if("event"===en){const[Ln,Un]=Kn;yield function qr(Ce,we,Oe,et,Tt){return Bn.apply(this,arguments)}(Ce,we,Oe,Ln,Un)}else if("config"===en){const[Ln,Un]=Kn;yield function Wr(Ce,we,Oe,et,Tt,Jt){return Nn.apply(this,arguments)}(Ce,we,Oe,et,Ln,Un)}else if("consent"===en){const[Ln]=Kn;Ce("consent","update",Ln)}else if("get"===en){const[Ln,Un,cr]=Kn;Ce("get",Ln,Un,cr)}else if("set"===en){const[Ln]=Kn;Ce("set",Ln)}else Ce(en,...Kn)}catch(Ln){dn.error(Ln)}}),Jt.apply(this,arguments)}return function Tt(en){return Jt.apply(this,arguments)}}(Jt,Ce,we,Oe),{gtagCore:Jt,wrappedGtag:window[Tt]}}(ei,Lr,Zt,zn,Tn);Dn=Jt,In=en,Xn=!0}return ei[et]=function Mr(Ce,we,Oe,et,Tt,Jt,en){return Pi.apply(this,arguments)}(Ce,Lr,Zt,we,In,zn,Oe),new Hi(Ce)}function He(){return Z.apply(this,arguments)}function Z(){return(Z=(0,K.Z)(function*(){if((0,Se.ru)()||!(0,Se.zI)()||!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch{return!1}})).apply(this,arguments)}const Ni="@firebase/analytics";!function Ia(){(0,X._registerComponent)(new Ne.wA(Qn,(we,{options:Oe})=>te(we.getProvider("app").getImmediate(),we.getProvider("installations-internal").getImmediate(),Oe),"PUBLIC")),(0,X._registerComponent)(new Ne.wA("analytics-internal",function Ce(we){try{const Oe=we.getProvider(Qn).getImmediate();return{logEvent:(et,Tt,Jt)=>function Ti(Ce,we,Oe,et){Ce=(0,Se.m9)(Ce),function ke(Ce,we,Oe,et,Tt){return Xe.apply(this,arguments)}(Dn,ei[Ce.app.options.appId],we,Oe,et).catch(Tt=>dn.error(Tt))}(Oe,et,Tt,Jt)}}catch(Oe){throw Yt.create("interop-component-reg-failed",{reason:Oe})}},"PRIVATE")),(0,X.registerVersion)(Ni,"0.10.0"),(0,X.registerVersion)(Ni,"0.10.0","esm2017")}();var Js=j(4408),ps=j(7565);const cl=new class zi extends ps.v{}(class uo extends Js.o{constructor(we,Oe){super(we,Oe),this.scheduler=we,this.work=Oe}schedule(we,Oe=0){return Oe>0?super.schedule(we,Oe):(this.delay=Oe,this.state=we,this.scheduler.flush(this),this)}execute(we,Oe){return Oe>0||this.closed?super.execute(we,Oe):this._execute(we,Oe)}requestAsyncId(we,Oe,et=0){return null!=et&&et>0||null==et&&this.delay>0?super.requestAsyncId(we,Oe,et):(we.flush(this),0)}});var sr=j(4986),Hs=j(9751),bo=j(8505),gs=j(9468),Yr=j(5363);const Br=new C.GfV("7.5.0"),Tr="__angularfire_symbol__analyticsIsSupportedValue",To="__angularfire_symbol__analyticsIsSupported",ir="__angularfire_symbol__remoteConfigIsSupportedValue",ys="__angularfire_symbol__remoteConfigIsSupported",cs="__angularfire_symbol__messagingIsSupportedValue",Xs="__angularfire_symbol__messagingIsSupported";globalThis[To]||(globalThis[To]=He().then(Ce=>globalThis[Tr]=Ce).catch(()=>globalThis[Tr]=!1)),globalThis[Xs]||(globalThis[Xs]=(0,cn.Gb)().then(Ce=>globalThis[cs]=Ce).catch(()=>globalThis[cs]=!1)),globalThis[ys]||(globalThis[ys]=ui().then(Ce=>globalThis[ir]=Ce).catch(()=>globalThis[ir]=!1));const Eu={async:()=>globalThis[Xs],sync:()=>{const Ce=globalThis[cs];if(void 0===Ce)throw new Error((Ce=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${Ce} in the constructor, first ensure that ${Ce} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${Ce})\`.`)("Messaging"));return Ce}};function $o(Ce,we,Oe){if(we){if(1===we.length)return we[0];const Jt=we.filter(en=>en.app===Oe);if(1===Jt.length)return Jt[0]}return Oe.container.getProvider(Ce).getImmediate({optional:!0})}const ba=(Ce,we)=>{const Oe=we?[we]:(0,p.C6)(),et=[];return Oe.forEach(Tt=>{Tt.container.getProvider(Ce).instances.forEach(en=>{et.includes(en)||et.push(en)})}),et};function ts(){}class zs{constructor(we,Oe=cl){this.zone=we,this.delegate=Oe}now(){return this.delegate.now()}schedule(we,Oe,et){const Tt=this.zone;return this.delegate.schedule(function(en){Tt.runGuarded(()=>{we.apply(this,[en])})},Oe,et)}}class tu{constructor(we){this.zone=we,this.task=null}call(we,Oe){const et=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ts,{},ts,ts)),Oe.pipe((0,bo.b)({next:et,complete:et,error:et})).subscribe(we).add(et)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let lo=(()=>{class Ce{constructor(Oe){this.ngZone=Oe,this.outsideAngular=Oe.runOutsideAngular(()=>new zs(Zone.current)),this.insideAngular=Oe.run(()=>new zs(Zone.current,sr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Ce.\u0275fac=function(Oe){return new(Oe||Ce)(C.LFG(C.R0b))},Ce.\u0275prov=C.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})();function Zr(){const Ce=globalThis.\u0275AngularFireScheduler;if(!Ce)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Ce}function Yi(Ce){return Zr().ngZone.run(()=>Ce())}function As(Ce){return Zr(),function _i(Ce){return function(Oe){return(Oe=Oe.lift(new tu(Ce.ngZone))).pipe((0,gs.R)(Ce.outsideAngular),(0,Yr.Q)(Ce.insideAngular))}}(Zr())(Ce)}const So=(Ce,we)=>function(){const et=arguments;return we&&setTimeout(()=>{"scheduled"===we.state&&we.invoke()},10),Yi(()=>Ce.apply(void 0,et))},mr=(Ce,we)=>function(){let Oe;const et=arguments;for(let Jt=0;Jt<arguments.length;Jt++)"function"==typeof et[Jt]&&(we&&(Oe||(Oe=Yi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ts,{},ts,ts)))),et[Jt]=So(et[Jt],Oe));const Tt=function co(Ce){return Zr().ngZone.runOutsideAngular(()=>Ce())}(()=>Ce.apply(this,et));if(!we){if(Tt instanceof Hs.y){const Jt=Zr();return Tt.pipe((0,gs.R)(Jt.outsideAngular),(0,Yr.Q)(Jt.insideAngular))}return Yi(()=>Tt)}return Tt instanceof Hs.y?Tt.pipe(As):Tt instanceof Promise?Yi(()=>new Promise((Jt,en)=>Tt.then(Kn=>Yi(()=>Jt(Kn)),Kn=>Yi(()=>en(Kn))))):"function"==typeof Tt&&Oe?function(){return setTimeout(()=>{Oe&&"scheduled"===Oe.state&&Oe.invoke()},10),Tt.apply(this,arguments)}:Yi(()=>Tt)}},8502:(mn,ot,j)=>{j.d(ot,{$:()=>Wn,A:()=>ye,B:()=>Ft,D:()=>Ye,I:()=>fe,J:()=>Z,L:()=>ir,N:()=>gt,P:()=>D,Q:()=>co,R:()=>ma,U:()=>As,V:()=>_i,W:()=>So,X:()=>ns,Y:()=>Oe,Z:()=>et,_:()=>Ln,a:()=>mo,a0:()=>Ao,a1:()=>aa,a2:()=>zo,a3:()=>Va,a4:()=>vi,a5:()=>ua,a6:()=>Ms,a7:()=>Vi,a8:()=>Wo,a9:()=>Rs,aA:()=>je,aB:()=>Ya,aC:()=>De,aD:()=>ct,aE:()=>Su,aF:()=>ws,aG:()=>cu,aH:()=>In,aL:()=>Ta,aO:()=>Ce,aa:()=>Uu,ab:()=>Mi,ac:()=>vs,ad:()=>Wi,ae:()=>rr,af:()=>ca,ai:()=>ks,aj:()=>to,ak:()=>gi,an:()=>li,ao:()=>fa,aq:()=>Dr,ar:()=>On,as:()=>ln,at:()=>ke,au:()=>me,av:()=>Te,aw:()=>Ru,ax:()=>Xl,ay:()=>Xe,az:()=>Je,b:()=>Bu,c:()=>Cn,d:()=>Fo,e:()=>Jr,f:()=>qa,g:()=>Za,h:()=>Tu,i:()=>_o,j:()=>Du,k:()=>Fl,l:()=>uu,m:()=>Ju,o:()=>yl,p:()=>be,r:()=>bu,s:()=>Ji,u:()=>yo,x:()=>ie});var C=j(5861),p=j(2090),K=j(6881),X=j(655),Se=j(1877),Ne=j(4859);const be={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ye={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ye=function Me(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Nt=function tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Qt=new p.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yt=new Se.Yd("@firebase/auth");function Rt(S,...g){yt.logLevel<=Se.in.ERROR&&yt.error(`Auth (${K.SDK_VERSION}): ${S}`,...g)}function Te(S,...g){throw wt(S,...g)}function Je(S,...g){return wt(S,...g)}function vt(S,g,I){const R=Object.assign(Object.assign({},Nt()),{[g]:I});return new p.LL("auth","Firebase",R).create(g,{appName:S.name})}function $t(S,g,I){if(!(g instanceof I))throw I.name!==g.constructor.name&&Te(S,"argument-error"),vt(S,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wt(S,...g){if("string"!=typeof S){const I=g[0],R=[...g.slice(1)];return R[0]&&(R[0].appName=S.name),S._errorFactory.create(I,...R)}return Qt.create(S,...g)}function je(S,g,...I){if(!S)throw wt(g,...I)}function xt(S){const g="INTERNAL ASSERTION FAILED: "+S;throw Rt(g),new Error(g)}function ln(S,g){S||xt(g)}function jt(){var S;return typeof self<"u"&&(null===(S=self.location)||void 0===S?void 0:S.href)||""}function Kt(){return"http:"===qt()||"https:"===qt()}function qt(){var S;return typeof self<"u"&&(null===(S=self.location)||void 0===S?void 0:S.protocol)||null}class lt{constructor(g,I){this.shortDelay=g,this.longDelay=I,ln(I>g,"Short delay should be less than long delay!"),this.isMobile=(0,p.uI)()||(0,p.b$)()}get(){return function rt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kt()||(0,p.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bt(S,g){ln(S.emulator,"Emulator should always be set here");const{url:I}=S.emulator;return g?`${I}${g.startsWith("/")?g.slice(1):g}`:I}class Ht{static initialize(g,I,R){this.fetchImpl=g,I&&(this.headersImpl=I),R&&(this.responseImpl=R)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const It={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Gt=new lt(3e4,6e4);function Ct(S,g){return S.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:S.tenantId}):g}function rn(S,g,I,R){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,C.Z)(function*(S,g,I,R,q={}){return tr(S,q,(0,C.Z)(function*(){let oe={},Ge={};R&&("GET"===g?Ge=R:oe={body:JSON.stringify(R)});const dt=(0,p.xO)(Object.assign({key:S.config.apiKey},Ge)).slice(1),on=yield S._getAdditionalHeaders();return on["Content-Type"]="application/json",S.languageCode&&(on["X-Firebase-Locale"]=S.languageCode),Ht.fetch()(pr(S,S.config.apiHost,I,dt),Object.assign({method:g,headers:on,referrerPolicy:"no-referrer"},oe))}))})).apply(this,arguments)}function tr(S,g,I){return _n.apply(this,arguments)}function _n(){return(_n=(0,C.Z)(function*(S,g,I){S._canInitEmulator=!1;const R=Object.assign(Object.assign({},It),g);try{const q=new zr(S),oe=yield Promise.race([I(),q.promise]);q.clearNetworkTimeout();const Ge=yield oe.json();if("needConfirmation"in Ge)throw hr(S,"account-exists-with-different-credential",Ge);if(oe.ok&&!("errorMessage"in Ge))return Ge;{const dt=oe.ok?Ge.errorMessage:Ge.error.message,[on,Pn]=dt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===on)throw hr(S,"credential-already-in-use",Ge);if("EMAIL_EXISTS"===on)throw hr(S,"email-already-in-use",Ge);if("USER_DISABLED"===on)throw hr(S,"user-disabled",Ge);const qn=R[on]||on.toLowerCase().replace(/[_\s]+/g,"-");if(Pn)throw vt(S,qn,Pn);Te(S,qn)}}catch(q){if(q instanceof p.ZR)throw q;Te(S,"network-request-failed",{message:String(q)})}})).apply(this,arguments)}function xn(S,g,I,R){return nr.apply(this,arguments)}function nr(){return(nr=(0,C.Z)(function*(S,g,I,R,q={}){const oe=yield rn(S,g,I,R,q);return"mfaPendingCredential"in oe&&Te(S,"multi-factor-auth-required",{_serverResponse:oe}),oe})).apply(this,arguments)}function pr(S,g,I,R){const q=`${g}${I}?${R}`;return S.config.emulator?bt(S.config,q):`${S.config.apiScheme}://${q}`}class zr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((I,R)=>{this.timer=setTimeout(()=>R(Je(this.auth,"network-request-failed")),Gt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hr(S,g,I){const R={appName:S.name};I.email&&(R.email=I.email),I.phoneNumber&&(R.phoneNumber=I.phoneNumber);const q=Je(S,g,R);return q.customData._tokenResponse=I,q}function pn(){return(pn=(0,C.Z)(function*(S,g){return rn(S,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Sr(){return(Sr=(0,C.Z)(function*(S,g){return rn(S,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function gr(){return(gr=(0,C.Z)(function*(S,g){return rn(S,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function cn(S){if(S)try{const g=new Date(Number(S));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function ur(){return(ur=(0,C.Z)(function*(S,g=!1){const I=(0,p.m9)(S),R=yield I.getIdToken(g),q=Gr(R);je(q&&q.exp&&q.auth_time&&q.iat,I.auth,"internal-error");const oe="object"==typeof q.firebase?q.firebase:void 0,Ge=oe?.sign_in_provider;return{claims:q,token:R,authTime:cn(Fr(q.auth_time)),issuedAtTime:cn(Fr(q.iat)),expirationTime:cn(Fr(q.exp)),signInProvider:Ge||null,signInSecondFactor:oe?.sign_in_second_factor||null}})).apply(this,arguments)}function Fr(S){return 1e3*Number(S)}function Gr(S){const[g,I,R]=S.split(".");if(void 0===g||void 0===I||void 0===R)return Rt("JWT malformed, contained fewer than 3 sections"),null;try{const q=(0,p.tV)(I);return q?JSON.parse(q):(Rt("Failed to decode base64 JWT payload"),null)}catch(q){return Rt("Caught error parsing JWT payload as JSON",q?.toString()),null}}function dn(S,g){return hn.apply(this,arguments)}function hn(){return(hn=(0,C.Z)(function*(S,g,I=!1){if(I)return g;try{return yield g}catch(R){throw R instanceof p.ZR&&function Yt({code:S}){return"auth/user-disabled"===S||"auth/user-token-expired"===S}(R)&&S.auth.currentUser===S&&(yield S.auth.signOut()),R}})).apply(this,arguments)}class lr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var I;if(g){const R=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),R}{this.errorBackoff=3e4;const q=(null!==(I=this.user.stsTokenManager.expirationTime)&&void 0!==I?I:0)-Date.now()-3e5;return Math.max(0,q)}}schedule(g=!1){var I=this;if(!this.isRunning)return;const R=this.getInterval(g);this.timerId=setTimeout((0,C.Z)(function*(){yield I.iteration()}),R)}iteration(){var g=this;return(0,C.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===I?.code&&g.schedule(!0))}g.schedule()})()}}class yr{constructor(g,I){this.createdAt=g,this.lastLoginAt=I,this._initializeTime()}_initializeTime(){this.lastSignInTime=cn(this.lastLoginAt),this.creationTime=cn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Er(S){return Vr.apply(this,arguments)}function Vr(){return Vr=(0,C.Z)(function*(S){var g;const I=S.auth,R=yield S.getIdToken(),q=yield dn(S,function ui(S,g){return gr.apply(this,arguments)}(I,{idToken:R}));je(q?.users.length,I,"internal-error");const oe=q.users[0];S._notifyReloadListener(oe);const Ge=null!==(g=oe.providerUserInfo)&&void 0!==g&&g.length?function qr(S){return S.map(g=>{var{providerId:I}=g,R=(0,X._T)(g,["providerId"]);return{providerId:I,uid:R.rawId||"",displayName:R.displayName||null,email:R.email||null,phoneNumber:R.phoneNumber||null,photoURL:R.photoUrl||null}})}(oe.providerUserInfo):[],dt=function Nn(S,g){return[...S.filter(R=>!g.some(q=>q.providerId===R.providerId)),...g]}(S.providerData,Ge),qn=!!S.isAnonymous&&!(S.email&&oe.passwordHash||dt?.length),Cr={uid:oe.localId,displayName:oe.displayName||null,photoURL:oe.photoUrl||null,email:oe.email||null,emailVerified:oe.emailVerified||!1,phoneNumber:oe.phoneNumber||null,tenantId:oe.tenantId||null,providerData:dt,metadata:new yr(oe.createdAt,oe.lastLoginAt),isAnonymous:qn};Object.assign(S,Cr)}),Vr.apply(this,arguments)}function Wr(){return(Wr=(0,C.Z)(function*(S){const g=(0,p.m9)(S);yield Er(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function jn(){return(jn=(0,C.Z)(function*(S,g){const I=yield tr(S,{},(0,C.Z)(function*(){const R=(0,p.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:q,apiKey:oe}=S.config,Ge=pr(S,q,"/v1/token",`key=${oe}`),dt=yield S._getAdditionalHeaders();return dt["Content-Type"]="application/x-www-form-urlencoded",Ht.fetch()(Ge,{method:"POST",headers:dt,body:R})}));return{accessToken:I.access_token,expiresIn:I.expires_in,refreshToken:I.refresh_token}})).apply(this,arguments)}class Hn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){je(g.idToken,"internal-error"),je(typeof g.idToken<"u","internal-error"),je(typeof g.refreshToken<"u","internal-error");const I="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function an(S){const g=Gr(S);return je(g,"internal-error"),je(typeof g.exp<"u","internal-error"),je(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,I)}getToken(g,I=!1){var R=this;return(0,C.Z)(function*(){return je(!R.accessToken||R.refreshToken,g,"user-token-expired"),I||!R.accessToken||R.isExpired?R.refreshToken?(yield R.refresh(g,R.refreshToken),R.accessToken):null:R.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,I){var R=this;return(0,C.Z)(function*(){const{accessToken:q,refreshToken:oe,expiresIn:Ge}=yield function Bn(S,g){return jn.apply(this,arguments)}(g,I);R.updateTokensAndExpiration(q,oe,Number(Ge))})()}updateTokensAndExpiration(g,I,R){this.refreshToken=I||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*R}static fromJSON(g,I){const{refreshToken:R,accessToken:q,expirationTime:oe}=I,Ge=new Hn;return R&&(je("string"==typeof R,"internal-error",{appName:g}),Ge.refreshToken=R),q&&(je("string"==typeof q,"internal-error",{appName:g}),Ge.accessToken=q),oe&&(je("number"==typeof oe,"internal-error",{appName:g}),Ge.expirationTime=oe),Ge}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Hn,this.toJSON())}_performRefresh(){return xt("not implemented")}}function xr(S,g){je("string"==typeof S||typeof S>"u","internal-error",{appName:g})}class Jn{constructor(g){var{uid:I,auth:R,stsTokenManager:q}=g,oe=(0,X._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=I,this.auth=R,this.stsTokenManager=q,this.accessToken=q.accessToken,this.displayName=oe.displayName||null,this.email=oe.email||null,this.emailVerified=oe.emailVerified||!1,this.phoneNumber=oe.phoneNumber||null,this.photoURL=oe.photoURL||null,this.isAnonymous=oe.isAnonymous||!1,this.tenantId=oe.tenantId||null,this.providerData=oe.providerData?[...oe.providerData]:[],this.metadata=new yr(oe.createdAt||void 0,oe.lastLoginAt||void 0)}getIdToken(g){var I=this;return(0,C.Z)(function*(){const R=yield dn(I,I.stsTokenManager.getToken(I.auth,g));return je(R,I.auth,"internal-error"),I.accessToken!==R&&(I.accessToken=R,yield I.auth._persistUserIfCurrent(I),I.auth._notifyListenersIfCurrent(I)),R})()}getIdTokenResult(g){return function Kr(S){return ur.apply(this,arguments)}(this,g)}reload(){return function ri(S){return Wr.apply(this,arguments)}(this)}_assign(g){this!==g&&(je(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(I=>Object.assign({},I)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const I=new Jn(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return I.metadata._copy(this.metadata),I}_onReload(g){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,I=!1){var R=this;return(0,C.Z)(function*(){let q=!1;g.idToken&&g.idToken!==R.stsTokenManager.accessToken&&(R.stsTokenManager.updateFromServerResponse(g),q=!0),I&&(yield Er(R)),yield R.auth._persistUserIfCurrent(R),q&&R.auth._notifyListenersIfCurrent(R)})()}delete(){var g=this;return(0,C.Z)(function*(){const I=yield g.getIdToken();return yield dn(g,function Ur(S,g){return pn.apply(this,arguments)}(g.auth,{idToken:I})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,I){var R,q,oe,Ge,dt,on,Pn,qn;const Cr=null!==(R=I.displayName)&&void 0!==R?R:void 0,fs=null!==(q=I.email)&&void 0!==q?q:void 0,va=null!==(oe=I.phoneNumber)&&void 0!==oe?oe:void 0,_c=null!==(Ge=I.photoURL)&&void 0!==Ge?Ge:void 0,el=null!==(dt=I.tenantId)&&void 0!==dt?dt:void 0,Ll=null!==(on=I._redirectEventId)&&void 0!==on?on:void 0,Us=null!==(Pn=I.createdAt)&&void 0!==Pn?Pn:void 0,Ul=null!==(qn=I.lastLoginAt)&&void 0!==qn?qn:void 0,{uid:Nu,emailVerified:vl,isAnonymous:Is,providerData:nc,stsTokenManager:Ou}=I;je(Nu&&Ou,g,"internal-error");const El=Hn.fromJSON(this.name,Ou);je("string"==typeof Nu,g,"internal-error"),xr(Cr,g.name),xr(fs,g.name),je("boolean"==typeof vl,g,"internal-error"),je("boolean"==typeof Is,g,"internal-error"),xr(va,g.name),xr(_c,g.name),xr(el,g.name),xr(Ll,g.name),xr(Us,g.name),xr(Ul,g.name);const Oc=new Jn({uid:Nu,auth:g,email:fs,emailVerified:vl,displayName:Cr,isAnonymous:Is,photoURL:_c,phoneNumber:va,tenantId:el,stsTokenManager:El,createdAt:Us,lastLoginAt:Ul});return nc&&Array.isArray(nc)&&(Oc.providerData=nc.map(jr=>Object.assign({},jr))),Ll&&(Oc._redirectEventId=Ll),Oc}static _fromIdTokenResponse(g,I,R=!1){return(0,C.Z)(function*(){const q=new Hn;q.updateFromServerResponse(I);const oe=new Jn({uid:I.localId,auth:g,stsTokenManager:q,isAnonymous:R});return yield Er(oe),oe})()}}const Qe=new Map;function De(S){ln(S instanceof Function,"Expected a class definition");let g=Qe.get(S);return g?(ln(g instanceof S,"Instance stored in cache mismatched with class"),g):(g=new S,Qe.set(S,g),g)}const gt=(()=>{class S{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.Z)(function*(){return!0})()}_set(I,R){var q=this;return(0,C.Z)(function*(){q.storage[I]=R})()}_get(I){var R=this;return(0,C.Z)(function*(){const q=R.storage[I];return void 0===q?null:q})()}_remove(I){var R=this;return(0,C.Z)(function*(){delete R.storage[I]})()}_addListener(I,R){}_removeListener(I,R){}}return S.type="NONE",S})();function ct(S,g,I){return`firebase:${S}:${g}:${I}`}class ge{constructor(g,I,R){this.persistence=g,this.auth=I,this.userKey=R;const{config:q,name:oe}=this.auth;this.fullUserKey=ct(this.userKey,q.apiKey,oe),this.fullPersistenceKey=ct("persistence",q.apiKey,oe),this.boundEventHandler=I._onStorageEvent.bind(I),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,C.Z)(function*(){const I=yield g.persistence._get(g.fullUserKey);return I?Jn._fromJSON(g.auth,I):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var I=this;return(0,C.Z)(function*(){if(I.persistence===g)return;const R=yield I.getCurrentUser();return yield I.removeCurrentUser(),I.persistence=g,R?I.setCurrentUser(R):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,I,R="authUser"){return(0,C.Z)(function*(){if(!I.length)return new ge(De(gt),g,R);const q=(yield Promise.all(I.map(function(){var Pn=(0,C.Z)(function*(qn){if(yield qn._isAvailable())return qn});return function(qn){return Pn.apply(this,arguments)}}()))).filter(Pn=>Pn);let oe=q[0]||De(gt);const Ge=ct(R,g.config.apiKey,g.name);let dt=null;for(const Pn of I)try{const qn=yield Pn._get(Ge);if(qn){const Cr=Jn._fromJSON(g,qn);Pn!==oe&&(dt=Cr),oe=Pn;break}}catch{}const on=q.filter(Pn=>Pn._shouldAllowMigration);return oe._shouldAllowMigration&&on.length?(oe=on[0],dt&&(yield oe._set(Ge,dt.toJSON())),yield Promise.all(I.map(function(){var Pn=(0,C.Z)(function*(qn){if(qn!==oe)try{yield qn._remove(Ge)}catch{}});return function(qn){return Pn.apply(this,arguments)}}())),new ge(oe,g,R)):new ge(oe,g,R)})()}}function _e(S){const g=S.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ue(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ee(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Ee(g))return"Blackberry";if(ue(g))return"Webos";if(re(g))return"Safari";if((g.includes("chrome/")||Y(g))&&!g.includes("edge/"))return"Chrome";if(me(g))return"Android";{const R=S.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===R?.length)return R[1]}return"Other"}function ee(S=(0,p.z$)()){return/firefox\//i.test(S)}function re(S=(0,p.z$)()){const g=S.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Y(S=(0,p.z$)()){return/crios\//i.test(S)}function Ue(S=(0,p.z$)()){return/iemobile/i.test(S)}function me(S=(0,p.z$)()){return/android/i.test(S)}function Ee(S=(0,p.z$)()){return/blackberry/i.test(S)}function ue(S=(0,p.z$)()){return/webos/i.test(S)}function ke(S=(0,p.z$)()){return/iphone|ipad|ipod/i.test(S)||/macintosh/i.test(S)&&/mobile/i.test(S)}function Xe(S=(0,p.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(S)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(S)}function mt(S=(0,p.z$)()){return ke(S)||me(S)||ue(S)||Ee(S)||/windows phone/i.test(S)||Ue(S)}function wn(S,g=[]){let I;switch(S){case"Browser":I=_e((0,p.z$)());break;case"Worker":I=`${_e((0,p.z$)())}-${S}`;break;default:I=S}const R=g.length?g.join(","):"FirebaseCore-web";return`${I}/JsCore/${K.SDK_VERSION}/${R}`}function V(){return(V=(0,C.Z)(function*(S){return(yield rn(S,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ne(S,g){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,C.Z)(function*(S,g){return rn(S,"GET","/v2/recaptchaConfig",Ct(S,g))})).apply(this,arguments)}function it(S){return void 0!==S&&void 0!==S.getResponse}function Wt(S){return void 0!==S&&void 0!==S.enterprise}class Ut{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(I=>"EMAIL_PASSWORD_PROVIDER"===I.provider&&"OFF"!==I.enforcementState)}}function Fn(S){return new Promise((g,I)=>{const R=document.createElement("script");R.setAttribute("src",S),R.onload=g,R.onerror=q=>{const oe=Je("internal-error");oe.customData=q,I(oe)},R.type="text/javascript",R.charset="UTF-8",function Mn(){var S,g;return null!==(g=null===(S=document.getElementsByTagName("head"))||void 0===S?void 0:S[0])&&void 0!==g?g:document}().appendChild(R)})}function Ar(S){return`__${S}${Math.floor(1e6*Math.random())}`}const Hi="NO_RECAPTCHA";class ei{constructor(g){this.type="recaptcha-enterprise",this.auth=In(g)}verify(g="verify",I=!1){var R=this;return(0,C.Z)(function*(){function oe(){return oe=(0,C.Z)(function*(dt){if(!I){if(null==dt.tenantId&&null!=dt._agentRecaptchaConfig)return dt._agentRecaptchaConfig.siteKey;if(null!=dt.tenantId&&void 0!==dt._tenantRecaptchaConfigs[dt.tenantId])return dt._tenantRecaptchaConfigs[dt.tenantId].siteKey}return new Promise(function(){var on=(0,C.Z)(function*(Pn,qn){ne(dt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Cr=>{if(void 0!==Cr.recaptchaKey){const fs=new Ut(Cr);return null==dt.tenantId?dt._agentRecaptchaConfig=fs:dt._tenantRecaptchaConfigs[dt.tenantId]=fs,Pn(fs.siteKey)}qn(new Error("recaptcha Enterprise site key undefined"))}).catch(Cr=>{qn(Cr)})});return function(Pn,qn){return on.apply(this,arguments)}}())}),oe.apply(this,arguments)}function Ge(dt,on,Pn){const qn=window.grecaptcha;Wt(qn)?qn.enterprise.ready(()=>{qn.enterprise.execute(dt,{action:g}).then(Cr=>{on(Cr)}).catch(()=>{on(Hi)})}):Pn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((dt,on)=>{(function q(dt){return oe.apply(this,arguments)})(R.auth).then(Pn=>{if(!I&&Wt(window.grecaptcha))Ge(Pn,dt,on);else{if(typeof window>"u")return void on(new Error("RecaptchaVerifier is only supported in browser"));Fn("https://www.google.com/recaptcha/enterprise.js?render="+Pn).then(()=>{Ge(Pn,dt,on)}).catch(qn=>{on(qn)})}}).catch(Pn=>{on(Pn)})})})()}}function Lr(S,g,I){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,C.Z)(function*(S,g,I,R=!1){const q=new ei(S);let oe;try{oe=yield q.verify(I)}catch{oe=yield q.verify(I,!0)}const Ge=Object.assign({},g);return Object.assign(Ge,R?{captchaResp:oe}:{captchaResponse:oe}),Object.assign(Ge,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Ge,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Ge})).apply(this,arguments)}class zn{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,I){const R=oe=>new Promise((Ge,dt)=>{try{Ge(g(oe))}catch(on){dt(on)}});R.onAbort=I,this.queue.push(R);const q=this.queue.length-1;return()=>{this.queue[q]=()=>Promise.resolve()}}runMiddleware(g){var I=this;return(0,C.Z)(function*(){if(I.auth.currentUser===g)return;const R=[];try{for(const q of I.queue)yield q(g),q.onAbort&&R.push(q.onAbort)}catch(q){R.reverse();for(const oe of R)try{oe()}catch{}throw I.auth._errorFactory.create("login-blocked",{originalMessage:q?.message})}})()}}class Tn{constructor(g,I,R,q){this.app=g,this.heartbeatServiceProvider=I,this.appCheckServiceProvider=R,this.config=q,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dn(this),this.idTokenSubscription=new Dn(this),this.beforeStateQueue=new zn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=q.sdkClientVersion}_initializeWithPersistence(g,I){var R=this;return I&&(this._popupRedirectResolver=De(I)),this._initializationPromise=this.queue((0,C.Z)(function*(){var q,oe;if(!R._deleted&&(R.persistenceManager=yield ge.create(R,g),!R._deleted)){if(null!==(q=R._popupRedirectResolver)&&void 0!==q&&q._shouldInitProactively)try{yield R._popupRedirectResolver._initialize(R)}catch{}yield R.initializeCurrentUser(I),R.lastNotifiedUid=(null===(oe=R.currentUser)||void 0===oe?void 0:oe.uid)||null,!R._deleted&&(R._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,C.Z)(function*(){if(g._deleted)return;const I=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||I){if(g.currentUser&&I&&g.currentUser.uid===I.uid)return g._currentUser._assign(I),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(I,!0)}})()}initializeCurrentUser(g){var I=this;return(0,C.Z)(function*(){var R;const q=yield I.assertedPersistence.getCurrentUser();let oe=q,Ge=!1;if(g&&I.config.authDomain){yield I.getOrInitRedirectPersistenceManager();const dt=null===(R=I.redirectUser)||void 0===R?void 0:R._redirectEventId,on=oe?._redirectEventId,Pn=yield I.tryRedirectSignIn(g);(!dt||dt===on)&&Pn?.user&&(oe=Pn.user,Ge=!0)}if(!oe)return I.directlySetCurrentUser(null);if(!oe._redirectEventId){if(Ge)try{yield I.beforeStateQueue.runMiddleware(oe)}catch(dt){oe=q,I._popupRedirectResolver._overrideRedirectResult(I,()=>Promise.reject(dt))}return oe?I.reloadAndSetCurrentUserOrClear(oe):I.directlySetCurrentUser(null)}return je(I._popupRedirectResolver,I,"argument-error"),yield I.getOrInitRedirectPersistenceManager(),I.redirectUser&&I.redirectUser._redirectEventId===oe._redirectEventId?I.directlySetCurrentUser(oe):I.reloadAndSetCurrentUserOrClear(oe)})()}tryRedirectSignIn(g){var I=this;return(0,C.Z)(function*(){let R=null;try{R=yield I._popupRedirectResolver._completeRedirectFn(I,g,!0)}catch{yield I._setRedirectUser(null)}return R})()}reloadAndSetCurrentUserOrClear(g){var I=this;return(0,C.Z)(function*(){try{yield Er(g)}catch(R){if("auth/network-request-failed"!==R?.code)return I.directlySetCurrentUser(null)}return I.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function at(){if(typeof navigator>"u")return null;const S=navigator;return S.languages&&S.languages[0]||S.language||null}()}_delete(){var g=this;return(0,C.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var I=this;return(0,C.Z)(function*(){const R=g?(0,p.m9)(g):null;return R&&je(R.auth.config.apiKey===I.config.apiKey,I,"invalid-user-token"),I._updateCurrentUser(R&&R._clone(I))})()}_updateCurrentUser(g,I=!1){var R=this;return(0,C.Z)(function*(){if(!R._deleted)return g&&je(R.tenantId===g.tenantId,R,"tenant-id-mismatch"),I||(yield R.beforeStateQueue.runMiddleware(g)),R.queue((0,C.Z)(function*(){yield R.directlySetCurrentUser(g),R.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,C.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var I=this;return this.queue((0,C.Z)(function*(){yield I.assertedPersistence.setPersistence(De(g))}))}initializeRecaptchaConfig(){var g=this;return(0,C.Z)(function*(){const I=yield ne(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),R=new Ut(I);null==g.tenantId?g._agentRecaptchaConfig=R:g._tenantRecaptchaConfigs[g.tenantId]=R,R.emailPasswordEnabled&&new ei(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new p.LL("auth","Firebase",g())}onAuthStateChanged(g,I,R){return this.registerStateListener(this.authStateSubscription,g,I,R)}beforeAuthStateChanged(g,I){return this.beforeStateQueue.pushCallback(g,I)}onIdTokenChanged(g,I,R){return this.registerStateListener(this.idTokenSubscription,g,I,R)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,I){var R=this;return(0,C.Z)(function*(){const q=yield R.getOrInitRedirectPersistenceManager(I);return null===g?q.removeCurrentUser():q.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var I=this;return(0,C.Z)(function*(){if(!I.redirectPersistenceManager){const R=g&&De(g)||I._popupRedirectResolver;je(R,I,"argument-error"),I.redirectPersistenceManager=yield ge.create(I,[De(R._redirectPersistence)],"redirectUser"),I.redirectUser=yield I.redirectPersistenceManager.getCurrentUser()}return I.redirectPersistenceManager})()}_redirectUserForId(g){var I=this;return(0,C.Z)(function*(){var R,q;return I._isInitialized&&(yield I.queue((0,C.Z)(function*(){}))),(null===(R=I._currentUser)||void 0===R?void 0:R._redirectEventId)===g?I._currentUser:(null===(q=I.redirectUser)||void 0===q?void 0:q._redirectEventId)===g?I.redirectUser:null})()}_persistUserIfCurrent(g){var I=this;return(0,C.Z)(function*(){if(g===I.currentUser)return I.queue((0,C.Z)(function*(){return I.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,I;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const R=null!==(I=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==I?I:null;this.lastNotifiedUid!==R&&(this.lastNotifiedUid=R,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,I,R,q){if(this._deleted)return()=>{};const oe="function"==typeof I?I:I.next.bind(I),Ge=this._isInitialized?Promise.resolve():this._initializationPromise;return je(Ge,this,"internal-error"),Ge.then(()=>oe(this.currentUser)),"function"==typeof I?g.addObserver(I,R,q):g.addObserver(I)}directlySetCurrentUser(g){var I=this;return(0,C.Z)(function*(){I.currentUser&&I.currentUser!==g&&I._currentUser._stopProactiveRefresh(),g&&I.isProactiveRefreshEnabled&&g._startProactiveRefresh(),I.currentUser=g,g?yield I.assertedPersistence.setCurrentUser(g):yield I.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=wn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,C.Z)(function*(){var I;const R={"X-Client-Version":g.clientVersion};g.app.options.appId&&(R["X-Firebase-gmpid"]=g.app.options.appId);const q=yield null===(I=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===I?void 0:I.getHeartbeatsHeader();q&&(R["X-Firebase-Client"]=q);const oe=yield g._getAppCheckToken();return oe&&(R["X-Firebase-AppCheck"]=oe),R})()}_getAppCheckToken(){var g=this;return(0,C.Z)(function*(){var I;const R=yield null===(I=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===I?void 0:I.getToken();return R?.error&&function ft(S,...g){yt.logLevel<=Se.in.WARN&&yt.warn(`Auth (${K.SDK_VERSION}): ${S}`,...g)}(`Error while retrieving App Check token: ${R.error}`),R?.token})()}}function In(S){return(0,p.m9)(S)}class Dn{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,p.ne)(I=>this.observer=I)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function fe(S,g,I){const R=In(S);je(R._canInitEmulator,R,"emulator-config-failed"),je(/^https?:\/\//.test(g),R,"invalid-emulator-scheme");const q=!!I?.disableWarnings,oe=te(g),{host:Ge,port:dt}=function he(S){const g=te(S),I=/(\/\/)?([^?#/]+)/.exec(S.substr(g.length));if(!I)return{host:"",port:null};const R=I[2].split("@").pop()||"",q=/^(\[[^\]]+\])(:|$)/.exec(R);if(q){const oe=q[1];return{host:oe,port:Ie(R.substr(oe.length+1))}}{const[oe,Ge]=R.split(":");return{host:oe,port:Ie(Ge)}}}(g);R.config.emulator={url:`${oe}//${Ge}${null===dt?"":`:${dt}`}/`},R.settings.appVerificationDisabledForTesting=!0,R.emulatorConfig=Object.freeze({host:Ge,port:dt,protocol:oe.replace(":",""),options:Object.freeze({disableWarnings:q})}),q||function He(){function S(){const g=document.createElement("p"),I=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",S):S())}()}function te(S){const g=S.indexOf(":");return g<0?"":S.substr(0,g+1)}function Ie(S){if(!S)return null;const g=Number(S);return isNaN(g)?null:g}class Z{constructor(g,I){this.providerId=g,this.signInMethod=I}toJSON(){return xt("not implemented")}_getIdTokenResponse(g){return xt("not implemented")}_linkToIdToken(g,I){return xt("not implemented")}_getReauthenticationResolver(g){return xt("not implemented")}}function ve(S,g){return qe.apply(this,arguments)}function qe(){return(qe=(0,C.Z)(function*(S,g){return rn(S,"POST","/v1/accounts:resetPassword",Ct(S,g))})).apply(this,arguments)}function _t(S,g){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,C.Z)(function*(S,g){return rn(S,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function vn(){return(vn=(0,C.Z)(function*(S,g){return rn(S,"POST","/v1/accounts:update",Ct(S,g))})).apply(this,arguments)}function br(S,g){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,C.Z)(function*(S,g){return xn(S,"POST","/v1/accounts:signInWithPassword",Ct(S,g))})).apply(this,arguments)}function dr(S,g){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,C.Z)(function*(S,g){return rn(S,"POST","/v1/accounts:sendOobCode",Ct(S,g))})).apply(this,arguments)}function Ia(){return(Ia=(0,C.Z)(function*(S,g){return dr(S,g)})).apply(this,arguments)}function Js(S,g){return uo.apply(this,arguments)}function uo(){return(uo=(0,C.Z)(function*(S,g){return dr(S,g)})).apply(this,arguments)}function ps(S,g){return zi.apply(this,arguments)}function zi(){return(zi=(0,C.Z)(function*(S,g){return dr(S,g)})).apply(this,arguments)}function Gi(){return(Gi=(0,C.Z)(function*(S,g){return dr(S,g)})).apply(this,arguments)}function Hs(){return(Hs=(0,C.Z)(function*(S,g){return xn(S,"POST","/v1/accounts:signInWithEmailLink",Ct(S,g))})).apply(this,arguments)}function gs(){return(gs=(0,C.Z)(function*(S,g){return xn(S,"POST","/v1/accounts:signInWithEmailLink",Ct(S,g))})).apply(this,arguments)}class Yr extends Z{constructor(g,I,R,q=null){super("password",R),this._email=g,this._password=I,this._tenantId=q}static _fromEmailAndPassword(g,I){return new Yr(g,I,"password")}static _fromEmailAndCode(g,I,R=null){return new Yr(g,I,"emailLink",R)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const I="string"==typeof g?JSON.parse(g):g;if(I?.email&&I?.password){if("password"===I.signInMethod)return this._fromEmailAndPassword(I.email,I.password);if("emailLink"===I.signInMethod)return this._fromEmailAndCode(I.email,I.password,I.tenantId)}return null}_getIdTokenResponse(g){var I=this;return(0,C.Z)(function*(){var R;switch(I.signInMethod){case"password":const q={returnSecureToken:!0,email:I._email,password:I._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(R=g._getRecaptchaConfig())&&void 0!==R&&R.emailPasswordEnabled){const oe=yield Lr(g,q,"signInWithPassword");return br(g,oe)}return br(g,q).catch(function(){var oe=(0,C.Z)(function*(Ge){if("auth/missing-recaptcha-token"===Ge.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const dt=yield Lr(g,q,"signInWithPassword");return br(g,dt)}return Promise.reject(Ge)});return function(Ge){return oe.apply(this,arguments)}}());case"emailLink":return function sr(S,g){return Hs.apply(this,arguments)}(g,{email:I._email,oobCode:I._password});default:Te(g,"internal-error")}})()}_linkToIdToken(g,I){var R=this;return(0,C.Z)(function*(){switch(R.signInMethod){case"password":return _t(g,{idToken:I,returnSecureToken:!0,email:R._email,password:R._password});case"emailLink":return function bo(S,g){return gs.apply(this,arguments)}(g,{idToken:I,email:R._email,oobCode:R._password});default:Te(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Br(S,g){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,C.Z)(function*(S,g){return xn(S,"POST","/v1/accounts:signInWithIdp",Ct(S,g))})).apply(this,arguments)}class ir extends Z{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const I=new ir(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(I.idToken=g.idToken),g.accessToken&&(I.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(I.nonce=g.nonce),g.pendingToken&&(I.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(I.accessToken=g.oauthToken,I.secret=g.oauthTokenSecret):Te("argument-error"),I}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const I="string"==typeof g?JSON.parse(g):g,{providerId:R,signInMethod:q}=I,oe=(0,X._T)(I,["providerId","signInMethod"]);if(!R||!q)return null;const Ge=new ir(R,q);return Ge.idToken=oe.idToken||void 0,Ge.accessToken=oe.accessToken||void 0,Ge.secret=oe.secret,Ge.nonce=oe.nonce,Ge.pendingToken=oe.pendingToken||null,Ge}_getIdTokenResponse(g){return Br(g,this.buildRequest())}_linkToIdToken(g,I){const R=this.buildRequest();return R.idToken=I,Br(g,R)}_getReauthenticationResolver(g){const I=this.buildRequest();return I.autoCreate=!1,Br(g,I)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const I={};this.idToken&&(I.id_token=this.idToken),this.accessToken&&(I.access_token=this.accessToken),this.secret&&(I.oauth_token_secret=this.secret),I.providerId=this.providerId,this.nonce&&!this.pendingToken&&(I.nonce=this.nonce),g.postBody=(0,p.xO)(I)}return g}}function cs(){return(cs=(0,C.Z)(function*(S,g){return rn(S,"POST","/v1/accounts:sendVerificationCode",Ct(S,g))})).apply(this,arguments)}function Ca(){return(Ca=(0,C.Z)(function*(S,g){return xn(S,"POST","/v1/accounts:signInWithPhoneNumber",Ct(S,g))})).apply(this,arguments)}function Do(){return(Do=(0,C.Z)(function*(S,g){const I=yield xn(S,"POST","/v1/accounts:signInWithPhoneNumber",Ct(S,g));if(I.temporaryProof)throw hr(S,"account-exists-with-different-credential",I);return I})).apply(this,arguments)}const Fa={USER_NOT_FOUND:"user-not-found"};function ba(){return(ba=(0,C.Z)(function*(S,g){return xn(S,"POST","/v1/accounts:signInWithPhoneNumber",Ct(S,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Fa)})).apply(this,arguments)}class ts extends Z{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,I){return new ts({verificationId:g,verificationCode:I})}static _fromTokenResponse(g,I){return new ts({phoneNumber:g,temporaryProof:I})}_getIdTokenResponse(g){return function Xs(S,g){return Ca.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,I){return function Eu(S,g){return Do.apply(this,arguments)}(g,Object.assign({idToken:I},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function $o(S,g){return ba.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:I,verificationId:R,verificationCode:q}=this.params;return g&&I?{temporaryProof:g,phoneNumber:I}:{sessionInfo:R,code:q}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:I,verificationCode:R,phoneNumber:q,temporaryProof:oe}=g;return R||I||q||oe?new ts({verificationId:I,verificationCode:R,phoneNumber:q,temporaryProof:oe}):null}}class lo{constructor(g){var I,R,q,oe,Ge,dt;const on=(0,p.zd)((0,p.pd)(g)),Pn=null!==(I=on.apiKey)&&void 0!==I?I:null,qn=null!==(R=on.oobCode)&&void 0!==R?R:null,Cr=function zs(S){switch(S){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(q=on.mode)&&void 0!==q?q:null);je(Pn&&qn&&Cr,"argument-error"),this.apiKey=Pn,this.operation=Cr,this.code=qn,this.continueUrl=null!==(oe=on.continueUrl)&&void 0!==oe?oe:null,this.languageCode=null!==(Ge=on.languageCode)&&void 0!==Ge?Ge:null,this.tenantId=null!==(dt=on.tenantId)&&void 0!==dt?dt:null}static parseLink(g){const I=function tu(S){const g=(0,p.zd)((0,p.pd)(S)).link,I=g?(0,p.zd)((0,p.pd)(g)).deep_link_id:null,R=(0,p.zd)((0,p.pd)(S)).deep_link_id;return(R?(0,p.zd)((0,p.pd)(R)).link:null)||R||I||g||S}(g);try{return new lo(I)}catch{return null}}}let co=(()=>{class S{constructor(){this.providerId=S.PROVIDER_ID}static credential(I,R){return Yr._fromEmailAndPassword(I,R)}static credentialWithLink(I,R){const q=lo.parseLink(R);return je(q,"argument-error"),Yr._fromEmailAndCode(I,q.code,q.tenantId)}}return S.PROVIDER_ID="password",S.EMAIL_PASSWORD_SIGN_IN_METHOD="password",S.EMAIL_LINK_SIGN_IN_METHOD="emailLink",S})();class Yi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class jo extends Yi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ns extends jo{static credentialFromJSON(g){const I="string"==typeof g?JSON.parse(g):g;return je("providerId"in I&&"signInMethod"in I,"argument-error"),ir._fromParams(I)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return je(g.idToken||g.accessToken,"argument-error"),ir._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ns.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ns.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:oe,nonce:Ge,providerId:dt}=g;if(!R&&!q&&!I&&!oe||!dt)return null;try{return new ns(dt)._credential({idToken:I,accessToken:R,nonce:Ge,pendingToken:oe})}catch{return null}}}let As=(()=>{class S extends jo{constructor(){super("facebook.com")}static credential(I){return ir._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.FACEBOOK_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return S.credentialFromTaggedObject(I)}static credentialFromError(I){return S.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return S.credential(I.oauthAccessToken)}catch{return null}}}return S.FACEBOOK_SIGN_IN_METHOD="facebook.com",S.PROVIDER_ID="facebook.com",S})(),_i=(()=>{class S extends jo{constructor(){super("google.com"),this.addScope("profile")}static credential(I,R){return ir._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.GOOGLE_SIGN_IN_METHOD,idToken:I,accessToken:R})}static credentialFromResult(I){return S.credentialFromTaggedObject(I)}static credentialFromError(I){return S.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthIdToken:R,oauthAccessToken:q}=I;if(!R&&!q)return null;try{return S.credential(R,q)}catch{return null}}}return S.GOOGLE_SIGN_IN_METHOD="google.com",S.PROVIDER_ID="google.com",S})(),So=(()=>{class S extends jo{constructor(){super("github.com")}static credential(I){return ir._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.GITHUB_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return S.credentialFromTaggedObject(I)}static credentialFromError(I){return S.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return S.credential(I.oauthAccessToken)}catch{return null}}}return S.GITHUB_SIGN_IN_METHOD="github.com",S.PROVIDER_ID="github.com",S})();class Ce extends Z{constructor(g,I){super(g,g),this.pendingToken=I}_getIdTokenResponse(g){return Br(g,this.buildRequest())}_linkToIdToken(g,I){const R=this.buildRequest();return R.idToken=I,Br(g,R)}_getReauthenticationResolver(g){const I=this.buildRequest();return I.autoCreate=!1,Br(g,I)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const I="string"==typeof g?JSON.parse(g):g,{providerId:R,signInMethod:q,pendingToken:oe}=I;return R&&q&&oe&&R===q?new Ce(R,oe):null}static _create(g,I){return new Ce(g,I)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Oe extends Yi{constructor(g){je(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Oe.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Oe.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const I=Ce.fromJSON(g);return je(I,"argument-error"),I}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:I,providerId:R}=g;if(!I||!R)return null;try{return Ce._create(R,I)}catch{return null}}}let et=(()=>{class S extends jo{constructor(){super("twitter.com")}static credential(I,R){return ir._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.TWITTER_SIGN_IN_METHOD,oauthToken:I,oauthTokenSecret:R})}static credentialFromResult(I){return S.credentialFromTaggedObject(I)}static credentialFromError(I){return S.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthAccessToken:R,oauthTokenSecret:q}=I;if(!R||!q)return null;try{return S.credential(R,q)}catch{return null}}}return S.TWITTER_SIGN_IN_METHOD="twitter.com",S.PROVIDER_ID="twitter.com",S})();function Tt(S,g){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,C.Z)(function*(S,g){return xn(S,"POST","/v1/accounts:signUp",Ct(S,g))})).apply(this,arguments)}class en{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,I,R,q=!1){return(0,C.Z)(function*(){const oe=yield Jn._fromIdTokenResponse(g,R,q),Ge=Kn(R);return new en({user:oe,providerId:Ge,_tokenResponse:R,operationType:I})})()}static _forOperation(g,I,R){return(0,C.Z)(function*(){yield g._updateTokensIfNecessary(R,!0);const q=Kn(R);return new en({user:g,providerId:q,_tokenResponse:R,operationType:I})})()}}function Kn(S){return S.providerId?S.providerId:"phoneNumber"in S?"phone":null}function Ln(S){return Un.apply(this,arguments)}function Un(){return(Un=(0,C.Z)(function*(S){var g;const I=In(S);if(yield I._initializationPromise,null!==(g=I.currentUser)&&void 0!==g&&g.isAnonymous)return new en({user:I.currentUser,providerId:null,operationType:"signIn"});const R=yield Tt(I,{returnSecureToken:!0}),q=yield en._fromIdTokenResponse(I,"signIn",R,!0);return yield I._updateCurrentUser(q.user),q})).apply(this,arguments)}class cr extends p.ZR{constructor(g,I,R,q){var oe;super(I.code,I.message),this.operationType=R,this.user=q,Object.setPrototypeOf(this,cr.prototype),this.customData={appName:g.name,tenantId:null!==(oe=g.tenantId)&&void 0!==oe?oe:void 0,_serverResponse:I.customData._serverResponse,operationType:R}}static _fromErrorAndOperation(g,I,R,q){return new cr(g,I,R,q)}}function Oi(S,g,I,R){return("reauthenticate"===g?I._getReauthenticationResolver(S):I._getIdTokenResponse(S)).catch(oe=>{throw"auth/multi-factor-auth-required"===oe.code?cr._fromErrorAndOperation(S,oe,g,R):oe})}function ti(S){return new Set(S.map(({providerId:g})=>g).filter(g=>!!g))}function li(S,g){return Ho.apply(this,arguments)}function Ho(){return Ho=(0,C.Z)(function*(S,g){const I=(0,p.m9)(S);yield rs(!0,I,g);const{providerUserInfo:R}=yield function Nr(S,g){return Sr.apply(this,arguments)}(I.auth,{idToken:yield I.getIdToken(),deleteProvider:[g]}),q=ti(R||[]);return I.providerData=I.providerData.filter(oe=>q.has(oe.providerId)),q.has("phone")||(I.phoneNumber=null),yield I.auth._persistUserIfCurrent(I),I}),Ho.apply(this,arguments)}function ii(S,g){return ki.apply(this,arguments)}function ki(){return(ki=(0,C.Z)(function*(S,g,I=!1){const R=yield dn(S,g._linkToIdToken(S.auth,yield S.getIdToken()),I);return en._forOperation(S,"link",R)})).apply(this,arguments)}function rs(S,g,I){return yi.apply(this,arguments)}function yi(){return(yi=(0,C.Z)(function*(S,g,I){yield Er(g);const q=!1===S?"provider-already-linked":"no-such-provider";je(ti(g.providerData).has(I)===S,g.auth,q)})).apply(this,arguments)}function sa(S,g){return xs.apply(this,arguments)}function xs(){return(xs=(0,C.Z)(function*(S,g,I=!1){const{auth:R}=S,q="reauthenticate";try{const oe=yield dn(S,Oi(R,q,g,S),I);je(oe.idToken,R,"internal-error");const Ge=Gr(oe.idToken);je(Ge,R,"internal-error");const{sub:dt}=Ge;return je(S.uid===dt,R,"user-mismatch"),en._forOperation(S,q,oe)}catch(oe){throw"auth/user-not-found"===oe?.code&&Te(R,"user-mismatch"),oe}})).apply(this,arguments)}function La(S,g){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,C.Z)(function*(S,g,I=!1){const R="signIn",q=yield Oi(S,R,g),oe=yield en._fromIdTokenResponse(S,R,q);return I||(yield S._updateCurrentUser(oe.user)),oe})).apply(this,arguments)}function Wn(S,g){return ho.apply(this,arguments)}function ho(){return(ho=(0,C.Z)(function*(S,g){return La(In(S),g)})).apply(this,arguments)}function Ao(S,g){return oa.apply(this,arguments)}function oa(){return(oa=(0,C.Z)(function*(S,g){const I=(0,p.m9)(S);return yield rs(!1,I,g.providerId),ii(I,g)})).apply(this,arguments)}function aa(S,g){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,C.Z)(function*(S,g){return sa((0,p.m9)(S),g)})).apply(this,arguments)}function nu(){return(nu=(0,C.Z)(function*(S,g){return xn(S,"POST","/v1/accounts:signInWithCustomToken",Ct(S,g))})).apply(this,arguments)}function zo(S,g){return Dt.apply(this,arguments)}function Dt(){return Dt=(0,C.Z)(function*(S,g){const I=In(S),R=yield function eo(S,g){return nu.apply(this,arguments)}(I,{token:g,returnSecureToken:!0}),q=yield en._fromIdTokenResponse(I,"signIn",R);return yield I._updateCurrentUser(q.user),q}),Dt.apply(this,arguments)}class wr{constructor(g,I){this.factorId=g,this.uid=I.mfaEnrollmentId,this.enrollmentTime=new Date(I.enrolledAt).toUTCString(),this.displayName=I.displayName}static _fromServerResponse(g,I){return"phoneInfo"in I?Go._fromServerResponse(g,I):"totpInfo"in I?Lu._fromServerResponse(g,I):Te(g,"internal-error")}}class Go extends wr{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,I){return new Go(I)}}class Lu extends wr{constructor(g){super("totp",g)}static _fromServerResponse(g,I){return new Lu(I)}}function Ui(S,g,I){var R;je((null===(R=I.url)||void 0===R?void 0:R.length)>0,S,"invalid-continue-uri"),je(typeof I.dynamicLinkDomain>"u"||I.dynamicLinkDomain.length>0,S,"invalid-dynamic-link-domain"),g.continueUrl=I.url,g.dynamicLinkDomain=I.dynamicLinkDomain,g.canHandleCodeInApp=I.handleCodeInApp,I.iOS&&(je(I.iOS.bundleId.length>0,S,"missing-ios-bundle-id"),g.iOSBundleId=I.iOS.bundleId),I.android&&(je(I.android.packageName.length>0,S,"missing-android-pkg-name"),g.androidInstallApp=I.android.installApp,g.androidMinimumVersionCode=I.android.minimumVersion,g.androidPackageName=I.android.packageName)}function Va(S,g,I){return is.apply(this,arguments)}function is(){return is=(0,C.Z)(function*(S,g,I){var R;const q=In(S),oe={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(R=q._getRecaptchaConfig())&&void 0!==R&&R.emailPasswordEnabled){const Ge=yield Lr(q,oe,"getOobCode",!0);I&&Ui(q,Ge,I),yield Js(q,Ge)}else I&&Ui(q,oe,I),yield Js(q,oe).catch(function(){var Ge=(0,C.Z)(function*(dt){if("auth/missing-recaptcha-token"!==dt.code)return Promise.reject(dt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const on=yield Lr(q,oe,"getOobCode",!0);I&&Ui(q,on,I),yield Js(q,on)}});return function(dt){return Ge.apply(this,arguments)}}())}),is.apply(this,arguments)}function vi(S,g,I){return fo.apply(this,arguments)}function fo(){return(fo=(0,C.Z)(function*(S,g,I){yield ve((0,p.m9)(S),{oobCode:g,newPassword:I})})).apply(this,arguments)}function ua(S,g){return Ws.apply(this,arguments)}function Ws(){return Ws=(0,C.Z)(function*(S,g){yield function $n(S,g){return vn.apply(this,arguments)}((0,p.m9)(S),{oobCode:g})}),Ws.apply(this,arguments)}function Ms(S,g){return po.apply(this,arguments)}function po(){return(po=(0,C.Z)(function*(S,g){const I=(0,p.m9)(S),R=yield ve(I,{oobCode:g}),q=R.requestType;switch(je(q,I,"internal-error"),q){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":je(R.newEmail,I,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":je(R.mfaInfo,I,"internal-error");default:je(R.email,I,"internal-error")}let oe=null;return R.mfaInfo&&(oe=wr._fromServerResponse(In(I),R.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.newEmail:R.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.email:R.newEmail)||null,multiFactorInfo:oe},operation:q}})).apply(this,arguments)}function Vi(S,g){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,C.Z)(function*(S,g){const{data:I}=yield Ms((0,p.m9)(S),g);return I.email})).apply(this,arguments)}function Wo(S,g,I){return qo.apply(this,arguments)}function qo(){return qo=(0,C.Z)(function*(S,g,I){var R;const q=In(S),oe={returnSecureToken:!0,email:g,password:I,clientType:"CLIENT_TYPE_WEB"};let Ge;if(null!==(R=q._getRecaptchaConfig())&&void 0!==R&&R.emailPasswordEnabled){const Pn=yield Lr(q,oe,"signUpPassword");Ge=Tt(q,Pn)}else Ge=Tt(q,oe).catch(function(){var Pn=(0,C.Z)(function*(qn){if("auth/missing-recaptcha-token"===qn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Cr=yield Lr(q,oe,"signUpPassword");return Tt(q,Cr)}return Promise.reject(qn)});return function(qn){return Pn.apply(this,arguments)}}());const dt=yield Ge.catch(Pn=>Promise.reject(Pn)),on=yield en._fromIdTokenResponse(q,"signIn",dt);return yield q._updateCurrentUser(on.user),on}),qo.apply(this,arguments)}function Rs(S,g,I){return Wn((0,p.m9)(S),co.credential(g,I))}function Uu(S,g,I){return la.apply(this,arguments)}function la(){return la=(0,C.Z)(function*(S,g,I){var R;const q=In(S),oe={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function Ge(dt,on){je(on.handleCodeInApp,q,"argument-error"),on&&Ui(q,dt,on)}if(null!==(R=q._getRecaptchaConfig())&&void 0!==R&&R.emailPasswordEnabled){const dt=yield Lr(q,oe,"getOobCode",!0);Ge(dt,I),yield ps(q,dt)}else Ge(oe,I),yield ps(q,oe).catch(function(){var dt=(0,C.Z)(function*(on){if("auth/missing-recaptcha-token"!==on.code)return Promise.reject(on);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Pn=yield Lr(q,oe,"getOobCode",!0);Ge(Pn,I),yield ps(q,Pn)}});return function(on){return dt.apply(this,arguments)}}())}),la.apply(this,arguments)}function Mi(S,g){return"EMAIL_SIGNIN"===lo.parseLink(g)?.operation}function vs(S,g,I){return xo.apply(this,arguments)}function xo(){return(xo=(0,C.Z)(function*(S,g,I){const R=(0,p.m9)(S),q=co.credentialWithLink(g,I||jt());return je(q._tenantId===(R.tenantId||null),R,"tenant-id-mismatch"),Wn(R,q)})).apply(this,arguments)}function Mo(){return(Mo=(0,C.Z)(function*(S,g){return rn(S,"POST","/v1/accounts:createAuthUri",Ct(S,g))})).apply(this,arguments)}function Wi(S,g){return go.apply(this,arguments)}function go(){return go=(0,C.Z)(function*(S,g){const R={identifier:g,continueUri:Kt()?jt():"http://localhost"},{signinMethods:q}=yield function Ps(S,g){return Mo.apply(this,arguments)}((0,p.m9)(S),R);return q||[]}),go.apply(this,arguments)}function rr(S,g){return Ns.apply(this,arguments)}function Ns(){return Ns=(0,C.Z)(function*(S,g){const I=(0,p.m9)(S),q={requestType:"VERIFY_EMAIL",idToken:yield S.getIdToken()};g&&Ui(I.auth,q,g);const{email:oe}=yield function Ss(S,g){return Ia.apply(this,arguments)}(I.auth,q);oe!==S.email&&(yield S.reload())}),Ns.apply(this,arguments)}function ca(S,g,I){return Os.apply(this,arguments)}function Os(){return Os=(0,C.Z)(function*(S,g,I){const R=(0,p.m9)(S),oe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield S.getIdToken(),newEmail:g};I&&Ui(R.auth,oe,I);const{email:Ge}=yield function cl(S,g){return Gi.apply(this,arguments)}(R.auth,oe);Ge!==S.email&&(yield S.reload())}),Os.apply(this,arguments)}function da(){return(da=(0,C.Z)(function*(S,g){return rn(S,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ks(S,g){return Ro.apply(this,arguments)}function Ro(){return Ro=(0,C.Z)(function*(S,{displayName:g,photoURL:I}){if(void 0===g&&void 0===I)return;const R=(0,p.m9)(S),oe={idToken:yield R.getIdToken(),displayName:g,photoUrl:I,returnSecureToken:!0},Ge=yield dn(R,function Ba(S,g){return da.apply(this,arguments)}(R.auth,oe));R.displayName=Ge.displayName||null,R.photoURL=Ge.photoUrl||null;const dt=R.providerData.find(({providerId:on})=>"password"===on);dt&&(dt.displayName=R.displayName,dt.photoURL=R.photoURL),yield R._updateTokensIfNecessary(Ge)}),Ro.apply(this,arguments)}function to(S,g){return hi((0,p.m9)(S),g,null)}function gi(S,g){return hi((0,p.m9)(S),null,g)}function hi(S,g,I){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,C.Z)(function*(S,g,I){const{auth:R}=S,oe={idToken:yield S.getIdToken(),returnSecureToken:!0};g&&(oe.email=g),I&&(oe.password=I);const Ge=yield dn(S,_t(R,oe));yield S._updateTokensIfNecessary(Ge,!0)})).apply(this,arguments)}class Zo{constructor(g,I,R={}){this.isNewUser=g,this.providerId=I,this.profile=R}}class ru extends Zo{constructor(g,I,R,q){super(g,I,R),this.username=q}}class dl extends Zo{constructor(g,I){super(g,"facebook.com",I)}}class Fs extends ru{constructor(g,I){super(g,"github.com",I,"string"==typeof I?.login?I?.login:null)}}class ha extends Zo{constructor(g,I){super(g,"google.com",I)}}class Vu extends ru{constructor(g,I,R){super(g,"twitter.com",I,R)}}function fa(S){const{user:g,_tokenResponse:I}=S;return g.isAnonymous&&!I?{providerId:null,isNewUser:!1,profile:null}:function $a(S){var g,I;if(!S)return null;const{providerId:R}=S,q=S.rawUserInfo?JSON.parse(S.rawUserInfo):{},oe=S.isNewUser||"identitytoolkit#SignupNewUserResponse"===S.kind;if(!R&&S?.idToken){const Ge=null===(I=null===(g=Gr(S.idToken))||void 0===g?void 0:g.firebase)||void 0===I?void 0:I.sign_in_provider;if(Ge)return new Zo(oe,"anonymous"!==Ge&&"custom"!==Ge?Ge:null)}if(!R)return null;switch(R){case"facebook.com":return new dl(oe,q);case"github.com":return new Fs(oe,q);case"google.com":return new ha(oe,q);case"twitter.com":return new Vu(oe,q,S.screenName||null);case"custom":case"anonymous":return new Zo(oe,null);default:return new Zo(oe,R,q)}}(I)}function ie(S,g,I,R){return(0,p.m9)(S).onAuthStateChanged(g,I,R)}function Ft(S){return(0,p.m9)(S).signOut()}class ar{constructor(g,I,R){this.type=g,this.credential=I,this.auth=R}static _fromIdtoken(g,I){return new ar("enroll",g,I)}static _fromMfaPendingCredential(g){return new ar("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var I,R;if(g?.multiFactorSession){if(null!==(I=g.multiFactorSession)&&void 0!==I&&I.pendingCredential)return ar._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(R=g.multiFactorSession)&&void 0!==R&&R.idToken)return ar._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Or{constructor(g,I,R){this.session=g,this.hints=I,this.signInResolver=R}static _fromError(g,I){const R=In(g),q=I.customData._serverResponse,oe=(q.mfaInfo||[]).map(dt=>wr._fromServerResponse(R,dt));je(q.mfaPendingCredential,R,"internal-error");const Ge=ar._fromMfaPendingCredential(q.mfaPendingCredential);return new Or(Ge,oe,function(){var dt=(0,C.Z)(function*(on){const Pn=yield on._process(R,Ge);delete q.mfaInfo,delete q.mfaPendingCredential;const qn=Object.assign(Object.assign({},q),{idToken:Pn.idToken,refreshToken:Pn.refreshToken});switch(I.operationType){case"signIn":const Cr=yield en._fromIdTokenResponse(R,I.operationType,qn);return yield R._updateCurrentUser(Cr.user),Cr;case"reauthenticate":return je(I.user,R,"internal-error"),en._forOperation(I.user,I.operationType,qn);default:Te(R,"internal-error")}});return function(on){return dt.apply(this,arguments)}}())}resolveSignIn(g){var I=this;return(0,C.Z)(function*(){return I.signInResolver(g)})()}}function Dr(S,g){var I;const R=(0,p.m9)(S),q=g;return je(g.customData.operationType,R,"argument-error"),je(null===(I=q.customData._serverResponse)||void 0===I?void 0:I.mfaPendingCredential,R,"argument-error"),Or._fromError(R,q)}class Ls{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(I=>{I.mfaInfo&&(this.enrolledFactors=I.mfaInfo.map(R=>wr._fromServerResponse(g.auth,R)))})}static _fromUser(g){return new Ls(g)}getSession(){var g=this;return(0,C.Z)(function*(){return ar._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,I){var R=this;return(0,C.Z)(function*(){const q=g,oe=yield R.getSession(),Ge=yield dn(R.user,q._process(R.user.auth,oe,I));return yield R.user._updateTokensIfNecessary(Ge),R.user.reload()})()}unenroll(g){var I=this;return(0,C.Z)(function*(){const R="string"==typeof g?g:g.uid,q=yield I.user.getIdToken();try{const oe=yield dn(I.user,function wi(S,g){return rn(S,"POST","/v2/accounts/mfaEnrollment:withdraw",Ct(S,g))}(I.user.auth,{idToken:q,mfaEnrollmentId:R}));I.enrolledFactors=I.enrolledFactors.filter(({uid:Ge})=>Ge!==R),yield I.user._updateTokensIfNecessary(oe),yield I.user.reload()}catch(oe){throw oe}})()}}const un=new WeakMap;function On(S){const g=(0,p.m9)(S);return un.has(g)||un.set(g,Ls._fromUser(g)),un.get(g)}const Es="__sak";class sn{constructor(g,I){this.storageRetriever=g,this.type=I}_isAvailable(){try{return this.storage?(this.storage.setItem(Es,"1"),this.storage.removeItem(Es),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,I){return this.storage.setItem(g,JSON.stringify(I)),Promise.resolve()}_get(g){const I=this.storage.getItem(g);return Promise.resolve(I?JSON.parse(I):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Bu=(()=>{class S extends sn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(I,R)=>this.onStorageEvent(I,R),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ht(){const S=(0,p.z$)();return re(S)||ke(S)}()&&function Pt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=mt(),this._shouldAllowMigration=!0}forAllChangedKeys(I){for(const R of Object.keys(this.listeners)){const q=this.storage.getItem(R),oe=this.localCache[R];q!==oe&&I(R,oe,q)}}onStorageEvent(I,R=!1){if(!I.key)return void this.forAllChangedKeys((dt,on,Pn)=>{this.notifyListeners(dt,Pn)});const q=I.key;if(R?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const dt=this.storage.getItem(q);if(I.newValue!==dt)null!==I.newValue?this.storage.setItem(q,I.newValue):this.storage.removeItem(q);else if(this.localCache[q]===I.newValue&&!R)return}const oe=()=>{const dt=this.storage.getItem(q);!R&&this.localCache[q]===dt||this.notifyListeners(q,dt)},Ge=this.storage.getItem(q);!function tn(){return(0,p.w1)()&&10===document.documentMode}()||Ge===I.newValue||I.newValue===I.oldValue?oe():setTimeout(oe,10)}notifyListeners(I,R){this.localCache[I]=R;const q=this.listeners[I];if(q)for(const oe of Array.from(q))oe(R&&JSON.parse(R))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((I,R,q)=>{this.onStorageEvent(new StorageEvent("storage",{key:I,oldValue:R,newValue:q}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(I,R){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[I]||(this.listeners[I]=new Set,this.localCache[I]=this.storage.getItem(I)),this.listeners[I].add(R)}_removeListener(I,R){this.listeners[I]&&(this.listeners[I].delete(R),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(I,R){var q=()=>super._set,oe=this;return(0,C.Z)(function*(){yield q().call(oe,I,R),oe.localCache[I]=JSON.stringify(R)})()}_get(I){var R=()=>super._get,q=this;return(0,C.Z)(function*(){const oe=yield R().call(q,I);return q.localCache[I]=JSON.stringify(oe),oe})()}_remove(I){var R=()=>super._remove,q=this;return(0,C.Z)(function*(){yield R().call(q,I),delete q.localCache[I]})()}}return S.type="LOCAL",S})(),mo=(()=>{class S extends sn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(I,R){}_removeListener(I,R){}}return S.type="SESSION",S})();let ju=(()=>{class S{constructor(I){this.eventTarget=I,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(I){const R=this.receivers.find(oe=>oe.isListeningto(I));if(R)return R;const q=new S(I);return this.receivers.push(q),q}isListeningto(I){return this.eventTarget===I}handleEvent(I){var R=this;return(0,C.Z)(function*(){const q=I,{eventId:oe,eventType:Ge,data:dt}=q.data,on=R.handlersMap[Ge];if(!on?.size)return;q.ports[0].postMessage({status:"ack",eventId:oe,eventType:Ge});const Pn=Array.from(on).map(function(){var Cr=(0,C.Z)(function*(fs){return fs(q.origin,dt)});return function(fs){return Cr.apply(this,arguments)}}()),qn=yield function $u(S){return Promise.all(S.map(function(){var g=(0,C.Z)(function*(I){try{return{fulfilled:!0,value:yield I}}catch(R){return{fulfilled:!1,reason:R}}});return function(I){return g.apply(this,arguments)}}()))}(Pn);q.ports[0].postMessage({status:"done",eventId:oe,eventType:Ge,response:qn})})()}_subscribe(I,R){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[I]||(this.handlersMap[I]=new Set),this.handlersMap[I].add(R)}_unsubscribe(I,R){this.handlersMap[I]&&R&&this.handlersMap[I].delete(R),(!R||0===this.handlersMap[I].size)&&delete this.handlersMap[I],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return S.receivers=[],S})();function Ta(S="",g=10){let I="";for(let R=0;R<g;R++)I+=Math.floor(10*Math.random());return S+I}class Ml{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,I,R=50){var q=this;return(0,C.Z)(function*(){const oe=typeof MessageChannel<"u"?new MessageChannel:null;if(!oe)throw new Error("connection_unavailable");let Ge,dt;return new Promise((on,Pn)=>{const qn=Ta("",20);oe.port1.start();const Cr=setTimeout(()=>{Pn(new Error("unsupported_event"))},R);dt={messageChannel:oe,onMessage(fs){const va=fs;if(va.data.eventId===qn)switch(va.data.status){case"ack":clearTimeout(Cr),Ge=setTimeout(()=>{Pn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ge),on(va.data.response);break;default:clearTimeout(Cr),clearTimeout(Ge),Pn(new Error("invalid_response"))}}},q.handlers.add(dt),oe.port1.addEventListener("message",dt.onMessage),q.target.postMessage({eventType:g,eventId:qn,data:I},[oe.port2])}).finally(()=>{dt&&q.removeMessageHandler(dt)})})()}}function qi(){return window}function Rl(){return typeof qi().WorkerGlobalScope<"u"&&"function"==typeof qi().importScripts}function Da(){return(Da=(0,C.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Yn="firebaseLocalStorageDb",ss=1,kr="firebaseLocalStorage",iu="fbase_key";class Di{constructor(g){this.request=g}toPromise(){return new Promise((g,I)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{I(this.request.error)})})}}function gn(S,g){return S.transaction([kr],g?"readwrite":"readonly").objectStore(kr)}function Pl(){const S=indexedDB.open(Yn,ss);return new Promise((g,I)=>{S.addEventListener("error",()=>{I(S.error)}),S.addEventListener("upgradeneeded",()=>{const R=S.result;try{R.createObjectStore(kr,{keyPath:iu})}catch(q){I(q)}}),S.addEventListener("success",(0,C.Z)(function*(){const R=S.result;R.objectStoreNames.contains(kr)?g(R):(R.close(),yield function pa(){const S=indexedDB.deleteDatabase(Yn);return new Di(S).toPromise()}(),g(yield Pl()))}))})}function Sa(S,g,I){return wu.apply(this,arguments)}function wu(){return(wu=(0,C.Z)(function*(S,g,I){const R=gn(S,!0).put({[iu]:g,value:I});return new Di(R).toPromise()})).apply(this,arguments)}function su(){return(su=(0,C.Z)(function*(S,g){const I=gn(S,!1).get(g),R=yield new Di(I).toPromise();return void 0===R?null:R.value})).apply(this,arguments)}function Qi(S,g){const I=gn(S,!0).delete(g);return new Di(I).toPromise()}const _o=(()=>{class S{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var I=this;return(0,C.Z)(function*(){return I.db||(I.db=yield Pl()),I.db})()}_withRetries(I){var R=this;return(0,C.Z)(function*(){let q=0;for(;;)try{const oe=yield R._openDb();return yield I(oe)}catch(oe){if(q++>3)throw oe;R.db&&(R.db.close(),R.db=void 0)}})()}initializeServiceWorkerMessaging(){var I=this;return(0,C.Z)(function*(){return Rl()?I.initializeReceiver():I.initializeSender()})()}initializeReceiver(){var I=this;return(0,C.Z)(function*(){I.receiver=ju._getInstance(function Fi(){return Rl()?self:null}()),I.receiver._subscribe("keyChanged",function(){var R=(0,C.Z)(function*(q,oe){return{keyProcessed:(yield I._poll()).includes(oe.key)}});return function(q,oe){return R.apply(this,arguments)}}()),I.receiver._subscribe("ping",function(){var R=(0,C.Z)(function*(q,oe){return["keyChanged"]});return function(q,oe){return R.apply(this,arguments)}}())})()}initializeSender(){var I=this;return(0,C.Z)(function*(){var R,q;if(I.activeServiceWorker=yield function Ir(){return Da.apply(this,arguments)}(),!I.activeServiceWorker)return;I.sender=new Ml(I.activeServiceWorker);const oe=yield I.sender._send("ping",{},800);oe&&null!==(R=oe[0])&&void 0!==R&&R.fulfilled&&null!==(q=oe[0])&&void 0!==q&&q.value.includes("keyChanged")&&(I.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(I){var R=this;return(0,C.Z)(function*(){if(R.sender&&R.activeServiceWorker&&function Ql(){var S;return(null===(S=navigator?.serviceWorker)||void 0===S?void 0:S.controller)||null}()===R.activeServiceWorker)try{yield R.sender._send("keyChanged",{key:I},R.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.Z)(function*(){try{if(!indexedDB)return!1;const I=yield Pl();return yield Sa(I,Es,"1"),yield Qi(I,Es),!0}catch{}return!1})()}_withPendingWrite(I){var R=this;return(0,C.Z)(function*(){R.pendingWrites++;try{yield I()}finally{R.pendingWrites--}})()}_set(I,R){var q=this;return(0,C.Z)(function*(){return q._withPendingWrite((0,C.Z)(function*(){return yield q._withRetries(oe=>Sa(oe,I,R)),q.localCache[I]=R,q.notifyServiceWorker(I)}))})()}_get(I){var R=this;return(0,C.Z)(function*(){const q=yield R._withRetries(oe=>function Iu(S,g){return su.apply(this,arguments)}(oe,I));return R.localCache[I]=q,q})()}_remove(I){var R=this;return(0,C.Z)(function*(){return R._withPendingWrite((0,C.Z)(function*(){return yield R._withRetries(q=>Qi(q,I)),delete R.localCache[I],R.notifyServiceWorker(I)}))})()}_poll(){var I=this;return(0,C.Z)(function*(){const R=yield I._withRetries(Ge=>{const dt=gn(Ge,!1).getAll();return new Di(dt).toPromise()});if(!R)return[];if(0!==I.pendingWrites)return[];const q=[],oe=new Set;for(const{fbase_key:Ge,value:dt}of R)oe.add(Ge),JSON.stringify(I.localCache[Ge])!==JSON.stringify(dt)&&(I.notifyListeners(Ge,dt),q.push(Ge));for(const Ge of Object.keys(I.localCache))I.localCache[Ge]&&!oe.has(Ge)&&(I.notifyListeners(Ge,null),q.push(Ge));return q})()}notifyListeners(I,R){this.localCache[I]=R;const q=this.listeners[I];if(q)for(const oe of Array.from(q))oe(R)}startPolling(){var I=this;this.stopPolling(),this.pollTimer=setInterval((0,C.Z)(function*(){return I._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(I,R){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[I]||(this.listeners[I]=new Set,this._get(I)),this.listeners[I].add(R)}_removeListener(I,R){this.listeners[I]&&(this.listeners[I].delete(R),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return S.type="LOCAL",S})(),au=1e12;class Oo{constructor(g){this.auth=g,this.counter=au,this._widgets=new Map}render(g,I){const R=this.counter;return this._widgets.set(R,new hc(g,this.auth.name,I||{})),this.counter++,R}reset(g){var I;const R=g||au;null===(I=this._widgets.get(R))||void 0===I||I.delete(),this._widgets.delete(R)}getResponse(g){var I;return(null===(I=this._widgets.get(g||au))||void 0===I?void 0:I.getResponse())||""}execute(g){var I=this;return(0,C.Z)(function*(){var R;return null===(R=I._widgets.get(g||au))||void 0===R||R.execute(),""})()}}class hc{constructor(g,I,R){this.params=R,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const q="string"==typeof g?document.getElementById(g):g;je(q,"argument-error",{appName:I}),this.container=q,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ga(S){const g=[],I="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<S;R++)g.push(I.charAt(Math.floor(Math.random()*I.length)));return g.join("")}(50);const{callback:g,"expired-callback":I}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,I)try{I()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ko=Ar("rcb"),fd=new lt(3e4,6e4);class Hu{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=qi().grecaptcha)||void 0===g||!g.render)}load(g,I=""){return je(function hl(S){return S.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(S)}(I),g,"argument-error"),this.shouldResolveImmediately(I)&&it(qi().grecaptcha)?Promise.resolve(qi().grecaptcha):new Promise((R,q)=>{const oe=qi().setTimeout(()=>{q(Je(g,"network-request-failed"))},fd.get());qi()[ko]=()=>{qi().clearTimeout(oe),delete qi()[ko];const dt=qi().grecaptcha;if(!dt||!it(dt))return void q(Je(g,"internal-error"));const on=dt.render;dt.render=(Pn,qn)=>{const Cr=on(Pn,qn);return this.counter++,Cr},this.hostLanguage=I,R(dt)},Fn(`https://www.google.com/recaptcha/api.js??${(0,p.xO)({onload:ko,render:"explicit",hl:I})}`).catch(()=>{clearTimeout(oe),q(Je(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var I;return!(null===(I=qi().grecaptcha)||void 0===I||!I.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class pd{load(g){return(0,C.Z)(function*(){return new Oo(g)})()}clearedOneInstance(){}}const ms="recaptcha",os={theme:"light",type:"image"};class ma{constructor(g,I=Object.assign({},os),R){this.parameters=I,this.type=ms,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=In(R),this.isInvisible="invisible"===this.parameters.size,je(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const q="string"==typeof g?document.getElementById(g):g;je(q,this.auth,"argument-error"),this.container=q,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pd:new Hu,this.validateStartingState()}verify(){var g=this;return(0,C.Z)(function*(){g.assertNotDestroyed();const I=yield g.render(),R=g.getAssertedRecaptcha();return R.getResponse(I)||new Promise(oe=>{const Ge=dt=>{dt&&(g.tokenChangeListeners.delete(Ge),oe(dt))};g.tokenChangeListeners.add(Ge),g.isInvisible&&R.execute(I)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){je(!this.parameters.sitekey,this.auth,"argument-error"),je(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),je(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return I=>{if(this.tokenChangeListeners.forEach(R=>R(I)),"function"==typeof g)g(I);else if("string"==typeof g){const R=qi()[g];"function"==typeof R&&R(I)}}}assertNotDestroyed(){je(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,C.Z)(function*(){if(yield g.init(),!g.widgetId){let I=g.container;if(!g.isInvisible){const R=document.createElement("div");I.appendChild(R),I=R}g.widgetId=g.getAssertedRecaptcha().render(I,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,C.Z)(function*(){je(Kt()&&!Rl(),g.auth,"internal-error"),yield function zu(){let S=null;return new Promise(g=>{"complete"!==document.readyState?(S=()=>g(),window.addEventListener("load",S)):g()}).catch(g=>{throw S&&window.removeEventListener("load",S),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const I=yield function pe(S){return V.apply(this,arguments)}(g.auth);je(I,g.auth,"internal-error"),g.parameters.sitekey=I})()}getAssertedRecaptcha(){return je(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class hs{constructor(g,I){this.verificationId=g,this.onConfirmation=I}confirm(g){const I=ts._fromVerification(this.verificationId,g);return this.onConfirmation(I)}}function Ji(S,g,I){return fl.apply(this,arguments)}function fl(){return(fl=(0,C.Z)(function*(S,g,I){const R=In(S),q=yield lu(R,g,(0,p.m9)(I));return new hs(q,oe=>Wn(R,oe))})).apply(this,arguments)}function uu(S,g,I){return es.apply(this,arguments)}function es(){return(es=(0,C.Z)(function*(S,g,I){const R=(0,p.m9)(S);yield rs(!1,R,"phone");const q=yield lu(R.auth,g,(0,p.m9)(I));return new hs(q,oe=>Ao(R,oe))})).apply(this,arguments)}function bu(S,g,I){return za.apply(this,arguments)}function za(){return(za=(0,C.Z)(function*(S,g,I){const R=(0,p.m9)(S),q=yield lu(R.auth,g,(0,p.m9)(I));return new hs(q,oe=>aa(R,oe))})).apply(this,arguments)}function lu(S,g,I){return Gu.apply(this,arguments)}function Gu(){return Gu=(0,C.Z)(function*(S,g,I){var R;const q=yield I.verify();try{let oe;if(je("string"==typeof q,S,"argument-error"),je(I.type===ms,S,"argument-error"),oe="string"==typeof g?{phoneNumber:g}:g,"session"in oe){const Ge=oe.session;if("phoneNumber"in oe)return je("enroll"===Ge.type,S,"internal-error"),(yield function Ri(S,g){return rn(S,"POST","/v2/accounts/mfaEnrollment:start",Ct(S,g))}(S,{idToken:Ge.credential,phoneEnrollmentInfo:{phoneNumber:oe.phoneNumber,recaptchaToken:q}})).phoneSessionInfo.sessionInfo;{je("signin"===Ge.type,S,"internal-error");const dt=(null===(R=oe.multiFactorHint)||void 0===R?void 0:R.uid)||oe.multiFactorUid;return je(dt,S,"missing-multi-factor-info"),(yield function ro(S,g){return rn(S,"POST","/v2/accounts/mfaSignIn:start",Ct(S,g))}(S,{mfaPendingCredential:Ge.credential,mfaEnrollmentId:dt,phoneSignInInfo:{recaptchaToken:q}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ge}=yield function ys(S,g){return cs.apply(this,arguments)}(S,{phoneNumber:oe.phoneNumber,recaptchaToken:q});return Ge}}finally{I._reset()}}),Gu.apply(this,arguments)}function yo(S,g){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,C.Z)(function*(S,g){yield ii((0,p.m9)(S),g)})).apply(this,arguments)}let D=(()=>{class S{constructor(I){this.providerId=S.PROVIDER_ID,this.auth=In(I)}verifyPhoneNumber(I,R){return lu(this.auth,I,(0,p.m9)(R))}static credential(I,R){return ts._fromVerification(I,R)}static credentialFromResult(I){return S.credentialFromTaggedObject(I)}static credentialFromError(I){return S.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{phoneNumber:R,temporaryProof:q}=I;return R&&q?ts._fromTokenResponse(R,q):null}}return S.PROVIDER_ID="phone",S.PHONE_SIGN_IN_METHOD="phone",S})();function A(S,g){return g?De(g):(je(S._popupRedirectResolver,S,"argument-error"),S._popupRedirectResolver)}class b extends Z{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Br(g,this._buildIdpRequest())}_linkToIdToken(g,I){return Br(g,this._buildIdpRequest(I))}_getReauthenticationResolver(g){return Br(g,this._buildIdpRequest())}_buildIdpRequest(g){const I={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(I.idToken=g),I}}function O(S){return La(S.auth,new b(S),S.bypassAuthState)}function $(S){const{auth:g,user:I}=S;return je(I,g,"internal-error"),sa(I,new b(S),S.bypassAuthState)}function J(S){return le.apply(this,arguments)}function le(){return(le=(0,C.Z)(function*(S){const{auth:g,user:I}=S;return je(I,g,"internal-error"),ii(I,new b(S),S.bypassAuthState)})).apply(this,arguments)}class ze{constructor(g,I,R,q,oe=!1){this.auth=g,this.resolver=R,this.user=q,this.bypassAuthState=oe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(I)?I:[I]}execute(){var g=this;return new Promise(function(){var I=(0,C.Z)(function*(R,q){g.pendingPromise={resolve:R,reject:q};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(oe){g.reject(oe)}});return function(R,q){return I.apply(this,arguments)}}())}onAuthEvent(g){var I=this;return(0,C.Z)(function*(){const{urlResponse:R,sessionId:q,postBody:oe,tenantId:Ge,error:dt,type:on}=g;if(dt)return void I.reject(dt);const Pn={auth:I.auth,requestUri:R,sessionId:q,tenantId:Ge||void 0,postBody:oe||void 0,user:I.user,bypassAuthState:I.bypassAuthState};try{I.resolve(yield I.getIdpTask(on)(Pn))}catch(qn){I.reject(qn)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return O;case"linkViaPopup":case"linkViaRedirect":return J;case"reauthViaPopup":case"reauthViaRedirect":return $;default:Te(this.auth,"internal-error")}}resolve(g){ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const At=new lt(2e3,1e4);function Cn(S,g,I){return En.apply(this,arguments)}function En(){return(En=(0,C.Z)(function*(S,g,I){const R=In(S);$t(S,g,Yi);const q=A(R,I);return new Lo(R,"signInViaPopup",g,q).executeNotNull()})).apply(this,arguments)}function Jr(S,g,I){return Si.apply(this,arguments)}function Si(){return(Si=(0,C.Z)(function*(S,g,I){const R=(0,p.m9)(S);$t(R.auth,g,Yi);const q=A(R.auth,I);return new Lo(R.auth,"reauthViaPopup",g,q,R).executeNotNull()})).apply(this,arguments)}function Fo(S,g,I){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,C.Z)(function*(S,g,I){const R=(0,p.m9)(S);$t(R.auth,g,Yi);const q=A(R.auth,I);return new Lo(R.auth,"linkViaPopup",g,q,R).executeNotNull()})).apply(this,arguments)}let Lo=(()=>{class S extends ze{constructor(I,R,q,oe,Ge){super(I,R,oe,Ge),this.provider=q,this.authWindow=null,this.pollId=null,S.currentPopupAction&&S.currentPopupAction.cancel(),S.currentPopupAction=this}executeNotNull(){var I=this;return(0,C.Z)(function*(){const R=yield I.execute();return je(R,I.auth,"internal-error"),R})()}onExecution(){var I=this;return(0,C.Z)(function*(){ln(1===I.filter.length,"Popup operations only handle one event");const R=Ta();I.authWindow=yield I.resolver._openPopup(I.auth,I.provider,I.filter[0],R),I.authWindow.associatedEvent=R,I.resolver._originValidation(I.auth).catch(q=>{I.reject(q)}),I.resolver._isIframeWebStorageSupported(I.auth,q=>{q||I.reject(Je(I.auth,"web-storage-unsupported"))}),I.pollUserCancellation()})()}get eventId(){var I;return(null===(I=this.authWindow)||void 0===I?void 0:I.associatedEvent)||null}cancel(){this.reject(Je(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,S.currentPopupAction=null}pollUserCancellation(){const I=()=>{var R,q;this.pollId=null!==(q=null===(R=this.authWindow)||void 0===R?void 0:R.window)&&void 0!==q&&q.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Je(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(I,At.get())};I()}}return S.currentPopupAction=null,S})();const as="pendingRedirect",Ko=new Map;class $r extends ze{constructor(g,I,R=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],I,void 0,R),this.eventId=null}execute(){var g=()=>super.execute,I=this;return(0,C.Z)(function*(){let R=Ko.get(I.auth._key());if(!R){try{const oe=(yield function Yo(S,g){return Wa.apply(this,arguments)}(I.resolver,I.auth))?yield g().call(I):null;R=()=>Promise.resolve(oe)}catch(q){R=()=>Promise.reject(q)}Ko.set(I.auth._key(),R)}return I.bypassAuthState||Ko.set(I.auth._key(),()=>Promise.resolve(null)),R()})()}onAuthEvent(g){var I=()=>super.onAuthEvent,R=this;return(0,C.Z)(function*(){if("signInViaRedirect"===g.type)return I().call(R,g);if("unknown"!==g.type){if(g.eventId){const q=yield R.auth._redirectUserForId(g.eventId);if(q)return R.user=q,I().call(R,g);R.resolve(null)}}else R.resolve(null)})()}onExecution(){return(0,C.Z)(function*(){})()}cleanUp(){}}function Wa(){return(Wa=(0,C.Z)(function*(S,g){const I=Wu(g),R=$i(S);if(!(yield R._isAvailable()))return!1;const q="true"===(yield R._get(I));return yield R._remove(I),q})).apply(this,arguments)}function pi(S,g){return ci.apply(this,arguments)}function ci(){return(ci=(0,C.Z)(function*(S,g){return $i(S)._set(Wu(g),"true")})).apply(this,arguments)}function cu(){Ko.clear()}function ws(S,g){Ko.set(S._key(),g)}function $i(S){return De(S._redirectPersistence)}function Wu(S){return ct(as,S.config.apiKey,S.name)}function qa(S,g,I){return function vo(S,g,I){return Nl.apply(this,arguments)}(S,g,I)}function Nl(){return(Nl=(0,C.Z)(function*(S,g,I){const R=In(S);$t(S,g,Yi),yield R._initializationPromise;const q=A(R,I);return yield pi(q,R),q._openRedirect(R,g,"signInViaRedirect")})).apply(this,arguments)}function Tu(S,g,I){return function Ai(S,g,I){return Aa.apply(this,arguments)}(S,g,I)}function Aa(){return(Aa=(0,C.Z)(function*(S,g,I){const R=(0,p.m9)(S);$t(R.auth,g,Yi),yield R.auth._initializationPromise;const q=A(R.auth,I);yield pi(q,R.auth);const oe=yield _a(R);return q._openRedirect(R.auth,g,"reauthViaRedirect",oe)})).apply(this,arguments)}function Za(S,g,I){return function Xi(S,g,I){return Uo.apply(this,arguments)}(S,g,I)}function Uo(){return(Uo=(0,C.Z)(function*(S,g,I){const R=(0,p.m9)(S);$t(R.auth,g,Yi),yield R.auth._initializationPromise;const q=A(R.auth,I);yield rs(!1,R,g.providerId),yield pi(q,R.auth);const oe=yield _a(R);return q._openRedirect(R.auth,g,"linkViaRedirect",oe)})).apply(this,arguments)}function Du(S,g){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,C.Z)(function*(S,g){return yield In(S)._initializationPromise,Su(S,g,!1)})).apply(this,arguments)}function Su(S,g){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,C.Z)(function*(S,g,I=!1){const R=In(S),q=A(R,g),Ge=yield new $r(R,q,I).execute();return Ge&&!I&&(delete Ge.user._redirectEventId,yield R._persistUserIfCurrent(Ge.user),yield R._setRedirectUser(null,g)),Ge})).apply(this,arguments)}function _a(S){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,C.Z)(function*(S){const g=Ta(`${S.uid}:::`);return S._redirectEventId=g,yield S.auth._setRedirectUser(S),yield S.auth._persistUserIfCurrent(S),g})).apply(this,arguments)}class Ya{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let I=!1;return this.consumers.forEach(R=>{this.isEventForConsumer(g,R)&&(I=!0,this.sendToConsumer(g,R),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Au(S){switch(S.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return du(S);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,I||(this.queuedRedirectEvent=g,I=!0)),I}sendToConsumer(g,I){var R;if(g.error&&!du(g)){const q=(null===(R=g.error.code)||void 0===R?void 0:R.split("auth/")[1])||"internal-error";I.onError(Je(this.auth,q))}else I.onAuthEvent(g)}isEventForConsumer(g,I){const R=null===I.eventId||!!g.eventId&&g.eventId===I.eventId;return I.filter.includes(g.type)&&R}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Li(g))}saveEventToCache(g){this.cachedEventUids.add(Li(g)),this.lastProcessedEventTime=Date.now()}}function Li(S){return[S.type,S.eventId,S.sessionId,S.tenantId].filter(g=>g).join("-")}function du({type:S,error:g}){return"unknown"===S&&"auth/no-auth-event"===g?.code}function Xl(S){return xu.apply(this,arguments)}function xu(){return(xu=(0,C.Z)(function*(S,g={}){return rn(S,"GET","/v1/projects",g)})).apply(this,arguments)}const io=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xa=/^https?/;function Ja(){return(Ja=(0,C.Z)(function*(S){if(S.config.emulator)return;const{authorizedDomains:g}=yield Xl(S);for(const I of g)try{if(pl(I))return}catch{}Te(S,"unauthorized-domain")})).apply(this,arguments)}function pl(S){const g=jt(),{protocol:I,hostname:R}=new URL(g);if(S.startsWith("chrome-extension://")){const Ge=new URL(S);return""===Ge.hostname&&""===R?"chrome-extension:"===I&&S.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===I&&Ge.hostname===R}if(!xa.test(I))return!1;if(io.test(S))return R===S;const q=S.replace(/\./g,"\\.");return new RegExp("^(.+\\."+q+"|"+q+")$","i").test(R)}const Mu=new lt(3e4,6e4);function Zu(){const S=qi().___jsl;if(S?.H)for(const g of Object.keys(S.H))if(S.H[g].r=S.H[g].r||[],S.H[g].L=S.H[g].L||[],S.H[g].r=[...S.H[g].L],S.CP)for(let I=0;I<S.CP.length;I++)S.CP[I]=null}let Vo=null;const Ol=new lt(5e3,15e3),Nc="__/auth/iframe",fc="emulator/auth/iframe",gd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function md(S){const g=S.config;je(g.authDomain,S,"auth-domain-config-required");const I=g.emulator?bt(g,fc):`https://${S.config.authDomain}/${Nc}`,R={apiKey:g.apiKey,appName:S.name,v:K.SDK_VERSION},q=Zs.get(S.config.apiHost);q&&(R.eid=q);const oe=S._getFrameworks();return oe.length&&(R.fw=oe.join(",")),`${I}?${(0,p.xO)(R).slice(1)}`}function hu(){return hu=(0,C.Z)(function*(S){const g=yield function Pc(S){return Vo=Vo||function qs(S){return new Promise((g,I)=>{var R,q,oe;function Ge(){Zu(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Zu(),I(Je(S,"network-request-failed"))},timeout:Mu.get()})}if(null!==(q=null===(R=qi().gapi)||void 0===R?void 0:R.iframes)&&void 0!==q&&q.Iframe)g(gapi.iframes.getContext());else{if(null===(oe=qi().gapi)||void 0===oe||!oe.load){const dt=Ar("iframefcb");return qi()[dt]=()=>{gapi.load?Ge():I(Je(S,"network-request-failed"))},Fn(`https://apis.google.com/js/api.js?onload=${dt}`).catch(on=>I(on))}Ge()}}).catch(g=>{throw Vo=null,g})}(S),Vo}(S),I=qi().gapi;return je(I,S,"internal-error"),g.open({where:document.body,url:md(S),messageHandlersFilter:I.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gd,dontclear:!0},R=>new Promise(function(){var q=(0,C.Z)(function*(oe,Ge){yield R.restyle({setHideOnLeave:!1});const dt=Je(S,"network-request-failed"),on=qi().setTimeout(()=>{Ge(dt)},Ol.get());function Pn(){qi().clearTimeout(on),oe(R)}R.ping(Pn).then(Pn,()=>{Ge(dt)})});return function(oe,Ge){return q.apply(this,arguments)}}()))}),hu.apply(this,arguments)}const pc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},so=500,fu=600,Ku="_blank",Ma="http://localhost";class _r{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Yu="__/auth/handler",Xo="emulator/auth/handler",Qu=encodeURIComponent("fac");function Ru(S,g,I,R,q,oe){return gl.apply(this,arguments)}function gl(){return(gl=(0,C.Z)(function*(S,g,I,R,q,oe){je(S.config.authDomain,S,"auth-domain-config-required"),je(S.config.apiKey,S,"invalid-api-key");const Ge={apiKey:S.config.apiKey,appName:S.name,authType:I,redirectUrl:R,v:K.SDK_VERSION,eventId:q};if(g instanceof Yi){g.setDefaultLanguage(S.languageCode),Ge.providerId=g.providerId||"",(0,p.xb)(g.getCustomParameters())||(Ge.customParameters=JSON.stringify(g.getCustomParameters()));for(const[qn,Cr]of Object.entries(oe||{}))Ge[qn]=Cr}if(g instanceof jo){const qn=g.getScopes().filter(Cr=>""!==Cr);qn.length>0&&(Ge.scopes=qn.join(","))}S.tenantId&&(Ge.tid=S.tenantId);const dt=Ge;for(const qn of Object.keys(dt))void 0===dt[qn]&&delete dt[qn];const on=yield S._getAppCheckToken(),Pn=on?`#${Qu}=${encodeURIComponent(on)}`:"";return`${function kl({config:S}){return S.emulator?bt(S,Xo):`https://${S.authDomain}/${Yu}`}(S)}?${(0,p.xO)(dt).slice(1)}${Pn}`})).apply(this,arguments)}const Pu="webStorageSupport",Fl=class ml{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mo,this._completeRedirectFn=Su,this._overrideRedirectResult=ws}_openPopup(g,I,R,q){var oe=this;return(0,C.Z)(function*(){var Ge;ln(null===(Ge=oe.eventManagers[g._key()])||void 0===Ge?void 0:Ge.manager,"_initialize() not called before _openPopup()");const dt=yield Ru(g,I,R,jt(),q);return function oi(S,g,I,R=so,q=fu){const oe=Math.max((window.screen.availHeight-q)/2,0).toString(),Ge=Math.max((window.screen.availWidth-R)/2,0).toString();let dt="";const on=Object.assign(Object.assign({},pc),{width:R.toString(),height:q.toString(),top:oe,left:Ge}),Pn=(0,p.z$)().toLowerCase();I&&(dt=Y(Pn)?Ku:I),ee(Pn)&&(g=g||Ma,on.scrollbars="yes");const qn=Object.entries(on).reduce((fs,[va,_c])=>`${fs}${va}=${_c},`,"");if(function Et(S=(0,p.z$)()){var g;return ke(S)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Pn)&&"_self"!==dt)return function Bo(S,g){const I=document.createElement("a");I.href=S,I.target=g;const R=document.createEvent("MouseEvent");R.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),I.dispatchEvent(R)}(g||"",dt),new _r(null);const Cr=window.open(g||"",dt,qn);je(Cr,S,"popup-blocked");try{Cr.focus()}catch{}return new _r(Cr)}(g,dt,Ta())})()}_openRedirect(g,I,R,q){var oe=this;return(0,C.Z)(function*(){return yield oe._originValidation(g),function Yl(S){qi().location.href=S}(yield Ru(g,I,R,jt(),q)),new Promise(()=>{})})()}_initialize(g){const I=g._key();if(this.eventManagers[I]){const{manager:q,promise:oe}=this.eventManagers[I];return q?Promise.resolve(q):(ln(oe,"If manager is not set, promise should be"),oe)}const R=this.initAndGetManager(g);return this.eventManagers[I]={promise:R},R.catch(()=>{delete this.eventManagers[I]}),R}initAndGetManager(g){var I=this;return(0,C.Z)(function*(){const R=yield function Zi(S){return hu.apply(this,arguments)}(g),q=new Ya(g);return R.register("authEvent",oe=>(je(oe?.authEvent,g,"invalid-auth-event"),{status:q.onEvent(oe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),I.eventManagers[g._key()]={manager:q},I.iframes[g._key()]=R,q})()}_isIframeWebStorageSupported(g,I){this.iframes[g._key()].send(Pu,{type:Pu},q=>{var oe;const Ge=null===(oe=q?.[0])||void 0===oe?void 0:oe[Pu];void 0!==Ge&&I(!!Ge),Te(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const I=g._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function Qa(S){return Ja.apply(this,arguments)}(g)),this.originValidationPromises[I]}get _shouldInitProactively(){return mt()||re()||ke()}};class ec{constructor(g){this.factorId=g}_process(g,I,R){switch(I.type){case"enroll":return this._finalizeEnroll(g,I.credential,R);case"signin":return this._finalizeSignIn(g,I.credential);default:return xt("unexpected MultiFactorSessionType")}}}class pu extends ec{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new pu(g)}_finalizeEnroll(g,I,R){return function mi(S,g){return rn(S,"POST","/v2/accounts/mfaEnrollment:finalize",Ct(S,g))}(g,{idToken:I,displayName:R,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,I){return function No(S,g){return rn(S,"POST","/v2/accounts/mfaSignIn:finalize",Ct(S,g))}(g,{mfaPendingCredential:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ju=(()=>{class S{constructor(){}static assertion(I){return pu._fromCredential(I)}}return S.FACTOR_ID="phone",S})();var ea="@firebase/auth";class ta{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var I=this;return(0,C.Z)(function*(){return I.assertAuthConfigured(),yield I.auth._initializationPromise,I.auth.currentUser?{accessToken:yield I.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const I=this.auth.onIdTokenChanged(R=>{g(R?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,I),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const I=this.internalListeners.get(g);I&&(this.internalListeners.delete(g),I(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Xu=(0,p.Pz)("authIdTokenMaxAge")||300;let ls=null;const Pa=S=>function(){var g=(0,C.Z)(function*(I){const R=I&&(yield I.getIdTokenResult()),q=R&&((new Date).getTime()-Date.parse(R.issuedAtTime))/1e3;if(q&&q>Xu)return;const oe=R?.token;ls!==oe&&(ls=oe,yield fetch(S,{method:oe?"POST":"DELETE",headers:oe?{Authorization:`Bearer ${oe}`}:{}}))});return function(I){return g.apply(this,arguments)}}();function yl(S=(0,K.getApp)()){const g=(0,K._getProvider)(S,"auth");if(g.isInitialized())return g.getImmediate();const I=function Xn(S,g){const I=(0,K._getProvider)(S,"auth");if(I.isInitialized()){const q=I.getImmediate(),oe=I.getOptions();if((0,p.vZ)(oe,g??{}))return q;Te(q,"already-initialized")}return I.initialize({options:g})}(S,{popupRedirectResolver:Fl,persistence:[_o,Bu,mo]}),R=(0,p.Pz)("authTokenSyncURL");if(R){const oe=Pa(R);(function L(S,g,I){(0,p.m9)(S).beforeAuthStateChanged(g,I)})(I,oe,()=>oe(I.currentUser)),function G(S,g,I,R){(0,p.m9)(S).onIdTokenChanged(g,I,R)}(I,Ge=>oe(Ge))}const q=(0,p.q4)("auth");return q&&fe(I,`http://${q}`),I}!function Ra(S){(0,K._registerComponent)(new Ne.wA("auth",(g,{options:I})=>{const R=g.getProvider("app").getImmediate(),q=g.getProvider("heartbeat"),oe=g.getProvider("app-check-internal"),{apiKey:Ge,authDomain:dt}=R.options;je(Ge&&!Ge.includes(":"),"invalid-api-key",{appName:R.name}),je(!dt?.includes(":"),"argument-error",{appName:R.name});const on={apiKey:Ge,authDomain:dt,clientPlatform:S,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wn(S)},Pn=new Tn(R,q,oe,on);return function Zn(S,g){const I=g?.persistence||[],R=(Array.isArray(I)?I:[I]).map(De);g?.errorMap&&S._updateErrorMap(g.errorMap),S._initializeWithPersistence(R,g?.popupRedirectResolver)}(Pn,I),Pn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,I,R)=>{g.getProvider("auth-internal").initialize()})),(0,K._registerComponent)(new Ne.wA("auth-internal",g=>{const I=In(g.getProvider("auth").getImmediate());return new ta(I)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,K.registerVersion)(ea,"0.23.1",function us(S){switch(S){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(S)),(0,K.registerVersion)(ea,"0.23.1","esm2017")}("Browser")},2810:(mn,ot,j)=>{j.d(ot,{u7:()=>Pp,Jj:()=>xc,IX:()=>Py,my:()=>Io,xU:()=>Bd,Lz:()=>Mc,WA:()=>zt,F8:()=>gf,$q:()=>ld,W:()=>cd,EK:()=>Fi,PU:()=>F_,l7:()=>_a,Ky:()=>gn,Xb:()=>Di,Cf:()=>bi,K9:()=>Es,Me:()=>Tu,yq:()=>wi,Wi:()=>i_,ET:()=>P_,Ab:()=>ov,vr:()=>U_,Fc:()=>ky,hJ:()=>uc,B$:()=>Ry,at:()=>Jg,oe:()=>Yy,AK:()=>L_,TF:()=>wp,JU:()=>o_,ST:()=>Oy,fH:()=>u_,Ix:()=>d_,Wu:()=>Rp,Lx:()=>Mp,qY:()=>Ys,GL:()=>bf,QT:()=>Wy,kl:()=>Cf,Xk:()=>qy,PL:()=>Zy,UQ:()=>Ky,zN:()=>x_,ad:()=>Ny,nP:()=>V_,b9:()=>Pr,vh:()=>jy,Pb:()=>h_,L$:()=>f_,cf:()=>Qy,sc:()=>Jy,Xo:()=>b_,IO:()=>$y,iE:()=>al,Eo:()=>lc,i3:()=>iv,Bt:()=>sv,pl:()=>M_,Ub:()=>mi,qK:()=>A_,TQ:()=>Ih,e0:()=>Hy,r7:()=>R_,Mx:()=>c_,ar:()=>wh});var be,C=j(5861),p=j(6881),K=j(4859),X=j(1877),Se=j(2090),Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$e={},Ze=Ze||{},de=Ne||self;function ye(){}function Me(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function tt(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var Nt="closure_uid_"+(1e9*Math.random()>>>0),Qt=0;function nt(r,e,t){return r.call.apply(r.bind,arguments)}function yt(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),r.apply(e,a)}}return function(){return r.apply(e,arguments)}}function ft(r,e,t){return(ft=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nt:yt).apply(null,arguments)}function Rt(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function Te(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,a,h){for(var y=Array(arguments.length-2),P=2;P<arguments.length;P++)y[P-2]=arguments[P];return e.prototype[a].apply(s,y)}}function Je(){this.s=this.s,this.o=this.o}Je.prototype.s=!1,Je.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ye(r){Object.prototype.hasOwnProperty.call(r,Nt)&&r[Nt]||(r[Nt]=++Qt)}(this)},Je.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $t=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function wt(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function je(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(Me(s)){const a=r.length||0,h=s.length||0;r.length=a+h;for(let y=0;y<h;y++)r[a+y]=s[y]}else r.push(s)}}function xt(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}xt.prototype.h=function(){this.defaultPrevented=!0};var ln=function(){if(!de.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{de.addEventListener("test",ye,e),de.removeEventListener("test",ye,e)}catch{}return r}();function jt(r){return/^[\s\xa0]*$/.test(r)}var Kt=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function qt(r,e){return r<e?-1:r>e?1:0}function rt(){var r=de.navigator;return r&&(r=r.userAgent)?r:""}function at(r){return-1!=rt().indexOf(r)}function lt(r){return lt[" "](r),r}function bt(r,e,t){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}lt[" "]=ye;var _n,r,Ht=at("Opera"),It=at("Trident")||at("MSIE"),Gt=at("Edge"),Ct=Gt||It,rn=at("Gecko")&&!(-1!=rt().toLowerCase().indexOf("webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),Sn=-1!=rt().toLowerCase().indexOf("webkit")&&!at("Edge");function tr(){var r=de.document;return r?r.documentMode:void 0}e:{var xn="",nr=(r=rt(),rn?/rv:([^\);]+)(\)|;)/.exec(r):Gt?/Edge\/([\d\.]+)/.exec(r):It?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Sn?/WebKit\/(\S+)/.exec(r):Ht?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(nr&&(xn=nr?nr[1]:""),It){var pr=tr();if(null!=pr&&pr>parseFloat(xn)){_n=String(pr);break e}}_n=xn}var zr={},Nr=de.document&&It&&(tr()||parseInt(_n,10))||void 0;function Sr(r,e){if(xt.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(rn){e:{try{lt(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:ui[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&Sr.$.h.call(this)}}Te(Sr,xt);var ui={2:"touch",3:"pen",4:"mouse"};Sr.prototype.h=function(){Sr.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var gr="closure_listenable_"+(1e6*Math.random()|0),cn=0;function Qn(r,e,t,s,a){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++cn,this.fa=this.ia=!1}function Kr(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function ur(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function Fr(r){const e={};for(const t in r)e[t]=r[t];return e}const Gr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function an(r,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)r[t]=s[t];for(let h=0;h<Gr.length;h++)t=Gr[h],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function dn(r){this.src=r,this.g={},this.h=0}function hn(r,e){var t=e.type;if(t in r.g){var h,s=r.g[t],a=$t(s,e);(h=0<=a)&&Array.prototype.splice.call(s,a,1),h&&(Kr(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function Yt(r,e,t,s){for(var a=0;a<r.length;++a){var h=r[a];if(!h.fa&&h.listener==e&&h.capture==!!t&&h.la==s)return a}return-1}dn.prototype.add=function(r,e,t,s,a){var h=r.toString();(r=this.g[h])||(r=this.g[h]=[],this.h++);var y=Yt(r,e,s,a);return-1<y?(e=r[y],t||(e.ia=!1)):((e=new Qn(e,this.src,h,!!s,a)).ia=t,r.push(e)),e};var lr="closure_lm_"+(1e6*Math.random()|0),yr={};function Er(r,e,t,s,a){if(s&&s.once)return Wr(r,e,t,s,a);if(Array.isArray(e)){for(var h=0;h<e.length;h++)Er(r,e[h],t,s,a);return null}return t=Jn(t),r&&r[gr]?r.O(e,t,tt(s)?!!s.capture:!!s,a):Vr(r,e,t,!1,s,a)}function Vr(r,e,t,s,a,h){if(!e)throw Error("Invalid event type");var y=tt(a)?!!a.capture:!!a,P=Hn(r);if(P||(r[lr]=P=new dn(r)),(t=P.add(e,t,s,y,h)).proxy)return t;if(s=function ri(){const e=jn;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)ln||(a=y),void 0===a&&(a=!1),r.addEventListener(e.toString(),s,a);else if(r.attachEvent)r.attachEvent(Bn(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function Wr(r,e,t,s,a){if(Array.isArray(e)){for(var h=0;h<e.length;h++)Wr(r,e[h],t,s,a);return null}return t=Jn(t),r&&r[gr]?r.P(e,t,tt(s)?!!s.capture:!!s,a):Vr(r,e,t,!0,s,a)}function Nn(r,e,t,s,a){if(Array.isArray(e))for(var h=0;h<e.length;h++)Nn(r,e[h],t,s,a);else s=tt(s)?!!s.capture:!!s,t=Jn(t),r&&r[gr]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=Yt(h=r.g[e],t,s,a))&&(Kr(h[t]),Array.prototype.splice.call(h,t,1),0==h.length&&(delete r.g[e],r.h--))):r&&(r=Hn(r))&&(e=r.g[e.toString()],r=-1,e&&(r=Yt(e,t,s,a)),(t=-1<r?e[r]:null)&&qr(t))}function qr(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[gr])hn(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(Bn(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Hn(e))?(hn(t,r),0==t.h&&(t.src=null,e[lr]=null)):Kr(r)}}}function Bn(r){return r in yr?yr[r]:yr[r]="on"+r}function jn(r,e){if(r.fa)r=!0;else{e=new Sr(e,this);var t=r.listener,s=r.la||r.src;r.ia&&qr(r),r=t.call(s,e)}return r}function Hn(r){return(r=r[lr])instanceof dn?r:null}var xr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jn(r){return"function"==typeof r?r:(r[xr]||(r[xr]=function(e){return r.handleEvent(e)}),r[xr])}function Qe(){Je.call(this),this.i=new dn(this),this.S=this,this.J=null}function De(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new xt(e,r);else if(e instanceof xt)e.target=e.target||r;else{var a=e;an(e=new xt(s,r),a)}if(a=!0,t)for(var h=t.length-1;0<=h;h--){var y=e.g=t[h];a=Pe(y,s,!0,e)&&a}if(a=Pe(y=e.g=r,s,!0,e)&&a,a=Pe(y,s,!1,e)&&a,t)for(h=0;h<t.length;h++)a=Pe(y=e.g=t[h],s,!1,e)&&a}function Pe(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,h=0;h<e.length;++h){var y=e[h];if(y&&!y.fa&&y.capture==t){var P=y.listener,B=y.la||y.src;y.ia&&hn(r.i,y),a=!1!==P.call(B,s)&&a}}return a&&!s.defaultPrevented}Te(Qe,Je),Qe.prototype[gr]=!0,Qe.prototype.removeEventListener=function(r,e,t,s){Nn(this,r,e,t,s)},Qe.prototype.N=function(){if(Qe.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)Kr(t[s]);delete r.g[e],r.h--}}this.J=null},Qe.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},Qe.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var gt=de.JSON.stringify;function ct(){var r=ue;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Ue,_e=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new ee,r=>r.reset());class ee{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function re(r){de.setTimeout(()=>{throw r},0)}function Y(r,e){Ue||function me(){var r=de.Promise.resolve(void 0);Ue=function(){r.then(ke)}}(),Ee||(Ue(),Ee=!0),ue.add(r,e)}var Ee=!1,ue=new class ge{constructor(){this.h=this.g=null}add(e,t){const s=_e.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function ke(){for(var r;r=ct();){try{r.h.call(r.g)}catch(t){re(t)}var e=_e;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}Ee=!1}function Xe(r,e){Qe.call(this),this.h=r||1,this.g=e||de,this.j=ft(this.qb,this),this.l=Date.now()}function Et(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function tn(r,e,t){if("function"==typeof r)t&&(r=ft(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=ft(r.handleEvent,r)}return 2147483647<Number(e)?-1:de.setTimeout(r,e||0)}function mt(r){r.g=tn(()=>{r.g=null,r.i&&(r.i=!1,mt(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}Te(Xe,Qe),(be=Xe.prototype).ga=!1,be.T=null,be.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),De(this,"tick"),this.ga&&(Et(this),this.start()))}},be.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},be.N=function(){Xe.$.N.call(this),Et(this),delete this.g};class Pt extends Je{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mt(this)}N(){super.N(),this.g&&(de.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wn(r){Je.call(this),this.h=r,this.g={}}Te(wn,Je);var pe=[];function V(r,e,t,s){Array.isArray(t)||(t&&(pe[0]=t.toString()),t=pe);for(var a=0;a<t.length;a++){var h=Er(e,t[a],s||r.handleEvent,!1,r.h||r);if(!h)break;r.g[h.key]=h}}function ne(r){ur(r.g,function(e,t){this.g.hasOwnProperty(t)&&qr(e)},r),r.g={}}function Fe(){this.g=!0}function Ut(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Fn(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var h=a[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var y=1;y<a.length;y++)a[y]=""}}}return gt(t)}catch{return e}}(r,t)+(s?" "+s:"")})}wn.prototype.N=function(){wn.$.N.call(this),ne(this)},wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fe.prototype.Ea=function(){this.g=!1},Fe.prototype.info=function(){};var Ar={},Mr=null;function Pi(){return Mr=Mr||new Qe}function Hi(r){xt.call(this,Ar.Ta,r)}function ei(r){const e=Pi();De(e,new Hi(e))}function Lr(r,e){xt.call(this,Ar.STAT_EVENT,r),this.stat=e}function Zt(r){const e=Pi();De(e,new Lr(e,r))}function zn(r,e){xt.call(this,Ar.Ua,r),this.size=e}function Tn(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return de.setTimeout(function(){r()},e)}Ar.Ta="serverreachability",Te(Hi,xt),Ar.STAT_EVENT="statevent",Te(Lr,xt),Ar.Ua="timingevent",Te(zn,xt);var In={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Dn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xn(){}function fe(){}Xn.prototype.h=null;var He,te={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function he(){xt.call(this,"d")}function Ie(){xt.call(this,"c")}function Z(){}function ve(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new wn(this),this.P=_t,this.V=new Xe(r=Ct?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new qe}function qe(){this.i=null,this.g="",this.h=!1}Te(he,xt),Te(Ie,xt),Te(Z,Xn),Z.prototype.g=function(){return new XMLHttpRequest},Z.prototype.i=function(){return{}},He=new Z;var _t=45e3,Xt={},$n={};function vn(r,e,t){r.L=1,r.v=ys(Yr(e)),r.s=t,r.S=!0,br(r,null)}function br(r,e){r.G=Date.now(),Ss(r),r.A=Yr(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),Zr(t.i,"t",s),r.C=0,t=r.l.I,r.h=new qe,r.g=Rs(r.l,t?e:null,!r.s),0<r.O&&(r.M=new Pt(ft(r.Pa,r,r.g),r.O)),V(r.U,r.g,"readystatechange",r.nb),e=r.I?Fr(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),ei(),function it(r,e,t,s,a,h){r.info(function(){if(r.g)if(h)for(var y="",P=h.split("&"),B=0;B<P.length;B++){var W=P[B].split("=");if(1<W.length){var ae=W[0];W=W[1];var Le=ae.split("_");y=2<=Le.length&&"type"==Le[1]?y+(ae+"=")+W+"&":y+(ae+"=redacted&")}}else y=null;else y=h;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+y})}(r.j,r.u,r.A,r.m,r.W,r.s)}function Ti(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function dr(r,e,t){let a,s=!0;for(;!r.J&&r.C<t.length;){if(a=Ni(r,t),a==$n){4==e&&(r.o=4,Zt(14),s=!1),Ut(r.j,r.m,null,"[Incomplete Response]");break}if(a==Xt){r.o=4,Zt(15),Ut(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}Ut(r.j,r.m,a,null),zi(r,a)}Ti(r)&&a!=$n&&a!=Xt&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,Zt(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ca&&(r.ca=!0,(e=r.l).g==r&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ua(e),e.L=!0,Zt(11))):(Ut(r.j,r.m,t,"[Invalid Chunked Response]"),ps(r),uo(r))}function Ni(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?$n:(t=Number(e.substring(t,s)),isNaN(t)?Xt:(s+=1)+t>e.length?$n:(e=e.substr(s,t),r.C=s+t,e))}function Ss(r){r.Y=Date.now()+r.P,Ia(r,r.P)}function Ia(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=Tn(ft(r.lb,r),e)}function Js(r){r.B&&(de.clearTimeout(r.B),r.B=null)}function uo(r){0==r.l.H||r.J||po(r.l,r)}function ps(r){Js(r);var e=r.M;e&&"function"==typeof e.ra&&e.ra(),r.M=null,Et(r.V),ne(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.ra())}function zi(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||mr(t.h,r)))if(!r.K&&mr(t.h,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;Ms(t),Dt(t)}fo(t),Zt(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.M&&0==t.A&&!t.v&&(t.v=Tn(ft(t.ib,t),6e3));if(1>=So(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Ei(t,11)}else if((r.K||t.g==r)&&Ms(t),!jt(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let W=a[e];if(t.V=W[0],W=W[1],2==t.H)if("c"==W[0]){t.J=W[1],t.oa=W[2];const ae=W[3];null!=ae&&(t.qa=ae,t.j.info("VER="+t.qa));const Le=W[4];null!=Le&&(t.Ga=Le,t.j.info("SVER="+t.Ga));const st=W[5];null!=st&&"number"==typeof st&&0<st&&(t.K=s=1.5*st,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const kt=r.g;if(kt){const fn=kt.g?kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fn){var h=s.h;h.g||-1==fn.indexOf("spdy")&&-1==fn.indexOf("quic")&&-1==fn.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Ce(h,h.h),h.h=null))}if(s.F){const An=kt.g?kt.g.getResponseHeader("X-HTTP-Session-Id"):null;An&&(s.Da=An,ir(s.G,s.F,An))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-r.G,t.j.info("Handshake RTT: "+t.S+"ms"));var y=r;if((s=t).wa=qo(s,s.I?s.oa:null,s.Y),y.K){we(s.h,y);var P=y,B=s.K;B&&P.setTimeout(B),P.B&&(Js(P),Ss(P)),s.g=y}else vi(s);0<t.i.length&&Go(t)}else"stop"!=W[0]&&"close"!=W[0]||Ei(t,7);else 3==t.H&&("stop"==W[0]||"close"==W[0]?"stop"==W[0]?Ei(t,7):zo(t):"noop"!=W[0]&&t.l&&t.l.Aa(W),t.A=0)}ei()}catch{}}function sr(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(Me(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function Gi(r){if(r.sa&&"function"==typeof r.sa)return r.sa();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(Me(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function cl(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(Me(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),a=s.length,h=0;h<a;h++)e.call(void 0,s[h],t&&t[h],r)}(be=ve.prototype).setTimeout=function(r){this.P=r},be.nb=function(r){r=r.target;const e=this.M;e&&3==Ao(r)?e.l():this.Pa(r)},be.Pa=function(r){try{if(r==this.g)e:{const ae=Ao(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ae)&&(3!=ae||Ct||this.g&&(this.h.h||this.g.ja()||oa(this.g)))){this.J||4!=ae||7==e||ei(),Js(this);var t=this.g.da();this.aa=t;t:if(Ti(this)){var s=oa(this.g);r="";var a=s.length,h=4==Ao(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),uo(this);var y="";break t}this.h.i=new de.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:h&&e==a-1});s.splice(0,a),this.h.g+=r,this.C=0,y=this.h.g}else y=this.g.ja();if(this.i=200==t,function Wt(r,e,t,s,a,h,y){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+h+" "+y})}(this.j,this.u,this.A,this.m,this.W,ae,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var P,B=this.g;if((P=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jt(P)){var W=P;break t}}W=null}if(!(t=W)){this.i=!1,this.o=3,Zt(12),ps(this),uo(this);break e}Ut(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zi(this,t)}this.S?(dr(this,ae,y),Ct&&this.i&&3==ae&&(V(this.U,this.V,"tick",this.mb),this.V.start())):(Ut(this.j,this.m,y,null),zi(this,y)),4==ae&&ps(this),this.i&&!this.J&&(4==ae?po(this.l,this):(this.i=!1,Ss(this)))}else 400==t&&0<y.indexOf("Unknown SID")?(this.o=3,Zt(12)):(this.o=0,Zt(13)),ps(this),uo(this)}}}catch{}},be.mb=function(){if(this.g){var r=Ao(this.g),e=this.g.ja();this.C<e.length&&(Js(this),dr(this,r,e),this.i&&4!=r&&Ss(this))}},be.cancel=function(){this.J=!0,ps(this)},be.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function Mn(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(ei(),Zt(17)),ps(this),this.o=2,uo(this)):Ia(this,this.Y-r)};var Hs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gs(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof gs){this.h=void 0!==e?e:r.h,Br(this,r.j),this.s=r.s,this.g=r.g,Tr(this,r.m),this.l=r.l,e=r.i;var t=new ts;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),To(this,t),this.o=r.o}else r&&(t=String(r).match(Hs))?(this.h=!!e,Br(this,t[1]||"",!0),this.s=cs(t[2]||""),this.g=cs(t[3]||"",!0),Tr(this,t[4]),this.l=cs(t[5]||"",!0),To(this,t[6]||"",!0),this.o=cs(t[7]||"")):(this.h=!!e,this.i=new ts(null,this.h))}function Yr(r){return new gs(r)}function Br(r,e,t){r.j=t?cs(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function Tr(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function To(r,e,t){e instanceof ts?(r.i=e,function Yi(r,e){e&&!r.j&&(zs(r),r.i=null,r.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(tu(this,s),Zr(this,a,t))},r)),r.j=e}(r.i,r.h)):(t||(e=Xs(e,$o)),r.i=new ts(e,r.h))}function ir(r,e,t){r.i.set(e,t)}function ys(r){return ir(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function cs(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Xs(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,Ca),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function Ca(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}gs.prototype.toString=function(){var r=[],e=this.j;e&&r.push(Xs(e,Eu,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(Xs(e,Eu,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(Xs(t,"/"==t.charAt(0)?Fa:Do,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",Xs(t,ba)),r.join("")};var Eu=/[#\/\?@]/g,Do=/[#\?:]/g,Fa=/[#\?]/g,$o=/[#\?@]/g,ba=/#/g;function ts(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function zs(r){r.g||(r.g=new Map,r.h=0,r.i&&function bo(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),a=null;if(0<=s){var h=r[t].substring(0,s);a=r[t].substring(s+1)}else h=r[t];e(h,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function tu(r,e){zs(r),e=co(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function lo(r,e){return zs(r),e=co(r,e),r.g.has(e)}function Zr(r,e,t){tu(r,e),0<t.length&&(r.i=null,r.g.set(co(r,e),wt(t)),r.h+=t.length)}function co(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function ns(r){this.l=r||As,r=de.PerformanceNavigationTiming?0<(r=de.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(de.g&&de.g.Ka&&de.g.Ka()&&de.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(be=ts.prototype).add=function(r,e){zs(this),this.i=null,r=co(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},be.forEach=function(r,e){zs(this),this.g.forEach(function(t,s){t.forEach(function(a){r.call(e,a,s,this)},this)},this)},be.sa=function(){zs(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=r[s];for(let h=0;h<a.length;h++)t.push(e[s])}return t},be.Z=function(r){zs(this);let e=[];if("string"==typeof r)lo(this,r)&&(e=e.concat(this.g.get(co(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},be.set=function(r,e){return zs(this),this.i=null,lo(this,r=co(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},be.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},be.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const h=encodeURIComponent(String(s)),y=this.Z(s);for(s=0;s<y.length;s++){var a=h;""!==y[s]&&(a+="="+encodeURIComponent(String(y[s]))),r.push(a)}}return this.i=r.join("&")};var As=10;function _i(r){return!!r.h||!!r.g&&r.g.size>=r.j}function So(r){return r.h?1:r.g?r.g.size:0}function mr(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function Ce(r,e){r.g?r.g.add(e):r.h=e}function we(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function Oe(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return wt(r.i)}function et(){}function Tt(){this.g=new et}function Jt(r,e,t){const s=t||"";try{sr(r,function(a,h){let y=a;tt(a)&&(y=gt(a)),e.push(s+h+"="+encodeURIComponent(y))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Kn(r,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function Ln(r){this.l=r.fc||null,this.j=r.ob||!1}function Un(r,e){Qe.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=cr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ns.prototype.cancel=function(){if(this.i=Oe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},et.prototype.stringify=function(r){return de.JSON.stringify(r,void 0)},et.prototype.parse=function(r){return de.JSON.parse(r,void 0)},Te(Ln,Xn),Ln.prototype.g=function(){return new Un(this.l,this.j)},Ln.prototype.i=function(r){return function(){return r}}({}),Te(Un,Qe);var cr=0;function Oi(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function ti(r){r.readyState=4,r.l=null,r.j=null,r.A=null,li(r)}function li(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(be=Un.prototype).open=function(r,e){if(this.readyState!=cr)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,li(this)},be.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||de).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},be.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ti(this)),this.readyState=cr},be.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof de.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Oi(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},be.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?ti(this):li(this),3==this.readyState&&Oi(this)}},be.Za=function(r){this.g&&(this.response=this.responseText=r,ti(this))},be.Ya=function(r){this.g&&(this.response=r,ti(this))},be.ka=function(){this.g&&ti(this)},be.setRequestHeader=function(r,e){this.v.append(r,e)},be.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},be.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(Un.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var Ho=de.JSON.parse;function ii(r){Qe.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ki,this.L=this.M=!1}Te(ii,Qe);var ki="",rs=/^https?$/i,yi=["POST","PUT"];function xs(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,La(r),Wn(r)}function La(r){r.F||(r.F=!0,De(r,"complete"),De(r,"error"))}function Ua(r){if(r.h&&typeof Ze<"u"&&(!r.C[1]||4!=Ao(r)||2!=r.da()))if(r.v&&4==Ao(r))tn(r.La,0,r);else if(De(r,"readystatechange"),4==Ao(r)){r.h=!1;try{const P=r.da();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===P){var a=String(r.I).match(Hs)[1]||null;if(!a&&de.self&&de.self.location){var h=de.self.location.protocol;a=h.substr(0,h.length-1)}s=!rs.test(a?a.toLowerCase():"")}t=s}if(t)De(r,"complete"),De(r,"success");else{r.m=6;try{var y=2<Ao(r)?r.g.statusText:""}catch{y=""}r.j=y+" ["+r.da()+"]",La(r)}}finally{Wn(r)}}}function Wn(r,e){if(r.g){ho(r);const t=r.g,s=r.C[0]?ye:null;r.g=null,r.C=null,e||De(r,"ready");try{t.onreadystatechange=s}catch{}}}function ho(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(de.clearTimeout(r.A),r.A=null)}function Ao(r){return r.g?r.g.readyState:0}function oa(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case ki:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function aa(r){let e="";return ur(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Gs(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=aa(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):ir(r,e,t))}function eo(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function nu(r){this.Ga=0,this.i=[],this.j=new Fe,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=eo("failFast",!1,r),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=eo("baseRetryDelayMs",5e3,r),this.hb=eo("retryDelaySeedMs",1e4,r),this.eb=eo("forwardChannelMaxRetries",2,r),this.xa=eo("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.K=void 0,this.I=r&&r.supportsCrossDomainXhr||!1,this.J="",this.h=new ns(r&&r.concurrentRequestLimit),this.Ja=new Tt,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.j.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function zo(r){if(wr(r),3==r.H){var e=r.W++,t=Yr(r.G);ir(t,"SID",r.J),ir(t,"RID",e),ir(t,"TYPE","terminate"),Va(r,t),(e=new ve(r,r.j,e,void 0)).L=2,e.v=ys(Yr(t)),t=!1,de.navigator&&de.navigator.sendBeacon&&(t=de.navigator.sendBeacon(e.v.toString(),"")),!t&&de.Image&&((new Image).src=e.v,t=!0),t||(e.g=Rs(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ss(e)}Wo(r)}function Dt(r){r.g&&(ua(r),r.g.cancel(),r.g=null)}function wr(r){Dt(r),r.u&&(de.clearTimeout(r.u),r.u=null),Ms(r),r.h.cancel(),r.m&&("number"==typeof r.m&&de.clearTimeout(r.m),r.m=null)}function Go(r){_i(r.h)||r.m||(r.m=!0,Y(r.Na,r),r.C=0)}function Ui(r,e){var t;t=e?e.m:r.W++;const s=Yr(r.G);ir(s,"SID",r.J),ir(s,"RID",t),ir(s,"AID",r.V),Va(r,s),r.o&&r.s&&Gs(s,r.o,r.s),t=new ve(r,r.j,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.i=e.F.concat(r.i)),e=is(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),Ce(r.h,t),vn(t,s,e)}function Va(r,e){r.ma&&ur(r.ma,function(t,s){ir(e,s,t)}),r.l&&sr({},function(t,s){ir(e,s,t)})}function is(r,e,t){t=Math.min(r.i.length,t);var s=r.l?ft(r.l.Va,r.l,r):null;e:{var a=r.i;let h=-1;for(;;){const y=["count="+t];-1==h?0<t?(h=a[0].h,y.push("ofs="+h)):h=0:y.push("ofs="+h);let P=!0;for(let B=0;B<t;B++){let W=a[B].h;const ae=a[B].g;if(W-=h,0>W)h=Math.max(0,a[B].h-100),P=!1;else try{Jt(ae,y,"req"+W+"_")}catch{s&&s(ae)}}if(P){s=y.join("&");break e}}}return r=r.i.splice(0,t),e.F=r,s}function vi(r){r.g||r.u||(r.ba=1,Y(r.Ma,r),r.A=0)}function fo(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=Tn(ft(r.Ma,r),Vi(r,r.A)),r.A++,0))}function ua(r){null!=r.B&&(de.clearTimeout(r.B),r.B=null)}function Ws(r){r.g=new ve(r,r.j,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=Yr(r.wa);ir(e,"RID","rpc"),ir(e,"SID",r.J),ir(e,"CI",r.M?"0":"1"),ir(e,"AID",r.V),ir(e,"TYPE","xmlhttp"),Va(r,e),r.o&&r.s&&Gs(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.oa,t.L=1,t.v=ys(Yr(e)),t.s=null,t.S=!0,br(t,r)}function Ms(r){null!=r.v&&(de.clearTimeout(r.v),r.v=null)}function po(r,e){var t=null;if(r.g==e){Ms(r),ua(r),r.g=null;var s=2}else{if(!mr(r.h,e))return;t=e.F,we(r.h,e),s=1}if(0!=r.H)if(r.ta=e.aa,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=r.C;De(s=Pi(),new zn(s,t)),Go(r)}else vi(r);else if(3==(a=e.o)||0==a&&0<r.ta||!(1==s&&function Lu(r,e){return!(So(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.F.concat(r.i),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=Tn(ft(r.Na,r,e),Vi(r,r.C)),r.C++,0)))}(r,e)||2==s&&fo(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),a){case 1:Ei(r,5);break;case 4:Ei(r,10);break;case 3:Ei(r,6);break;default:Ei(r,2)}}function Vi(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.l||(t*=2),t*e}function Ei(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var s=ft(r.pb,r);t||(t=new gs("//www.google.com/images/cleardot.gif"),de.location&&"http"==de.location.protocol||Br(t,"https"),ys(t)),function en(r,e){const t=new Fe;if(de.Image){const s=new Image;s.onload=Rt(Kn,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Rt(Kn,t,s,"TestLoadImage: error",!1,e),s.onabort=Rt(Kn,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Rt(Kn,t,s,"TestLoadImage: timeout",!1,e),de.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else Zt(2);r.H=0,r.l&&r.l.za(e),Wo(r),wr(r)}function Wo(r){if(r.H=0,r.pa=[],r.l){const e=Oe(r.h);(0!=e.length||0!=r.i.length)&&(je(r.pa,e),je(r.pa,r.i),r.h.i.length=0,wt(r.i),r.i.length=0),r.l.ya()}}function qo(r,e,t){var s=t instanceof gs?Yr(t):new gs(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Tr(s,s.m);else{var a=de.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var h=new gs(null,void 0);s&&Br(h,s),e&&(h.g=e),a&&Tr(h,a),t&&(h.l=t),s=h}return e=r.Da,(t=r.F)&&e&&ir(s,t,e),ir(s,"VER",r.qa),Va(r,s),s}function Rs(r,e,t){if(e&&!r.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ii(t&&r.Ha&&!r.va?new Ln({ob:!0}):r.va)).Oa(r.I),e}function Uu(){}function la(){if(It&&!(10<=Number(Nr)))throw Error("Environmental error: no available transport.")}function Mi(r,e){Qe.call(this),this.g=new nu(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!jt(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jt(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Ps(this)}function vs(r){he.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function xo(){Ie.call(this),this.status=1}function Ps(r){this.g=r}function Wi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function go(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var h=r.g[3],y=(e=r.g[0])+(h^(t=r.g[1])&((a=r.g[2])^h))+s[0]+3614090360&4294967295;y=(t=(a=(h=(e=(t=(a=(h=(e=(t=(a=(h=(e=(t=(a=(h=(e=(t=(a=(h=(e=(t=(a=(h=(e=(t=(a=(h=(e=(t=(a=(h=(e=(t=(a=(h=(e=(t=(a=(h=(e=(t=(a=(h=(e=(t=(a=(h=(e=(t=(a=(h=(e=(t=(a=(h=(e=(t=(a=(h=(e=t+(y<<7&4294967295|y>>>25))+((y=h+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|y>>>20))+((y=a+(t^h&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|y>>>15))+((y=t+(e^a&(h^e))+s[3]+3250441966&4294967295)<<22&4294967295|y>>>10))+((y=e+(h^t&(a^h))+s[4]+4118548399&4294967295)<<7&4294967295|y>>>25))+((y=h+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|y>>>20))+((y=a+(t^h&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|y>>>15))+((y=t+(e^a&(h^e))+s[7]+4249261313&4294967295)<<22&4294967295|y>>>10))+((y=e+(h^t&(a^h))+s[8]+1770035416&4294967295)<<7&4294967295|y>>>25))+((y=h+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|y>>>20))+((y=a+(t^h&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|y>>>15))+((y=t+(e^a&(h^e))+s[11]+2304563134&4294967295)<<22&4294967295|y>>>10))+((y=e+(h^t&(a^h))+s[12]+1804603682&4294967295)<<7&4294967295|y>>>25))+((y=h+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|y>>>20))+((y=a+(t^h&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|y>>>15))+((y=t+(e^a&(h^e))+s[15]+1236535329&4294967295)<<22&4294967295|y>>>10))+((y=e+(a^h&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|y>>>27))+((y=h+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|y>>>23))+((y=a+(e^t&(h^e))+s[11]+643717713&4294967295)<<14&4294967295|y>>>18))+((y=t+(h^e&(a^h))+s[0]+3921069994&4294967295)<<20&4294967295|y>>>12))+((y=e+(a^h&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|y>>>27))+((y=h+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|y>>>23))+((y=a+(e^t&(h^e))+s[15]+3634488961&4294967295)<<14&4294967295|y>>>18))+((y=t+(h^e&(a^h))+s[4]+3889429448&4294967295)<<20&4294967295|y>>>12))+((y=e+(a^h&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|y>>>27))+((y=h+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|y>>>23))+((y=a+(e^t&(h^e))+s[3]+4107603335&4294967295)<<14&4294967295|y>>>18))+((y=t+(h^e&(a^h))+s[8]+1163531501&4294967295)<<20&4294967295|y>>>12))+((y=e+(a^h&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|y>>>27))+((y=h+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|y>>>23))+((y=a+(e^t&(h^e))+s[7]+1735328473&4294967295)<<14&4294967295|y>>>18))+((y=t+(h^e&(a^h))+s[12]+2368359562&4294967295)<<20&4294967295|y>>>12))+((y=e+(t^a^h)+s[5]+4294588738&4294967295)<<4&4294967295|y>>>28))+((y=h+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|y>>>21))+((y=a+(h^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|y>>>16))+((y=t+(a^h^e)+s[14]+4259657740&4294967295)<<23&4294967295|y>>>9))+((y=e+(t^a^h)+s[1]+2763975236&4294967295)<<4&4294967295|y>>>28))+((y=h+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|y>>>21))+((y=a+(h^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|y>>>16))+((y=t+(a^h^e)+s[10]+3200236656&4294967295)<<23&4294967295|y>>>9))+((y=e+(t^a^h)+s[13]+681279174&4294967295)<<4&4294967295|y>>>28))+((y=h+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|y>>>21))+((y=a+(h^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|y>>>16))+((y=t+(a^h^e)+s[6]+76029189&4294967295)<<23&4294967295|y>>>9))+((y=e+(t^a^h)+s[9]+3654602809&4294967295)<<4&4294967295|y>>>28))+((y=h+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|y>>>21))+((y=a+(h^e^t)+s[15]+530742520&4294967295)<<16&4294967295|y>>>16))+((y=t+(a^h^e)+s[2]+3299628645&4294967295)<<23&4294967295|y>>>9))+((y=e+(a^(t|~h))+s[0]+4096336452&4294967295)<<6&4294967295|y>>>26))+((y=h+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|y>>>22))+((y=a+(e^(h|~t))+s[14]+2878612391&4294967295)<<15&4294967295|y>>>17))+((y=t+(h^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|y>>>11))+((y=e+(a^(t|~h))+s[12]+1700485571&4294967295)<<6&4294967295|y>>>26))+((y=h+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|y>>>22))+((y=a+(e^(h|~t))+s[10]+4293915773&4294967295)<<15&4294967295|y>>>17))+((y=t+(h^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|y>>>11))+((y=e+(a^(t|~h))+s[8]+1873313359&4294967295)<<6&4294967295|y>>>26))+((y=h+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|y>>>22))+((y=a+(e^(h|~t))+s[6]+2734768916&4294967295)<<15&4294967295|y>>>17))+((y=t+(h^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|y>>>11))+((h=(e=t+((y=e+(a^(t|~h))+s[4]+4149444226&4294967295)<<6&4294967295|y>>>26))+((y=h+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|y>>>22))^((a=h+((y=a+(e^(h|~t))+s[2]+718787259&4294967295)<<15&4294967295|y>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(a+(y<<21&4294967295|y>>>11))&4294967295,r.g[2]=r.g[2]+a&4294967295,r.g[3]=r.g[3]+h&4294967295}function rr(r,e){this.h=e;for(var t=[],s=!0,a=r.length-1;0<=a;a--){var h=0|r[a];s&&h==e||(t[a]=h,s=!1)}this.g=t}(be=ii.prototype).Oa=function(r){this.M=r},be.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():He.g(),this.C=function Zn(r){return r.h||(r.h=r.i())}(this.u?this.u:He),this.g.onreadystatechange=ft(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(h){return void xs(this,h)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const h of s.keys())t.set(h,s.get(h))}s=Array.from(t.keys()).find(h=>"content-type"==h.toLowerCase()),a=de.FormData&&r instanceof de.FormData,!(0<=$t(yi,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[h,y]of t)this.g.setRequestHeader(h,y);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ho(this),0<this.B&&((this.L=function sa(r){return It&&function hr(){return bt(zr,9,function(){let r=0;const e=Kt(String(_n)).split("."),t=Kt("9").split("."),s=Math.max(e.length,t.length);for(let y=0;0==r&&y<s;y++){var a=e[y]||"",h=t[y]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],0==a[0].length&&0==h[0].length)break;r=qt(0==a[1].length?0:parseInt(a[1],10),0==h[1].length?0:parseInt(h[1],10))||qt(0==a[2].length,0==h[2].length)||qt(a[2],h[2]),a=a[3],h=h[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ft(this.ua,this)):this.A=tn(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(h){xs(this,h)}},be.ua=function(){typeof Ze<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,De(this,"timeout"),this.abort(8))},be.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,De(this,"complete"),De(this,"abort"),Wn(this))},be.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wn(this,!0)),ii.$.N.call(this)},be.La=function(){this.s||(this.G||this.v||this.l?Ua(this):this.kb())},be.kb=function(){Ua(this)},be.da=function(){try{return 2<Ao(this)?this.g.status:-1}catch{return-1}},be.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},be.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),Ho(e)}},be.Ia=function(){return this.m},be.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(be=nu.prototype).qa=8,be.H=1,be.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const a=new ve(this,this.j,r,void 0);let h=this.s;if(this.U&&(h?(h=Fr(h),an(h,this.U)):h=this.U),null!==this.o||this.O||(a.I=h,h=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=is(this,a,e),ir(t=Yr(this.G),"RID",r),ir(t,"CVER",22),this.F&&ir(t,"X-HTTP-Session-Id",this.F),Va(this,t),h&&(this.O?e="headers="+encodeURIComponent(String(aa(h)))+"&"+e:this.o&&Gs(t,this.o,h)),Ce(this.h,a),this.bb&&ir(t,"TYPE","init"),this.P?(ir(t,"$req",e),ir(t,"SID","null"),a.ba=!0,vn(a,t,null)):vn(a,t,e),this.H=2}}else 3==this.H&&(r?Ui(this,r):0==this.i.length||_i(this.h)||Ui(this))},be.Ma=function(){if(this.u=null,Ws(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var r=2*this.S;this.j.info("BP detection timer enabled: "+r),this.B=Tn(ft(this.jb,this),r)}},be.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Zt(10),Dt(this),Ws(this))},be.ib=function(){null!=this.v&&(this.v=null,Dt(this),fo(this),Zt(19))},be.pb=function(r){r?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))},(be=Uu.prototype).Ba=function(){},be.Aa=function(){},be.za=function(){},be.ya=function(){},be.Va=function(){},la.prototype.g=function(r,e){return new Mi(r,e)},Te(Mi,Qe),Mi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var r=this.g,e=this.l,t=this.h||void 0;Zt(0),r.Y=e,r.ma=t||{},r.M=r.aa,r.G=qo(r,null,r.Y),Go(r)},Mi.prototype.close=function(){zo(this.g)},Mi.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=gt(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.fb++,r)),3==e.H&&Go(e)},Mi.prototype.N=function(){this.g.l=null,delete this.j,zo(this.g),delete this.g,Mi.$.N.call(this)},Te(vs,he),Te(xo,Ie),Te(Ps,Uu),Ps.prototype.Ba=function(){De(this.g,"a")},Ps.prototype.Aa=function(r){De(this.g,new vs(r))},Ps.prototype.za=function(r){De(this.g,new xo)},Ps.prototype.ya=function(){De(this.g,"b")},Te(Wi,function Mo(){this.blockSize=-1}),Wi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Wi.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,a=this.h,h=0;h<e;){if(0==a)for(;h<=t;)go(this,r,h),h+=this.blockSize;if("string"==typeof r){for(;h<e;)if(s[a++]=r.charCodeAt(h++),a==this.blockSize){go(this,s),a=0;break}}else for(;h<e;)if(s[a++]=r[h++],a==this.blockSize){go(this,s),a=0;break}}this.h=a,this.i+=e},Wi.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var Ns={};function ca(r){return-128<=r&&128>r?bt(Ns,r,function(e){return new rr([0|e],0>e?-1:0)}):new rr([0|r],0>r?-1:0)}function Os(r){if(isNaN(r)||!isFinite(r))return ks;if(0>r)return Rr(Os(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=da;return new rr(e,0)}var da=4294967296,ks=ca(0),Ro=ca(1),to=ca(16777216);function gi(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function hi(r){return-1==r.h}function Rr(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new rr(t,~r.h).add(Ro)}function $a(r,e){return r.add(Rr(e))}function Zo(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function ru(r,e){this.g=r,this.h=e}function dl(r,e){if(gi(e))throw Error("division by zero");if(gi(r))return new ru(ks,ks);if(hi(r))return e=dl(Rr(r),e),new ru(Rr(e.g),Rr(e.h));if(hi(e))return e=dl(r,Rr(e)),new ru(Rr(e.g),e.h);if(30<r.g.length){if(hi(r)||hi(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Ro,s=e;0>=s.X(r);)t=Fs(t),s=Fs(s);var a=ha(t,1),h=ha(s,1);for(s=ha(s,2),t=ha(t,2);!gi(s);){var y=h.add(s);0>=y.X(r)&&(a=a.add(t),h=y),s=ha(s,1),t=ha(t,1)}return e=$a(r,a.R(e)),new ru(a,e)}for(a=ks;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),y=(h=Os(t)).R(e);hi(y)||0<y.X(r);)y=(h=Os(t-=s)).R(e);gi(h)&&(h=Ro),a=a.add(h),r=$a(r,y)}return new ru(a,r)}function Fs(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new rr(t,r.h)}function ha(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,a=[],h=0;h<s;h++)a[h]=0<e?r.D(h+t)>>>e|r.D(h+t+1)<<32-e:r.D(h+t);return new rr(a,r.h)}(be=rr.prototype).ea=function(){if(hi(this))return-Rr(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:da+s)*e,e*=da}return r},be.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(gi(this))return"0";if(hi(this))return"-"+Rr(this).toString(r);for(var e=Os(Math.pow(r,6)),t=this,s="";;){var a=dl(t,e).g,h=((0<(t=$a(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(gi(t=a))return h+s;for(;6>h.length;)h="0"+h;s=h+s}},be.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},be.X=function(r){return hi(r=$a(this,r))?-1:gi(r)?0:1},be.abs=function(){return hi(this)?Rr(this):this},be.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,a=0;a<=e;a++){var h=s+(65535&this.D(a))+(65535&r.D(a)),y=(h>>>16)+(this.D(a)>>>16)+(r.D(a)>>>16);s=y>>>16,t[a]=(y&=65535)<<16|(h&=65535)}return new rr(t,-2147483648&t[t.length-1]?-1:0)},be.R=function(r){if(gi(this)||gi(r))return ks;if(hi(this))return hi(r)?Rr(this).R(Rr(r)):Rr(Rr(this).R(r));if(hi(r))return Rr(this.R(Rr(r)));if(0>this.X(to)&&0>r.X(to))return Os(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<r.g.length;a++){var h=this.D(s)>>>16,y=65535&this.D(s),P=r.D(a)>>>16,B=65535&r.D(a);t[2*s+2*a]+=y*B,Zo(t,2*s+2*a),t[2*s+2*a+1]+=h*B,Zo(t,2*s+2*a+1),t[2*s+2*a+1]+=y*P,Zo(t,2*s+2*a+1),t[2*s+2*a+2]+=h*P,Zo(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new rr(t,0)},be.gb=function(r){return dl(this,r).h},be.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new rr(t,this.h&r.h)},be.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new rr(t,this.h|r.h)},be.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new rr(t,this.h^r.h)},la.prototype.createWebChannel=la.prototype.g,Mi.prototype.send=Mi.prototype.u,Mi.prototype.open=Mi.prototype.m,Mi.prototype.close=Mi.prototype.close,In.NO_ERROR=0,In.TIMEOUT=8,In.HTTP_ERROR=6,Dn.COMPLETE="complete",fe.EventType=te,te.OPEN="a",te.CLOSE="b",te.ERROR="c",te.MESSAGE="d",Qe.prototype.listen=Qe.prototype.O,ii.prototype.listenOnce=ii.prototype.P,ii.prototype.getLastError=ii.prototype.Sa,ii.prototype.getLastErrorCode=ii.prototype.Ia,ii.prototype.getStatus=ii.prototype.da,ii.prototype.getResponseJson=ii.prototype.Wa,ii.prototype.getResponseText=ii.prototype.ja,ii.prototype.send=ii.prototype.ha,ii.prototype.setWithCredentials=ii.prototype.Oa,Wi.prototype.digest=Wi.prototype.l,Wi.prototype.reset=Wi.prototype.reset,Wi.prototype.update=Wi.prototype.j,rr.prototype.add=rr.prototype.add,rr.prototype.multiply=rr.prototype.R,rr.prototype.modulo=rr.prototype.gb,rr.prototype.compare=rr.prototype.X,rr.prototype.toNumber=rr.prototype.ea,rr.prototype.toString=rr.prototype.toString,rr.prototype.getBits=rr.prototype.D,rr.fromNumber=Os,rr.fromString=function Ba(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return Rr(Ba(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Os(Math.pow(e,8)),s=ks,a=0;a<r.length;a+=8){var h=Math.min(8,r.length-a),y=parseInt(r.substring(a,a+h),e);8>h?(h=Os(Math.pow(e,h)),s=s.R(h).add(Os(y))):s=(s=s.R(t)).add(Os(y))}return s};var Vu=$e.createWebChannelTransport=function(){return new la},fa=$e.getStatEventTarget=function(){return Pi()},ja=$e.ErrorCode=In,k=$e.EventType=Dn,G=$e.Event=Ar,L=$e.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ie=$e.FetchXmlHttpFactory=Ln,xe=$e.WebChannel=fe,pt=$e.XhrIo=ii,Ft=$e.Md5=Wi,Rn=$e.Integer=rr;const Qr="@firebase/firestore";class ar{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ar.UNAUTHENTICATED=new ar(null),ar.GOOGLE_CREDENTIALS=new ar("google-credentials-uid"),ar.FIRST_PARTY=new ar("first-party-uid"),ar.MOCK_USER=new ar("mock-user");let Or="9.21.0";const Dr=new X.Yd("@firebase/firestore");function Ri(){return Dr.logLevel}function mi(r){Dr.setLogLevel(r)}function Lt(r,...e){if(Dr.logLevel<=X.in.DEBUG){const t=e.map(Ls);Dr.debug(`Firestore (${Or}): ${r}`,...t)}}function fi(r,...e){if(Dr.logLevel<=X.in.ERROR){const t=e.map(Ls);Dr.error(`Firestore (${Or}): ${r}`,...t)}}function wi(r,...e){if(Dr.logLevel<=X.in.WARN){const t=e.map(Ls);Dr.warn(`Firestore (${Or}): ${r}`,...t)}}function Ls(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function un(r="Unexpected state"){const e=`FIRESTORE (${Or}) INTERNAL ASSERTION FAILED: `+r;throw fi(e),new Error(e)}function On(r,e){r||un()}function Es(r,e){r||un()}function sn(r,e){return r}const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zt extends Se.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ha{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ar.UNAUTHENTICATED))}shutdown(){}}class Kl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mo{constructor(e){this.t=e,this.currentUser=ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const h=W=>this.i!==a?(a=this.i,t(W)):Promise.resolve();let y=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),y.resolve(),y=new Bi,e.enqueueRetryable(()=>h(this.currentUser))};const P=()=>{const W=y;e.enqueueRetryable((0,C.Z)(function*(){yield W.promise,yield h(s.currentUser)}))},B=W=>{Lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=W,this.auth.addAuthTokenListener(this.o),P()};this.t.onInit(W=>B(W)),setTimeout(()=>{if(!this.auth){const W=this.t.getImmediate({optional:!0});W?B(W):(Lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),y.resolve(),y=new Bi)}},0),P()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(On("string"==typeof s.accessToken),new Ha(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return On(null===e||"string"==typeof e),new ar(e)}}class $u{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=ar.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ju{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new $u(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ta{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ml{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=h=>{null!=h.error&&Lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const y=h.token!==this.T;return this.T=h.token,Lt("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?t(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>s(h))};const a=h=>{Lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.appCheck.addTokenListener(this.o)};this.I.onInit(h=>a(h)),setTimeout(()=>{if(!this.appCheck){const h=this.I.getImmediate({optional:!0});h?a(h):Lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(On("string"==typeof t.token),this.T=t.token,new Ta(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Yl(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class Rl{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Yl(40);for(let h=0;h<a.length;++h)s.length<20&&a[h]<t&&(s+=e.charAt(a[h]%e.length))}return s}}function Ir(r,e){return r<e?-1:r>e?1:0}function Da(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}function Ql(r){return r+"\0"}class Fi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new zt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new zt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new zt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fi.fromMillis(Date.now())}static fromDate(e){return Fi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Fi(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ir(this.nanoseconds,e.nanoseconds):Ir(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yn(e)}static min(){return new Yn(new Fi(0,0))}static max(){return new Yn(new Fi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ss{constructor(e,t,s){void 0===t?t=0:t>e.length&&un(),void 0===s?s=e.length-t:s>e.length-t&&un(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===ss.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ss?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const h=e.get(a),y=t.get(a);if(h<y)return-1;if(h>y)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class kr extends ss{construct(e,t,s){return new kr(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new zt(ht.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new kr(t)}static emptyPath(){return new kr([])}}const iu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Di extends ss{construct(e,t,s){return new Di(e,t,s)}static isValidIdentifier(e){return iu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Di.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Di(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const h=()=>{if(0===s.length)throw new zt(ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let y=!1;for(;a<e.length;){const P=e[a];if("\\"===P){if(a+1===e.length)throw new zt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const B=e[a+1];if("\\"!==B&&"."!==B&&"`"!==B)throw new zt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=B,a+=2}else"`"===P?(y=!y,a++):"."!==P||y?(s+=P,a++):(h(),a++)}if(h(),y)throw new zt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Di(t)}static emptyPath(){return new Di([])}}class gn{constructor(e){this.path=e}static fromPath(e){return new gn(kr.fromString(e))}static fromName(e){return new gn(kr.fromString(e).popFirst(5))}static empty(){return new gn(kr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===kr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return kr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new gn(new kr(e.slice()))}}class pa{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function Pl(r){return r.fields.find(e=>2===e.kind)}function Sa(r){return r.fields.filter(e=>2!==e.kind)}pa.UNKNOWN_ID=-1;class Iu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qi{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qi(0,ds.min())}}function no(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Yn.fromTimestamp(1e9===s?new Fi(t+1,0):new Fi(t,s));return new ds(a,gn.empty(),e)}function Po(r){return new ds(r.readTime,r.key,-1)}class ds{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ds(Yn.min(),gn.empty(),-1)}static max(){return new ds(Yn.max(),gn.empty(),-1)}}function _o(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=gn.comparator(r.documentKey,e.documentKey),0!==t?t:Ir(r.largestBatchId,e.largestBatchId))}const ro="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class No{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ou(r){return Jl.apply(this,arguments)}function Jl(){return Jl=(0,C.Z)(function*(r){if(r.code!==ht.FAILED_PRECONDITION||r.message!==ro)throw r;Lt("LocalStore","Unexpectedly lost primary lease")}),Jl.apply(this,arguments)}class Ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&un(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ke((s,a)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(s,a)},this.catchCallback=h=>{this.wrapFailure(t,h).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ke?t:Ke.resolve(t)}catch(t){return Ke.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ke.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ke.reject(t)}static resolve(e){return new Ke((t,s)=>{t(e)})}static reject(e){return new Ke((t,s)=>{s(e)})}static waitFor(e){return new Ke((t,s)=>{let a=0,h=0,y=!1;e.forEach(P=>{++a,P.next(()=>{++h,y&&h===a&&t()},B=>s(B))}),y=!0,h===a&&t()})}static or(e){let t=Ke.resolve(!1);for(const s of e)t=t.next(a=>a?Ke.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,h)=>{s.push(t.call(this,a,h))}),this.waitFor(s)}static mapArray(e,t){return new Ke((s,a)=>{const h=e.length,y=new Array(h);let P=0;for(let B=0;B<h;B++){const W=B;t(e[W]).next(ae=>{y[W]=ae,++P,P===h&&s(y)},ae=>a(ae))}})}static doWhile(e,t){return new Ke((s,a)=>{const h=()=>{!0===e()?t().next(()=>{h()},a):s()};h()})}}class au{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Bi,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new ga(e,t.error)):this.R.resolve()},this.transaction.onerror=s=>{const a=hl(s.target.error);this.R.reject(new ga(e,a))}}static open(e,t,s,a){try{return new au(t,e.transaction(a,s))}catch(h){throw new ga(t,h)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Lt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new fd(t)}}class Oo{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===Oo.S((0,Se.z$)())&&fi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Lt("SimpleDb","Removing database:",e),Cu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Se.hl)())return!1;if(Oo.C())return!0;const e=(0,Se.z$)(),t=Oo.S(e),s=0<t&&t<10,a=Oo.N(e),h=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||h)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}O(e){var t=this;return(0,C.Z)(function*(){return t.db||(Lt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const h=indexedDB.open(t.name,t.version);h.onsuccess=y=>{s(y.target.result)},h.onblocked=()=>{a(new ga(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=y=>{const P=y.target.error;a("VersionError"===P.name?new zt(ht.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===P.name?new zt(ht.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+P):new ga(e,P))},h.onupgradeneeded=y=>{Lt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',y.oldVersion),t.V.$(y.target.result,h.transaction,y.oldVersion,t.version).next(()=>{Lt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var h=this;return(0,C.Z)(function*(){const y="readonly"===t;let P=0;for(;;){++P;try{h.db=yield h.O(e);const B=au.open(h.db,e,y?"readonly":"readwrite",s),W=a(B).next(ae=>(B.P(),ae)).catch(ae=>(B.abort(ae),Ke.reject(ae))).toPromise();return W.catch(()=>{}),yield B.v,W}catch(B){const W=B,ae="FirebaseError"!==W.name&&P<3;if(Lt("SimpleDb","Transaction failed with error:",W.message,"Retrying:",ae),h.close(),!ae)return Promise.reject(W)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class hc{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Cu(this.L.delete())}}class ga extends zt{constructor(e,t){super(ht.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ko(r){return"IndexedDbTransactionError"===r.name}class fd{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Lt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Lt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Cu(s)}add(e){return Lt("SimpleDb","ADD",this.store.name,e,e),Cu(this.store.add(e))}get(e){return Cu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Lt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Lt("SimpleDb","DELETE",this.store.name,e),Cu(this.store.delete(e))}count(){return Lt("SimpleDb","COUNT",this.store.name),Cu(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),h=[];return this.W(a,(y,P)=>{h.push(P)}).next(()=>h)}{const a=this.store.getAll(s.range);return new Ke((h,y)=>{a.onerror=P=>{y(P.target.error)},a.onsuccess=P=>{h(P.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Ke((a,h)=>{s.onerror=y=>{h(y.target.error)},s.onsuccess=y=>{a(y.target.result)}})}J(e,t){Lt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(h,y,P)=>P.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new Ke((s,a)=>{t.onerror=h=>{const y=hl(h.target.error);a(y)},t.onsuccess=h=>{const y=h.target.result;y?e(y.primaryKey,y.value).next(P=>{P?y.continue():s()}):s()}})}W(e,t){const s=[];return new Ke((a,h)=>{e.onerror=y=>{h(y.target.error)},e.onsuccess=y=>{const P=y.target.result;if(!P)return void a();const B=new hc(P),W=t(P.primaryKey,P.value,B);if(W instanceof Ke){const ae=W.catch(Le=>(B.done(),Ke.reject(Le)));s.push(ae)}B.isDone?a():null===B.K?P.continue():P.continue(B.K)}}).next(()=>Ke.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cu(r){return new Ke((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const a=hl(s.target.error);t(a)}})}let Hu=!1;function hl(r){const e=Oo.S((0,Se.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new zt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hu||(Hu=!0,setTimeout(()=>{throw s},0)),s}}return r}class pd{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Lt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,C.Z)(function*(){t.task=null;try{Lt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){ko(s)?Lt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield ou(s)}yield t.et(6e4)}))}}class ms{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,C.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,h=!0;return Ke.doWhile(()=>!0===h&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(y=>{if(null!==y&&!s.has(y))return Lt("IndexBackiller",`Processing collection: ${y}`),this.it(e,y,a).next(P=>{a-=P,s.add(y)});h=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(h=>{const y=h.changes;return this.localStore.indexManager.updateIndexEntries(e,y).next(()=>this.rt(a,h)).next(P=>(Lt("IndexBackiller",`Updating offset: ${P}`),this.localStore.indexManager.updateCollectionGroup(e,t,P))).next(()=>y.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,h)=>{const y=Po(h);_o(y,s)>0&&(s=y)}),new ds(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let os=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function ma(r){return null==r}function zu(r){return 0===r&&1/r==-1/0}function hs(r){return"number"==typeof r&&Number.isInteger(r)&&!zu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Ji(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=uu(e)),e=fl(r.get(t),e);return uu(e)}function fl(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const h=r.charAt(a);switch(h){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=h}}return t}function uu(r){return r+"\x01\x01"}function es(r){const e=r.length;if(On(e>=2),2===e)return On("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),kr.emptyPath();const t=e-2,s=[];let a="";for(let h=0;h<e;){const y=r.indexOf("\x01",h);switch((y<0||y>t)&&un(),r.charAt(y+1)){case"\x01":const P=r.substring(h,y);let B;0===a.length?B=P:(a+=P,B=a,a=""),s.push(B);break;case"\x10":a+=r.substring(h,y),a+="\0";break;case"\x11":a+=r.substring(h,y+1);break;default:un()}h=y+2}return new kr(s)}const bu=["userId","batchId"];function za(r,e){return[r,Ji(e)]}function lu(r,e,t){return[r,Ji(e),t]}const Gu={},yo=["prefixPath","collectionGroup","readTime","documentId"],Ga=["prefixPath","collectionGroup","documentId"],D=["collectionGroup","readTime","prefixPath","documentId"],A=["canonicalId","targetId"],b=["targetId","path"],O=["path","targetId"],$=["collectionId","parent"],J=["indexId","uid"],le=["uid","sequenceNumber"],ze=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],At=["indexId","uid","orderedDocumentKey"],Cn=["userId","collectionPath","documentId"],En=["userId","collectionPath","largestBatchId"],Jr=["userId","collectionGroup","largestBatchId"],Si=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fo=[...Si,"documentOverlays"],Ii=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lo=Ii,as=[...Lo,"indexConfiguration","indexState","indexEntries"];class Ko extends No{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function $r(r,e){const t=sn(r);return Oo.M(t.at,e)}function Yo(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Wa(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function pi(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ci{constructor(e,t){this.comparator=e,this.root=t||ws.EMPTY}insert(e,t){return new ci(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ws.BLACK,null,null))}remove(e){return new ci(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ws.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cu(this.root,e,this.comparator,!0)}}class cu{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=t?s(e.key,t):1,t&&a&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(0===h){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ws{constructor(e,t,s,a,h){this.key=e,this.value=t,this.color=s??ws.RED,this.left=a??ws.EMPTY,this.right=h??ws.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,h){return new ws(e??this.key,t??this.value,s??this.color,a??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const h=s(e,a.key);return a=h<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===h?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ws.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return ws.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ws.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ws.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw un();const e=this.left.check();if(e!==this.right.check())throw un();return e+(this.isRed()?0:1)}}ws.EMPTY=null,ws.RED=!0,ws.BLACK=!1,ws.EMPTY=new class{constructor(){this.size=0}get key(){throw un()}get value(){throw un()}get color(){throw un()}get left(){throw un()}get right(){throw un()}copy(r,e,t,s,a){return this}insert(r,e,t){return new ws(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $i{constructor(e){this.comparator=e,this.data=new ci(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wu(this.data.getIterator())}getIteratorFrom(e){return new Wu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof $i)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,h=s.getNext().key;if(0!==this.comparator(a,h))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $i(this.comparator);return t.data=e,t}}class Wu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qa(r){return r.hasNext()?r.getNext():void 0}class vo{constructor(e){this.fields=e,e.sort(Di.comparator)}static empty(){return new vo([])}unionWith(e){let t=new $i(Di.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new vo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Da(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Nl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Tu(){return typeof atob<"u"}class Ai{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Nl("Invalid base64 string: "+a):a}}(e);return new Ai(t)}static fromUint8Array(e){const t=function(s){let a="";for(let h=0;h<s.length;++h)a+=String.fromCharCode(s[h]);return a}(e);return new Ai(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ir(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ai.EMPTY_BYTE_STRING=new Ai("");const Aa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Za(r){if(On(!!r),"string"==typeof r){let e=0;const t=Aa.exec(r);if(On(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Xi(r.seconds),nanos:Xi(r.nanos)}}function Xi(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function Uo(r){return"string"==typeof r?Ai.fromBase64String(r):Ai.fromUint8Array(r)}function Du(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=r?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ka(r){const e=r.mapValue.fields.__previous_value__;return Du(e)?Ka(e):e}function Su(r){const e=Za(r.mapValue.fields.__local_write_time__.timestampValue);return new Fi(e.seconds,e.nanos)}class Qo{constructor(e,t,s,a,h,y,P,B){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=h,this.forceLongPolling=y,this.autoDetectLongPolling=P,this.useFetchStreams=B}}class _a{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _a("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _a&&e.projectId===this.projectId&&e.database===this.database}}const Jo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qu={nullValue:"NULL_VALUE"};function Ya(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Du(r)?4:Pc(r)?9007199254740991:10:un()}function Li(r,e){if(r===e)return!0;const t=Ya(r);if(t!==Ya(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Su(r).isEqual(Su(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const h=Za(s.timestampValue),y=Za(a.timestampValue);return h.seconds===y.seconds&&h.nanos===y.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return a=e,Uo(r.bytesValue).isEqual(Uo(a.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,a){return Xi(s.geoPointValue.latitude)===Xi(a.geoPointValue.latitude)&&Xi(s.geoPointValue.longitude)===Xi(a.geoPointValue.longitude)}(r,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Xi(s.integerValue)===Xi(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const h=Xi(s.doubleValue),y=Xi(a.doubleValue);return h===y?zu(h)===zu(y):isNaN(h)&&isNaN(y)}return!1}(r,e);case 9:return Da(r.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:return function(s,a){const h=s.mapValue.fields||{},y=a.mapValue.fields||{};if(Yo(h)!==Yo(y))return!1;for(const P in h)if(h.hasOwnProperty(P)&&(void 0===y[P]||!Li(h[P],y[P])))return!1;return!0}(r,e);default:return un()}var a}function du(r,e){return void 0!==(r.values||[]).find(t=>Li(t,e))}function Au(r,e){if(r===e)return 0;const t=Ya(r),s=Ya(e);if(t!==s)return Ir(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ir(r.booleanValue,e.booleanValue);case 2:return function(a,h){const y=Xi(a.integerValue||a.doubleValue),P=Xi(h.integerValue||h.doubleValue);return y<P?-1:y>P?1:y===P?0:isNaN(y)?isNaN(P)?0:-1:1}(r,e);case 3:return Xl(r.timestampValue,e.timestampValue);case 4:return Xl(Su(r),Su(e));case 5:return Ir(r.stringValue,e.stringValue);case 6:return function(a,h){const y=Uo(a),P=Uo(h);return y.compareTo(P)}(r.bytesValue,e.bytesValue);case 7:return function(a,h){const y=a.split("/"),P=h.split("/");for(let B=0;B<y.length&&B<P.length;B++){const W=Ir(y[B],P[B]);if(0!==W)return W}return Ir(y.length,P.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,h){const y=Ir(Xi(a.latitude),Xi(h.latitude));return 0!==y?y:Ir(Xi(a.longitude),Xi(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(a,h){const y=a.values||[],P=h.values||[];for(let B=0;B<y.length&&B<P.length;++B){const W=Au(y[B],P[B]);if(W)return W}return Ir(y.length,P.length)}(r.arrayValue,e.arrayValue);case 10:return function(a,h){if(a===Jo.mapValue&&h===Jo.mapValue)return 0;if(a===Jo.mapValue)return 1;if(h===Jo.mapValue)return-1;const y=a.fields||{},P=Object.keys(y),B=h.fields||{},W=Object.keys(B);P.sort(),W.sort();for(let ae=0;ae<P.length&&ae<W.length;++ae){const Le=Ir(P[ae],W[ae]);if(0!==Le)return Le;const st=Au(y[P[ae]],B[W[ae]]);if(0!==st)return st}return Ir(P.length,W.length)}(r.mapValue,e.mapValue);default:throw un()}}function Xl(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return Ir(r,e);const t=Za(r),s=Za(e),a=Ir(t.seconds,s.seconds);return 0!==a?a:Ir(t.nanos,s.nanos)}function xu(r){return io(r)}function io(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const a=Za(s);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?Uo(r.bytesValue).toBase64():"referenceValue"in r?gn.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let a="[",h=!0;for(const y of s.values||[])h?h=!1:a+=",",a+=io(y);return a+"]"}(r.arrayValue):"mapValue"in r?function(s){const a=Object.keys(s.fields||{}).sort();let h="{",y=!0;for(const P of a)y?y=!1:h+=",",h+=`${P}:${io(s.fields[P])}`;return h+"}"}(r.mapValue):un();var e}function Qa(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Ja(r){return!!r&&"integerValue"in r}function pl(r){return!!r&&"arrayValue"in r}function Mu(r){return!!r&&"nullValue"in r}function Zu(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function qs(r){return!!r&&"mapValue"in r}function Vo(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Wa(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Vo(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vo(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Pc(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ol(r){return"nullValue"in r?qu:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Qa(_a.empty(),gn.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:un()}function Nc(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Qa(_a.empty(),gn.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Jo:un()}function fc(r,e){const t=Au(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function gd(r,e){const t=Au(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Zs{constructor(e){this.value=e}static empty(){return new Zs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!qs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vo(t)}setAll(e){let t=Di.emptyPath(),s={},a=[];e.forEach((y,P)=>{if(!t.isImmediateParentOf(P)){const B=this.getFieldsMap(t);this.applyChanges(B,s,a),s={},a=[],t=P.popLast()}y?s[P.lastSegment()]=Vo(y):a.push(P.lastSegment())});const h=this.getFieldsMap(t);this.applyChanges(h,s,a)}delete(e){const t=this.field(e.popLast());qs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];qs(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Wa(t,(a,h)=>e[a]=h);for(const a of s)delete e[a]}clone(){return new Zs(Vo(this.value))}}function md(r){const e=[];return Wa(r.fields,(t,s)=>{const a=new Di([t]);if(qs(s)){const h=md(s.mapValue).fields;if(0===h.length)e.push(a);else for(const y of h)e.push(a.child(y))}else e.push(a)}),new vo(e)}class Zi{constructor(e,t,s,a,h,y,P){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=h,this.data=y,this.documentState=P}static newInvalidDocument(e){return new Zi(e,0,Yn.min(),Yn.min(),Yn.min(),Zs.empty(),0)}static newFoundDocument(e,t,s,a){return new Zi(e,1,t,Yn.min(),s,a,0)}static newNoDocument(e,t){return new Zi(e,2,t,Yn.min(),Yn.min(),Zs.empty(),0)}static newUnknownDocument(e,t){return new Zi(e,3,t,Yn.min(),Yn.min(),Zs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Yn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hu{constructor(e,t){this.position=e,this.inclusive=t}}function pc(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const h=e[a],y=r.position[a];if(s=h.field.isKeyField()?gn.comparator(gn.fromName(y.referenceValue),t.key):Au(y,t.data.field(h.field)),"desc"===h.dir&&(s*=-1),0!==s)break}return s}function so(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Li(r.position[t],e.position[t]))return!1;return!0}class fu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ku(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Ma{}class _r extends Ma{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new ml(e,t,s):"array-contains"===t?new Ju(e,s):"in"===t?new tc(e,s):"not-in"===t?new gc(e,s):"array-contains-any"===t?new mc(e,s):new _r(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Fl(e,s):new ec(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Au(t,this.value)):null!==t&&Ya(this.value)===Ya(t)&&this.matchesComparison(Au(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return un()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class oi extends Ma{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new oi(e,t)}matches(e){return Bo(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Bo(r){return"and"===r.op}function Yu(r){return"or"===r.op}function Xo(r){return Qu(r)&&Bo(r)}function Qu(r){for(const e of r.filters)if(e instanceof oi)return!1;return!0}function Ru(r){if(r instanceof _r)return r.field.canonicalString()+r.op.toString()+xu(r.value);if(Xo(r))return r.filters.map(e=>Ru(e)).join(",");{const e=r.filters.map(t=>Ru(t)).join(",");return`${r.op}(${e})`}}function gl(r,e){return r instanceof _r?(t=r,(s=e)instanceof _r&&t.op===s.op&&t.field.isEqual(s.field)&&Li(t.value,s.value)):r instanceof oi?function(t,s){return s instanceof oi&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,h,y)=>a&&gl(h,s.filters[y]),!0)}(r,e):void un();var t,s}function kl(r,e){const t=r.filters.concat(e);return oi.create(t,r.op)}function Pu(r){return r instanceof _r?`${(e=r).field.canonicalString()} ${e.op} ${xu(e.value)}`:r instanceof oi?function(e){return e.op.toString()+" {"+e.getFilters().map(Pu).join(" ,")+"}"}(r):"Filter";var e}class ml extends _r{constructor(e,t,s){super(e,t,s),this.key=gn.fromName(s.referenceValue)}matches(e){const t=gn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Fl extends _r{constructor(e,t){super(e,"in",t),this.keys=pu(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ec extends _r{constructor(e,t){super(e,"not-in",t),this.keys=pu(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function pu(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>gn.fromName(s.referenceValue))}class Ju extends _r{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pl(t)&&du(t.arrayValue,this.value)}}class tc extends _r{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&du(this.value.arrayValue,t)}}class gc extends _r{constructor(e,t){super(e,"not-in",t)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!du(this.value.arrayValue,t)}}class mc extends _r{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>du(this.value.arrayValue,s))}}class _l{constructor(e,t=null,s=[],a=[],h=null,y=null,P=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=h,this.startAt=y,this.endAt=P,this.ft=null}}function ea(r,e=null,t=[],s=[],a=null,h=null,y=null){return new _l(r,e,t,s,a,h,y)}function Eo(r){const e=sn(r);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Ru(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),ma(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>xu(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>xu(s)).join(",")),e.ft=t}return e.ft}function ta(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Ku(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!gl(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!so(r.startAt,e.startAt)&&so(r.endAt,e.endAt)}function us(r){return gn.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function Ra(r,e){return r.filters.filter(t=>t instanceof _r&&t.field.isEqual(e))}function ya(r,e,t){let s=qu,a=!0;for(const h of Ra(r,e)){let y=qu,P=!0;switch(h.op){case"<":case"<=":y=Ol(h.value);break;case"==":case"in":case">=":y=h.value;break;case">":y=h.value,P=!1;break;case"!=":case"not-in":y=qu}fc({value:s,inclusive:a},{value:y,inclusive:P})<0&&(s=y,a=P)}if(null!==t)for(let h=0;h<r.orderBy.length;++h)if(r.orderBy[h].field.isEqual(e)){const y=t.position[h];fc({value:s,inclusive:a},{value:y,inclusive:t.inclusive})<0&&(s=y,a=t.inclusive);break}return{value:s,inclusive:a}}function Xu(r,e,t){let s=Jo,a=!0;for(const h of Ra(r,e)){let y=Jo,P=!0;switch(h.op){case">=":case">":y=Nc(h.value),P=!1;break;case"==":case"in":case"<=":y=h.value;break;case"<":y=h.value,P=!1;break;case"!=":case"not-in":y=Jo}gd({value:s,inclusive:a},{value:y,inclusive:P})>0&&(s=y,a=P)}if(null!==t)for(let h=0;h<r.orderBy.length;++h)if(r.orderBy[h].field.isEqual(e)){const y=t.position[h];gd({value:s,inclusive:a},{value:y,inclusive:t.inclusive})>0&&(s=y,a=t.inclusive);break}return{value:s,inclusive:a}}class ls{constructor(e,t=null,s=[],a=[],h=null,y="F",P=null,B=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=h,this.limitType=y,this.startAt=P,this.endAt=B,this.dt=null,this._t=null}}function Pa(r,e,t,s,a,h,y,P){return new ls(r,e,t,s,a,h,y,P)}function yl(r){return new ls(r)}function S(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function g(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function I(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function R(r){return null!==r.collectionGroup}function q(r){const e=sn(r);if(null===e.dt){e.dt=[];const t=I(e),s=g(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new fu(t)),e.dt.push(new fu(Di.keyField(),"asc"));else{let a=!1;for(const h of e.explicitOrderBy)e.dt.push(h),h.field.isKeyField()&&(a=!0);if(!a){const h=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new fu(Di.keyField(),h))}}}return e.dt}function oe(r){const e=sn(r);if(!e._t)if("F"===e.limitType)e._t=ea(e.path,e.collectionGroup,q(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const h of q(e))t.push(new fu(h.field,"desc"===h.dir?"asc":"desc"));const s=e.endAt?new hu(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new hu(e.startAt.position,e.startAt.inclusive):null;e._t=ea(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function Ge(r,e){e.getFirstInequalityField(),I(r);const t=r.filters.concat([e]);return new ls(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function dt(r,e,t){return new ls(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function on(r,e){return ta(oe(r),oe(e))&&r.limitType===e.limitType}function Pn(r){return`${Eo(oe(r))}|lt:${r.limitType}`}function qn(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Pu(s)).join(", ")}]`),ma(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>xu(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>xu(s)).join(",")),`Target(${t})`}(oe(r))}; limitType=${r.limitType})`}function Cr(r,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):gn.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(r,e)&&function(t,s){for(const a of q(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(r,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(a,h,y){const P=pc(a,h,y);return a.inclusive?P<=0:P<0}(t.startAt,q(t),s)||t.endAt&&!function(a,h,y){const P=pc(a,h,y);return a.inclusive?P>=0:P>0}(t.endAt,q(t),s)));var t,s}function fs(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function va(r){return(e,t)=>{let s=!1;for(const a of q(r)){const h=_c(a,e,t);if(0!==h)return h;s=s||a.field.isKeyField()}return 0}}function _c(r,e,t){const s=r.field.isKeyField()?gn.comparator(e.key,t.key):function(a,h,y){const P=h.data.field(a),B=y.data.field(a);return null!==P&&null!==B?Au(P,B):un()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return un()}}class el{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,h]of s)if(this.equalsFn(a,e))return h}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let h=0;h<a.length;h++)if(this.equalsFn(a[h][0],e))return void(a[h]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(t,s)=>{for(const[a,h]of s)e(a,h)})}isEmpty(){return pi(this.inner)}size(){return this.innerSize}}const Ll=new ci(gn.comparator);function Us(){return Ll}const Ul=new ci(gn.comparator);function Nu(...r){let e=Ul;for(const t of r)e=e.insert(t.key,t);return e}function vl(r){let e=Ul;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Is(){return Ou()}function nc(){return Ou()}function Ou(){return new el(r=>r.toString(),(r,e)=>r.isEqual(e))}const El=new ci(gn.comparator),Oc=new $i(gn.comparator);function jr(...r){let e=Oc;for(const t of r)e=e.add(t);return e}const bh=new $i(Ir);function kc(){return bh}function yc(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zu(e)?"-0":e}}function _d(r){return{integerValue:""+r}}function jd(r,e){return hs(e)?_d(e):yc(r,e)}class vc{constructor(){this._=void 0}}function yd(r,e,t){return r instanceof wl?function(s,a){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Du(a)&&(a=Ka(a)),a&&(h.fields.__previous_value__=a),{mapValue:h}}(t,e):r instanceof tl?vd(r,e):r instanceof Xa?zd(r,e):function(s,a){const h=Hd(s,a),y=Sf(h)+Sf(s.wt);return Ja(h)&&Ja(s.wt)?_d(y):yc(s.serializer,y)}(r,e)}function Fc(r,e,t){return r instanceof tl?vd(r,e):r instanceof Xa?zd(r,e):t}function Hd(r,e){return r instanceof Vl?Ja(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class wl extends vc{}class tl extends vc{constructor(e){super(),this.elements=e}}function vd(r,e){const t=Ed(e);for(const s of r.elements)t.some(a=>Li(a,s))||t.push(s);return{arrayValue:{values:t}}}class Xa extends vc{constructor(e){super(),this.elements=e}}function zd(r,e){let t=Ed(e);for(const s of r.elements)t=t.filter(a=>!Li(a,s));return{arrayValue:{values:t}}}class Vl extends vc{constructor(e,t){super(),this.serializer=e,this.wt=t}}function Sf(r){return Xi(r.integerValue||r.doubleValue)}function Ed(r){return pl(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class gu{constructor(e,t){this.field=e,this.transform=t}}class wd{constructor(e,t){this.version=e,this.transformResults=t}}class Ki{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ki}static exists(e){return new Ki(void 0,e)}static updateTime(e){return new Ki(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mu(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class Ec{}function wc(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new Cl(r.key,Ki.none()):new ku(r.key,r.data,Ki.none());{const t=r.data,s=Zs.empty();let a=new $i(Di.comparator);for(let h of e.fields)if(!a.has(h)){let y=t.field(h);null===y&&h.length>1&&(h=h.popLast(),y=t.field(h)),null===y?s.delete(h):s.set(h,y),a=a.add(h)}return new rl(r.key,s,new vo(a.toArray()),Ki.none())}}function Wd(r,e,t){r instanceof ku?function(s,a,h){const y=s.value.clone(),P=Il(s.fieldTransforms,a,h.transformResults);y.setAll(P),a.convertToFoundDocument(h.version,y).setHasCommittedMutations()}(r,e,t):r instanceof rl?function(s,a,h){if(!mu(s.precondition,a))return void a.convertToUnknownDocument(h.version);const y=Il(s.fieldTransforms,a,h.transformResults),P=a.data;P.setAll(qd(s)),P.setAll(y),a.convertToFoundDocument(h.version,P).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nl(r,e,t,s){return r instanceof ku?function(a,h,y,P){if(!mu(a.precondition,h))return y;const B=a.value.clone(),W=il(a.fieldTransforms,P,h);return B.setAll(W),h.convertToFoundDocument(h.version,B).setHasLocalMutations(),null}(r,e,t,s):r instanceof rl?function(a,h,y,P){if(!mu(a.precondition,h))return y;const B=il(a.fieldTransforms,P,h),W=h.data;return W.setAll(qd(a)),W.setAll(B),h.convertToFoundDocument(h.version,W).setHasLocalMutations(),null===y?null:y.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(ae=>ae.field))}(r,e,t,s):(y=t,mu(r.precondition,h=e)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):y);var h,y}function Th(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),h=Hd(s.transform,a||null);null!=h&&(null===t&&(t=Zs.empty()),t.set(s.field,h))}return t||null}function Dh(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&Da(t,s,(a,h)=>function Gd(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof tl&&s instanceof tl||t instanceof Xa&&s instanceof Xa?Da(t.elements,s.elements,Li):t instanceof Vl&&s instanceof Vl?Li(t.wt,s.wt):t instanceof wl&&s instanceof wl);var t,s}(a,h))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class ku extends Ec{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class rl extends Ec{constructor(e,t,s,a,h=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function qd(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Il(r,e,t){const s=new Map;On(r.length===t.length);for(let a=0;a<t.length;a++){const h=r[a],y=h.transform,P=e.data.field(h.field);s.set(h.field,Fc(y,P,t[a]))}return s}function il(r,e,t){const s=new Map;for(const a of r){const h=a.transform,y=t.data.field(a.field);s.set(a.field,yd(h,y,e))}return s}class Cl extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zd extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Kd{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const h=this.mutations[a];h.key.isEqual(e.key)&&Wd(h,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=nl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=nl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=nc();return this.mutations.forEach(a=>{const h=e.get(a.key),y=h.overlayedDocument;let P=this.applyToLocalView(y,h.mutatedFields);P=t.has(a.key)?null:P;const B=wc(y,P);null!==B&&s.set(a.key,B),y.isValidDocument()||y.convertToNoDocument(Yn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jr())}isEqual(e){return this.batchId===e.batchId&&Da(this.mutations,e.mutations,(t,s)=>Dh(t,s))&&Da(this.baseMutations,e.baseMutations,(t,s)=>Dh(t,s))}}class Sh{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){On(e.mutations.length===s.length);let a=El;const h=e.mutations;for(let y=0;y<h.length;y++)a=a.insert(h[y].key,s[y].version);return new Sh(e,t,s,a)}}class Ah{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Id{constructor(e,t){this.count=e,this.unchangedNames=t}}var Vs,f;function l(r){switch(r){default:return un();case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0}}function c(r){if(void 0===r)return fi("GRPC error has no .code"),ht.UNKNOWN;switch(r){case Vs.OK:return ht.OK;case Vs.CANCELLED:return ht.CANCELLED;case Vs.UNKNOWN:return ht.UNKNOWN;case Vs.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case Vs.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case Vs.INTERNAL:return ht.INTERNAL;case Vs.UNAVAILABLE:return ht.UNAVAILABLE;case Vs.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case Vs.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case Vs.NOT_FOUND:return ht.NOT_FOUND;case Vs.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case Vs.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case Vs.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case Vs.ABORTED:return ht.ABORTED;case Vs.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case Vs.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case Vs.DATA_LOSS:return ht.DATA_LOSS;default:return un()}}(f=Vs||(Vs={}))[f.OK=0]="OK",f[f.CANCELLED=1]="CANCELLED",f[f.UNKNOWN=2]="UNKNOWN",f[f.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",f[f.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",f[f.NOT_FOUND=5]="NOT_FOUND",f[f.ALREADY_EXISTS=6]="ALREADY_EXISTS",f[f.PERMISSION_DENIED=7]="PERMISSION_DENIED",f[f.UNAUTHENTICATED=16]="UNAUTHENTICATED",f[f.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",f[f.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",f[f.ABORTED=10]="ABORTED",f[f.OUT_OF_RANGE=11]="OUT_OF_RANGE",f[f.UNIMPLEMENTED=12]="UNIMPLEMENTED",f[f.INTERNAL=13]="INTERNAL",f[f.UNAVAILABLE=14]="UNAVAILABLE",f[f.DATA_LOSS=15]="DATA_LOSS";class E{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return x}static getOrCreateInstance(){return null===x&&(x=new E),x}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let x=null;function U(){return new TextEncoder}const H=new Rn([4294967295,4294967295],0);function ce(r){const e=U().encode(r),t=new Ft;return t.update(e),new Uint8Array(t.digest())}function Re(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new Rn([t,s],0),new Rn([a,h],0)]}class Be{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new St(`Invalid padding: ${t}`);if(s<0)throw new St(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new St(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new St(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=Rn.fromNumber(this.yt)}Tt(e,t,s){let a=e.add(t.multiply(Rn.fromNumber(s)));return 1===a.compare(H)&&(a=new Rn([a.getBits(0),a.getBits(1)],0)),a.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=ce(e),[s,a]=Re(t);for(let h=0;h<this.hashCount;h++){const y=this.Tt(s,a,h);if(!this.Et(y))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),y=new Be(h,a,t);return s.forEach(P=>y.insert(P)),y}insert(e){if(0===this.yt)return;const t=ce(e),[s,a]=Re(t);for(let h=0;h<this.hashCount;h++){const y=this.Tt(s,a,h);this.Rt(y)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class St extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Mt{constructor(e,t,s,a,h){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Vt.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Mt(Yn.min(),a,new ci(Ir),Us(),jr())}}class Vt{constructor(e,t,s,a,h){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Vt(s,t,jr(),jr(),jr())}}class kn{constructor(e,t,s,a){this.vt=e,this.removedTargetIds=t,this.key=s,this.Pt=a}}class fr{constructor(e,t){this.targetId=e,this.bt=t}}class Ci{constructor(e,t,s=Ai.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Ks{constructor(){this.Vt=0,this.St=Cd(),this.Dt=Ai.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=jr(),t=jr(),s=jr();return this.St.forEach((a,h)=>{switch(h){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:un()}}),new Vt(this.Dt,this.Ct,e,t,s)}$t(){this.xt=!1,this.St=Cd()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class Bl{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=Us(),this.jt=Lc(),this.zt=new ci(Ir)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const s=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&s.Mt(e.resumeToken);break;case 1:s.qt(),s.Nt||s.$t(),s.Mt(e.resumeToken);break;case 2:s.qt(),s.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(s.Ut(),s.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),s.Mt(e.resumeToken));break;default:un()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((s,a)=>{this.Zt(a)&&t(a)})}ee(e){var t;const s=e.targetId,a=e.bt.count,h=this.ne(s);if(h){const y=h.target;if(us(y))if(0===a){const P=new gn(y.path);this.Jt(s,P,Zi.newNoDocument(P,Yn.min()))}else On(1===a);else{const P=this.se(s);if(P!==a){const B=this.ie(e,P);0!==B&&(this.te(s),this.zt=this.zt.insert(s,2===B?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=E.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(W,ae,Le){var st,kt,fn,An,er,si;const ji={localCacheCount:ae,existenceFilterCount:Le.count},di=Le.unchangedNames;return di&&(ji.bloomFilter={applied:0===W,hashCount:null!==(st=di?.hashCount)&&void 0!==st?st:0,bitmapLength:null!==(An=null===(fn=null===(kt=di?.bits)||void 0===kt?void 0:kt.bitmap)||void 0===fn?void 0:fn.length)&&void 0!==An?An:0,padding:null!==(si=null===(er=di?.bits)||void 0===er?void 0:er.padding)&&void 0!==si?si:0}),ji}(B,P,e.bt))}}}}ie(e,t){const{unchangedNames:s,count:a}=e.bt;if(!s||!s.bits)return 1;const{bits:{bitmap:h="",padding:y=0},hashCount:P=0}=s;let B,W;try{B=Uo(h).toUint8Array()}catch(ae){if(ae instanceof Nl)return wi("Decoding the base64 bloom filter in existence filter failed ("+ae.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ae}try{W=new Be(B,y,P)}catch(ae){return wi(ae instanceof St?"BloomFilter error: ":"Applying bloom filter failed: ",ae),1}return 0===W.yt?1:a!==t-this.re(e.targetId,W)?2:0}re(e,t){const s=this.Kt.getRemoteKeysForTarget(e);let a=0;return s.forEach(h=>{const y=this.Kt.oe(),P=`projects/${y.projectId}/databases/${y.database}/documents/${h.path.canonicalString()}`;t.At(P)||(this.Jt(e,h,null),a++)}),a}ue(e){const t=new Map;this.Gt.forEach((h,y)=>{const P=this.ne(y);if(P){if(h.current&&us(P.target)){const B=new gn(P.target.path);null!==this.Qt.get(B)||this.ce(y,B)||this.Jt(y,B,Zi.newNoDocument(B,e))}h.kt&&(t.set(y,h.Ot()),h.$t())}});let s=jr();this.jt.forEach((h,y)=>{let P=!0;y.forEachWhile(B=>{const W=this.ne(B);return!W||"TargetPurposeLimboResolution"===W.purpose||(P=!1,!1)}),P&&(s=s.add(h))}),this.Qt.forEach((h,y)=>y.setReadTime(e));const a=new Mt(e,t,this.zt,this.Qt,s);return this.Qt=Us(),this.jt=Lc(),this.zt=new ci(Ir),a}Ht(e,t){if(!this.Zt(e))return;const s=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,s),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,s){if(!this.Zt(e))return;const a=this.Xt(e);this.ce(e,t)?a.Ft(t,1):a.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),s&&(this.Qt=this.Qt.insert(t,s))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new Ks,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new $i(Ir),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||Lt("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new Ks),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function Lc(){return new ci(gn.comparator)}function Cd(){return new ci(gn.comparator)}const Af={asc:"ASCENDING",desc:"DESCENDING"},Mh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bd={and:"AND",or:"OR"};class pm{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yd(r,e){return r.useProto3Json||ma(e)?e:{value:e}}function Ic(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cs(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function gm(r,e){return Ic(r,e.toTimestamp())}function oo(r){return On(!!r),Yn.fromTimestamp(function(e){const t=Za(e);return new Fi(t.seconds,t.nanos)}(r))}function Qd(r,e){return(t=r,new kr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Rh(r){const e=kr.fromString(r);return On(eh(e)),e}function Td(r,e){return Qd(r.databaseId,e.path)}function bl(r,e){const t=Rh(e);if(t.get(1)!==r.databaseId.projectId)throw new zt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new zt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new gn(Vp(t))}function Ph(r,e){return Qd(r.databaseId,e)}function xf(r){const e=Rh(r);return 4===e.length?kr.emptyPath():Vp(e)}function Uc(r){return new kr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Vp(r){return On(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Mf(r,e,t){return{name:Td(r,e),fields:t.value.mapValue.fields}}function Vc(r,e,t){const s=bl(r,e.name),a=oo(e.updateTime),h=e.createTime?oo(e.createTime):Yn.min(),y=new Zs({mapValue:{fields:e.fields}}),P=Zi.newFoundDocument(s,a,h,y);return t&&P.setHasCommittedMutations(),t?P.setHasCommittedMutations():P}function Bc(r,e){let t;if(e instanceof ku)t={update:Mf(r,e.key,e.value)};else if(e instanceof Cl)t={delete:Td(r,e.key)};else if(e instanceof rl)t={update:Mf(r,e.key,e.data),updateMask:jp(e.fieldMask)};else{if(!(e instanceof Zd))return un();t={verify:Td(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,h){const y=h.transform;if(y instanceof wl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof tl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Xa)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Vl)return{fieldPath:h.field.canonicalString(),increment:y.wt};throw un()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:gm(r,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:un()),t;var a}function Jd(r,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Ki.updateTime(oo(a.updateTime)):void 0!==a.exists?Ki.exists(a.exists):Ki.none():Ki.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(h,y){let P=null;"setToServerValue"in y?(On("REQUEST_TIME"===y.setToServerValue),P=new wl):"appendMissingElements"in y?P=new tl(y.appendMissingElements.values||[]):"removeAllFromArray"in y?P=new Xa(y.removeAllFromArray.values||[]):"increment"in y?P=new Vl(h,y.increment):un();const B=Di.fromServerFormat(y.fieldPath);return new gu(B,P)}(r,a)):[];var a;if(e.update){const a=bl(r,e.update.name),h=new Zs({mapValue:{fields:e.update.fields}});if(e.updateMask){const y=new vo((e.updateMask.fieldPaths||[]).map(W=>Di.fromServerFormat(W)));return new rl(a,h,y,t,s)}return new ku(a,h,t,s)}if(e.delete){const a=bl(r,e.delete);return new Cl(a,t)}if(e.verify){const a=bl(r,e.verify);return new Zd(a,t)}return un()}function Pf(r,e){return{documents:[Ph(r,e.path)]}}function Xd(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Ph(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ph(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(B){if(0!==B.length)return rc(oi.create(B,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const h=function(B){if(0!==B.length)return B.map(W=>{return{field:$l((ae=W).field),direction:Fh(ae.dir)};var ae})}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const y=Yd(r,e.limit);var P,B;return null!==y&&(t.structuredQuery.limit=y),e.startAt&&(t.structuredQuery.startAt={before:(P=e.startAt).inclusive,values:P.position}),e.endAt&&(t.structuredQuery.endAt={before:!(B=e.endAt).inclusive,values:B.position}),t}function Oh(r){let e=xf(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){On(1===s);const ae=t.from[0];ae.allDescendants?a=ae.collectionId:e=e.child(ae.collectionId)}let h=[];t.where&&(h=function(ae){const Le=$p(ae);return Le instanceof oi&&Xo(Le)?Le.getFilters():[Le]}(t.where));let y=[];t.orderBy&&(y=t.orderBy.map(ae=>{return new fu(Cc((Le=ae).field),function(st){switch(st){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Le.direction));var Le}));let P=null;t.limit&&(P=function(ae){let Le;return Le="object"==typeof ae?ae.value:ae,ma(Le)?null:Le}(t.limit));let B=null;var ae;t.startAt&&(B=new hu((ae=t.startAt).values||[],!!ae.before));let W=null;return t.endAt&&(W=function(ae){return new hu(ae.values||[],!ae.before)}(t.endAt)),Pa(e,a,y,h,P,"F",B,W)}function $p(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Cc(e.unaryFilter.field);return _r.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Cc(e.unaryFilter.field);return _r.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Cc(e.unaryFilter.field);return _r.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Cc(e.unaryFilter.field);return _r.create(h,"!=",{nullValue:"NULL_VALUE"});default:return un()}}(r):void 0!==r.fieldFilter?_r.create(Cc((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return un()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return oi.create(e.compositeFilter.filters.map(t=>$p(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return un()}}(e.compositeFilter.op))}(r):un();var e}function Fh(r){return Af[r]}function Nf(r){return Mh[r]}function Lh(r){return bd[r]}function $l(r){return{fieldPath:r.canonicalString()}}function Cc(r){return Di.fromServerFormat(r.fieldPath)}function rc(r){return r instanceof _r?function(e){if("=="===e.op){if(Zu(e.value))return{unaryFilter:{field:$l(e.field),op:"IS_NAN"}};if(Mu(e.value))return{unaryFilter:{field:$l(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Zu(e.value))return{unaryFilter:{field:$l(e.field),op:"IS_NOT_NAN"}};if(Mu(e.value))return{unaryFilter:{field:$l(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$l(e.field),op:Nf(e.op),value:e.value}}}(r):r instanceof oi?function(e){const t=e.getFilters().map(s=>rc(s));return 1===t.length?t[0]:{compositeFilter:{op:Lh(e.op),filters:t}}}(r):un()}function jp(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function eh(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class Fu{constructor(e,t,s,a,h=Yn.min(),y=Yn.min(),P=Ai.EMPTY_BYTE_STRING,B=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=P,this.expectedCount=B}withSequenceNumber(e){return new Fu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Of{constructor(e){this.le=e}}function Dd(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Tl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Td(a=r.le,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:Ic(a,h.version.toTimestamp()),createTime:Ic(a,h.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:ic(e.version)};else{if(!e.isUnknownDocument())return un();s.unknownDocument={path:t.path.toArray(),version:ic(e.version)}}var a,h;return s}function Tl(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function ic(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jl(r){const e=new Fi(r.seconds,r.nanoseconds);return Yn.fromTimestamp(e)}function bc(r,e){const t=(e.baseMutations||[]).map(h=>Jd(r.le,h));for(let h=0;h<e.mutations.length-1;++h)h+1<e.mutations.length&&void 0!==e.mutations[h+1].transform&&(e.mutations[h].updateTransforms=e.mutations[h+1].transform.fieldTransforms,e.mutations.splice(h+1,1),++h);const s=e.mutations.map(h=>Jd(r.le,h)),a=Fi.fromMillis(e.localWriteTimeMs);return new Kd(e.batchId,a,t,s)}function Sd(r){const e=jl(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?jl(r.lastLimboFreeSnapshotVersion):Yn.min();let s;var a;return void 0!==r.query.documents?(On(1===(a=r.query).documents.length),s=oe(yl(xf(a.documents[0])))):s=oe(Oh(r.query)),new Fu(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Ai.fromBase64String(r.resumeToken))}function Vh(r,e){const t=ic(e.snapshotVersion),s=ic(e.lastLimboFreeSnapshotVersion);let a;a=us(e.target)?Pf(r.le,e.target):Xd(r.le,e.target);const h=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Eo(e.target),readTime:t,resumeToken:h,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function sc(r){const e=Oh({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?dt(e,e.limit,"L"):e}function Bh(r,e){return new Ah(e.largestBatchId,Jd(r.le,e.overlayMutation))}function kf(r,e){const t=e.path.lastSegment();return[r,Ji(e.path.popLast()),t]}function Ff(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:ic(s.readTime),documentKey:Ji(s.documentKey.path),largestBatchId:s.largestBatchId}}class $h{getBundleMetadata(e,t){return Lf(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:jl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Lf(e).put({bundleId:(s=t).id,createTime:ic(oo(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Uf(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:sc(a.bundledQuery),readTime:jl(a.readTime)};var a})}saveNamedQuery(e,t){return Uf(e).put({name:(s=t).name,readTime:ic(oo(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Lf(r){return $r(r,"bundles")}function Uf(r){return $r(r,"namedQueries")}class th{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){return new th(e,t.uid||"")}getOverlay(e,t){return $c(e).get(kf(this.userId,t)).next(s=>s?Bh(this.serializer,s):null)}getOverlays(e,t){const s=Is();return Ke.forEach(t,a=>this.getOverlay(e,a).next(h=>{null!==h&&s.set(a,h)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((h,y)=>{const P=new Ah(t,y);a.push(this.de(e,P))}),Ke.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(y=>a.add(Ji(y.getCollectionPath())));const h=[];return a.forEach(y=>{const P=IDBKeyRange.bound([this.userId,y,s],[this.userId,y,s+1],!1,!0);h.push($c(e).J("collectionPathOverlayIndex",P))}),Ke.waitFor(h)}getOverlaysForCollection(e,t,s){const a=Is(),h=Ji(t),y=IDBKeyRange.bound([this.userId,h,s],[this.userId,h,Number.POSITIVE_INFINITY],!0);return $c(e).j("collectionPathOverlayIndex",y).next(P=>{for(const B of P){const W=Bh(this.serializer,B);a.set(W.getKey(),W)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const h=Is();let y;const P=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $c(e).X({index:"collectionGroupOverlayIndex",range:P},(B,W,ae)=>{const Le=Bh(this.serializer,W);h.size()<a||Le.largestBatchId===y?(h.set(Le.getKey(),Le),y=Le.largestBatchId):ae.done()}).next(()=>h)}de(e,t){return $c(e).put(function(s,a,h){const[y,P,B]=kf(a,h.mutation.key);return{userId:a,collectionPath:P,documentId:B,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:Bc(s.le,h.mutation)}}(this.serializer,this.userId,t))}}function $c(r){return $r(r,"documentOverlays")}class jc{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(Xi(e.integerValue));else if("doubleValue"in e){const s=Xi(e.doubleValue);isNaN(s)?this.ge(t,13):(this.ge(t,15),zu(s)?t.ye(0):t.ye(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ge(t,20),"string"==typeof s?t.pe(s):(t.pe(`${s.seconds||""}`),t.ye(s.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(Uo(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ge(t,45),t.ye(s.latitude||0),t.ye(s.longitude||0)}else"mapValue"in e?Pc(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):un()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const s=e.fields||{};this.ge(t,55);for(const a of Object.keys(s))this.Ie(a,t),this.we(s[a],t)}ve(e,t){const s=e.values||[];this.ge(t,50);for(const a of s)this.we(a,t)}Ae(e,t){this.ge(t,37),gn.fromName(e).path.forEach(s=>{this.ge(t,60),this.Pe(s,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function Hp(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function Hc(r){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const h=Hp(255&t[a]);if(s+=h,8!==h)break}return s}(r);return Math.ceil(e/8)}jc.be=new jc;class m{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Se(s.value),s=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.xe(s.value),s=t.next();this.Ne()}ke(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Se(s);else if(s<2048)this.Se(960|s>>>6),this.Se(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Se(480|s>>>12),this.Se(128|63&s>>>6),this.Se(128|63&s);else{const a=t.codePointAt(0);this.Se(240|a>>>18),this.Se(128|63&a>>>12),this.Se(128|63&a>>>6),this.Se(128|63&a)}}this.De()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.xe(s);else if(s<2048)this.xe(960|s>>>6),this.xe(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.xe(480|s>>>12),this.xe(128|63&s>>>6),this.xe(128|63&s);else{const a=t.codePointAt(0);this.xe(240|a>>>18),this.xe(128|63&a>>>12),this.xe(128|63&a>>>6),this.xe(128|63&a)}}this.Ne()}Oe(e){const t=this.$e(e),s=Hc(t);this.Fe(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Be(e){const t=this.$e(e),s=Hc(t);this.Fe(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(a){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,a,!1),new Uint8Array(h.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class v{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class w{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class M{constructor(){this.Qe=new m,this.je=new v(this.Qe),this.ze=new w(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}class Q{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Q(this.indexId,this.documentKey,this.arrayValue,s)}}function Ve(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=Ot(r.arrayValue,e.arrayValue),0!==t?t:(t=Ot(r.directionalValue,e.directionalValue),0!==t?t:gn.comparator(r.documentKey,e.documentKey)))}function Ot(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class bn{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const s=t;s.isInequality()?this.Xe=s:this.Ye.push(s)}}Ze(e){On(e.collectionGroup===this.collectionId);const t=Pl(e);if(void 0!==t&&!this.tn(t))return!1;const s=Sa(e);let a=0,h=0;for(;a<s.length&&this.tn(s[a]);++a);if(a===s.length)return!0;if(void 0!==this.Xe){const y=s[a];if(!this.en(this.Xe,y)||!this.nn(this.Je[h++],y))return!1;++a}for(;a<s.length;++a)if(h>=this.Je.length||!this.nn(this.Je[h++],s[a]))return!1;return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Vn(r){var e,t;if(On(r instanceof _r||r instanceof oi),r instanceof _r){if(r instanceof tc){const a=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(h=>_r.create(r.field,"==",h)))||[];return oi.create(a,"or")}return r}const s=r.filters.map(a=>Vn(a));return oi.create(s,r.op)}function vr(r){if(0===r.getFilters().length)return[];const e=Bs(Vn(r));return On(bs(e)),Xr(e)||xi(e)?[e]:e.getFilters()}function Xr(r){return r instanceof _r}function xi(r){return r instanceof oi&&Xo(r)}function bs(r){return Xr(r)||xi(r)||function(e){if(e instanceof oi&&Yu(e)){for(const t of e.getFilters())if(!Xr(t)&&!xi(t))return!1;return!0}return!1}(r)}function Bs(r){if(On(r instanceof _r||r instanceof oi),r instanceof _r)return r;if(1===r.filters.length)return Bs(r.filters[0]);const e=r.filters.map(s=>Bs(s));let t=oi.create(e,r.op);return t=Ts(t),bs(t)?t:(On(t instanceof oi),On(Bo(t)),On(t.filters.length>1),t.filters.reduce((s,a)=>_s(s,a)))}function _s(r,e){let t;return On(r instanceof _r||r instanceof oi),On(e instanceof _r||e instanceof oi),t=r instanceof _r?e instanceof _r?oi.create([r,e],"and"):_u(r,e):e instanceof _r?_u(e,r):function(s,a){if(On(s.filters.length>0&&a.filters.length>0),Bo(s)&&Bo(a))return kl(s,a.getFilters());const h=Yu(s)?s:a,y=Yu(s)?a:s,P=h.filters.map(B=>_s(B,y));return oi.create(P,"or")}(r,e),Ts(t)}function _u(r,e){if(Bo(e))return kl(e,r.getFilters());{const t=e.filters.map(s=>_s(r,s));return oi.create(t,"or")}}function Ts(r){if(On(r instanceof _r||r instanceof oi),r instanceof _r)return r;const e=r.getFilters();if(1===e.length)return Ts(e[0]);if(Qu(r))return r;const t=e.map(a=>Ts(a)),s=[];return t.forEach(a=>{a instanceof _r?s.push(a):a instanceof oi&&(a.op===r.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:oi.create(s,r.op)}class Hl{constructor(){this.sn=new sl}addToCollectionParentIndex(e,t){return this.sn.add(t),Ke.resolve()}getCollectionParents(e,t){return Ke.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return Ke.resolve()}deleteFieldIndex(e,t){return Ke.resolve()}getDocumentsMatchingTarget(e,t){return Ke.resolve(null)}getIndexType(e,t){return Ke.resolve(0)}getFieldIndexes(e,t){return Ke.resolve([])}getNextCollectionGroupToUpdate(e){return Ke.resolve(null)}getMinOffset(e,t){return Ke.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,t){return Ke.resolve(ds.min())}updateCollectionGroup(e,t,s){return Ke.resolve()}updateIndexEntries(e,t){return Ke.resolve()}}class sl{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new $i(kr.comparator),h=!a.has(s);return this.index[t]=a.add(s),h}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new $i(kr.comparator)).toArray()}}const wo=new Uint8Array(0);class na{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new sl,this.on=new el(s=>Eo(s),(s,a)=>ta(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.rn.add(t)});const h={collectionId:s,parent:Ji(a)};return Tc(e).put(h)}return Ke.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[Ql(t),""],!1,!0);return Tc(e).j(a).next(h=>{for(const y of h){if(y.collectionId!==t)break;s.push(es(y.parent))}return s})}addFieldIndex(e,t){const s=eu(e),a={indexId:(y=t).indexId,collectionGroup:y.collectionGroup,fields:y.fields.map(P=>[P.fieldPath.canonicalString(),P.kind])};var y;delete a.indexId;const h=s.add(a);if(t.indexState){const y=zl(e);return h.next(P=>{y.put(Ff(P,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return h.next()}deleteFieldIndex(e,t){const s=eu(e),a=zl(e),h=Na(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Na(e);let a=!0;const h=new Map;return Ke.forEach(this.un(t),y=>this.cn(e,y).next(P=>{a&&(a=!!P),h.set(y,P)})).next(()=>{if(a){let y=jr();const P=[];return Ke.forEach(h,(B,W)=>{var ae;Lt("IndexedDbIndexManager",`Using index ${ae=B,`id=${ae.indexId}|cg=${ae.collectionGroup}|f=${ae.fields.map(di=>`${di.fieldPath}:${di.kind}`).join(",")}`} to execute ${Eo(t)}`);const Le=function(di,vu){const Co=Pl(vu);if(void 0===Co)return null;for(const js of Ra(di,Co.fieldPath))switch(js.op){case"array-contains-any":return js.value.arrayValue.values||[];case"array-contains":return[js.value]}return null}(W,B),st=function(di,vu){const Co=new Map;for(const js of Sa(vu))for(const ul of Ra(di,js.fieldPath))switch(ul.op){case"==":case"in":Co.set(js.fieldPath.canonicalString(),ul.value);break;case"not-in":case"!=":return Co.set(js.fieldPath.canonicalString(),ul.value),Array.from(Co.values())}return null}(W,B),kt=function(di,vu){const Co=[];let js=!0;for(const ul of Sa(vu)){const cc=0===ul.kind?ya(di,ul.fieldPath,di.startAt):Xu(di,ul.fieldPath,di.startAt);Co.push(cc.value),js&&(js=cc.inclusive)}return new hu(Co,js)}(W,B),fn=function(di,vu){const Co=[];let js=!0;for(const ul of Sa(vu)){const cc=0===ul.kind?Xu(di,ul.fieldPath,di.endAt):ya(di,ul.fieldPath,di.endAt);Co.push(cc.value),js&&(js=cc.inclusive)}return new hu(Co,js)}(W,B),An=this.an(B,W,kt),er=this.an(B,W,fn),si=this.hn(B,W,st),ji=this.ln(B.indexId,Le,An,kt.inclusive,er,fn.inclusive,si);return Ke.forEach(ji,di=>s.H(di,t.limit).next(vu=>{vu.forEach(Co=>{const js=gn.fromSegments(Co.documentKey);y.has(js)||(y=y.add(js),P.push(js))})}))}).next(()=>P)}return Ke.resolve(null)})}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:vr(oi.create(e.filters,"and")).map(s=>ea(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,t),t)}ln(e,t,s,a,h,y,P){const B=(null!=t?t.length:1)*Math.max(s.length,h.length),W=B/(null!=t?t.length:1),ae=[];for(let Le=0;Le<B;++Le){const st=t?this.fn(t[Le/W]):wo,kt=this.dn(e,st,s[Le%W],a),fn=this._n(e,st,h[Le%W],y),An=P.map(er=>this.dn(e,st,er,!0));ae.push(...this.createRange(kt,fn,An))}return ae}dn(e,t,s,a){const h=new Q(e,gn.empty(),t,s);return a?h:h.He()}_n(e,t,s,a){const h=new Q(e,gn.empty(),t,s);return a?h.He():h}cn(e,t){const s=new bn(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(h=>{let y=null;for(const P of h)s.Ze(P)&&(!y||P.fields.length>y.fields.length)&&(y=P);return y})}getIndexType(e,t){let s=2;const a=this.un(t);return Ke.forEach(a,h=>this.cn(e,h).next(y=>{y?0!==s&&y.fields.length<function(P){let B=new $i(Di.comparator),W=!1;for(const ae of P.filters)for(const Le of ae.getFlattenedFilters())Le.field.isKeyField()||("array-contains"===Le.op||"array-contains-any"===Le.op?W=!0:B=B.add(Le.field));for(const ae of P.orderBy)ae.field.isKeyField()||(B=B.add(ae.field));return B.size+(W?1:0)}(h)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}wn(e,t){const s=new M;for(const a of Sa(e)){const h=t.data.field(a.fieldPath);if(null==h)return null;const y=s.We(a.kind);jc.be._e(h,y)}return s.Ge()}fn(e){const t=new M;return jc.be._e(e,t.We(0)),t.Ge()}mn(e,t){const s=new M;return jc.be._e(Qa(this.databaseId,t),s.We(function(a){const h=Sa(a);return 0===h.length?0:h[h.length-1].kind}(e))),s.Ge()}hn(e,t,s){if(null===s)return[];let a=[];a.push(new M);let h=0;for(const y of Sa(e)){const P=s[h++];for(const B of a)if(this.gn(t,y.fieldPath)&&pl(P))a=this.yn(a,y,P);else{const W=B.We(y.kind);jc.be._e(P,W)}}return this.pn(a)}an(e,t,s){return this.hn(e,t,s.position)}pn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Ge();return t}yn(e,t,s){const a=[...e],h=[];for(const y of s.arrayValue.values||[])for(const P of a){const B=new M;B.seed(P.Ge()),jc.be._e(y,B.We(t.kind)),h.push(B)}return h}gn(e,t){return!!e.filters.find(s=>s instanceof _r&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=eu(e),a=zl(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(h=>{const y=[];return Ke.forEach(h,P=>a.get([P.indexId,this.uid]).next(B=>{y.push(function(W,ae){const Le=ae?new Qi(ae.sequenceNumber,new ds(jl(ae.readTime),new gn(es(ae.documentKey)),ae.largestBatchId)):Qi.empty(),st=W.fields.map(([kt,fn])=>new Iu(Di.fromServerFormat(kt),fn));return new pa(W.indexId,W.collectionGroup,st,Le)}(P,B))})).next(()=>y)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const h=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==h?h:Ir(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=eu(e),h=zl(e);return this.In(e).next(y=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(P=>Ke.forEach(P,B=>h.put(Ff(B.indexId,this.user,y,s)))))}updateIndexEntries(e,t){const s=new Map;return Ke.forEach(t,(a,h)=>{const y=s.get(a.collectionGroup);return(y?Ke.resolve(y):this.getFieldIndexes(e,a.collectionGroup)).next(P=>(s.set(a.collectionGroup,P),Ke.forEach(P,B=>this.Tn(e,a,B).next(W=>{const ae=this.En(h,B);return W.isEqual(ae)?Ke.resolve():this.An(e,h,B,W,ae)}))))})}Rn(e,t,s,a){return Na(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(s,t.key),documentKey:t.key.path.toArray()})}vn(e,t,s,a){return Na(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(s,t.key),t.key.path.toArray()])}Tn(e,t,s){const a=Na(e);let h=new $i(Ve);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,t)])},(y,P)=>{h=h.add(new Q(s.indexId,t,P.arrayValue,P.directionalValue))}).next(()=>h)}En(e,t){let s=new $i(Ve);const a=this.wn(t,e);if(null==a)return s;const h=Pl(t);if(null!=h){const y=e.data.field(h.fieldPath);if(pl(y))for(const P of y.arrayValue.values||[])s=s.add(new Q(t.indexId,e.key,this.fn(P),a))}else s=s.add(new Q(t.indexId,e.key,wo,a));return s}An(e,t,s,a,h){Lt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const y=[];return function(P,B,W,ae,Le){const st=P.getIterator(),kt=B.getIterator();let fn=qa(st),An=qa(kt);for(;fn||An;){let er=!1,si=!1;if(fn&&An){const ji=W(fn,An);ji<0?si=!0:ji>0&&(er=!0)}else null!=fn?si=!0:er=!0;er?(ae(An),An=qa(kt)):si?(Le(fn),fn=qa(st)):(fn=qa(st),An=qa(kt))}}(a,h,Ve,P=>{y.push(this.Rn(e,t,s,P))},P=>{y.push(this.vn(e,t,s,P))}),Ke.waitFor(y)}In(e){let t=1;return zl(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,h)=>{h.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((y,P)=>Ve(y,P)).filter((y,P,B)=>!P||0!==Ve(y,B[P-1]));const a=[];a.push(e);for(const y of s){const P=Ve(y,e),B=Ve(y,t);if(0===P)a[0]=e.He();else if(P>0&&B<0)a.push(y),a.push(y.He());else if(B>0)break}a.push(t);const h=[];for(let y=0;y<a.length;y+=2){if(this.Pn(a[y],a[y+1]))return[];h.push(IDBKeyRange.bound([a[y].indexId,this.uid,a[y].arrayValue,a[y].directionalValue,wo,[]],[a[y+1].indexId,this.uid,a[y+1].arrayValue,a[y+1].directionalValue,wo,[]]))}return h}Pn(e,t){return Ve(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nh)}getMinOffset(e,t){return Ke.mapArray(this.un(t),s=>this.cn(e,s).next(a=>a||un())).next(nh)}}function Tc(r){return $r(r,"collectionParents")}function Na(r){return $r(r,"indexEntries")}function eu(r){return $r(r,"indexConfiguration")}function zl(r){return $r(r,"indexState")}function nh(r){On(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const a=r[s].indexState.offset;_o(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new ds(e.readTime,e.documentKey,t)}const J_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class yu{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new yu(e,yu.DEFAULT_COLLECTION_PERCENTILE,yu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zp(r,e,t){const s=r.store("mutations"),a=r.store("documentMutations"),h=[],y=IDBKeyRange.only(t.batchId);let P=0;const B=s.X({range:y},(ae,Le,st)=>(P++,st.delete()));h.push(B.next(()=>{On(1===P)}));const W=[];for(const ae of t.mutations){const Le=lu(e,ae.key.path,t.batchId);h.push(a.delete(Le)),W.push(ae.key)}return Ke.waitFor(h).next(()=>W)}function Gp(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw un();e=r.noDocument}return JSON.stringify(e).length}yu.DEFAULT_COLLECTION_PERCENTILE=10,yu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yu.DEFAULT=new yu(41943040,yu.DEFAULT_COLLECTION_PERCENTILE,yu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yu.DISABLED=new yu(-1,0,0);class jh{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.bn={}}static fe(e,t,s,a){On(""!==e.uid);const h=e.isAuthenticated()?e.uid:"";return new jh(h,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zc(e).X({index:"userMutationsIndex",range:s},(a,h,y)=>{t=!1,y.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const h=Ad(e),y=zc(e);return y.add({}).next(P=>{On("number"==typeof P);const B=new Kd(P,t,s,a),W=function(st,kt,fn){const An=fn.baseMutations.map(si=>Bc(st.le,si)),er=fn.mutations.map(si=>Bc(st.le,si));return{userId:kt,batchId:fn.batchId,localWriteTimeMs:fn.localWriteTime.toMillis(),baseMutations:An,mutations:er}}(this.serializer,this.userId,B),ae=[];let Le=new $i((st,kt)=>Ir(st.canonicalString(),kt.canonicalString()));for(const st of a){const kt=lu(this.userId,st.key.path,P);Le=Le.add(st.key.path.popLast()),ae.push(y.put(W)),ae.push(h.put(kt,Gu))}return Le.forEach(st=>{ae.push(this.indexManager.addToCollectionParentIndex(e,st))}),e.addOnCommittedListener(()=>{this.bn[P]=B.keys()}),Ke.waitFor(ae).next(()=>B)})}lookupMutationBatch(e,t){return zc(e).get(t).next(s=>s?(On(s.userId===this.userId),bc(this.serializer,s)):null)}Vn(e,t){return this.bn[t]?Ke.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.bn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let h=null;return zc(e).X({index:"userMutationsIndex",range:a},(y,P,B)=>{P.userId===this.userId&&(On(P.batchId>=s),h=bc(this.serializer,P)),B.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return zc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,h,y)=>{s=h.batchId,y.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zc(e).j("userMutationsIndex",t).next(s=>s.map(a=>bc(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=za(this.userId,t.path),a=IDBKeyRange.lowerBound(s),h=[];return Ad(e).X({range:a},(y,P,B)=>{const[W,ae,Le]=y,st=es(ae);if(W===this.userId&&t.path.isEqual(st))return zc(e).get(Le).next(kt=>{if(!kt)throw un();On(kt.userId===this.userId),h.push(bc(this.serializer,kt))});B.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new $i(Ir);const a=[];return t.forEach(h=>{const y=za(this.userId,h.path),P=IDBKeyRange.lowerBound(y),B=Ad(e).X({range:P},(W,ae,Le)=>{const[st,kt,fn]=W,An=es(kt);st===this.userId&&h.path.isEqual(An)?s=s.add(fn):Le.done()});a.push(B)}),Ke.waitFor(a).next(()=>this.Sn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,h=za(this.userId,s),y=IDBKeyRange.lowerBound(h);let P=new $i(Ir);return Ad(e).X({range:y},(B,W,ae)=>{const[Le,st,kt]=B,fn=es(st);Le===this.userId&&s.isPrefixOf(fn)?fn.length===a&&(P=P.add(kt)):ae.done()}).next(()=>this.Sn(e,P))}Sn(e,t){const s=[],a=[];return t.forEach(h=>{a.push(zc(e).get(h).next(y=>{if(null===y)throw un();On(y.userId===this.userId),s.push(bc(this.serializer,y))}))}),Ke.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return zp(e.at,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Dn(t.batchId)}),Ke.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ke.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Ad(e).X({range:s},(h,y,P)=>{if(h[0]===this.userId){const B=es(h[1]);a.push(B)}else P.done()}).next(()=>{On(0===a.length)})})}containsKey(e,t){return Wp(e,this.userId,t)}Cn(e){return mm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Wp(r,e,t){const s=za(e,t.path),a=s[1],h=IDBKeyRange.lowerBound(s);let y=!1;return Ad(r).X({range:h,Y:!0},(P,B,W)=>{const[ae,Le,st]=P;ae===e&&Le===a&&(y=!0),W.done()}).next(()=>y)}function zc(r){return $r(r,"mutations")}function Ad(r){return $r(r,"documentMutations")}function mm(r){return $r(r,"mutationQueues")}class xd{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new xd(0)}static kn(){return new xd(-1)}}class Gl{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next(t=>{const s=new xd(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(t=>Yn.fromTimestamp(new Fi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Mn(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.$n(e,t).next(()=>this.Mn(e).next(s=>(s.targetCount+=1,this.Fn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rh(e).delete(t.targetId)).next(()=>this.Mn(e)).next(s=>(On(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const h=[];return rh(e).X((y,P)=>{const B=Sd(P);B.sequenceNumber<=t&&null===s.get(B.targetId)&&(a++,h.push(this.removeTargetData(e,B)))}).next(()=>Ke.waitFor(h)).next(()=>a)}forEachTarget(e,t){return rh(e).X((s,a)=>{const h=Sd(a);t(h)})}Mn(e){return qp(e).get("targetGlobalKey").next(t=>(On(null!==t),t))}On(e,t){return qp(e).put("targetGlobalKey",t)}$n(e,t){return rh(e).put(Vh(this.serializer,t))}Fn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Mn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Eo(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let h=null;return rh(e).X({range:a,index:"queryTargetsIndex"},(y,P,B)=>{const W=Sd(P);ta(t,W.target)&&(h=W,B.done())}).next(()=>h)}addMatchingKeys(e,t,s){const a=[],h=Gc(e);return t.forEach(y=>{const P=Ji(y.path);a.push(h.put({targetId:s,path:P})),a.push(this.referenceDelegate.addReference(e,s,y))}),Ke.waitFor(a)}removeMatchingKeys(e,t,s){const a=Gc(e);return Ke.forEach(t,h=>{const y=Ji(h.path);return Ke.waitFor([a.delete([s,y]),this.referenceDelegate.removeReference(e,s,h)])})}removeMatchingKeysForTargetId(e,t){const s=Gc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Gc(e);let h=jr();return a.X({range:s,Y:!0},(y,P,B)=>{const W=es(y[1]),ae=new gn(W);h=h.add(ae)}).next(()=>h)}containsKey(e,t){const s=Ji(t.path),a=IDBKeyRange.bound([s],[Ql(s)],!1,!0);let h=0;return Gc(e).X({index:"documentTargetsIndex",Y:!0,range:a},([y,P],B,W)=>{0!==y&&(h++,W.done())}).next(()=>h>0)}he(e,t){return rh(e).get(t).next(s=>s?Sd(s):null)}}function rh(r){return $r(r,"targets")}function qp(r){return $r(r,"targetGlobal")}function Gc(r){return $r(r,"targetDocuments")}function _m([r,e],[t,s]){const a=Ir(r,t);return 0===a?Ir(e,s):a}class X_{constructor(e){this.Bn=e,this.buffer=new $i(_m),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();_m(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ym{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){var t=this;Lt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,C.Z)(function*(){t.Kn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){ko(s)?Lt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield ou(s)}yield t.Gn(3e5)}))}}class vm{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Ke.resolve(os.ct);const s=new X_(t);return this.Qn.forEachTarget(e,a=>s.Un(a.sequenceNumber)).next(()=>this.Qn.zn(e,a=>s.Un(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Qn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector","Garbage collection skipped; disabled"),Ke.resolve(J_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J_):this.Wn(e,t))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let s,a,h,y,P,B,W;const ae=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Le=>(Le>this.params.maximumSequenceNumbersToCollect?(Lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Le}`),a=this.params.maximumSequenceNumbersToCollect):a=Le,y=Date.now(),this.nthSequenceNumber(e,a))).next(Le=>(s=Le,P=Date.now(),this.removeTargets(e,s,t))).next(Le=>(h=Le,B=Date.now(),this.removeOrphanedDocuments(e,s))).next(Le=>(W=Date.now(),Ri()<=X.in.DEBUG&&Lt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${y-ae}ms\n\tDetermined least recently used ${a} in `+(P-y)+`ms\n\tRemoved ${h} targets in `+(B-P)+`ms\n\tRemoved ${Le} documents in `+(W-B)+`ms\nTotal Duration: ${W-ae}ms`),Ke.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:h,documentsRemoved:Le})))}}class ey{constructor(e,t){this.db=e,this.garbageCollector=function Em(r,e){return new vm(r,e)}(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Hn(e){let t=0;return this.zn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,(s,a)=>t(a))}addReference(e,t,s){return Vf(e,s)}removeReference(e,t,s){return Vf(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Vf(e,t)}Yn(e,t){return function(s,a){let h=!1;return mm(s).Z(y=>Wp(s,y,a).next(P=>(P&&(h=!0),Ke.resolve(!P)))).next(()=>h)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let h=0;return this.Jn(e,(y,P)=>{if(P<=t){const B=this.Yn(e,y).next(W=>{if(!W)return h++,s.getEntry(e,y).next(()=>(s.removeEntry(y,Yn.min()),Gc(e).delete([0,Ji(y.path)])))});a.push(B)}}).next(()=>Ke.waitFor(a)).next(()=>s.apply(e)).next(()=>h)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Vf(e,t)}Jn(e,t){const s=Gc(e);let a,h=os.ct;return s.X({index:"documentTargetsIndex"},([y,P],{path:B,sequenceNumber:W})=>{0===y?(h!==os.ct&&t(new gn(es(a)),h),h=W,a=B):h=os.ct}).next(()=>{h!==os.ct&&t(new gn(es(a)),h)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Vf(r,e){return Gc(r).put((s=r.currentSequenceNumber,{targetId:0,path:Ji(e.path),sequenceNumber:s}));var s}class ni{constructor(){this.changes=new el(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Ke.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wm{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Md(e).put(s)}removeEntry(e,t,s){return Md(e).delete(function(a,h){const y=a.path.toArray();return[y.slice(0,y.length-2),y[y.length-2],Tl(h),y[y.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Xn(e,s)))}getEntry(e,t){let s=Zi.newInvalidDocument(t);return Md(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ih(t))},(a,h)=>{s=this.Zn(t,h)}).next(()=>s)}ts(e,t){let s={size:0,document:Zi.newInvalidDocument(t)};return Md(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ih(t))},(a,h)=>{s={document:this.Zn(t,h),size:Gp(h)}}).next(()=>s)}getEntries(e,t){let s=Us();return this.es(e,t,(a,h)=>{const y=this.Zn(a,h);s=s.insert(a,y)}).next(()=>s)}ns(e,t){let s=Us(),a=new ci(gn.comparator);return this.es(e,t,(h,y)=>{const P=this.Zn(h,y);s=s.insert(h,P),a=a.insert(h,Gp(y))}).next(()=>({documents:s,ss:a}))}es(e,t,s){if(t.isEmpty())return Ke.resolve();let a=new $i(Kp);t.forEach(B=>a=a.add(B));const h=IDBKeyRange.bound(ih(a.first()),ih(a.last())),y=a.getIterator();let P=y.getNext();return Md(e).X({index:"documentKeyIndex",range:h},(B,W,ae)=>{const Le=gn.fromSegments([...W.prefixPath,W.collectionGroup,W.documentId]);for(;P&&Kp(P,Le)<0;)s(P,null),P=y.getNext();P&&P.isEqual(Le)&&(s(P,W),P=y.hasNext()?y.getNext():null),P?ae.G(ih(P)):ae.done()}).next(()=>{for(;P;)s(P,null),P=y.hasNext()?y.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const h=t.path,y=[h.popLast().toArray(),h.lastSegment(),Tl(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],P=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Md(e).j(IDBKeyRange.bound(y,P,!0)).next(B=>{let W=Us();for(const ae of B){const Le=this.Zn(gn.fromSegments(ae.prefixPath.concat(ae.collectionGroup,ae.documentId)),ae);Le.isFoundDocument()&&(Cr(t,Le)||a.has(Le.key))&&(W=W.insert(Le.key,Le))}return W})}getAllFromCollectionGroup(e,t,s,a){let h=Us();const y=bm(t,s),P=bm(t,ds.max());return Md(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(y,P,!0)},(B,W,ae)=>{const Le=this.Zn(gn.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);h=h.insert(Le.key,Le),h.size===a&&ae.done()}).next(()=>h)}newChangeBuffer(e){return new Im(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Cm(e).get("remoteDocumentGlobalKey").next(t=>(On(!!t),t))}Xn(e,t){return Cm(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const s=function Uh(r,e){let t;if(e.document)t=Vc(r.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=gn.fromSegments(e.noDocument.path),a=jl(e.noDocument.readTime);t=Zi.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return un();{const s=gn.fromSegments(e.unknownDocument.path),a=jl(e.unknownDocument.version);t=Zi.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new Fi(s[0],s[1]);return Yn.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(Yn.min()))return s}return Zi.newInvalidDocument(e)}}function Zp(r){return new wm(r)}class Im extends ni{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new el(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new $i((h,y)=>Ir(h.canonicalString(),y.canonicalString()));return this.changes.forEach((h,y)=>{const P=this.os.get(h);if(t.push(this.rs.removeEntry(e,h,P.readTime)),y.isValidDocument()){const B=Dd(this.rs.serializer,y);a=a.add(h.path.popLast());const W=Gp(B);s+=W-P.size,t.push(this.rs.addEntry(e,h,B))}else if(s-=P.size,this.trackRemovals){const B=Dd(this.rs.serializer,y.convertToNoDocument(Yn.min()));t.push(this.rs.addEntry(e,h,B))}}),a.forEach(h=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,h))}),t.push(this.rs.updateMetadata(e,s)),Ke.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next(s=>(this.os.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.rs.ns(e,t).next(({documents:s,ss:a})=>(a.forEach((h,y)=>{this.os.set(h,{size:y,readTime:s.get(h).readTime})}),s))}}function Cm(r){return $r(r,"remoteDocumentGlobal")}function Md(r){return $r(r,"remoteDocumentsV14")}function ih(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bm(r,e){const t=e.documentKey.path.toArray();return[r,Tl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Kp(r,e){const t=r.path.toArray(),s=e.path.toArray();let a=0;for(let h=0;h<t.length-2&&h<s.length-2;++h)if(a=Ir(t[h],s[h]),a)return a;return a=Ir(t.length,s.length),a||(a=Ir(t[t.length-2],s[s.length-2]),a||Ir(t[t.length-1],s[s.length-1]))}class ty{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Tm{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&nl(s.mutation,a,vo.empty(),Fi.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,jr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=jr()){const a=Is();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(h=>{let y=Nu();return h.forEach((P,B)=>{y=y.insert(P,B.overlayedDocument)}),y}))}getOverlayedDocuments(e,t){const s=Is();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,jr()))}populateOverlays(e,t,s){const a=[];return s.forEach(h=>{t.has(h)||a.push(h)}),this.documentOverlayCache.getOverlays(e,a).next(h=>{h.forEach((y,P)=>{t.set(y,P)})})}computeViews(e,t,s,a){let h=Us();const y=Ou(),P=Ou();return t.forEach((B,W)=>{const ae=s.get(W.key);a.has(W.key)&&(void 0===ae||ae.mutation instanceof rl)?h=h.insert(W.key,W):void 0!==ae?(y.set(W.key,ae.mutation.getFieldMask()),nl(ae.mutation,W,ae.mutation.getFieldMask(),Fi.now())):y.set(W.key,vo.empty())}),this.recalculateAndSaveOverlays(e,h).next(B=>(B.forEach((W,ae)=>y.set(W,ae)),t.forEach((W,ae)=>{var Le;return P.set(W,new ty(ae,null!==(Le=y.get(W))&&void 0!==Le?Le:null))}),P))}recalculateAndSaveOverlays(e,t){const s=Ou();let a=new ci((y,P)=>y-P),h=jr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(y=>{for(const P of y)P.keys().forEach(B=>{const W=t.get(B);if(null===W)return;let ae=s.get(B)||vo.empty();ae=P.applyToLocalView(W,ae),s.set(B,ae);const Le=(a.get(P.batchId)||jr()).add(B);a=a.insert(P.batchId,Le)})}).next(()=>{const y=[],P=a.getReverseIterator();for(;P.hasNext();){const B=P.getNext(),W=B.key,ae=B.value,Le=nc();ae.forEach(st=>{if(!h.has(st)){const kt=wc(t.get(st),s.get(st));null!==kt&&Le.set(st,kt),h=h.add(st)}}),y.push(this.documentOverlayCache.saveOverlays(e,W,Le))}return Ke.waitFor(y)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return gn.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):R(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(h=>{const y=a-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-h.size):Ke.resolve(Is());let P=-1,B=h;return y.next(W=>Ke.forEach(W,(ae,Le)=>(P<Le.largestBatchId&&(P=Le.largestBatchId),h.get(ae)?Ke.resolve():this.remoteDocumentCache.getEntry(e,ae).next(st=>{B=B.insert(ae,st)}))).next(()=>this.populateOverlays(e,W,h)).next(()=>this.computeViews(e,B,W,jr())).next(ae=>({batchId:P,changes:vl(ae)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new gn(t)).next(s=>{let a=Nu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let h=Nu();return this.indexManager.getCollectionParents(e,a).next(y=>Ke.forEach(y,P=>{const B=(W=t,ae=P.child(a),new ls(ae,null,W.explicitOrderBy.slice(),W.filters.slice(),W.limit,W.limitType,W.startAt,W.endAt));var W,ae;return this.getDocumentsMatchingCollectionQuery(e,B,s).next(W=>{W.forEach((ae,Le)=>{h=h.insert(ae,Le)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(a=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(h=>{a.forEach((P,B)=>{const W=B.getKey();null===h.get(W)&&(h=h.insert(W,Zi.newInvalidDocument(W)))});let y=Nu();return h.forEach((P,B)=>{const W=a.get(P);void 0!==W&&nl(W.mutation,B,vo.empty(),Fi.now()),Cr(t,B)&&(y=y.insert(P,B))}),y})}}class Vv{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return Ke.resolve(this.us.get(t))}saveBundleMetadata(e,t){var s;return this.us.set(t.id,{id:(s=t).id,version:s.version,createTime:oo(s.createTime)}),Ke.resolve()}getNamedQuery(e,t){return Ke.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(s=t).name,query:sc(s.bundledQuery),readTime:oo(s.readTime)}),Ke.resolve();var s}}class Dm{constructor(){this.overlays=new ci(gn.comparator),this.hs=new Map}getOverlay(e,t){return Ke.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Is();return Ke.forEach(t,a=>this.getOverlay(e,a).next(h=>{null!==h&&s.set(a,h)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,h)=>{this.de(e,t,h)}),Ke.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.hs.get(s);return void 0!==a&&(a.forEach(h=>this.overlays=this.overlays.remove(h)),this.hs.delete(s)),Ke.resolve()}getOverlaysForCollection(e,t,s){const a=Is(),h=t.length+1,y=new gn(t.child("")),P=this.overlays.getIteratorFrom(y);for(;P.hasNext();){const B=P.getNext().value,W=B.getKey();if(!t.isPrefixOf(W.path))break;W.path.length===h&&B.largestBatchId>s&&a.set(B.getKey(),B)}return Ke.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let h=new ci((W,ae)=>W-ae);const y=this.overlays.getIterator();for(;y.hasNext();){const W=y.getNext().value;if(W.getKey().getCollectionGroup()===t&&W.largestBatchId>s){let ae=h.get(W.largestBatchId);null===ae&&(ae=Is(),h=h.insert(W.largestBatchId,ae)),ae.set(W.getKey(),W)}}const P=Is(),B=h.getIterator();for(;B.hasNext()&&(B.getNext().value.forEach((W,ae)=>P.set(W,ae)),!(P.size()>=a)););return Ke.resolve(P)}de(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const y=this.hs.get(a.largestBatchId).delete(s.key);this.hs.set(a.largestBatchId,y)}this.overlays=this.overlays.insert(s.key,new Ah(t,s));let h=this.hs.get(t);void 0===h&&(h=jr(),this.hs.set(t,h)),this.hs.set(t,h.add(s.key))}}class Bf{constructor(){this.ls=new $i($s.fs),this.ds=new $i($s._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const s=new $s(e,t);this.ls=this.ls.add(s),this.ds=this.ds.add(s)}ws(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gs(new $s(e,t))}ys(e,t){e.forEach(s=>this.removeReference(s,t))}ps(e){const t=new gn(new kr([])),s=new $s(t,e),a=new $s(t,e+1),h=[];return this.ds.forEachInRange([s,a],y=>{this.gs(y),h.push(y.key)}),h}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new gn(new kr([])),s=new $s(t,e),a=new $s(t,e+1);let h=jr();return this.ds.forEachInRange([s,a],y=>{h=h.add(y.key)}),h}containsKey(e){const t=new $s(e,0),s=this.ls.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class $s{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return gn.comparator(e.key,t.key)||Ir(e.Es,t.Es)}static _s(e,t){return Ir(e.Es,t.Es)||gn.comparator(e.key,t.key)}}class ny{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new $i($s.fs)}checkEmpty(e){return Ke.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const h=this.As;this.As++;const y=new Kd(h,t,s,a);this.mutationQueue.push(y);for(const P of a)this.Rs=this.Rs.add(new $s(P.key,h)),this.indexManager.addToCollectionParentIndex(e,P.key.path.popLast());return Ke.resolve(y)}lookupMutationBatch(e,t){return Ke.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.Ps(t+1),h=a<0?0:a;return Ke.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return Ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new $s(t,0),a=new $s(t,Number.POSITIVE_INFINITY),h=[];return this.Rs.forEachInRange([s,a],y=>{const P=this.vs(y.Es);h.push(P)}),Ke.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new $i(Ir);return t.forEach(a=>{const h=new $s(a,0),y=new $s(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([h,y],P=>{s=s.add(P.Es)})}),Ke.resolve(this.bs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let h=s;gn.isDocumentKey(h)||(h=h.child(""));const y=new $s(new gn(h),0);let P=new $i(Ir);return this.Rs.forEachWhile(B=>{const W=B.key.path;return!!s.isPrefixOf(W)&&(W.length===a&&(P=P.add(B.Es)),!0)},y),Ke.resolve(this.bs(P))}bs(e){const t=[];return e.forEach(s=>{const a=this.vs(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){On(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return Ke.forEach(t.mutations,a=>{const h=new $s(a.key,t.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Dn(e){}containsKey(e,t){const s=new $s(t,0),a=this.Rs.firstAfterOrEqual(s);return Ke.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return Ke.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Yp{constructor(e){this.Ss=e,this.docs=new ci(gn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),h=a?a.size:0,y=this.Ss(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:y}),this.size+=y-h,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Ke.resolve(s?s.document.mutableCopy():Zi.newInvalidDocument(t))}getEntries(e,t){let s=Us();return t.forEach(a=>{const h=this.docs.get(a);s=s.insert(a,h?h.document.mutableCopy():Zi.newInvalidDocument(a))}),Ke.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let h=Us();const y=t.path,P=new gn(y.child("")),B=this.docs.getIteratorFrom(P);for(;B.hasNext();){const{key:W,value:{document:ae}}=B.getNext();if(!y.isPrefixOf(W.path))break;W.path.length>y.length+1||_o(Po(ae),s)<=0||(a.has(ae.key)||Cr(t,ae))&&(h=h.insert(ae.key,ae.mutableCopy()))}return Ke.resolve(h)}getAllFromCollectionGroup(e,t,s,a){un()}Ds(e,t){return Ke.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Qp(this)}getSize(e){return Ke.resolve(this.size)}}class Qp extends ni{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.rs.addEntry(e,a)):this.rs.removeEntry(s)}),Ke.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class ry{constructor(e){this.persistence=e,this.Cs=new el(t=>Eo(t),ta),this.lastRemoteSnapshotVersion=Yn.min(),this.highestTargetId=0,this.xs=0,this.Ns=new Bf,this.targetCount=0,this.ks=xd.Nn()}forEachTarget(e,t){return this.Cs.forEach((s,a)=>t(a)),Ke.resolve()}getLastRemoteSnapshotVersion(e){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ke.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.xs&&(this.xs=t),Ke.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new xd(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,Ke.resolve()}updateTargetData(e,t){return this.$n(t),Ke.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(e,t,s){let a=0;const h=[];return this.Cs.forEach((y,P)=>{P.sequenceNumber<=t&&null===s.get(P.targetId)&&(this.Cs.delete(y),h.push(this.removeMatchingKeysForTargetId(e,P.targetId)),a++)}),Ke.waitFor(h).next(()=>a)}getTargetCount(e){return Ke.resolve(this.targetCount)}getTargetData(e,t){const s=this.Cs.get(t)||null;return Ke.resolve(s)}addMatchingKeys(e,t,s){return this.Ns.ws(t,s),Ke.resolve()}removeMatchingKeys(e,t,s){this.Ns.ys(t,s);const a=this.persistence.referenceDelegate,h=[];return a&&t.forEach(y=>{h.push(a.markPotentiallyOrphaned(e,y))}),Ke.waitFor(h)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),Ke.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ns.Ts(t);return Ke.resolve(s)}containsKey(e,t){return Ke.resolve(this.Ns.containsKey(t))}}class Sm{constructor(e,t){this.Ms={},this.overlays={},this.Os=new os(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new ry(this),this.indexManager=new Hl,this.remoteDocumentCache=new Yp(s=>this.referenceDelegate.Bs(s)),this.serializer=new Of(t),this.Ls=new Vv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Dm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ms[e.toKey()];return s||(s=new ny(t,this.referenceDelegate),this.Ms[e.toKey()]=s),s}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,s){Lt("MemoryPersistence","Starting transaction:",e);const a=new Bv(this.Os.next());return this.referenceDelegate.qs(),s(a).next(h=>this.referenceDelegate.Us(a).next(()=>h)).toPromise().then(h=>(a.raiseOnCommittedEvent(),h))}Ks(e,t){return Ke.or(Object.values(this.Ms).map(s=>()=>s.containsKey(e,t)))}}class Bv extends No{constructor(e){super(),this.currentSequenceNumber=e}}class Jp{constructor(e){this.persistence=e,this.Gs=new Bf,this.Qs=null}static js(e){return new Jp(e)}get zs(){if(this.Qs)return this.Qs;throw un()}addReference(e,t,s){return this.Gs.addReference(s,t),this.zs.delete(s.toString()),Ke.resolve()}removeReference(e,t,s){return this.Gs.removeReference(s,t),this.zs.add(s.toString()),Ke.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),Ke.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(a=>this.zs.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(h=>this.zs.add(h.toString()))}).next(()=>s.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.zs,s=>{const a=gn.fromPath(s);return this.Ws(e,a).next(h=>{h||t.removeEntry(a,Yn.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(s=>{s?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return Ke.or([()=>Ke.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class Am{constructor(e){this.serializer=e}$(e,t,s,a){const h=new au("createOrUpgrade",t);var P;s<1&&a>=1&&(e.createObjectStore("owner"),(P=e).createObjectStore("mutationQueues",{keyPath:"userId"}),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bu,{unique:!0}),P.createObjectStore("documentMutations"),iy(e),function(P){P.createObjectStore("remoteDocuments")}(e));let y=Ke.resolve();return s<3&&a>=3&&(0!==s&&(function(P){P.deleteObjectStore("targetDocuments"),P.deleteObjectStore("targets"),P.deleteObjectStore("targetGlobal")}(e),iy(e)),y=y.next(()=>function(P){const B=P.store("targetGlobal"),W={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Yn.min().toTimestamp(),targetCount:0};return B.put("targetGlobalKey",W)}(h))),s<4&&a>=4&&(0!==s&&(y=y.next(()=>function(P,B){return B.store("mutations").j().next(W=>{P.deleteObjectStore("mutations"),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bu,{unique:!0});const ae=B.store("mutations"),Le=W.map(st=>ae.put(st));return Ke.waitFor(Le)})}(e,h))),y=y.next(()=>{!function(P){P.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(y=y.next(()=>this.Js(h))),s<6&&a>=6&&(y=y.next(()=>(function(P){P.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(h)))),s<7&&a>=7&&(y=y.next(()=>this.Xs(h))),s<8&&a>=8&&(y=y.next(()=>this.Zs(e,h))),s<9&&a>=9&&(y=y.next(()=>{!function(P){P.objectStoreNames.contains("remoteDocumentChanges")&&P.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(y=y.next(()=>this.ti(h))),s<11&&a>=11&&(y=y.next(()=>{(function(P){P.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(P){P.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(y=y.next(()=>{!function(P){const B=P.createObjectStore("documentOverlays",{keyPath:Cn});B.createIndex("collectionPathOverlayIndex",En,{unique:!1}),B.createIndex("collectionGroupOverlayIndex",Jr,{unique:!1})}(e)})),s<13&&a>=13&&(y=y.next(()=>function(P){const B=P.createObjectStore("remoteDocumentsV14",{keyPath:yo});B.createIndex("documentKeyIndex",Ga),B.createIndex("collectionGroupIndex",D)}(e)).next(()=>this.ei(e,h)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(y=y.next(()=>this.ni(e,h))),s<15&&a>=15&&(y=y.next(()=>function(P){P.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),P.createObjectStore("indexState",{keyPath:J}).createIndex("sequenceNumberIndex",le,{unique:!1}),P.createObjectStore("indexEntries",{keyPath:ze}).createIndex("documentKeyIndex",At,{unique:!1})}(e))),y}Ys(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=Gp(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Js(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>Ke.forEach(a,h=>{const y=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",y).next(P=>Ke.forEach(P,B=>{On(B.userId===h.userId);const W=bc(this.serializer,B);return zp(e,h.userId,W).next(()=>{})}))}))}Xs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const h=[];return s.X((y,P)=>{const B=new kr(y),W=[0,Ji(B)];h.push(t.get(W).next(ae=>ae?Ke.resolve():t.put({targetId:0,path:Ji(B),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>Ke.waitFor(h))})}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:$});const s=t.store("collectionParents"),a=new sl,h=y=>{if(a.add(y)){const P=y.lastSegment(),B=y.popLast();return s.put({collectionId:P,parent:Ji(B)})}};return t.store("remoteDocuments").X({Y:!0},(y,P)=>{const B=new kr(y);return h(B.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([y,P,B],W)=>{const ae=es(P);return h(ae.popLast())}))}ti(e){const t=e.store("targets");return t.X((s,a)=>{const h=Sd(a),y=Vh(this.serializer,h);return t.put(y)})}ei(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((h,y)=>{const P=t.store("remoteDocumentsV14"),B=(W=y,W.document?new gn(kr.fromString(W.document.name).popFirst(5)):W.noDocument?gn.fromSegments(W.noDocument.path):W.unknownDocument?gn.fromSegments(W.unknownDocument.path):un()).path.toArray();var W;const ae={prefixPath:B.slice(0,B.length-2),collectionGroup:B[B.length-2],documentId:B[B.length-1],readTime:y.readTime||[0,0],unknownDocument:y.unknownDocument,noDocument:y.noDocument,document:y.document,hasCommittedMutations:!!y.hasCommittedMutations};a.push(P.put(ae))}).next(()=>Ke.waitFor(a))}ni(e,t){const s=t.store("mutations"),a=Zp(this.serializer),h=new Sm(Jp.js,this.serializer.le);return s.j().next(y=>{const P=new Map;return y.forEach(B=>{var W;let ae=null!==(W=P.get(B.userId))&&void 0!==W?W:jr();bc(this.serializer,B).keys().forEach(Le=>ae=ae.add(Le)),P.set(B.userId,ae)}),Ke.forEach(P,(B,W)=>{const ae=new ar(W),Le=th.fe(this.serializer,ae),st=h.getIndexManager(ae),kt=jh.fe(ae,this.serializer,st,h.referenceDelegate);return new Tm(a,kt,Le,st).recalculateAndSaveOverlaysForDocumentKeys(new Ko(t,os.ct),B).next()})})}}function iy(r){r.createObjectStore("targetDocuments",{keyPath:b}).createIndex("documentTargetsIndex",O,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",A,{unique:!0}),r.createObjectStore("targetGlobal")}const Xp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wc{constructor(e,t,s,a,h,y,P,B,W,ae,Le=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.si=h,this.window=y,this.document=P,this.ii=W,this.ri=ae,this.oi=Le,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=st=>Promise.resolve(),!Wc.D())throw new zt(ht.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ey(this,a),this.fi=t+"main",this.serializer=new Of(B),this.di=new Oo(this.fi,this.oi,new Am(this.serializer)),this.Fs=new Gl(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Zp(this.serializer),this.Ls=new $h,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ae&&fi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new zt(ht.FAILED_PRECONDITION,Xp);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new os(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){var t=this;return this.li=function(){var s=(0,C.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(function(){var t=(0,C.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,C.Z)(function*(){t.started&&(yield t.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(t=>this.isPrimary&&!t?this.Ei(e).next(()=>!1):!!t&&this.Ai(e).next(()=>!0))).catch(e=>{if(ko(e))return Lt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Lt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return Hh(e).get("owner").next(t=>Ke.resolve(this.Ri(t)))}vi(e){return zh(e).delete(this.clientId)}Pi(){var e=this;return(0,C.Z)(function*(){if(e.isPrimary&&!e.bi(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=$r(s,"clientMetadata");return a.j().next(h=>{const y=e.Vi(h,18e5),P=h.filter(B=>-1===y.indexOf(B));return Ke.forEach(P,B=>a.delete(B.clientId)).next(()=>P)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Si(s.clientId))}})()}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?Ke.resolve(!0):Hh(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new zt(ht.FAILED_PRECONDITION,Xp);return!1}}return!(!this.networkEnabled||!this.inForeground)||zh(e).j().next(s=>void 0===this.Vi(s,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Lt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,C.Z)(function*(){e.$s=!1,e.Ci(),e.ai&&(e.ai.cancel(),e.ai=null),e.xi(),e.Ni(),yield e.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Ko(t,os.ct);return e.Ei(s).next(()=>e.vi(s))}),e.di.close(),e.ki()})()}Vi(e,t){return e.filter(s=>this.bi(s.updateTimeMs,t)&&!this.Di(s.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>zh(e).j().next(t=>this.Vi(t,18e5).map(s=>s.clientId)))}get started(){return this.$s}getMutationQueue(e,t){return jh.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new na(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return th.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,s){Lt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",h=15===(y=this.oi)?as:14===y?Lo:13===y?Ii:12===y?Fo:11===y?Si:void un();var y;let P;return this.di.runTransaction(e,a,h,B=>(P=new Ko(B,this.Os?this.Os.next():os.ct),"readwrite-primary"===t?this.Ii(P).next(W=>!!W||this.Ti(P)).next(W=>{if(!W)throw fi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new zt(ht.FAILED_PRECONDITION,ro);return s(P)}).next(W=>this.Ai(P).next(()=>W)):this.Oi(P).next(()=>s(P)))).then(B=>(P.raiseOnCommittedEvent(),B))}Oi(e){return Hh(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)&&!this.Ri(t)&&!(this.ri||this.allowTabSynchronization&&t.allowTabSynchronization))throw new zt(ht.FAILED_PRECONDITION,Xp)})}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hh(e).put("owner",t)}static D(){return Oo.D()}Ei(e){const t=Hh(e);return t.get("owner").next(s=>this.Ri(s)?(Lt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ke.resolve())}bi(e,t){const s=Date.now();return!(e<s-t||e>s&&(fi(`Detected an update time that is in the future: ${e} > ${s}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const t=/(?:Version|Mobile)\/1[456]/;(0,Se.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return Lt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return fi("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){fi("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch{}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Hh(r){return $r(r,"owner")}function zh(r){return $r(r,"clientMetadata")}function sh(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class eg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.$i=s,this.Fi=a}static Bi(e,t){let s=jr(),a=jr();for(const h of t.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:a=a.add(h.doc.key)}return new eg(e,t.fromCache,s,a)}}class tg{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ui(e,t).next(h=>h||this.Ki(e,t,a,s)).next(h=>h||this.Gi(e,t))}Ui(e,t){if(S(t))return Ke.resolve(null);let s=oe(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=dt(t,null,"F"),s=oe(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(h=>{const y=jr(...h);return this.qi.getDocuments(e,y).next(P=>this.indexManager.getMinOffset(e,s).next(B=>{const W=this.Qi(t,P);return this.ji(t,W,y,B.readTime)?this.Ui(e,dt(t,null,"F")):this.zi(e,W,t,B)}))})))}Ki(e,t,s,a){return S(t)||a.isEqual(Yn.min())?this.Gi(e,t):this.qi.getDocuments(e,s).next(h=>{const y=this.Qi(t,h);return this.ji(t,y,s,a)?this.Gi(e,t):(Ri()<=X.in.DEBUG&&Lt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),qn(t)),this.zi(e,y,t,no(a,-1)))})}Qi(e,t){let s=new $i(va(e));return t.forEach((a,h)=>{Cr(e,h)&&(s=s.add(h))}),s}ji(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const h="F"===e.limitType?t.last():t.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(a)>0)}Gi(e,t){return Ri()<=X.in.DEBUG&&Lt("QueryEngine","Using full collection scan to execute query:",qn(t)),this.qi.getDocumentsMatchingQuery(e,t,ds.min())}zi(e,t,s,a){return this.qi.getDocumentsMatchingQuery(e,s,a).next(h=>(t.forEach(y=>{h=h.insert(y.key,y)}),h))}}class sy{constructor(e,t,s,a){this.persistence=e,this.Wi=t,this.serializer=a,this.Hi=new ci(Ir),this.Ji=new el(h=>Eo(h),ta),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(s)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tm(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function xm(r,e,t,s){return new sy(r,e,t,s)}function Mm(r,e){return ng.apply(this,arguments)}function ng(){return ng=(0,C.Z)(function*(r,e){const t=sn(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(h=>(a=h,t.Zi(e),t.mutationQueue.getAllMutationBatches(s))).next(h=>{const y=[],P=[];let B=jr();for(const W of a){y.push(W.batchId);for(const ae of W.mutations)B=B.add(ae.key)}for(const W of h){P.push(W.batchId);for(const ae of W.mutations)B=B.add(ae.key)}return t.localDocuments.getDocuments(s,B).next(W=>({tr:W,removedBatchIds:y,addedBatchIds:P}))})})}),ng.apply(this,arguments)}function rg(r){const e=sn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function ig(r,e,t){let s=jr(),a=jr();return t.forEach(h=>s=s.add(h)),e.getEntries(r,s).next(h=>{let y=Us();return t.forEach((P,B)=>{const W=h.get(P);B.isFoundDocument()!==W.isFoundDocument()&&(a=a.add(P)),B.isNoDocument()&&B.version.isEqual(Yn.min())?(e.removeEntry(P,B.readTime),y=y.insert(P,B)):!W.isValidDocument()||B.version.compareTo(W.version)>0||0===B.version.compareTo(W.version)&&W.hasPendingWrites?(e.addEntry(B),y=y.insert(P,B)):Lt("LocalStore","Ignoring outdated watch update for ",P,". Current version:",W.version," Watch version:",B.version)}),{er:y,nr:a}})}function Rm(r,e){const t=sn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function qc(r,e){const t=sn(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Fs.getTargetData(s,e).next(h=>h?(a=h,Ke.resolve(a)):t.Fs.allocateTargetId(s).next(y=>(a=new Fu(e,y,"TargetPurposeListen",s.currentSequenceNumber),t.Fs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Hi.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(s.targetId,s),t.Ji.set(e,s.targetId)),s})}function Gh(r,e,t){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,C.Z)(function*(r,e,t){const s=sn(r),a=s.Hi.get(e),h=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",h,y=>s.persistence.referenceDelegate.removeTarget(y,a)))}catch(y){if(!ko(y))throw y;Lt("LocalStore",`Failed to update sequence numbers for target ${e}: ${y}`)}s.Hi=s.Hi.remove(e),s.Ji.delete(a.target)}),Wh.apply(this,arguments)}function jf(r,e,t){const s=sn(r);let a=Yn.min(),h=jr();return s.persistence.runTransaction("Execute query","readonly",y=>function(P,B,W){const ae=sn(P),Le=ae.Ji.get(W);return void 0!==Le?Ke.resolve(ae.Hi.get(Le)):ae.Fs.getTargetData(B,W)}(s,y,oe(e)).next(P=>{if(P)return a=P.lastLimboFreeSnapshotVersion,s.Fs.getMatchingKeysForTargetId(y,P.targetId).next(B=>{h=B})}).next(()=>s.Wi.getDocumentsMatchingQuery(y,e,t?a:Yn.min(),t?h:jr())).next(P=>(sg(s,fs(e),P),{documents:P,sr:h})))}function uy(r,e){const t=sn(r),s=sn(t.Fs),a=t.Hi.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",h=>s.he(h,e).next(y=>y?y.target:null))}function Rd(r,e){const t=sn(r),s=t.Yi.get(e)||Yn.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Xi.getAllFromCollectionGroup(a,e,no(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(sg(t,e,a),a))}function sg(r,e,t){let s=r.Yi.get(e)||Yn.min();t.forEach((a,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),r.Yi.set(e,s)}function Hf(){return Hf=(0,C.Z)(function*(r,e,t,s){const a=sn(r);let h=jr(),y=Us();for(const W of t){const ae=e.ir(W.metadata.name);W.document&&(h=h.add(ae));const Le=e.rr(W);Le.setReadTime(e.ur(W.metadata.readTime)),y=y.insert(ae,Le)}const P=a.Xi.newChangeBuffer({trackRemovals:!0}),B=yield qc(a,(W=s,oe(yl(kr.fromString(`__bundle__/docs/${W}`)))));var W;return a.persistence.runTransaction("Apply bundle documents","readwrite",W=>ig(W,P,y).next(ae=>(P.apply(W),ae)).next(ae=>a.Fs.removeMatchingKeysForTargetId(W,B.targetId).next(()=>a.Fs.addMatchingKeys(W,h,B.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(W,ae.er,ae.nr)).next(()=>ae.er)))}),Hf.apply(this,arguments)}function cy(r,e){return og.apply(this,arguments)}function og(){return og=(0,C.Z)(function*(r,e,t=jr()){const s=yield qc(r,oe(sc(e.bundledQuery))),a=sn(r);return a.persistence.runTransaction("Save named query","readwrite",h=>{const y=oo(e.readTime);if(s.snapshotVersion.compareTo(y)>=0)return a.Ls.saveNamedQuery(h,e);const P=s.withResumeToken(Ai.EMPTY_BYTE_STRING,y);return a.Hi=a.Hi.insert(P.targetId,P),a.Fs.updateTargetData(h,P).next(()=>a.Fs.removeMatchingKeysForTargetId(h,s.targetId)).next(()=>a.Fs.addMatchingKeys(h,t,s.targetId)).next(()=>a.Ls.saveNamedQuery(h,e))})}),og.apply(this,arguments)}function qh(r,e){return`firestore_clients_${r}_${e}`}function Pd(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Zh(r,e){return`firestore_targets_${r}_${e}`}class Zc{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static cr(e,t,s){const a=JSON.parse(s);let h,y="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return y&&a.error&&(y="string"==typeof a.error.message&&"string"==typeof a.error.code,y&&(h=new zt(a.error.code,a.error.message))),y?new Zc(e,t,a.state,h):(fi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nd{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static cr(e,t){const s=JSON.parse(t);let a,h="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return h&&s.error&&(h="string"==typeof s.error.message&&"string"==typeof s.error.code,h&&(a=new zt(s.error.code,s.error.message))),h?new Nd(e,s.state,a):(fi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Od{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,h=kc();for(let y=0;a&&y<s.activeTargetIds.length;++y)a=hs(s.activeTargetIds[y]),h=h.add(s.activeTargetIds[y]);return a?new Od(e,h):(fi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zf{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zf(t.clientId,t.onlineState):(fi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Kh{constructor(){this.activeTargetIds=kc()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yh{constructor(e,t,s,a,h){this.window=e,this.si=t,this.persistenceKey=s,this.dr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new ci(Ir),this.started=!1,this.gr=[];const y=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.yr=qh(this.persistenceKey,this.dr),this.pr=`firestore_sequence_number_${this.persistenceKey}`,this.mr=this.mr.insert(this.dr,new Kh),this.Ir=new RegExp(`^firestore_clients_${y}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${y}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${y}_(\\d+)$`),this.Ar=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(P){return`firestore_bundle_loaded_v2_${P}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,C.Z)(function*(){const t=yield e.syncEngine.Mi();for(const a of t){if(a===e.dr)continue;const h=e.getItem(qh(e.persistenceKey,a));if(h){const y=Od.cr(a,h);y&&(e.mr=e.mr.insert(y.clientId,y))}}e.vr();const s=e.storage.getItem(e.Ar);if(s){const a=e.Pr(s);a&&e.br(a)}for(const a of e.gr)e.wr(a);e.gr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,s){this.Sr(e,t,s),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Zh(this.persistenceKey,e));if(s){const a=Nd.cr(e,s);a&&(t=a.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zh(this.persistenceKey,e))}updateQueryState(e,t,s){this.Nr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Dr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Lt("SharedClientState","READ",e,t),t}setItem(e,t){Lt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Lt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Lt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.yr)return void fi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,C.Z)(function*(){if(t.started){if(null!==s.key)if(t.Ir.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.$r(a,null)}{const a=t.Fr(s.key,s.newValue);if(a)return t.$r(a.clientId,a)}}else if(t.Tr.test(s.key)){if(null!==s.newValue){const a=t.Br(s.key,s.newValue);if(a)return t.Lr(a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.qr(s.key,s.newValue);if(a)return t.Ur(a)}}else if(s.key===t.Ar){if(null!==s.newValue){const a=t.Pr(s.newValue);if(a)return t.br(a)}}else if(s.key===t.pr){const a=function(h){let y=os.ct;if(null!=h)try{const P=JSON.parse(h);On("number"==typeof P),y=P}catch(P){fi("SharedClientState","Failed to read sequence number from WebStorage",P)}return y}(s.newValue);a!==os.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Kr(s.newValue);yield Promise.all(a.map(h=>t.syncEngine.Gr(h)))}}else t.gr.push(s)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,s){const a=new Zc(this.currentUser,e,t,s),h=Pd(this.persistenceKey,this.currentUser,e);this.setItem(h,a.ar())}Dr(e){const t=Pd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){this.storage.setItem(this.Ar,JSON.stringify({clientId:this.dr,onlineState:e}))}Nr(e,t,s){const a=Zh(this.persistenceKey,e),h=new Nd(e,t,s);this.setItem(a,h.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const s=this.Or(e);return Od.cr(s,t)}Br(e,t){const s=this.Tr.exec(e),a=Number(s[1]);return Zc.cr(new ar(void 0!==s[2]?s[2]:null),a,t)}qr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return Nd.cr(a,t)}Pr(e){return zf.cr(e)}Kr(e){return JSON.parse(e)}Lr(e){var t=this;return(0,C.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Qr(e.batchId,e.state,e.error);Lt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const s=t?this.mr.insert(e,t):this.mr.remove(e),a=this.Vr(this.mr),h=this.Vr(s),y=[],P=[];return h.forEach(B=>{a.has(B)||y.push(B)}),a.forEach(B=>{h.has(B)||P.push(B)}),this.syncEngine.zr(y,P).then(()=>{this.mr=s})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=kc();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Gf{constructor(){this.Wr=new Kh,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,s){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new Kh,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Pm{Jr(e){}shutdown(){}}class Wf{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){Lt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){Lt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qf=null;function ag(){return null===qf?qf=268435456+Math.round(2147483648*Math.random()):qf++,"0x"+qf.toString(16)}const Nm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dy{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const Oa="WebChannelConnection";class Om extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,s,a,h){const y=ag(),P=this.Io(e,t);Lt("RestConnection",`Sending RPC '${e}' ${y}:`,P,s);const B={};return this.To(B,a,h),this.Eo(e,P,B,s).then(W=>(Lt("RestConnection",`Received RPC '${e}' ${y}: `,W),W),W=>{throw wi("RestConnection",`RPC '${e}' ${y} failed with error: `,W,"url: ",P,"request:",s),W})}Ao(e,t,s,a,h,y){return this.po(e,t,s,a,h)}To(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Or,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,h)=>e[h]=a),s&&s.headers.forEach((a,h)=>e[h]=a)}Io(e,t){return`${this.wo}/v1/${t}:${Nm[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,s,a){const h=ag();return new Promise((y,P)=>{const B=new pt;B.setWithCredentials(!0),B.listenOnce(k.COMPLETE,()=>{try{switch(B.getLastErrorCode()){case ja.NO_ERROR:const ae=B.getResponseJson();Lt(Oa,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(ae)),y(ae);break;case ja.TIMEOUT:Lt(Oa,`RPC '${e}' ${h} timed out`),P(new zt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case ja.HTTP_ERROR:const Le=B.getStatus();if(Lt(Oa,`RPC '${e}' ${h} failed with status:`,Le,"response text:",B.getResponseText()),Le>0){let st=B.getResponseJson();Array.isArray(st)&&(st=st[0]);const kt=st?.error;if(kt&&kt.status&&kt.message){const fn=function(An){const er=An.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(er)>=0?er:ht.UNKNOWN}(kt.status);P(new zt(fn,kt.message))}else P(new zt(ht.UNKNOWN,"Server responded with status "+B.getStatus()))}else P(new zt(ht.UNAVAILABLE,"Connection failed."));break;default:un()}}finally{Lt(Oa,`RPC '${e}' ${h} completed.`)}});const W=JSON.stringify(a);Lt(Oa,`RPC '${e}' ${h} sending request:`,a),B.send(t,"POST",W,s,15)})}Ro(e,t,s){const a=ag(),h=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=Vu(),P=fa(),B={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(B.xmlHttpFactory=new ie({})),this.To(B.initMessageHeaders,t,s),B.encodeInitMessageHeaders=!0;const W=h.join("");Lt(Oa,`Creating RPC '${e}' stream ${a}: ${W}`,B);const ae=y.createWebChannel(W,B);let Le=!1,st=!1;const kt=new dy({io:An=>{st?Lt(Oa,`Not sending because RPC '${e}' stream ${a} is closed:`,An):(Le||(Lt(Oa,`Opening RPC '${e}' stream ${a} transport.`),ae.open(),Le=!0),Lt(Oa,`RPC '${e}' stream ${a} sending:`,An),ae.send(An))},ro:()=>ae.close()}),fn=(An,er,si)=>{An.listen(er,ji=>{try{si(ji)}catch(di){setTimeout(()=>{throw di},0)}})};return fn(ae,xe.EventType.OPEN,()=>{st||Lt(Oa,`RPC '${e}' stream ${a} transport opened.`)}),fn(ae,xe.EventType.CLOSE,()=>{st||(st=!0,Lt(Oa,`RPC '${e}' stream ${a} transport closed`),kt.fo())}),fn(ae,xe.EventType.ERROR,An=>{st||(st=!0,wi(Oa,`RPC '${e}' stream ${a} transport errored:`,An),kt.fo(new zt(ht.UNAVAILABLE,"The operation could not be completed")))}),fn(ae,xe.EventType.MESSAGE,An=>{var er;if(!st){const si=An.data[0];On(!!si);const di=si.error||(null===(er=si[0])||void 0===er?void 0:er.error);if(di){Lt(Oa,`RPC '${e}' stream ${a} received error:`,di);const vu=di.status;let Co=function(ul){const cc=Vs[ul];if(void 0!==cc)return c(cc)}(vu),js=di.message;void 0===Co&&(Co=ht.INTERNAL,js="Unknown error status: "+vu+" with message "+di.message),st=!0,kt.fo(new zt(Co,js)),ae.close()}else Lt(Oa,`RPC '${e}' stream ${a} received:`,si),kt._o(si)}}),fn(P,G.STAT_EVENT,An=>{An.stat===L.PROXY?Lt(Oa,`RPC '${e}' stream ${a} detected buffering proxy`):An.stat===L.NOPROXY&&Lt(Oa,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{kt.lo()},0),kt}}function km(){return typeof window<"u"?window:null}function Zf(){return typeof document<"u"?document:null}function ka(r){return new pm(r,!0)}class ug{constructor(e,t,s=1e3,a=1.5,h=6e4){this.si=e,this.timerId=t,this.vo=s,this.Po=a,this.bo=h,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),s=Math.max(0,Date.now()-this.Do),a=Math.max(0,t-s);a>0&&Lt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,a,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class Fm{constructor(e,t,s,a,h,y,P,B){this.si=e,this.Mo=s,this.Oo=a,this.connection=h,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=P,this.listener=B,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new ug(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,C.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,C.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var s=this;return(0,C.Z)(function*(){s.Wo(),s.Ho(),s.Lo.cancel(),s.$o++,4!==e?s.Lo.reset():t&&t.code===ht.RESOURCE_EXHAUSTED?(fi(t.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),s.Lo.Co()):t&&t.code===ht.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Jo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.$o===t&&this.Xo(s,a)},s=>{e(()=>{const a=new zt(ht.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Zo(a)})})}Xo(e,t){const s=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{s(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(a=>{s(()=>this.Zo(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,C.Z)(function*(){e.state=0,e.start()}))}Zo(e){return Lt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(Lt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $v extends Fm{constructor(e,t,s,a,h,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,y),this.serializer=h}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function Rf(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(B=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:un(),a=e.targetChange.targetIds||[],h=function(B,W){return B.useProto3Json?(On(void 0===W||"string"==typeof W),Ai.fromBase64String(W||"")):(On(void 0===W||W instanceof Uint8Array),Ai.fromUint8Array(W||new Uint8Array))}(r,e.targetChange.resumeToken),y=e.targetChange.cause,P=y&&function(B){const W=void 0===B.code?ht.UNKNOWN:c(B.code);return new zt(W,B.message||"")}(y);t=new Ci(s,a,h,P||null)}else if("documentChange"in e){const s=e.documentChange,a=bl(r,s.document.name),h=oo(s.document.updateTime),y=s.document.createTime?oo(s.document.createTime):Yn.min(),P=new Zs({mapValue:{fields:s.document.fields}}),B=Zi.newFoundDocument(a,h,y,P);t=new kn(s.targetIds||[],s.removedTargetIds||[],B.key,B)}else if("documentDelete"in e){const s=e.documentDelete,a=bl(r,s.document),h=s.readTime?oo(s.readTime):Yn.min(),y=Zi.newNoDocument(a,h);t=new kn([],s.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){const s=e.documentRemove,a=bl(r,s.document);t=new kn([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return un();{const s=e.filter,{count:a=0,unchangedNames:h}=s,y=new Id(a,h);t=new fr(s.targetId,y)}}var B;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return Yn.min();const h=a.targetChange;return h.targetIds&&h.targetIds.length?Yn.min():h.readTime?oo(h.readTime):Yn.min()}(e);return this.listener.eu(t,s)}nu(e){const t={};t.database=Uc(this.serializer),t.addTarget=function(a,h){let y;const P=h.target;if(y=us(P)?{documents:Pf(a,P)}:{query:Xd(a,P)},y.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){y.resumeToken=Cs(a,h.resumeToken);const B=Yd(a,h.expectedCount);null!==B&&(y.expectedCount=B)}else if(h.snapshotVersion.compareTo(Yn.min())>0){y.readTime=Ic(a,h.snapshotVersion.toTimestamp());const B=Yd(a,h.expectedCount);null!==B&&(y.expectedCount=B)}return y}(this.serializer,e);const s=function kh(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return un()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.zo(t)}su(e){const t={};t.database=Uc(this.serializer),t.removeTarget=e,this.zo(t)}}class lg extends Fm{constructor(e,t,s,a,h,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,y),this.serializer=h,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(On(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=function Bp(r,e){return r&&r.length>0?(On(void 0!==e),r.map(t=>function(s,a){let h=oo(s.updateTime?s.updateTime:a);return h.isEqual(Yn.min())&&(h=oo(a)),new wd(h,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=oo(e.commitTime);return this.listener.uu(s,t)}return On(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=Uc(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Bc(this.serializer,s))};this.zo(t)}}class Lm extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.hu=!1}lu(){if(this.hu)throw new zt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,s){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,h])=>this.connection.po(e,t,s,a,h)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new zt(ht.UNKNOWN,a.toString())})}Ao(e,t,s,a){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,y])=>this.connection.Ao(e,t,s,h,y,a)).catch(h=>{throw"FirebaseError"===h.name?(h.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new zt(ht.UNKNOWN,h.toString())})}terminate(){this.hu=!0}}class fy{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(fi(t),this.wu=!1):Lt("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Um{constructor(e,t,s,a,h){var y=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=h,this.vu.Jr(P=>{s.enqueueAndForget((0,C.Z)(function*(){var B;Yc(y)&&(Lt("RemoteStore","Restarting streams for network reachability change."),yield(B=(0,C.Z)(function*(W){const ae=sn(W);ae.Au.add(4),yield Kc(ae),ae.Pu.set("Unknown"),ae.Au.delete(4),yield Qh(ae)}),function(W){return B.apply(this,arguments)})(y))}))}),this.Pu=new fy(s,a)}}function Qh(r){return dg.apply(this,arguments)}function dg(){return dg=(0,C.Z)(function*(r){if(Yc(r))for(const e of r.Ru)yield e(!0)}),dg.apply(this,arguments)}function Kc(r){return hg.apply(this,arguments)}function hg(){return hg=(0,C.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),hg.apply(this,arguments)}function Kf(r,e){const t=sn(r);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),Xh(t)?Dl(t):oc(t).Uo()&&fg(t,e))}function Jh(r,e){const t=sn(r),s=oc(t);t.Eu.delete(e),s.Uo()&&Vm(t,e),0===t.Eu.size&&(s.Uo()?s.Qo():Yc(t)&&t.Pu.set("Unknown"))}function fg(r,e){if(r.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Yn.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}oc(r).nu(e)}function Vm(r,e){r.bu.Lt(e),oc(r).su(e)}function Dl(r){r.bu=new Bl({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),he:e=>r.Eu.get(e)||null,oe:()=>r.datastore.serializer.databaseId}),oc(r).start(),r.Pu.mu()}function Xh(r){return Yc(r)&&!oc(r).qo()&&r.Eu.size>0}function Yc(r){return 0===sn(r).Au.size}function Bm(r){r.bu=void 0}function $m(r){return pg.apply(this,arguments)}function pg(){return pg=(0,C.Z)(function*(r){r.Eu.forEach((e,t)=>{fg(r,e)})}),pg.apply(this,arguments)}function py(r,e){return gg.apply(this,arguments)}function gg(){return gg=(0,C.Z)(function*(r,e){Bm(r),Xh(r)?(r.Pu.pu(e),Dl(r)):r.Pu.set("Unknown")}),gg.apply(this,arguments)}function mg(r,e,t){return _g.apply(this,arguments)}function _g(){return _g=(0,C.Z)(function*(r,e,t){if(r.Pu.set("Online"),e instanceof Ci&&2===e.state&&e.cause)try{yield(s=(0,C.Z)(function*(a,h){const y=h.cause;for(const P of h.targetIds)a.Eu.has(P)&&(yield a.remoteSyncer.rejectListen(P,y),a.Eu.delete(P),a.bu.removeTarget(P))}),function(a,h){return s.apply(this,arguments)})(r,e)}catch(s){Lt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Yf(r,s)}else if(e instanceof kn?r.bu.Wt(e):e instanceof fr?r.bu.ee(e):r.bu.Yt(e),!t.isEqual(Yn.min()))try{const s=yield rg(r.localStore);t.compareTo(s)>=0&&(yield function(a,h){const y=a.bu.ue(h);return y.targetChanges.forEach((P,B)=>{if(P.resumeToken.approximateByteSize()>0){const W=a.Eu.get(B);W&&a.Eu.set(B,W.withResumeToken(P.resumeToken,h))}}),y.targetMismatches.forEach((P,B)=>{const W=a.Eu.get(P);if(!W)return;a.Eu.set(P,W.withResumeToken(Ai.EMPTY_BYTE_STRING,W.snapshotVersion)),Vm(a,P);const ae=new Fu(W.target,P,B,W.sequenceNumber);fg(a,ae)}),a.remoteSyncer.applyRemoteEvent(y)}(r,t))}catch(s){Lt("RemoteStore","Failed to raise snapshot:",s),yield Yf(r,s)}var s}),_g.apply(this,arguments)}function Yf(r,e,t){return oh.apply(this,arguments)}function oh(){return oh=(0,C.Z)(function*(r,e,t){if(!ko(e))throw e;r.Au.add(1),yield Kc(r),r.Pu.set("Offline"),t||(t=()=>rg(r.localStore)),r.asyncQueue.enqueueRetryable((0,C.Z)(function*(){Lt("RemoteStore","Retrying IndexedDB access"),yield t(),r.Au.delete(1),yield Qh(r)}))}),oh.apply(this,arguments)}function ef(r,e){return e().catch(t=>Yf(r,t,e))}function Dc(r){return jm.apply(this,arguments)}function jm(){return jm=(0,C.Z)(function*(r){const e=sn(r),t=Qc(e);let s=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;yg(e);)try{const a=yield Rm(e.localStore,s);if(null===a){0===e.Tu.length&&t.Qo();break}s=a.batchId,jv(e,a)}catch(a){yield Yf(e,a)}vg(e)&&Eg(e)}),jm.apply(this,arguments)}function yg(r){return Yc(r)&&r.Tu.length<10}function jv(r,e){r.Tu.push(e);const t=Qc(r);t.Uo()&&t.ru&&t.ou(e.mutations)}function vg(r){return Yc(r)&&!Qc(r).qo()&&r.Tu.length>0}function Eg(r){Qc(r).start()}function Hm(r){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,C.Z)(function*(r){Qc(r).au()}),Qf.apply(this,arguments)}function wg(r){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,C.Z)(function*(r){const e=Qc(r);for(const t of r.Tu)e.ou(t.mutations)}),Wl.apply(this,arguments)}function Jf(r,e,t){return ah.apply(this,arguments)}function ah(){return ah=(0,C.Z)(function*(r,e,t){const s=r.Tu.shift(),a=Sh.from(s,e,t);yield ef(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),yield Dc(r)}),ah.apply(this,arguments)}function tf(r,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,C.Z)(function*(r,e){var t;e&&Qc(r).ru&&(yield(t=(0,C.Z)(function*(s,a){if(l(h=a.code)&&h!==ht.ABORTED){const y=s.Tu.shift();Qc(s).Go(),yield ef(s,()=>s.remoteSyncer.rejectFailedWrite(y.batchId,a)),yield Dc(s)}var h}),function(s,a){return t.apply(this,arguments)})(r,e)),vg(r)&&Eg(r)}),Ig.apply(this,arguments)}function Cg(r,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,C.Z)(function*(r,e){const t=sn(r);t.asyncQueue.verifyOperationInProgress(),Lt("RemoteStore","RemoteStore received new credentials");const s=Yc(t);t.Au.add(3),yield Kc(t),s&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield Qh(t)}),Xf.apply(this,arguments)}function bg(r,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,C.Z)(function*(r,e){const t=sn(r);e?(t.Au.delete(2),yield Qh(t)):e||(t.Au.add(2),yield Kc(t),t.Pu.set("Unknown"))}),Tg.apply(this,arguments)}function oc(r){return r.Vu||(r.Vu=function(e,t,s){const a=sn(e);return a.lu(),new $v(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{oo:$m.bind(null,r),co:py.bind(null,r),eu:mg.bind(null,r)}),r.Ru.push(function(){var e=(0,C.Z)(function*(t){t?(r.Vu.Go(),Xh(r)?Dl(r):r.Pu.set("Unknown")):(yield r.Vu.stop(),Bm(r))});return function(t){return e.apply(this,arguments)}}())),r.Vu}function Qc(r){return r.Su||(r.Su=function(e,t,s){const a=sn(e);return a.lu(),new lg(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{oo:Hm.bind(null,r),co:tf.bind(null,r),cu:wg.bind(null,r),uu:Jf.bind(null,r)}),r.Ru.push(function(){var e=(0,C.Z)(function*(t){t?(r.Su.Go(),yield Dc(r)):(yield r.Su.stop(),r.Tu.length>0&&(Lt("RemoteStore",`Stopping write stream with ${r.Tu.length} pending writes`),r.Tu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Su}class zm{constructor(e,t,s,a,h){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=h,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(y=>{})}static createAndSchedule(e,t,s,a,h){const y=Date.now()+s,P=new zm(e,t,y,a,h);return P.start(s),P}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zt(ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uh(r,e){if(fi("AsyncQueue",`${e}: ${r}`),ko(r))return new zt(ht.UNAVAILABLE,`${e}: ${r}`);throw r}class lh{constructor(e){this.comparator=e?(t,s)=>e(t,s)||gn.comparator(t.key,s.key):(t,s)=>gn.comparator(t.key,s.key),this.keyedMap=Nu(),this.sortedSet=new ci(this.comparator)}static emptySet(e){return new lh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,h=s.getNext().key;if(!a.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new lh;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Gm{constructor(){this.Du=new ci(gn.comparator)}track(e){const t=e.doc.key,s=this.Du.get(t);s?0!==e.type&&3===s.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==s.type?this.Du=this.Du.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Du=this.Du.remove(t):1===e.type&&2===s.type?this.Du=this.Du.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):un():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,s)=>{e.push(s)}),e}}class ch{constructor(e,t,s,a,h,y,P,B,W){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=h,this.fromCache=y,this.syncStateChanged=P,this.excludesMetadataChanges=B,this.hasCachedResults=W}static fromInitialDocuments(e,t,s,a,h){const y=[];return t.forEach(P=>{y.push({type:0,doc:P})}),new ch(e,t,lh.emptySet(t),y,s,a,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&on(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class gy{constructor(){this.xu=void 0,this.listeners=[]}}class my{constructor(){this.queries=new el(e=>Pn(e),on),this.onlineState="Unknown",this.Nu=new Set}}function Dg(r,e){return ep.apply(this,arguments)}function ep(){return ep=(0,C.Z)(function*(r,e){const t=sn(r),s=e.query;let a=!1,h=t.queries.get(s);if(h||(a=!0,h=new gy),a)try{h.xu=yield t.onListen(s)}catch(y){const P=uh(y,`Initialization of query '${qn(e.query)}' failed`);return void e.onError(P)}t.queries.set(s,h),h.listeners.push(e),e.ku(t.onlineState),h.xu&&e.Mu(h.xu)&&xg(t)}),ep.apply(this,arguments)}function nf(r,e){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,C.Z)(function*(r,e){const t=sn(r),s=e.query;let a=!1;const h=t.queries.get(s);if(h){const y=h.listeners.indexOf(e);y>=0&&(h.listeners.splice(y,1),a=0===h.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Sg.apply(this,arguments)}function Ag(r,e){const t=sn(r);let s=!1;for(const a of e){const y=t.queries.get(a.query);if(y){for(const P of y.listeners)P.Mu(a)&&(s=!0);y.xu=a}}s&&xg(t)}function _y(r,e,t){const s=sn(r),a=s.queries.get(e);if(a)for(const h of a.listeners)h.onError(t);s.queries.delete(e)}function xg(r){r.Nu.forEach(e=>{e.next()})}class Mg{constructor(e,t,s){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=s||{}}Mu(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new ch(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=ch.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class yy{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}class Wm{constructor(e){this.serializer=e}ir(e){return bl(this.serializer,e)}rr(e){return e.metadata.exists?Vc(this.serializer,e.document,!1):Zi.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return oo(e)}}class vy{constructor(e,t,s){this.Qu=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=qm(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const s=kr.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,s=new Wm(this.serializer);for(const a of e)if(a.metadata.queries){const h=s.ir(a.metadata.name);for(const y of a.metadata.queries){const P=(t.get(y)||jr()).add(h);t.set(y,P)}}return t}complete(){var e=this;return(0,C.Z)(function*(){const t=yield function ly(r,e,t,s){return Hf.apply(this,arguments)}(e.localStore,new Wm(e.serializer),e.documents,e.Qu.id),s=e.zu(e.documents);for(const a of e.queries)yield cy(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Wu:e.collectionGroups,Hu:t}})()}}function qm(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Rg{constructor(e){this.key=e}}class Pg{constructor(e){this.key=e}}class Zm{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=jr(),this.mutatedKeys=jr(),this.Zu=va(e),this.tc=new lh(this.Zu)}get ec(){return this.Ju}nc(e,t){const s=t?t.sc:new Gm,a=t?t.tc:this.tc;let h=t?t.mutatedKeys:this.mutatedKeys,y=a,P=!1;const B="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,W="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((ae,Le)=>{const st=a.get(ae),kt=Cr(this.query,Le)?Le:null,fn=!!st&&this.mutatedKeys.has(st.key),An=!!kt&&(kt.hasLocalMutations||this.mutatedKeys.has(kt.key)&&kt.hasCommittedMutations);let er=!1;st&&kt?st.data.isEqual(kt.data)?fn!==An&&(s.track({type:3,doc:kt}),er=!0):this.ic(st,kt)||(s.track({type:2,doc:kt}),er=!0,(B&&this.Zu(kt,B)>0||W&&this.Zu(kt,W)<0)&&(P=!0)):!st&&kt?(s.track({type:0,doc:kt}),er=!0):st&&!kt&&(s.track({type:1,doc:st}),er=!0,(B||W)&&(P=!0)),er&&(kt?(y=y.add(kt),h=An?h.add(ae):h.delete(ae)):(y=y.delete(ae),h=h.delete(ae)))}),null!==this.query.limit)for(;y.size>this.query.limit;){const ae="F"===this.query.limitType?y.last():y.first();y=y.delete(ae.key),h=h.delete(ae.key),s.track({type:1,doc:ae})}return{tc:y,sc:s,ji:P,mutatedKeys:h}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const h=e.sc.Cu();h.sort((W,ae)=>function(Le,st){const kt=fn=>{switch(fn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return un()}};return kt(Le)-kt(st)}(W.type,ae.type)||this.Zu(W.doc,ae.doc)),this.rc(s);const y=t?this.oc():[],P=0===this.Xu.size&&this.current?1:0,B=P!==this.Yu;return this.Yu=P,0!==h.length||B?{snapshot:new ch(this.query,e.tc,a,h,e.mutatedKeys,0===P,B,!1,!!s&&s.resumeToken.approximateByteSize()>0),uc:y}:{uc:y}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new Gm,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=jr(),this.tc.forEach(s=>{this.cc(s.key)&&(this.Xu=this.Xu.add(s.key))});const t=[];return e.forEach(s=>{this.Xu.has(s)||t.push(new Pg(s))}),this.Xu.forEach(s=>{e.has(s)||t.push(new Rg(s))}),t}ac(e){this.Ju=e.sr,this.Xu=jr();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return ch.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class Hv{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Km{constructor(e){this.key=e,this.lc=!1}}class zv{constructor(e,t,s,a,h,y){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=h,this.maxConcurrentLimboResolutions=y,this.fc={},this.dc=new el(P=>Pn(P),on),this._c=new Map,this.wc=new Set,this.mc=new ci(gn.comparator),this.gc=new Map,this.yc=new Bf,this.Ic={},this.Tc=new Map,this.Ec=xd.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function tp(r,e){return Ng.apply(this,arguments)}function Ng(){return Ng=(0,C.Z)(function*(r,e){const t=lp(r);let s,a;const h=t.dc.get(e);if(h)s=h.targetId,t.sharedClientState.addLocalQueryTarget(s),a=h.view.hc();else{const y=yield qc(t.localStore,oe(e)),P=t.sharedClientState.addLocalQueryTarget(y.targetId);s=y.targetId,a=yield Og(t,e,s,"current"===P,y.resumeToken),t.isPrimaryClient&&Kf(t.remoteStore,y)}return a}),Ng.apply(this,arguments)}function Og(r,e,t,s,a){return rf.apply(this,arguments)}function rf(){return rf=(0,C.Z)(function*(r,e,t,s,a){r.Rc=(Le,st,kt)=>{return(fn=(0,C.Z)(function*(An,er,si,ji){let di=er.view.nc(si);di.ji&&(di=yield jf(An.localStore,er.query,!1).then(({documents:js})=>er.view.nc(js,di)));const vu=ji&&ji.targetChanges.get(er.targetId),Co=er.view.applyChanges(di,An.isPrimaryClient,vu);return np(An,er.targetId,Co.uc),Co.snapshot}),function(An,er,si,ji){return fn.apply(this,arguments)})(r,Le,st,kt);var fn};const h=yield jf(r.localStore,e,!0),y=new Zm(e,h.sr),P=y.nc(h.documents),B=Vt.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,a),W=y.applyChanges(P,r.isPrimaryClient,B);np(r,t,W.uc);const ae=new Hv(e,t,y);return r.dc.set(e,ae),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),W.snapshot}),rf.apply(this,arguments)}function Ey(r,e){return Sl.apply(this,arguments)}function Sl(){return Sl=(0,C.Z)(function*(r,e){const t=sn(r),s=t.dc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(h=>!on(h,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Gh(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Jh(t.remoteStore,s.targetId),kd(t,s.targetId)}).catch(ou))):(kd(t,s.targetId),yield Gh(t.localStore,s.targetId,!0))}),Sl.apply(this,arguments)}function Ea(){return Ea=(0,C.Z)(function*(r,e,t){const s=cp(r);try{const a=yield function(h,y){const P=sn(h),B=Fi.now(),W=y.reduce((st,kt)=>st.add(kt.key),jr());let ae,Le;return P.persistence.runTransaction("Locally write mutations","readwrite",st=>{let kt=Us(),fn=jr();return P.Xi.getEntries(st,W).next(An=>{kt=An,kt.forEach((er,si)=>{si.isValidDocument()||(fn=fn.add(er))})}).next(()=>P.localDocuments.getOverlayedDocuments(st,kt)).next(An=>{ae=An;const er=[];for(const si of y){const ji=Th(si,ae.get(si.key).overlayedDocument);null!=ji&&er.push(new rl(si.key,ji,md(ji.value.mapValue),Ki.exists(!0)))}return P.mutationQueue.addMutationBatch(st,B,er,y)}).next(An=>{Le=An;const er=An.applyToLocalDocumentSet(ae,fn);return P.documentOverlayCache.saveOverlays(st,An.batchId,er)})}).then(()=>({batchId:Le.batchId,changes:vl(ae)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(h,y,P){let B=h.Ic[h.currentUser.toKey()];B||(B=new ci(Ir)),B=B.insert(y,P),h.Ic[h.currentUser.toKey()]=B}(s,a.batchId,t),yield ac(s,a.changes),yield Dc(s.remoteStore)}catch(a){const h=uh(a,"Failed to persist write");t.reject(h)}}),Ea.apply(this,arguments)}function Jc(r,e){return dh.apply(this,arguments)}function dh(){return dh=(0,C.Z)(function*(r,e){const t=sn(r);try{const s=yield function ay(r,e){const t=sn(r),s=e.snapshotVersion;let a=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const y=t.Xi.newChangeBuffer({trackRemovals:!0});a=t.Hi;const P=[];e.targetChanges.forEach((ae,Le)=>{const st=a.get(Le);if(!st)return;P.push(t.Fs.removeMatchingKeys(h,ae.removedDocuments,Le).next(()=>t.Fs.addMatchingKeys(h,ae.addedDocuments,Le)));let kt=st.withSequenceNumber(h.currentSequenceNumber);var fn,An,er;null!==e.targetMismatches.get(Le)?kt=kt.withResumeToken(Ai.EMPTY_BYTE_STRING,Yn.min()).withLastLimboFreeSnapshotVersion(Yn.min()):ae.resumeToken.approximateByteSize()>0&&(kt=kt.withResumeToken(ae.resumeToken,s)),a=a.insert(Le,kt),An=kt,er=ae,(0===(fn=st).resumeToken.approximateByteSize()||An.snapshotVersion.toMicroseconds()-fn.snapshotVersion.toMicroseconds()>=3e8||er.addedDocuments.size+er.modifiedDocuments.size+er.removedDocuments.size>0)&&P.push(t.Fs.updateTargetData(h,kt))});let B=Us(),W=jr();if(e.documentUpdates.forEach(ae=>{e.resolvedLimboDocuments.has(ae)&&P.push(t.persistence.referenceDelegate.updateLimboDocument(h,ae))}),P.push(ig(h,y,e.documentUpdates).next(ae=>{B=ae.er,W=ae.nr})),!s.isEqual(Yn.min())){const ae=t.Fs.getLastRemoteSnapshotVersion(h).next(Le=>t.Fs.setTargetsMetadata(h,h.currentSequenceNumber,s));P.push(ae)}return Ke.waitFor(P).next(()=>y.apply(h)).next(()=>t.localDocuments.getLocalViewOfDocuments(h,B,W)).next(()=>B)}).then(h=>(t.Hi=a,h))}(t.localStore,e);e.targetChanges.forEach((a,h)=>{const y=t.gc.get(h);y&&(On(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?y.lc=!0:a.modifiedDocuments.size>0?On(y.lc):a.removedDocuments.size>0&&(On(y.lc),y.lc=!1))}),yield ac(t,s,e)}catch(s){yield ou(s)}}),dh.apply(this,arguments)}function ol(r,e,t){const s=sn(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.dc.forEach((h,y)=>{const P=y.view.ku(e);P.snapshot&&a.push(P.snapshot)}),function(h,y){const P=sn(h);P.onlineState=y;let B=!1;P.queries.forEach((W,ae)=>{for(const Le of ae.listeners)Le.ku(y)&&(B=!0)}),B&&xg(P)}(s.eventManager,e),a.length&&s.fc.eu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function kg(r,e,t){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,C.Z)(function*(r,e,t){const s=sn(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.gc.get(e),h=a&&a.key;if(h){let y=new ci(gn.comparator);y=y.insert(h,Zi.newNoDocument(h,Yn.min()));const P=jr().add(h),B=new Mt(Yn.min(),new Map,new ci(Ir),y,P);yield Jc(s,B),s.mc=s.mc.remove(h),s.gc.delete(e),rp(s)}else yield Gh(s.localStore,e,!1).then(()=>kd(s,e,t)).catch(ou)}),Xc.apply(this,arguments)}function hh(r,e){return ed.apply(this,arguments)}function ed(){return ed=(0,C.Z)(function*(r,e){const t=sn(r),s=e.batch.batchId;try{const a=yield function oy(r,e){const t=sn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),h=t.Xi.newChangeBuffer({trackRemovals:!0});return function(y,P,B,W){const ae=B.batch,Le=ae.keys();let st=Ke.resolve();return Le.forEach(kt=>{st=st.next(()=>W.getEntry(P,kt)).next(fn=>{const An=B.docVersions.get(kt);On(null!==An),fn.version.compareTo(An)<0&&(ae.applyToRemoteDocument(fn,B),fn.isValidDocument()&&(fn.setReadTime(B.commitVersion),W.addEntry(fn)))})}),st.next(()=>y.mutationQueue.removeMutationBatch(P,ae))}(t,s,e,h).next(()=>h.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(y){let P=jr();for(let B=0;B<y.mutationResults.length;++B)y.mutationResults[B].transformResults.length>0&&(P=P.add(y.batch.mutations[B].key));return P}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}(t.localStore,e);id(t,s,null),rd(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield ac(t,a)}catch(a){yield ou(a)}}),ed.apply(this,arguments)}function fh(r,e,t){return td.apply(this,arguments)}function td(){return td=(0,C.Z)(function*(r,e,t){const s=sn(r);try{const a=yield function(h,y){const P=sn(h);return P.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let W;return P.mutationQueue.lookupMutationBatch(B,y).next(ae=>(On(null!==ae),W=ae.keys(),P.mutationQueue.removeMutationBatch(B,ae))).next(()=>P.mutationQueue.performConsistencyCheck(B)).next(()=>P.documentOverlayCache.removeOverlaysForBatchId(B,W,y)).next(()=>P.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(B,W)).next(()=>P.localDocuments.getDocuments(B,W))})}(s.localStore,e);id(s,e,t),rd(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield ac(s,a)}catch(a){yield ou(a)}}),td.apply(this,arguments)}function nd(){return nd=(0,C.Z)(function*(r,e){const t=sn(r);Yc(t.remoteStore)||Lt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(h){const y=sn(h);return y.persistence.runTransaction("Get highest unacknowledged batch id","readonly",P=>y.mutationQueue.getHighestUnacknowledgedBatchId(P))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Tc.get(s)||[];a.push(e),t.Tc.set(s,a)}catch(s){const a=uh(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),nd.apply(this,arguments)}function rd(r,e){(r.Tc.get(e)||[]).forEach(t=>{t.resolve()}),r.Tc.delete(e)}function id(r,e,t){const s=sn(r);let a=s.Ic[s.currentUser.toKey()];if(a){const h=a.get(e);h&&(t?h.reject(t):h.resolve(),a=a.remove(e)),s.Ic[s.currentUser.toKey()]=a}}function kd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.dc.delete(s),t&&r.fc.vc(s,t);r._c.delete(e),r.isPrimaryClient&&r.yc.ps(e).forEach(s=>{r.yc.containsKey(s)||Fg(r,s)})}function Fg(r,e){r.wc.delete(e.path.canonicalString());const t=r.mc.get(e);null!==t&&(Jh(r.remoteStore,t),r.mc=r.mc.remove(e),r.gc.delete(t),rp(r))}function np(r,e,t){for(const s of t)s instanceof Rg?(r.yc.addReference(s.key,e),Ym(r,s)):s instanceof Pg?(Lt("SyncEngine","Document no longer in limbo: "+s.key),r.yc.removeReference(s.key,e),r.yc.containsKey(s.key)||Fg(r,s.key)):un()}function Ym(r,e){const t=e.key,s=t.path.canonicalString();r.mc.get(t)||r.wc.has(s)||(Lt("SyncEngine","New document in limbo: "+t),r.wc.add(s),rp(r))}function rp(r){for(;r.wc.size>0&&r.mc.size<r.maxConcurrentLimboResolutions;){const e=r.wc.values().next().value;r.wc.delete(e);const t=new gn(kr.fromString(e)),s=r.Ec.next();r.gc.set(s,new Km(t)),r.mc=r.mc.insert(t,s),Kf(r.remoteStore,new Fu(oe(yl(t.path)),s,"TargetPurposeLimboResolution",os.ct))}}function ac(r,e,t){return ip.apply(this,arguments)}function ip(){return ip=(0,C.Z)(function*(r,e,t){const s=sn(r),a=[],h=[],y=[];var P;s.dc.isEmpty()||(s.dc.forEach((P,B)=>{y.push(s.Rc(B,e,t).then(W=>{if((W||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(B.targetId,W?.fromCache?"not-current":"current"),W){a.push(W);const ae=eg.Bi(B.targetId,W);h.push(ae)}}))}),yield Promise.all(y),s.fc.eu(a),yield(P=(0,C.Z)(function*(B,W){const ae=sn(B);try{yield ae.persistence.runTransaction("notifyLocalViewChanges","readwrite",Le=>Ke.forEach(W,st=>Ke.forEach(st.$i,kt=>ae.persistence.referenceDelegate.addReference(Le,st.targetId,kt)).next(()=>Ke.forEach(st.Fi,kt=>ae.persistence.referenceDelegate.removeReference(Le,st.targetId,kt)))))}catch(Le){if(!ko(Le))throw Le;Lt("LocalStore","Failed to update sequence numbers: "+Le)}for(const Le of W){const st=Le.targetId;if(!Le.fromCache){const kt=ae.Hi.get(st),An=kt.withLastLimboFreeSnapshotVersion(kt.snapshotVersion);ae.Hi=ae.Hi.insert(st,An)}}}),function(B,W){return P.apply(this,arguments)})(s.localStore,h))}),ip.apply(this,arguments)}function Qm(r,e){return sp.apply(this,arguments)}function sp(){return sp=(0,C.Z)(function*(r,e){const t=sn(r);if(!t.currentUser.isEqual(e)){Lt("SyncEngine","User change. New user:",e.toKey());const s=yield Mm(t.localStore,e);t.currentUser=e,(a=t).Tc.forEach(y=>{y.forEach(P=>{P.reject(new zt(ht.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Tc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield ac(t,s.tr)}var a}),sp.apply(this,arguments)}function wy(r,e){const t=sn(r),s=t.gc.get(e);if(s&&s.lc)return jr().add(s.key);{let a=jr();const h=t._c.get(e);if(!h)return a;for(const y of h){const P=t.dc.get(y);a=a.unionWith(P.view.ec)}return a}}function Iy(r,e){return op.apply(this,arguments)}function op(){return op=(0,C.Z)(function*(r,e){const t=sn(r),s=yield jf(t.localStore,e.query,!0),a=e.view.ac(s);return t.isPrimaryClient&&np(t,e.targetId,a.uc),a}),op.apply(this,arguments)}function Cy(r,e){return ap.apply(this,arguments)}function ap(){return ap=(0,C.Z)(function*(r,e){const t=sn(r);return Rd(t.localStore,e).then(s=>ac(t,s))}),ap.apply(this,arguments)}function Lg(r,e,t,s){return af.apply(this,arguments)}function af(){return af=(0,C.Z)(function*(r,e,t,s){const a=sn(r),h=yield function(y,P){const B=sn(y),W=sn(B.mutationQueue);return B.persistence.runTransaction("Lookup mutation documents","readonly",ae=>W.Vn(ae,P).next(Le=>Le?B.localDocuments.getDocuments(ae,Le):Ke.resolve(null)))}(a.localStore,e);var P;null!==h?("pending"===t?yield Dc(a.remoteStore):"acknowledged"===t||"rejected"===t?(id(a,e,s||null),rd(a,e),P=e,sn(sn(a.localStore).mutationQueue).Dn(P)):un(),yield ac(a,h)):Lt("SyncEngine","Cannot apply mutation batch with id: "+e)}),af.apply(this,arguments)}function gh(){return gh=(0,C.Z)(function*(r,e){const t=sn(r);if(lp(t),cp(t),!0===e&&!0!==t.Ac){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield uf(t,s.toArray());t.Ac=!0,yield bg(t.remoteStore,!0);for(const h of a)Kf(t.remoteStore,h)}else if(!1===e&&!1!==t.Ac){const s=[];let a=Promise.resolve();t._c.forEach((h,y)=>{t.sharedClientState.isLocalQueryTarget(y)?s.push(y):a=a.then(()=>(kd(t,y),Gh(t.localStore,y,!0))),Jh(t.remoteStore,y)}),yield a,yield uf(t,s),function(h){const y=sn(h);y.gc.forEach((P,B)=>{Jh(y.remoteStore,B)}),y.yc.Is(),y.gc=new Map,y.mc=new ci(gn.comparator)}(t),t.Ac=!1,yield bg(t.remoteStore,!1)}}),gh.apply(this,arguments)}function uf(r,e,t){return lf.apply(this,arguments)}function lf(){return lf=(0,C.Z)(function*(r,e,t){const s=sn(r),a=[],h=[];for(const y of e){let P;const B=s._c.get(y);if(B&&0!==B.length){P=yield qc(s.localStore,oe(B[0]));for(const W of B){const ae=s.dc.get(W),Le=yield Iy(s,ae);Le.snapshot&&h.push(Le.snapshot)}}else{const W=yield uy(s.localStore,y);P=yield qc(s.localStore,W),yield Og(s,Jm(W),y,!1,P.resumeToken)}a.push(P)}return s.fc.eu(h),a}),lf.apply(this,arguments)}function Jm(r){return Pa(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Ug(r){const e=sn(r);return sn(sn(e.localStore).persistence).Mi()}function Vg(r,e,t,s){return up.apply(this,arguments)}function up(){return up=(0,C.Z)(function*(r,e,t,s){const a=sn(r);if(a.Ac)return void Lt("SyncEngine","Ignoring unexpected query state notification.");const h=a._c.get(e);if(h&&h.length>0)switch(t){case"current":case"not-current":{const y=yield Rd(a.localStore,fs(h[0])),P=Mt.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ai.EMPTY_BYTE_STRING);yield ac(a,y,P);break}case"rejected":yield Gh(a.localStore,e,!0),kd(a,e,s);break;default:un()}}),up.apply(this,arguments)}function Xm(r,e,t){return cf.apply(this,arguments)}function cf(){return cf=(0,C.Z)(function*(r,e,t){const s=lp(r);if(s.Ac){for(const a of e){if(s._c.has(a)){Lt("SyncEngine","Adding an already active target "+a);continue}const h=yield uy(s.localStore,a),y=yield qc(s.localStore,h);yield Og(s,Jm(h),y.targetId,!1,y.resumeToken),Kf(s.remoteStore,y)}for(const a of t)s._c.has(a)&&(yield Gh(s.localStore,a,!1).then(()=>{Jh(s.remoteStore,a),kd(s,a)}).catch(ou))}}),cf.apply(this,arguments)}function lp(r){const e=sn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kg.bind(null,e),e.fc.eu=Ag.bind(null,e.eventManager),e.fc.vc=_y.bind(null,e.eventManager),e}function cp(r){const e=sn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fh.bind(null,e),e}class mh{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,C.Z)(function*(){t.serializer=ka(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return xm(this.persistence,new tg,e.initialUser,this.serializer)}createPersistence(e){return new Sm(Jp.js,this.serializer)}createSharedClientState(e){return new Gf}terminate(){var e=this;return(0,C.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class dp extends mh{constructor(e,t,s){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,C.Z)(function*(){yield t().call(s,e),yield s.bc.initialize(s,e),yield cp(s.bc.syncEngine),yield Dc(s.bc.remoteStore),yield s.persistence.pi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return xm(this.persistence,new tg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new ym(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new ms(t,this.persistence);return new pd(e.asyncQueue,s)}createPersistence(e){const t=sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?yu.withCacheSize(this.cacheSizeBytes):yu.DEFAULT;return new Wc(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,km(),Zf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Gf}}class $g extends dp{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,C.Z)(function*(){yield t().call(s,e);const a=s.bc.syncEngine;s.sharedClientState instanceof Yh&&(s.sharedClientState.syncEngine={Qr:Lg.bind(null,a),jr:Vg.bind(null,a),zr:Xm.bind(null,a),Mi:Ug.bind(null,a),Gr:Cy.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.pi(function(){var h=(0,C.Z)(function*(y){yield function by(r,e){return gh.apply(this,arguments)}(s.bc.syncEngine,y),s.gcScheduler&&(y&&!s.gcScheduler.started?s.gcScheduler.start():y||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(y&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():y||s.indexBackfillerScheduler.stop())});return function(y){return h.apply(this,arguments)}}())})()}createSharedClientState(e){const t=km();if(!Yh.D(t))throw new zt(ht.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yh(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Fd{initialize(e,t){var s=this;return(0,C.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>ol(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Qm.bind(null,s.syncEngine),yield bg(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new my}createDatastore(e){const t=ka(e.databaseInfo.databaseId),s=new Om(e.databaseInfo);return new Lm(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,h=P=>ol(this.syncEngine,P,0),y=Wf.D()?new Wf:new Pm,new Um(t,s,a,h,y);var t,s,a,h,y}createSyncEngine(e,t){return function(s,a,h,y,P,B,W){const ae=new zv(s,a,h,y,P,B);return W&&(ae.Ac=!0),ae}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,C.Z)(function*(t){const s=sn(t);Lt("RemoteStore","RemoteStore shutting down."),s.Au.add(5),yield Kc(s),s.vu.shutdown(),s.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function jg(r,e=10240){let t=0;return{read:()=>(0,C.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,C.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class hp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Dy{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new Bi,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(s=>{s&&s.Gu()?this.metadata.resolve(s.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Ku)}`))},s=>this.metadata.reject(s))}close(){return this.Dc.cancel()}getMetadata(){var e=this;return(0,C.Z)(function*(){return e.metadata.promise})()}Pc(){var e=this;return(0,C.Z)(function*(){return yield e.getMetadata(),e.xc()})()}xc(){var e=this;return(0,C.Z)(function*(){const t=yield e.Nc();if(null===t)return null;const s=e.Cc.decode(t),a=Number(s);isNaN(a)&&e.kc(`length string (${s}) is not valid number`);const h=yield e.Mc(a);return new yy(JSON.parse(h),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Nc(){var e=this;return(0,C.Z)(function*(){for(;e.Oc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.kc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Mc(e){var t=this;return(0,C.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.kc("Reached the end of bundle when more is expected.");const s=t.Cc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,C.Z)(function*(){const t=yield e.Dc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Sy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,C.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new zt(ht.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,C.Z)(function*(h,y){const P=sn(h),B=Uc(P.serializer)+"/documents",W={documents:y.map(kt=>Td(P.serializer,kt))},ae=yield P.Ao("BatchGetDocuments",B,W,y.length),Le=new Map;ae.forEach(kt=>{const fn=function Nh(r,e){return"found"in e?function(t,s){On(!!s.found);const a=bl(t,s.found.name),h=oo(s.found.updateTime),y=s.found.createTime?oo(s.found.createTime):Yn.min(),P=new Zs({mapValue:{fields:s.found.fields}});return Zi.newFoundDocument(a,h,y,P)}(r,e):"missing"in e?function(t,s){On(!!s.missing),On(!!s.readTime);const a=bl(t,s.missing),h=oo(s.readTime);return Zi.newNoDocument(a,h)}(r,e):un()}(P.serializer,kt);Le.set(fn.key.toString(),fn)});const st=[];return y.forEach(kt=>{const fn=Le.get(kt.toString());On(!!fn),st.push(fn)}),st}),function(h,y){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,C.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const h=gn.fromPath(a);e.mutations.push(new Zd(h,e.precondition(h)))}),yield(s=(0,C.Z)(function*(a,h){const y=sn(a),P=Uc(y.serializer)+"/documents",B={writes:h.map(W=>Bc(y.serializer,W))};yield y.po("Commit",P,B)}),function(a,h){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw un();t=Yn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new zt(ht.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Yn.min())?Ki.exists(!1):Ki.updateTime(t):Ki.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Yn.min()))throw new zt(ht.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ki.updateTime(t)}return Ki.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Hg{constructor(e,t,s,a,h){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=h,this.Fc=s.maxAttempts,this.Lo=new ug(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){var e=this;this.Lo.xo((0,C.Z)(function*(){const t=new Sy(e.datastore),s=e.Lc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(h=>{e.qc(h)}))}).catch(a=>{e.qc(a)})}))}Lc(e){try{const t=this.updateFunction(e);return!ma(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!l(t)}return!1}}class zg{constructor(e,t,s,a){var h=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=ar.UNAUTHENTICATED,this.clientId=Rl.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var y=(0,C.Z)(function*(P){Lt("FirestoreClient","Received user=",P.uid),yield h.authCredentialListener(P),h.user=P});return function(P){return y.apply(this,arguments)}}()),this.appCheckCredentials.start(s,y=>(Lt("FirestoreClient","Received new app check token=",y),this.appCheckCredentialListener(y,this.user)))}getConfiguration(){var e=this;return(0,C.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new zt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,C.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=uh(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function df(r,e){return fp.apply(this,arguments)}function fp(){return fp=(0,C.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),Lt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var a=(0,C.Z)(function*(h){s.isEqual(h)||(yield Mm(e.localStore,h),s=h)});return function(h){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),fp.apply(this,arguments)}function pp(r,e){return gp.apply(this,arguments)}function gp(){return gp=(0,C.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield mp(r);Lt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(a=>Cg(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,h)=>Cg(e.remoteStore,h)),r._onlineComponents=e}),gp.apply(this,arguments)}function Gg(r){return"FirebaseError"===r.name?r.code===ht.FAILED_PRECONDITION||r.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function mp(r){return _p.apply(this,arguments)}function _p(){return _p=(0,C.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Lt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield df(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Gg(t))throw t;wi("Error using user provided cache. Falling back to memory cache: "+t),yield df(r,new mh)}}else Lt("FirestoreClient","Using default OfflineComponentProvider"),yield df(r,new mh);return r._offlineComponents}),_p.apply(this,arguments)}function hf(r){return _h.apply(this,arguments)}function _h(){return _h=(0,C.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Lt("FirestoreClient","Using user provided OnlineComponentProvider"),yield pp(r,r._uninitializedComponentsProvider._online)):(Lt("FirestoreClient","Using default OnlineComponentProvider"),yield pp(r,new Fd))),r._onlineComponents}),_h.apply(this,arguments)}function Sc(r){return mp(r).then(e=>e.persistence)}function yp(r){return mp(r).then(e=>e.localStore)}function e_(r){return hf(r).then(e=>e.remoteStore)}function ff(r){return hf(r).then(e=>e.syncEngine)}function od(r){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,C.Z)(function*(r){const e=yield hf(r),t=e.eventManager;return t.onListen=tp.bind(null,e.syncEngine),t.onUnlisten=Ey.bind(null,e.syncEngine),t}),Wg.apply(this,arguments)}function t_(r,e,t={}){const s=new Bi;return r.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return function(a,h,y,P,B){const W=new hp({next:Le=>{h.enqueueAndForget(()=>nf(a,ae));const st=Le.docs.has(y);!st&&Le.fromCache?B.reject(new zt(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):st&&Le.fromCache&&P&&"server"===P.source?B.reject(new zt(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(Le)},error:Le=>B.reject(Le)}),ae=new Mg(yl(y.path),W,{includeMetadataChanges:!0,Uu:!0});return Dg(a,ae)}(yield od(r),r.asyncQueue,e,t,s)})),s.promise}function Zg(r,e,t={}){const s=new Bi;return r.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return function(a,h,y,P,B){const W=new hp({next:Le=>{h.enqueueAndForget(()=>nf(a,ae)),Le.fromCache&&"server"===P.source?B.reject(new zt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(Le)},error:Le=>B.reject(Le)}),ae=new Mg(y,W,{includeMetadataChanges:!0,Uu:!0});return Dg(a,ae)}(yield od(r),r.asyncQueue,e,t,s)})),s.promise}const r_=new Map;function vp(r,e,t){if(!t)throw new zt(ht.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function i_(r,e,t,s){if(!0===e&&!0===s)throw new zt(ht.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Kg(r){if(!gn.isDocumentKey(r))throw new zt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Yg(r){if(gn.isDocumentKey(r))throw new zt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Ac(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":un()}function bi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new zt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ac(r);throw new zt(ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function s_(r,e){if(e<=0)throw new zt(ht.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class Qg{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new zt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new zt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}i_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new zt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new zt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qg(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Bu;switch(t.type){case"firstParty":return new ju(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new zt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=r_.get(e);t&&(Lt("ComponentProvider","Removing Datastore"),r_.delete(e),t.terminate())}(this),Promise.resolve()}}function Jg(r,e,t,s={}){var a;const h=(r=bi(r,pf))._getSettings();if("firestore.googleapis.com"!==h.host&&h.host!==e&&wi("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},h),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let y,P;if("string"==typeof s.mockUserToken)y=s.mockUserToken,P=ar.MOCK_USER;else{y=(0,Se.Sg)(s.mockUserToken,null===(a=r._app)||void 0===a?void 0:a.options.projectId);const B=s.mockUserToken.sub||s.mockUserToken.user_id;if(!B)throw new zt(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");P=new ar(B)}r._authCredentials=new Kl(new Ha(y,P))}}class Io{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Al(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Io(this.firestore,e,this._key)}}class wa{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new wa(this.firestore,e,this._query)}}class Al extends wa{constructor(e,t,s){super(e,t,yl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Io(this.firestore,null,new gn(e))}withConverter(e){return new Al(this.firestore,e,this._path)}}function uc(r,e,...t){if(r=(0,Se.m9)(r),vp("collection","path",e),r instanceof pf){const s=kr.fromString(e,...t);return Yg(s),new Al(r,null,s)}{if(!(r instanceof Io||r instanceof Al))throw new zt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(kr.fromString(e,...t));return Yg(s),new Al(r.firestore,null,s)}}function Ry(r,e){if(r=bi(r,pf),vp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new zt(ht.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wa(r,null,(t=e,new ls(kr.emptyPath(),t)));var t}function o_(r,e,...t){if(r=(0,Se.m9)(r),1===arguments.length&&(e=Rl.A()),vp("doc","path",e),r instanceof pf){const s=kr.fromString(e,...t);return Kg(s),new Io(r,null,new gn(s))}{if(!(r instanceof Io||r instanceof Al))throw new zt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(kr.fromString(e,...t));return Kg(s),new Io(r.firestore,r instanceof Al?r.converter:null,new gn(s))}}function lc(r,e){return r=(0,Se.m9)(r),e=(0,Se.m9)(e),(r instanceof Io||r instanceof Al)&&(e instanceof Io||e instanceof Al)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function al(r,e){return r=(0,Se.m9)(r),e=(0,Se.m9)(e),r instanceof wa&&e instanceof wa&&r.firestore===e.firestore&&on(r._query,e._query)&&r.converter===e.converter}class ql{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new ug(this,"async_queue_retry"),this.Yc=()=>{const t=Zf();t&&Lt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=Zf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=Zf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new Bi;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,C.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!ko(t))throw t;Lt("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(s=>{throw this.zc=s,this.Wc=!1,fi("INTERNAL UNHANDLED ERROR: ",function(h){let y=h.message||"";return h.stack&&(y=h.stack.includes(h.message)?h.stack:h.message+"\n"+h.stack),y}(s)),s}).then(s=>(this.Wc=!1,s))));return this.Kc=t,t}enqueueAfterDelay(e,t,s){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const a=zm.createAndSchedule(this,e,t,s,h=>this.ea(h));return this.jc.push(a),a}Xc(){this.zc&&un()}verifyOperationInProgress(){}na(){var e=this;return(0,C.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function Ep(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(r)}class a_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Bi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Py=-1;class Ds extends pf{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new ql,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||yh(this),this._firestoreClient.terminate()}}function Ny(r,e){const t="object"==typeof r?r:(0,p.getApp)(),s="string"==typeof r?r:e||"(default)",a=(0,p._getProvider)(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const h=(0,Se.P0)("firestore");h&&Jg(a,...h)}return a}function Ys(r){return r._firestoreClient||yh(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function yh(r){var e,t,s;const a=r._freezeSettings(),h=(P=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Qo(r._databaseId,P,r._persistenceKey,(W=a).host,W.ssl,W.experimentalForceLongPolling,W.experimentalAutoDetectLongPolling,W.useFetchStreams));var P,W;r._firestoreClient=new zg(r._authCredentials,r._appCheckCredentials,r._queue,h),null!==(t=a.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=a.cache)&&void 0!==s&&s._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Oy(r,e){Ip(r=bi(r,Ds));const t=Ys(r);if(t._uninitializedComponentsProvider)throw new zt(ht.FAILED_PRECONDITION,"SDK cache is already specified.");wi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),a=new Fd;return l_(t,a,new dp(a,s.cacheSizeBytes,e?.forceOwnership))}function u_(r){Ip(r=bi(r,Ds));const e=Ys(r);if(e._uninitializedComponentsProvider)throw new zt(ht.FAILED_PRECONDITION,"SDK cache is already specified.");wi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new Fd;return l_(e,s,new $g(s,t.cacheSizeBytes))}function l_(r,e,t){const s=new Bi;return r.asyncQueue.enqueue((0,C.Z)(function*(){try{yield df(r,t),yield pp(r,e),s.resolve()}catch(a){const h=a;if(!Gg(h))throw h;wi("Error enabling indexeddb cache. Falling back to memory cache: "+h),s.reject(h)}})).then(()=>s.promise)}function ky(r){if(r._initialized&&!r._terminated)throw new zt(ht.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Bi;return r._queue.enqueueAndForgetEvenWhileRestricted((0,C.Z)(function*(){try{yield(t=(0,C.Z)(function*(s){if(!Oo.D())return Promise.resolve();const a=s+"main";yield Oo.delete(a)}),function(s){return t.apply(this,arguments)})(sh(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}function c_(r){return function(e){const t=new Bi;return e.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return function ph(r,e){return nd.apply(this,arguments)}(yield ff(e),t)})),t.promise}(Ys(r=bi(r,Ds)))}function d_(r){return function qg(r){return r.asyncQueue.enqueue((0,C.Z)(function*(){const e=yield Sc(r),t=yield e_(r);return e.setNetworkEnabled(!0),function(s){const a=sn(s);return a.Au.delete(0),Qh(a)}(t)}))}(Ys(r=bi(r,Ds)))}function wp(r){return function Gv(r){return r.asyncQueue.enqueue((0,C.Z)(function*(){const e=yield Sc(r),t=yield e_(r);return e.setNetworkEnabled(!1),(s=(0,C.Z)(function*(a){const h=sn(a);h.Au.add(0),yield Kc(h),h.Pu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Ys(r=bi(r,Ds)))}function h_(r,e){const t=Ys(r=bi(r,Ds)),s=new a_;return function ra(r,e,t,s){const a=function(h,y){let P;return P="string"==typeof h?U().encode(h):h,B=function(B,W){if(B instanceof Uint8Array)return jg(B,W);if(B instanceof ArrayBuffer)return jg(new Uint8Array(B),W);if(B instanceof ReadableStream)return B.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(P),new Dy(B,y);var B}(t,ka(e));r.asyncQueue.enqueueAndForget((0,C.Z)(function*(){!function Bg(r,e,t){const s=sn(r);var a;(a=(0,C.Z)(function*(h,y,P){try{const B=yield y.getMetadata();if(yield function(st,kt){const fn=sn(st),An=oo(kt.createTime);return fn.persistence.runTransaction("hasNewerBundle","readonly",er=>fn.Ls.getBundleMetadata(er,kt.id)).then(er=>!!er&&er.createTime.compareTo(An)>=0)}(h.localStore,B))return yield y.close(),P._completeWith({taskState:"Success",documentsLoaded:(st=B).totalDocuments,bytesLoaded:st.totalBytes,totalDocuments:st.totalDocuments,totalBytes:st.totalBytes}),Promise.resolve(new Set);P._updateProgress(qm(B));const W=new vy(B,h.localStore,y.serializer);let ae=yield y.Pc();for(;ae;){const st=yield W.ju(ae);st&&P._updateProgress(st),ae=yield y.Pc()}const Le=yield W.complete();return yield ac(h,Le.Hu,void 0),yield function(st,kt){const fn=sn(st);return fn.persistence.runTransaction("Save bundle","readwrite",An=>fn.Ls.saveBundleMetadata(An,kt))}(h.localStore,B),P._completeWith(Le.progress),Promise.resolve(Le.Wu)}catch(B){return wi("SyncEngine",`Loading bundle failed with ${B}`),P._failWith(B),Promise.resolve(new Set)}var st}),function(h,y,P){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield ff(r),a,s)}))}(t,r._databaseId,e,s),s}function f_(r,e){return function n_(r,e){return r.asyncQueue.enqueue((0,C.Z)(function*(){return function(t,s){const a=sn(t);return a.persistence.runTransaction("Get named query","readonly",h=>a.Ls.getNamedQuery(h,s))}(yield yp(r),e)}))}(Ys(r=bi(r,Ds)),e).then(t=>t?new wa(r,null,t.query):null)}function Ip(r){if(r._initialized||r._terminated)throw new zt(ht.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xc(Ai.fromBase64String(e))}catch(t){throw new zt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xc(Ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Mc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new zt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ud{constructor(e){this._methodName=e}}class gf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new zt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new zt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ir(this._lat,e._lat)||Ir(this._long,e._long)}}const p_=/^__.*__$/;class g_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new rl(e,this.data,this.fieldMask,t,this.fieldTransforms):new ku(e,this.data,t,this.fieldTransforms)}}class em{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new rl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function m_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw un()}}class Cp{constructor(e,t,s,a,h,y){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===h&&this.oa(),this.fieldTransforms=h||[],this.fieldMask=y||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new Cp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ca({path:s,ha:!1});return a.la(e),a}fa(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ca({path:s,ha:!1});return a.oa(),a}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return yf(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(m_(this.ua)&&p_.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Ly{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||ka(e)}ga(e,t,s,a=!1){return new Cp({ua:e,methodName:t,ma:s,path:Di.emptyPath(),ha:!1,wa:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ld(r){const e=r._freezeSettings(),t=ka(r._databaseId);return new Ly(r._databaseId,!!e.ignoreUndefinedProperties,t)}function bp(r,e,t,s,a,h={}){const y=r.ga(h.merge||h.mergeFields?2:0,e,t,a);Tp("Data must be an object, but it was:",y,s);const P=v_(s,y);let B,W;if(h.merge)B=new vo(y.fieldMask),W=y.fieldTransforms;else if(h.mergeFields){const ae=[];for(const Le of h.mergeFields){const st=vh(e,Le,t);if(!y.contains(st))throw new zt(ht.INVALID_ARGUMENT,`Field '${st}' is specified in your field mask but missing from your input data.`);im(ae,st)||ae.push(st)}B=new vo(ae),W=y.fieldTransforms.filter(Le=>B.covers(Le.field))}else B=null,W=y.fieldTransforms;return new g_(new Zs(P),B,W)}class mf extends ud{_toFieldTransform(e){if(2!==e.ua)throw e._a(1===e.ua?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mf}}function __(r,e,t){return new Cp({ua:3,ma:e.settings.ma,methodName:r._methodName,ha:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class tm extends ud{_toFieldTransform(e){return new gu(e.path,new wl)}isEqual(e){return e instanceof tm}}class Uy extends ud{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=__(this,e,!0),s=this.ya.map(h=>Ud(h,t)),a=new tl(s);return new gu(e.path,a)}isEqual(e){return this===e}}class Vy extends ud{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=__(this,e,!0),s=this.ya.map(h=>Ud(h,t)),a=new Xa(s);return new gu(e.path,a)}isEqual(e){return this===e}}class By extends ud{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new Vl(e.serializer,jd(e.serializer,this.pa));return new gu(e.path,t)}isEqual(e){return this===e}}function nm(r,e,t,s){const a=r.ga(1,e,t);Tp("Data must be an object, but it was:",a,s);const h=[],y=Zs.empty();Wa(s,(B,W)=>{const ae=_f(e,B,t);W=(0,Se.m9)(W);const Le=a.fa(ae);if(W instanceof mf)h.push(ae);else{const st=Ud(W,Le);null!=st&&(h.push(ae),y.set(ae,st))}});const P=new vo(h);return new em(y,P,a.fieldTransforms)}function rm(r,e,t,s,a,h){const y=r.ga(1,e,t),P=[vh(e,s,t)],B=[a];if(h.length%2!=0)throw new zt(ht.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let st=0;st<h.length;st+=2)P.push(vh(e,h[st])),B.push(h[st+1]);const W=[],ae=Zs.empty();for(let st=P.length-1;st>=0;--st)if(!im(W,P[st])){const kt=P[st];let fn=B[st];fn=(0,Se.m9)(fn);const An=y.fa(kt);if(fn instanceof mf)W.push(kt);else{const er=Ud(fn,An);null!=er&&(W.push(kt),ae.set(kt,er))}}const Le=new vo(W);return new em(ae,Le,y.fieldTransforms)}function y_(r,e,t,s=!1){return Ud(t,r.ga(s?4:3,e))}function Ud(r,e){if(E_(r=(0,Se.m9)(r)))return Tp("Unsupported field value:",e,r),v_(r,e);if(r instanceof ud)return function(t,s){if(!m_(s.ua))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let h=0;for(const y of t){let P=Ud(y,s.da(h));null==P&&(P={nullValue:"NULL_VALUE"}),a.push(P),h++}return{arrayValue:{values:a}}}(r,e)}return function(t,s){if(null===(t=(0,Se.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jd(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Fi.fromDate(t);return{timestampValue:Ic(s.serializer,a)}}if(t instanceof Fi){const a=new Fi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ic(s.serializer,a)}}if(t instanceof gf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xc)return{bytesValue:Cs(s.serializer,t._byteString)};if(t instanceof Io){const a=s.databaseId,h=t.firestore._databaseId;if(!h.isEqual(a))throw s._a(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Qd(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${Ac(t)}`)}(r,e)}function v_(r,e){const t={};return pi(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(r,(s,a)=>{const h=Ud(a,e.aa(s));null!=h&&(t[s]=h)}),{mapValue:{fields:t}}}function E_(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof Fi||r instanceof gf||r instanceof xc||r instanceof Io||r instanceof ud)}function Tp(r,e,t){if(!E_(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Ac(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function vh(r,e,t){if((e=(0,Se.m9)(e))instanceof Mc)return e._internalPath;if("string"==typeof e)return _f(r,e);throw yf("Field path arguments must be of type string or ",r,!1,void 0,t)}const w_=new RegExp("[~\\*/\\[\\]]");function _f(r,e,t){if(e.search(w_)>=0)throw yf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Mc(...e.split("."))._internalPath}catch{throw yf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function yf(r,e,t,s,a){const h=s&&!s.isEmpty(),y=void 0!==a;let P=`Function ${e}() called with invalid data`;t&&(P+=" (via `toFirestore()`)"),P+=". ";let B="";return(h||y)&&(B+=" (found",h&&(B+=` in field ${s}`),y&&(B+=` in document ${a}`),B+=")"),new zt(ht.INVALID_ARGUMENT,P+r+B)}function im(r,e){return r.some(t=>t.isEqual(e))}class Eh{constructor(e,t,s,a,h){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Io(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new I_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class I_ extends Eh{data(){return super.data()}}function vf(r,e){return"string"==typeof e?_f(r,e):e instanceof Mc?e._internalPath:e._delegate._internalPath}function sm(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new zt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}class Zl extends Dp{}function $y(r,e,...t){let s=[];e instanceof Dp&&s.push(e),s=s.concat(t),function(a){const h=a.filter(P=>P instanceof wf).length,y=a.filter(P=>P instanceof Ef).length;if(h>1||h>0&&y>0)throw new zt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class Ef extends Zl{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Ef(e,t,s)}_apply(e){const t=this._parse(e);return um(e._query,t),new wa(e.firestore,e.converter,Ge(e._query,t))}_parse(e){const t=Ld(e.firestore);return function(a,h,y,P,B,W,ae){let Le;if(B.isKeyField()){if("array-contains"===W||"array-contains-any"===W)throw new zt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${W}' queries on documentId().`);if("in"===W||"not-in"===W){am(ae,W);const st=[];for(const kt of ae)st.push(zy(P,a,kt));Le={arrayValue:{values:st}}}else Le=zy(P,a,ae)}else"in"!==W&&"not-in"!==W&&"array-contains-any"!==W||am(ae,W),Le=y_(y,"where",ae,"in"===W||"not-in"===W);return _r.create(B,W,Le)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function wh(r,e,t){const s=e,a=vf("where",r);return Ef._create(a,s,t)}class wf extends Dp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wf(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:oi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let h=s;const y=a.getFlattenedFilters();for(const P of y)um(h,P),h=Ge(h,P)}(e._query,t),new wa(e.firestore,e.converter,Ge(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Sp extends Zl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Sp(e,t)}_apply(e){const t=function(s,a,h){if(null!==s.startAt)throw new zt(ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new zt(ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const y=new fu(a,h);return function(P,B){if(null===g(P)){const W=I(P);null!==W&&T_(0,W,B.field)}}(s,y),y}(e._query,this._field,this._direction);return new wa(e.firestore,e.converter,function(s,a){const h=s.explicitOrderBy.concat([a]);return new ls(s.path,s.collectionGroup,h,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function b_(r,e="asc"){const t=e,s=vf("orderBy",r);return Sp._create(s,t)}class om extends Zl{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new om(e,t,s)}_apply(e){return new wa(e.firestore,e.converter,dt(e._query,this._limit,this._limitType))}}function Pr(r){return s_("limit",r),om._create("limit",r,"F")}function jy(r){return s_("limitToLast",r),om._create("limitToLast",r,"L")}class Ap extends Zl{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Ap(e,t,s)}_apply(e){const t=Qs(e,this.type,this._docOrFields,this._inclusive);return new wa(e.firestore,e.converter,(a=t,new ls((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}function Hy(...r){return Ap._create("startAt",r,!0)}function Ih(...r){return Ap._create("startAfter",r,!1)}class xp extends Zl{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new xp(e,t,s)}_apply(e){const t=Qs(e,this.type,this._docOrFields,this._inclusive);return new wa(e.firestore,e.converter,(a=t,new ls((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function Mp(...r){return xp._create("endBefore",r,!1)}function Rp(...r){return xp._create("endAt",r,!0)}function Qs(r,e,t,s){if(t[0]=(0,Se.m9)(t[0]),t[0]instanceof Eh)return function(a,h,y,P,B){if(!P)throw new zt(ht.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${y}().`);const W=[];for(const ae of q(a))if(ae.field.isKeyField())W.push(Qa(h,P.key));else{const Le=P.data.field(ae.field);if(Du(Le))throw new zt(ht.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ae.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Le){const st=ae.field.canonicalString();throw new zt(ht.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${st}' (used as the orderBy) does not exist.`)}W.push(Le)}return new hu(W,B)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const a=Ld(r.firestore);return function(h,y,P,B,W,ae){const Le=h.explicitOrderBy;if(W.length>Le.length)throw new zt(ht.INVALID_ARGUMENT,`Too many arguments provided to ${B}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const st=[];for(let kt=0;kt<W.length;kt++){const fn=W[kt];if(Le[kt].field.isKeyField()){if("string"!=typeof fn)throw new zt(ht.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${B}(), but got a ${typeof fn}`);if(!R(h)&&-1!==fn.indexOf("/"))throw new zt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${B}() must be a plain document ID, but '${fn}' contains a slash.`);const An=h.path.child(kr.fromString(fn));if(!gn.isDocumentKey(An))throw new zt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${B}() must result in a valid document path, but '${An}' is not because it contains an odd number of segments.`);const er=new gn(An);st.push(Qa(y,er))}else{const An=y_(P,B,fn);st.push(An)}}return new hu(st,ae)}(r._query,r.firestore._databaseId,a,e,t,s)}}function zy(r,e,t){if("string"==typeof(t=(0,Se.m9)(t))){if(""===t)throw new zt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!R(e)&&-1!==t.indexOf("/"))throw new zt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(kr.fromString(t));if(!gn.isDocumentKey(s))throw new zt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Qa(r,new gn(s))}if(t instanceof Io)return Qa(r,t._key);throw new zt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ac(t)}.`)}function am(r,e){if(!Array.isArray(r)||0===r.length)throw new zt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function um(r,e){if(e.isInequality()){const s=I(r),a=e.field;if(null!==s&&!s.isEqual(a))throw new zt(ht.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const h=g(r);null!==h&&T_(0,a,h)}const t=function(s,a){for(const h of s)for(const y of h.getFlattenedFilters())if(a.indexOf(y.op)>=0)return y.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new zt(ht.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function T_(r,e,t){if(!t.isEqual(e))throw new zt(ht.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Pp{convertValue(e,t="none"){switch(Ya(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw un()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Wa(e,(a,h)=>{s[a]=this.convertValue(h,t)}),s}convertGeoPoint(e){return new gf(Xi(e.latitude),Xi(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Ka(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const t=Za(e);return new Fi(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=kr.fromString(e);On(eh(s));const a=new _a(s.get(1),s.get(3)),h=new gn(s.popFirst(5));return a.isEqual(t)||fi(`Document ${h} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),h}}function If(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class D_ extends Pp{constructor(e){super(),this.firestore=e}convertBytes(e){return new xc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Io(this.firestore,null,t)}}class Vd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bd extends Eh{constructor(e,t,s,a,h,y){super(e,t,s,a,y),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(vf("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class ld extends Bd{data(e={}){return super.data(e)}}class cd{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Vd(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new ld(this._firestore,this._userDataWriter,s.key,s,new Vd(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new zt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let h=0;return s._snapshot.docChanges.map(y=>({type:"added",doc:new ld(s._firestore,s._userDataWriter,y.doc.key,y.doc,new Vd(s._snapshot.mutatedKeys.has(y.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:h++}))}{let h=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(y=>a||3!==y.type).map(y=>{const P=new ld(s._firestore,s._userDataWriter,y.doc.key,y.doc,new Vd(s._snapshot.mutatedKeys.has(y.doc.key),s._snapshot.fromCache),s.query.converter);let B=-1,W=-1;return 0!==y.type&&(B=h.indexOf(y.doc.key),h=h.delete(y.doc.key)),1!==y.type&&(h=h.add(y.doc),W=h.indexOf(y.doc.key)),{type:S_(y.type),doc:P,oldIndex:B,newIndex:W}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function S_(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return un()}}function A_(r,e){return r instanceof Bd&&e instanceof Bd?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof cd&&e instanceof cd&&r._firestore===e._firestore&&al(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}function Wy(r){r=bi(r,Io);const e=bi(r.firestore,Ds);return t_(Ys(e),r._key).then(t=>N_(e,r,t))}class xl extends Pp{constructor(e){super(),this.firestore=e}convertBytes(e){return new xc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Io(this.firestore,null,t)}}function Cf(r){r=bi(r,Io);const e=bi(r.firestore,Ds),t=Ys(e),s=new xl(e);return function Wv(r,e){const t=new Bi;return r.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return(s=(0,C.Z)(function*(a,h,y){try{const P=yield function(B,W){const ae=sn(B);return ae.persistence.runTransaction("read document","readonly",Le=>ae.localDocuments.getDocument(Le,W))}(a,h);P.isFoundDocument()?y.resolve(P):P.isNoDocument()?y.resolve(null):y.reject(new zt(ht.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(P){const B=uh(P,`Failed to get document '${h} from cache`);y.reject(B)}}),function(a,h,y){return s.apply(this,arguments)})(yield yp(r),e,t);var s})),t.promise}(t,r._key).then(a=>new Bd(e,s,r._key,a,new Vd(null!==a&&a.hasLocalMutations,!0),r.converter))}function qy(r){r=bi(r,Io);const e=bi(r.firestore,Ds);return t_(Ys(e),r._key,{source:"server"}).then(t=>N_(e,r,t))}function Zy(r){r=bi(r,wa);const e=bi(r.firestore,Ds),t=Ys(e),s=new xl(e);return sm(r._query),Zg(t,r._query).then(a=>new cd(e,s,r,a))}function Ky(r){r=bi(r,wa);const e=bi(r.firestore,Ds),t=Ys(e),s=new xl(e);return function Ay(r,e){const t=new Bi;return r.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return(s=(0,C.Z)(function*(a,h,y){try{const P=yield jf(a,h,!0),B=new Zm(h,P.sr),W=B.nc(P.documents),ae=B.applyChanges(W,!1);y.resolve(ae.snapshot)}catch(P){const B=uh(P,`Failed to execute query '${h} against cache`);y.reject(B)}}),function(a,h,y){return s.apply(this,arguments)})(yield yp(r),e,t);var s})),t.promise}(t,r._query).then(a=>new cd(e,s,r,a))}function x_(r){r=bi(r,wa);const e=bi(r.firestore,Ds),t=Ys(e),s=new xl(e);return Zg(t,r._query,{source:"server"}).then(a=>new cd(e,s,r,a))}function M_(r,e,t){r=bi(r,Io);const s=bi(r.firestore,Ds),a=If(r.converter,e,t);return bf(s,[bp(Ld(s),"setDoc",r._key,a,null!==r.converter,t).toMutation(r._key,Ki.none())])}function R_(r,e,t,...s){r=bi(r,Io);const a=bi(r.firestore,Ds),h=Ld(a);let y;return y="string"==typeof(e=(0,Se.m9)(e))||e instanceof Mc?rm(h,"updateDoc",r._key,e,t,s):nm(h,"updateDoc",r._key,e),bf(a,[y.toMutation(r._key,Ki.exists(!0))])}function Yy(r){return bf(bi(r.firestore,Ds),[new Cl(r._key,Ki.none())])}function P_(r,e){const t=bi(r.firestore,Ds),s=o_(r),a=If(r.converter,e);return bf(t,[bp(Ld(r.firestore),"addDoc",s._key,a,null!==r.converter,{}).toMutation(s._key,Ki.exists(!1))]).then(()=>s)}function Qy(r,...e){var t,s,a;r=(0,Se.m9)(r);let h={includeMetadataChanges:!1},y=0;"object"!=typeof e[y]||Ep(e[y])||(h=e[y],y++);const P={includeMetadataChanges:h.includeMetadataChanges};if(Ep(e[y])){const Le=e[y];e[y]=null===(t=Le.next)||void 0===t?void 0:t.bind(Le),e[y+1]=null===(s=Le.error)||void 0===s?void 0:s.bind(Le),e[y+2]=null===(a=Le.complete)||void 0===a?void 0:a.bind(Le)}let B,W,ae;if(r instanceof Io)W=bi(r.firestore,Ds),ae=yl(r._key.path),B={next:Le=>{e[y]&&e[y](N_(W,r,Le))},error:e[y+1],complete:e[y+2]};else{const Le=bi(r,wa);W=bi(Le.firestore,Ds),ae=Le._query;const st=new xl(W);B={next:kt=>{e[y]&&e[y](new cd(W,st,Le,kt))},error:e[y+1],complete:e[y+2]},sm(r._query)}return function(Le,st,kt,fn){const An=new hp(fn),er=new Mg(st,An,kt);return Le.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return Dg(yield od(Le),er)})),()=>{An.Sc(),Le.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return nf(yield od(Le),er)}))}}(Ys(W),ae,P,B)}function Jy(r,e){return function xy(r,e){const t=new hp(e);return r.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return s=yield od(r),a=t,sn(s).Nu.add(a),void a.next();var s,a})),()=>{t.Sc(),r.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return s=yield od(r),a=t,void sn(s).Nu.delete(a);var s,a}))}}(Ys(r=bi(r,Ds)),Ep(e)?e:{next:e})}function bf(r,e){return function(t,s){const a=new Bi;return t.asyncQueue.enqueueAndForget((0,C.Z)(function*(){return function sf(r,e,t){return Ea.apply(this,arguments)}(yield ff(t),s,a)})),a.promise}(Ys(r),e)}function N_(r,e,t){const s=t.docs.get(e._key),a=new xl(r);return new Bd(r,a,e._key,s,new Vd(t.hasPendingWrites,t.fromCache),e.converter)}const k_={maxAttempts:5};class F_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ld(e)}set(e,t,s){this._verifyNotCommitted();const a=dd(e,this._firestore),h=If(a.converter,t,s),y=bp(this._dataReader,"WriteBatch.set",a._key,h,null!==a.converter,s);return this._mutations.push(y.toMutation(a._key,Ki.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const h=dd(e,this._firestore);let y;return y="string"==typeof(t=(0,Se.m9)(t))||t instanceof Mc?rm(this._dataReader,"WriteBatch.update",h._key,t,s,a):nm(this._dataReader,"WriteBatch.update",h._key,t),this._mutations.push(y.toMutation(h._key,Ki.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=dd(e,this._firestore);return this._mutations=this._mutations.concat(new Cl(t._key,Ki.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new zt(ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dd(r,e){if((r=(0,Se.m9)(r)).firestore!==e)throw new zt(ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class Tf extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ld(e)}get(e){const t=dd(e,this._firestore),s=new D_(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return un();const h=a[0];if(h.isFoundDocument())return new Eh(this._firestore,s,h.key,h,t.converter);if(h.isNoDocument())return new Eh(this._firestore,s,t._key,null,t.converter);throw un()})}set(e,t,s){const a=dd(e,this._firestore),h=If(a.converter,t,s),y=bp(this._dataReader,"Transaction.set",a._key,h,null!==a.converter,s);return this._transaction.set(a._key,y),this}update(e,t,s,...a){const h=dd(e,this._firestore);let y;return y="string"==typeof(t=(0,Se.m9)(t))||t instanceof Mc?rm(this._dataReader,"Transaction.update",h._key,t,s,a):nm(this._dataReader,"Transaction.update",h._key,t),this._transaction.update(h._key,y),this}delete(e){const t=dd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=dd(e,this._firestore),s=new xl(this._firestore);return super.get(e).then(a=>new Bd(this._firestore,s,t._key,a._document,new Vd(!1,!1),t.converter))}}function iv(r,e,t){r=bi(r,Ds);const s=Object.assign(Object.assign({},k_),t);return function(a){if(a.maxAttempts<1)throw new zt(ht.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,h,y){const P=new Bi;return a.asyncQueue.enqueueAndForget((0,C.Z)(function*(){const B=yield function sd(r){return hf(r).then(e=>e.datastore)}(a);new Hg(a.asyncQueue,B,y,h,P).run()})),P.promise}(Ys(r),a=>e(new Tf(r,a)),s)}function L_(){return new mf("deleteField")}function sv(){return new tm("serverTimestamp")}function U_(...r){return new Uy("arrayUnion",r)}function ov(...r){return new Vy("arrayRemove",r)}function V_(r){return new By("increment",r)}!function(r,e=!0){Or=p.SDK_VERSION,(0,p._registerComponent)(new K.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const h=t.getProvider("app").getImmediate(),y=new Ds(new mo(t.getProvider("auth-internal")),new Ml(t.getProvider("app-check-internal")),function(P,B){if(!Object.prototype.hasOwnProperty.apply(P.options,["projectId"]))throw new zt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _a(P.options.projectId,B)}(h,s),h);return a=Object.assign({useFetchStreams:e},a),y._setSettings(a),y},"PUBLIC").setMultipleInstances(!0)),(0,p.registerVersion)(Qr,"3.11.0",r),(0,p.registerVersion)(Qr,"3.11.0","esm2017")}()},2090:(mn,ot,j)=>{j.d(ot,{$s:()=>De,BH:()=>vt,DV:()=>Sr,G6:()=>bt,GJ:()=>pn,L:()=>Ze,LL:()=>Sn,P0:()=>Rt,Pz:()=>Je,Sg:()=>$t,UG:()=>xt,UI:()=>gr,US:()=>Ne,Wl:()=>nr,Yr:()=>lt,ZB:()=>Me,ZR:()=>rn,aH:()=>Te,b$:()=>Kt,cI:()=>xn,dS:()=>qr,eu:()=>It,g5:()=>K,gK:()=>Vr,gQ:()=>an,h$:()=>be,hl:()=>Ht,hu:()=>p,jU:()=>ln,m9:()=>ct,ne:()=>dn,p$:()=>ye,pd:()=>Gr,q4:()=>ft,r3:()=>Nr,ru:()=>jt,tV:()=>de,uI:()=>je,ug:()=>Bn,vZ:()=>cn,w1:()=>rt,w9:()=>Ur,xO:()=>ur,xb:()=>ui,z$:()=>wt,zI:()=>Gt,zd:()=>Fr});const C={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},p=function(ge,_e){if(!ge)throw K(_e)},K=function(ge){return new Error("Firebase Database ("+C.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ge)},X=function(ge){const _e=[];let ee=0;for(let re=0;re<ge.length;re++){let Y=ge.charCodeAt(re);Y<128?_e[ee++]=Y:Y<2048?(_e[ee++]=Y>>6|192,_e[ee++]=63&Y|128):55296==(64512&Y)&&re+1<ge.length&&56320==(64512&ge.charCodeAt(re+1))?(Y=65536+((1023&Y)<<10)+(1023&ge.charCodeAt(++re)),_e[ee++]=Y>>18|240,_e[ee++]=Y>>12&63|128,_e[ee++]=Y>>6&63|128,_e[ee++]=63&Y|128):(_e[ee++]=Y>>12|224,_e[ee++]=Y>>6&63|128,_e[ee++]=63&Y|128)}return _e},Ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,_e){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ee=_e?this.byteToCharMapWebSafe_:this.byteToCharMap_,re=[];for(let Y=0;Y<ge.length;Y+=3){const Ue=ge[Y],me=Y+1<ge.length,Ee=me?ge[Y+1]:0,ue=Y+2<ge.length,ke=ue?ge[Y+2]:0;let tn=(15&Ee)<<2|ke>>6,mt=63&ke;ue||(mt=64,me||(tn=64)),re.push(ee[Ue>>2],ee[(3&Ue)<<4|Ee>>4],ee[tn],ee[mt])}return re.join("")},encodeString(ge,_e){return this.HAS_NATIVE_SUPPORT&&!_e?btoa(ge):this.encodeByteArray(X(ge),_e)},decodeString(ge,_e){return this.HAS_NATIVE_SUPPORT&&!_e?atob(ge):function(ge){const _e=[];let ee=0,re=0;for(;ee<ge.length;){const Y=ge[ee++];if(Y<128)_e[re++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Ue=ge[ee++];_e[re++]=String.fromCharCode((31&Y)<<6|63&Ue)}else if(Y>239&&Y<365){const ue=((7&Y)<<18|(63&ge[ee++])<<12|(63&ge[ee++])<<6|63&ge[ee++])-65536;_e[re++]=String.fromCharCode(55296+(ue>>10)),_e[re++]=String.fromCharCode(56320+(1023&ue))}else{const Ue=ge[ee++],me=ge[ee++];_e[re++]=String.fromCharCode((15&Y)<<12|(63&Ue)<<6|63&me)}}return _e.join("")}(this.decodeStringToByteArray(ge,_e))},decodeStringToByteArray(ge,_e){this.init_();const ee=_e?this.charToByteMapWebSafe_:this.charToByteMap_,re=[];for(let Y=0;Y<ge.length;){const Ue=ee[ge.charAt(Y++)],Ee=Y<ge.length?ee[ge.charAt(Y)]:0;++Y;const ke=Y<ge.length?ee[ge.charAt(Y)]:64;++Y;const Et=Y<ge.length?ee[ge.charAt(Y)]:64;if(++Y,null==Ue||null==Ee||null==ke||null==Et)throw new $e;re.push(Ue<<2|Ee>>4),64!==ke&&(re.push(Ee<<4&240|ke>>2),64!==Et&&re.push(ke<<6&192|Et))}return re},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}};class $e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const be=function(ge){const _e=X(ge);return Ne.encodeByteArray(_e,!0)},Ze=function(ge){return be(ge).replace(/\./g,"")},de=function(ge){try{return Ne.decodeString(ge,!0)}catch(_e){console.error("base64Decode failed: ",_e)}return null};function ye(ge){return Me(void 0,ge)}function Me(ge,_e){if(!(_e instanceof Object))return _e;switch(_e.constructor){case Date:return new Date(_e.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return _e}for(const ee in _e)!_e.hasOwnProperty(ee)||!tt(ee)||(ge[ee]=Me(ge[ee],_e[ee]));return ge}function tt(ge){return"__proto__"!==ge}const yt=()=>{try{return function Ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ge=process.env.__FIREBASE_DEFAULTS__;return ge?JSON.parse(ge):void 0})()||(()=>{if(typeof document>"u")return;let ge;try{ge=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const _e=ge&&de(ge[1]);return _e&&JSON.parse(_e)})()}catch(ge){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ge}`)}},ft=ge=>{var _e,ee;return null===(ee=null===(_e=yt())||void 0===_e?void 0:_e.emulatorHosts)||void 0===ee?void 0:ee[ge]},Rt=ge=>{const _e=ft(ge);if(!_e)return;const ee=_e.lastIndexOf(":");if(ee<=0||ee+1===_e.length)throw new Error(`Invalid host ${_e} with no separate hostname and port!`);const re=parseInt(_e.substring(ee+1),10);return"["===_e[0]?[_e.substring(1,ee-1),re]:[_e.substring(0,ee),re]},Te=()=>{var ge;return null===(ge=yt())||void 0===ge?void 0:ge.config},Je=ge=>{var _e;return null===(_e=yt())||void 0===_e?void 0:_e[`_${ge}`]};class vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((_e,ee)=>{this.resolve=_e,this.reject=ee})}wrapCallback(_e){return(ee,re)=>{ee?this.reject(ee):this.resolve(re),"function"==typeof _e&&(this.promise.catch(()=>{}),1===_e.length?_e(ee):_e(ee,re))}}}function $t(ge,_e){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const re=_e||"demo-project",Y=ge.iat||0,Ue=ge.sub||ge.user_id;if(!Ue)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${re}`,aud:re,iat:Y,exp:Y+3600,auth_time:Y,sub:Ue,user_id:Ue,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[Ze(JSON.stringify({alg:"none",type:"JWT"})),Ze(JSON.stringify(me)),""].join(".")}function wt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function xt(){var ge;const _e=null===(ge=yt())||void 0===ge?void 0:ge.forceEnvironment;if("node"===_e)return!0;if("browser"===_e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ln(){return"object"==typeof self&&self.self===self}function jt(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function Kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rt(){const ge=wt();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function lt(){return!0===C.NODE_CLIENT||!0===C.NODE_ADMIN}function bt(){return!xt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ht(){try{return"object"==typeof indexedDB}catch{return!1}}function It(){return new Promise((ge,_e)=>{try{let ee=!0;const re="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(re);Y.onsuccess=()=>{Y.result.close(),ee||self.indexedDB.deleteDatabase(re),ge(!0)},Y.onupgradeneeded=()=>{ee=!1},Y.onerror=()=>{var Ue;_e((null===(Ue=Y.error)||void 0===Ue?void 0:Ue.message)||"")}}catch(ee){_e(ee)}})}function Gt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class rn extends Error{constructor(_e,ee,re){super(ee),this.code=_e,this.customData=re,this.name="FirebaseError",Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sn.prototype.create)}}class Sn{constructor(_e,ee,re){this.service=_e,this.serviceName=ee,this.errors=re}create(_e,...ee){const re=ee[0]||{},Y=`${this.service}/${_e}`,Ue=this.errors[_e],me=Ue?function tr(ge,_e){return ge.replace(_n,(ee,re)=>{const Y=_e[re];return null!=Y?String(Y):`<${re}?>`})}(Ue,re):"Error";return new rn(Y,`${this.serviceName}: ${me} (${Y}).`,re)}}const _n=/\{\$([^}]+)}/g;function xn(ge){return JSON.parse(ge)}function nr(ge){return JSON.stringify(ge)}const pr=function(ge){let _e={},ee={},re={},Y="";try{const Ue=ge.split(".");_e=xn(de(Ue[0])||""),ee=xn(de(Ue[1])||""),Y=Ue[2],re=ee.d||{},delete ee.d}catch{}return{header:_e,claims:ee,data:re,signature:Y}},Ur=function(ge){const ee=pr(ge).claims;return!!ee&&"object"==typeof ee&&ee.hasOwnProperty("iat")},pn=function(ge){const _e=pr(ge).claims;return"object"==typeof _e&&!0===_e.admin};function Nr(ge,_e){return Object.prototype.hasOwnProperty.call(ge,_e)}function Sr(ge,_e){if(Object.prototype.hasOwnProperty.call(ge,_e))return ge[_e]}function ui(ge){for(const _e in ge)if(Object.prototype.hasOwnProperty.call(ge,_e))return!1;return!0}function gr(ge,_e,ee){const re={};for(const Y in ge)Object.prototype.hasOwnProperty.call(ge,Y)&&(re[Y]=_e.call(ee,ge[Y],Y,ge));return re}function cn(ge,_e){if(ge===_e)return!0;const ee=Object.keys(ge),re=Object.keys(_e);for(const Y of ee){if(!re.includes(Y))return!1;const Ue=ge[Y],me=_e[Y];if(Qn(Ue)&&Qn(me)){if(!cn(Ue,me))return!1}else if(Ue!==me)return!1}for(const Y of re)if(!ee.includes(Y))return!1;return!0}function Qn(ge){return null!==ge&&"object"==typeof ge}function ur(ge){const _e=[];for(const[ee,re]of Object.entries(ge))Array.isArray(re)?re.forEach(Y=>{_e.push(encodeURIComponent(ee)+"="+encodeURIComponent(Y))}):_e.push(encodeURIComponent(ee)+"="+encodeURIComponent(re));return _e.length?"&"+_e.join("&"):""}function Fr(ge){const _e={};return ge.replace(/^\?/,"").split("&").forEach(re=>{if(re){const[Y,Ue]=re.split("=");_e[decodeURIComponent(Y)]=decodeURIComponent(Ue)}}),_e}function Gr(ge){const _e=ge.indexOf("?");if(!_e)return"";const ee=ge.indexOf("#",_e);return ge.substring(_e,ee>0?ee:void 0)}class an{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let _e=1;_e<this.blockSize;++_e)this.pad_[_e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(_e,ee){ee||(ee=0);const re=this.W_;if("string"==typeof _e)for(let Et=0;Et<16;Et++)re[Et]=_e.charCodeAt(ee)<<24|_e.charCodeAt(ee+1)<<16|_e.charCodeAt(ee+2)<<8|_e.charCodeAt(ee+3),ee+=4;else for(let Et=0;Et<16;Et++)re[Et]=_e[ee]<<24|_e[ee+1]<<16|_e[ee+2]<<8|_e[ee+3],ee+=4;for(let Et=16;Et<80;Et++){const tn=re[Et-3]^re[Et-8]^re[Et-14]^re[Et-16];re[Et]=4294967295&(tn<<1|tn>>>31)}let ke,Xe,Y=this.chain_[0],Ue=this.chain_[1],me=this.chain_[2],Ee=this.chain_[3],ue=this.chain_[4];for(let Et=0;Et<80;Et++){Et<40?Et<20?(ke=Ee^Ue&(me^Ee),Xe=1518500249):(ke=Ue^me^Ee,Xe=1859775393):Et<60?(ke=Ue&me|Ee&(Ue|me),Xe=2400959708):(ke=Ue^me^Ee,Xe=3395469782);const tn=(Y<<5|Y>>>27)+ke+ue+Xe+re[Et]&4294967295;ue=Ee,Ee=me,me=4294967295&(Ue<<30|Ue>>>2),Ue=Y,Y=tn}this.chain_[0]=this.chain_[0]+Y&4294967295,this.chain_[1]=this.chain_[1]+Ue&4294967295,this.chain_[2]=this.chain_[2]+me&4294967295,this.chain_[3]=this.chain_[3]+Ee&4294967295,this.chain_[4]=this.chain_[4]+ue&4294967295}update(_e,ee){if(null==_e)return;void 0===ee&&(ee=_e.length);const re=ee-this.blockSize;let Y=0;const Ue=this.buf_;let me=this.inbuf_;for(;Y<ee;){if(0===me)for(;Y<=re;)this.compress_(_e,Y),Y+=this.blockSize;if("string"==typeof _e){for(;Y<ee;)if(Ue[me]=_e.charCodeAt(Y),++me,++Y,me===this.blockSize){this.compress_(Ue),me=0;break}}else for(;Y<ee;)if(Ue[me]=_e[Y],++me,++Y,me===this.blockSize){this.compress_(Ue),me=0;break}}this.inbuf_=me,this.total_+=ee}digest(){const _e=[];let ee=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Y=this.blockSize-1;Y>=56;Y--)this.buf_[Y]=255&ee,ee/=256;this.compress_(this.buf_);let re=0;for(let Y=0;Y<5;Y++)for(let Ue=24;Ue>=0;Ue-=8)_e[re]=this.chain_[Y]>>Ue&255,++re;return _e}}function dn(ge,_e){const ee=new hn(ge,_e);return ee.subscribe.bind(ee)}class hn{constructor(_e,ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ee,this.task.then(()=>{_e(this)}).catch(re=>{this.error(re)})}next(_e){this.forEachObserver(ee=>{ee.next(_e)})}error(_e){this.forEachObserver(ee=>{ee.error(_e)}),this.close(_e)}complete(){this.forEachObserver(_e=>{_e.complete()}),this.close()}subscribe(_e,ee,re){let Y;if(void 0===_e&&void 0===ee&&void 0===re)throw new Error("Missing Observer.");Y=function lr(ge,_e){if("object"!=typeof ge||null===ge)return!1;for(const ee of _e)if(ee in ge&&"function"==typeof ge[ee])return!0;return!1}(_e,["next","error","complete"])?_e:{next:_e,error:ee,complete:re},void 0===Y.next&&(Y.next=yr),void 0===Y.error&&(Y.error=yr),void 0===Y.complete&&(Y.complete=yr);const Ue=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),Ue}unsubscribeOne(_e){void 0===this.observers||void 0===this.observers[_e]||(delete this.observers[_e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(_e){if(!this.finalized)for(let ee=0;ee<this.observers.length;ee++)this.sendOne(ee,_e)}sendOne(_e,ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[_e])try{ee(this.observers[_e])}catch(re){typeof console<"u"&&console.error&&console.error(re)}})}close(_e){this.finalized||(this.finalized=!0,void 0!==_e&&(this.finalError=_e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yr(){}function Vr(ge,_e){return`${ge} failed: ${_e} argument `}const qr=function(ge){const _e=[];let ee=0;for(let re=0;re<ge.length;re++){let Y=ge.charCodeAt(re);if(Y>=55296&&Y<=56319){const Ue=Y-55296;re++,p(re<ge.length,"Surrogate pair missing trail surrogate."),Y=65536+(Ue<<10)+(ge.charCodeAt(re)-56320)}Y<128?_e[ee++]=Y:Y<2048?(_e[ee++]=Y>>6|192,_e[ee++]=63&Y|128):Y<65536?(_e[ee++]=Y>>12|224,_e[ee++]=Y>>6&63|128,_e[ee++]=63&Y|128):(_e[ee++]=Y>>18|240,_e[ee++]=Y>>12&63|128,_e[ee++]=Y>>6&63|128,_e[ee++]=63&Y|128)}return _e},Bn=function(ge){let _e=0;for(let ee=0;ee<ge.length;ee++){const re=ge.charCodeAt(ee);re<128?_e++:re<2048?_e+=2:re>=55296&&re<=56319?(_e+=4,ee++):_e+=3}return _e},Hn=1e3,xr=2,Jn=144e5,Qe=.5;function De(ge,_e=Hn,ee=xr){const re=_e*Math.pow(ee,ge),Y=Math.round(Qe*re*(Math.random()-.5)*2);return Math.min(Jn,re+Y)}function ct(ge){return ge&&ge._delegate?ge._delegate:ge}},6893:(mn,ot,j)=>{j.d(ot,{e:()=>$e});var C=j(5861),p=j(751),K=j(89),X=j(4004),Se=j(9646),Ne=j(4650);let $e=(()=>{class be{constructor(de,ye){this.auth=de,this.firestore=ye,this.user$=(0,p.fD)(this.auth),this.usuario$=(0,p.fD)(this.auth).pipe((0,X.U)(Me=>Me?(console.log(Me),Me):(0,Se.of)(null)))}registro(de,ye){var Me=this;return(0,C.Z)(function*(){try{return yield(0,p.Xb)(Me.auth,de,ye)}catch{return null}})()}login(de,ye){var Me=this;return(0,C.Z)(function*(){try{return yield(0,p.e5)(Me.auth,de,ye)}catch{return null}})()}logout(){return(0,p.w7)(this.auth)}getUsuario(){const de=this.auth.currentUser;if(console.log(de),de){const ye=(0,K.JU)(this.firestore,`user/${de.uid}`);return(0,K.hJ)(this.firestore,`user/${de.uid}`),(0,K._1)(ye,{idField:"uid"})}return de}getUsuarioFire(){return this.auth.currentUser}}return be.\u0275fac=function(de){return new(de||be)(Ne.LFG(p.gx),Ne.LFG(K.gg))},be.\u0275prov=Ne.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"}),be})()},4359:(mn,ot,j)=>{j.d(ot,{L:()=>Ze});var C=j(5861),p=j(9260),X=(j(6197),j(3900)),Se=j(4650),Ne=j(2371),$e=j(6893),be=j(7001);let Ze=(()=>{class de{constructor(Me,tt,Ye){this.afs=Me,this.authSvc=tt,this.router=Ye,this.getUserMail()}addResultado(Me){return this.getUserMail(),this.afs.collection("listados").add({usuario:this.mail,tiempo:Me.tiempo,resultado:Me.resultado,clicks:Me.clicks,juego:Me.juego,correctas:Me.correctas,errores:Me.errores,createdAt:p.Z.firestore.FieldValue.serverTimestamp()})}getListas(){this.getUserMail();let Me=[];return this.getUserMail(),this.getListado().pipe((0,X.w)(tt=>(Me=tt,this.afs.collection("listados",Ye=>Ye.orderBy("createdAt","desc")).valueChanges({idField:"id"}))))}getListado(){return this.afs.collection("listados",Me=>Me.orderBy("createdAt","desc")).valueChanges({idField:"id"})}getUserMail(){var Me=this;return(0,C.Z)(function*(){Me.mail=Me.authSvc.getUsuarioFire()?Me.authSvc.getUsuarioFire()?.email:"usuario anonimo"})()}}return de.\u0275fac=function(Me){return new(Me||de)(Se.LFG(Ne.ST),Se.LFG($e.e),Se.LFG(be.F0))},de.\u0275prov=Se.Yz7({token:de,factory:de.\u0275fac,providedIn:"root"}),de})()},456:(mn,ot,j)=>{var C=j(1481),p=j(4650),K=j(7001),X=j(5861),Se=j(6893),Ne=j(6895);function $e(m,v){if(1&m){const w=p.EpF();p.TgZ(0,"nav")(1,"a",2),p._uU(2,"Home"),p.qZA(),p.TgZ(3,"a",3),p._uU(4,"Juegos"),p.qZA(),p.TgZ(5,"a",4),p._uU(6,"Quien Soy"),p.qZA(),p.TgZ(7,"a",5),p.NdJ("click",function(){p.CHM(w);const Q=p.oxw();return p.KtG(Q.logOut())}),p._uU(8,"Logout"),p.qZA(),p.TgZ(9,"a"),p._uU(10),p.qZA(),p._UZ(11,"div",6),p.qZA()}if(2&m){const w=p.oxw();p.xp6(10),p.Oqu(w.usuario.email)}}function be(m,v){1&m&&(p.TgZ(0,"nav")(1,"a",2),p._uU(2,"Home"),p.qZA(),p.TgZ(3,"a",7),p._uU(4,"Login"),p.qZA(),p.TgZ(5,"a",8),p._uU(6,"Registro"),p.qZA(),p._UZ(7,"div",6),p.qZA())}let Ze=(()=>{class m{constructor(w,M){this.authSvc=w,this.router=M}ngOnInit(){this.user$=this.authSvc.user$,this.authSvc.user$.subscribe(w=>{this.usuario=w})}logOut(){var w=this;return(0,X.Z)(function*(){try{yield w.authSvc.logout(),w.router.navigate(["/login"])}catch(M){console.log(M)}})()}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(Se.e),p.Y36(K.F0))},m.\u0275cmp=p.Xpm({type:m,selectors:[["app-menu"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["login",""],["routerLink","/home"],["routerLink","/juegos"],["routerLink","/quiensoy"],[3,"click"],[1,"animation","start-home"],["routerLink","/login"],["routerLink","/registro"]],template:function(w,M){if(1&w&&(p.YNc(0,$e,12,1,"nav",0),p.ALo(1,"async"),p.YNc(2,be,8,0,"ng-template",null,1,p.W1O)),2&w){const Q=p.MAs(3);p.Q6J("ngIf",p.lcZ(1,2,M.user$))("ngIfElse",Q)}},dependencies:[Ne.O5,K.rH,Ne.Ov],styles:["nav[_ngcontent-%COMP%]{margin:27px auto 0;position:relative;width:700px;height:50px;background-color:#34495e;border-radius:8px;font-size:0}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{line-height:50px;height:100%;font-size:15px;display:inline-block;position:relative;z-index:1;text-decoration:none;text-transform:uppercase;text-align:center;color:#fff;cursor:pointer}nav[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:50px;height:100%;font-size:15px;display:inline-block;position:relative;z-index:1;text-decoration:none;text-transform:uppercase;text-align:center;color:#fff;cursor:pointer}nav[_ngcontent-%COMP%]   .animation[_ngcontent-%COMP%]{position:absolute;height:100%;top:0;z-index:0;transition:all .5s ease 0s;border-radius:8px}a[_ngcontent-%COMP%]:nth-child(1){width:100px}a[_ngcontent-%COMP%]:nth-child(2){width:110px}a[_ngcontent-%COMP%]:nth-child(3){width:100px}a[_ngcontent-%COMP%]:nth-child(4){width:160px}a[_ngcontent-%COMP%]:nth-child(5){width:120px}nav[_ngcontent-%COMP%]   .start-home[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:nth-child(1):hover ~ .animation[_ngcontent-%COMP%]{width:100px;left:0;background-color:#1abc9c}nav[_ngcontent-%COMP%]   .start-about[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:nth-child(2):hover ~ .animation[_ngcontent-%COMP%]{width:110px;left:100px;background-color:#e74c3c}nav[_ngcontent-%COMP%]   .start-blog[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:nth-child(3):hover ~ .animation[_ngcontent-%COMP%]{width:100px;left:210px;background-color:#3498db}nav[_ngcontent-%COMP%]   .start-portefolio[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:nth-child(4):hover ~ .animation[_ngcontent-%COMP%]{width:160px;left:310px;background-color:#9b59b6}body[_ngcontent-%COMP%]{font-size:12px;font-family:sans-serif;background:#2c3e50}h1[_ngcontent-%COMP%]{margin:40px 0;text-align:center;font-size:30px;color:#ecf0f1;text-shadow:2px 2px 4px #000000;font-family:Cherry Swash,cursive}p[_ngcontent-%COMP%]{position:absolute;bottom:20px;width:100%;text-align:center;color:#ecf0f1;font-family:Cherry Swash,cursive;font-size:16px}span[_ngcontent-%COMP%]{color:#2bd6b4}"]}),m})(),de=(()=>{class m{constructor(){this.title="saladejuegos"}}return m.\u0275fac=function(w){return new(w||m)},m.\u0275cmp=p.Xpm({type:m,selectors:[["app-root"]],decls:2,vars:0,template:function(w,M){1&w&&p._UZ(0,"app-menu")(1,"router-outlet")},dependencies:[K.lC,Ze]}),m})();var ye=j(3692);const Me_firebase={projectId:"tplab4-45942",appId:"1:544089026720:web:12140e7d4d8c437ea759c5",databaseURL:"https://tplab4-45942.firebaseio.com",storageBucket:"tplab4-45942.appspot.com",locationId:"us-central",apiKey:"AIzaSyDaDxkZHkwvJy0N7o_DVcmMXIx_6vPSZ7I",authDomain:"tplab4-45942.firebaseapp.com",messagingSenderId:"544089026720"};var tt=j(751),Ye=j(2432),Nt=j(259),Qt=j(2313),nt=j(6197);class yt{constructor(v){return v}}const ft="database",Je=new p.OlP("angularfire2.database-instances");function $t(m){return(v,w)=>{const M=v.runOutsideAngular(()=>m(w));return new yt(M)}}const wt={provide:class Rt{constructor(){return(0,Ye.vb)(ft)}},deps:[[new p.FiY,Je]]},je={provide:yt,useFactory:function vt(m,v){const w=(0,Ye.JM)(ft,m,v);return w&&new yt(w)},deps:[[new p.FiY,Je],ye.Ot]};let xt=(()=>{class m{constructor(){(0,Nt.KN)("angularfire",Ye.q4.full,"rtdb")}}return m.\u0275fac=function(w){return new(w||m)},m.\u0275mod=p.oAB({type:m}),m.\u0275inj=p.cJS({providers:[je,wt]}),m})();function ln(m,...v){return{ngModule:xt,providers:[{provide:Je,useFactory:$t(m),multi:!0,deps:[p.R0b,p.zs3,Ye.HU,ye.z6,[new p.FiY,tt.dh],[new p.FiY,Qt.nm],...v]}]}}const pr=(0,Ye.u3)(nt.N8,!0);var xr=j(89),Jn=j(6881),Qe=j(2090),De=j(4859);const ee="functions";class Ee{constructor(v,w,M){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=v.getImmediate({optional:!0}),this.messaging=w.getImmediate({optional:!0}),this.auth||v.get().then(Q=>this.auth=Q,()=>{}),this.messaging||w.get().then(Q=>this.messaging=Q,()=>{}),this.appCheck||M.get().then(Q=>this.appCheck=Q,()=>{})}getAuthToken(){var v=this;return(0,X.Z)(function*(){if(v.auth)try{return(yield v.auth.getToken())?.accessToken}catch{return}})()}getMessagingToken(){var v=this;return(0,X.Z)(function*(){if(v.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield v.messaging.getToken()}catch{return}})()}getAppCheckToken(){var v=this;return(0,X.Z)(function*(){if(v.appCheck){const w=yield v.appCheck.getToken();return w.error?null:w.token}return null})()}getContext(){var v=this;return(0,X.Z)(function*(){return{authToken:yield v.getAuthToken(),messagingToken:yield v.getMessagingToken(),appCheckToken:yield v.getAppCheckToken()}})()}}const ue="us-central1";class Xe{constructor(v,w,M,Q,Ve=ue,Ot){this.app=v,this.fetchImpl=Ot,this.emulatorOrigin=null,this.contextProvider=new Ee(w,M,Q),this.cancelAllRequests=new Promise(bn=>{this.deleteService=()=>Promise.resolve(bn())});try{const bn=new URL(Ve);this.customDomain=bn.origin,this.region=ue}catch{this.customDomain=null,this.region=Ve}}_delete(){return this.deleteService()}_url(v){const w=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${w}/${this.region}/${v}`:null!==this.customDomain?`${this.customDomain}/${v}`:`https://${this.region}-${w}.cloudfunctions.net/${v}`}}const Fe="@firebase/functions";function Ar(m=(0,Jn.getApp)(),v=ue){const M=(0,Jn._getProvider)((0,Qe.m9)(m),ee).getImmediate({identifier:v}),Q=(0,Qe.P0)("functions");return Q&&function Mr(m,v,w){!function Et(m,v,w){m.emulatorOrigin=`http://${v}:${w}`}((0,Qe.m9)(m),v,w)}(M,...Q),M}!function Fn(m,v){(0,Jn._registerComponent)(new De.wA(ee,(M,{instanceIdentifier:Q})=>{const Ve=M.getProvider("app").getImmediate(),Ot=M.getProvider("auth-internal"),bn=M.getProvider("messaging-internal"),Vn=M.getProvider("app-check-internal");return new Xe(Ve,Ot,bn,Vn,Q,m)},"PUBLIC").setMultipleInstances(!0)),(0,Jn.registerVersion)(Fe,"0.9.4",v),(0,Jn.registerVersion)(Fe,"0.9.4","esm2017")}(fetch.bind(self));class ei{constructor(v){return v}}const Lr="functions",Tn=new p.OlP("angularfire2.functions-instances");function Dn(m){return(v,w)=>{const M=v.runOutsideAngular(()=>m(w));return new ei(M)}}const Xn={provide:class Zt{constructor(){return(0,Ye.vb)(Lr)}},deps:[[new p.FiY,Tn]]},Zn={provide:ei,useFactory:function In(m,v){const w=(0,Ye.JM)(Lr,m,v);return w&&new ei(w)},deps:[[new p.FiY,Tn],ye.Ot]};let fe=(()=>{class m{constructor(){(0,Nt.KN)("angularfire",Ye.q4.full,"fn")}}return m.\u0275fac=function(w){return new(w||m)},m.\u0275mod=p.oAB({type:m}),m.\u0275inj=p.cJS({providers:[Zn,Xn]}),m})();function te(m,...v){return{ngModule:fe,providers:[{provide:Tn,useFactory:Dn(m),multi:!0,deps:[p.R0b,p.zs3,Ye.HU,ye.z6,[new p.FiY,tt.dh],[new p.FiY,Qt.nm],...v]}]}}const He=(0,Ye.u3)(Ar,!0);var qe=j(2138);class _t{constructor(v){return v}}const Xt="messaging",br=new p.OlP("angularfire2.messaging-instances");function dr(m){return(v,w)=>{if(!Ye.n1.sync())return null;const M=v.runOutsideAngular(()=>m(w));return new _t(M)}}const Ni={provide:class $n{constructor(){return(0,Ye.vb)(Xt)}},deps:[[new p.FiY,br]]},Ss={provide:_t,useFactory:function Ti(m,v){if(!Ye.n1.sync())return null;const w=(0,Ye.JM)(Xt,m,v);return w&&new _t(w)},deps:[[new p.FiY,br],ye.Ot]};let Ia=(()=>{class m{constructor(){(0,Nt.KN)("angularfire",Ye.q4.full,"fcm")}}return m.\u0275fac=function(w){return new(w||m)},m.\u0275mod=p.oAB({type:m}),m.\u0275inj=p.cJS({providers:[Ss,Ni,{provide:p.ip1,useValue:Ye.n1.async,multi:!0}]}),m})();function Js(m,...v){return{ngModule:Ia,providers:[{provide:br,useFactory:dr(m),multi:!0,deps:[p.R0b,p.zs3,Ye.HU,ye.z6,...v]}]}}const zi=(0,Ye.u3)(qe.KL,!0),sr="firebasestorage.googleapis.com",Hs="storageBucket";class Br extends Qe.ZR{constructor(v,w,M=0){super(To(v),`Firebase Storage: ${w} (${To(v)})`),this.status_=M,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Br.prototype)}get status(){return this.status_}set status(v){this.status_=v}_codeEquals(v){return To(v)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(v){this.customData.serverResponse=v,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Tr=(()=>{return(m=Tr||(Tr={})).UNKNOWN="unknown",m.OBJECT_NOT_FOUND="object-not-found",m.BUCKET_NOT_FOUND="bucket-not-found",m.PROJECT_NOT_FOUND="project-not-found",m.QUOTA_EXCEEDED="quota-exceeded",m.UNAUTHENTICATED="unauthenticated",m.UNAUTHORIZED="unauthorized",m.UNAUTHORIZED_APP="unauthorized-app",m.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",m.INVALID_CHECKSUM="invalid-checksum",m.CANCELED="canceled",m.INVALID_EVENT_NAME="invalid-event-name",m.INVALID_URL="invalid-url",m.INVALID_DEFAULT_BUCKET="invalid-default-bucket",m.NO_DEFAULT_BUCKET="no-default-bucket",m.CANNOT_SLICE_BLOB="cannot-slice-blob",m.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",m.NO_DOWNLOAD_URL="no-download-url",m.INVALID_ARGUMENT="invalid-argument",m.INVALID_ARGUMENT_COUNT="invalid-argument-count",m.APP_DELETED="app-deleted",m.INVALID_ROOT_OPERATION="invalid-root-operation",m.INVALID_FORMAT="invalid-format",m.INTERNAL_ERROR="internal-error",m.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Tr;var m})();function To(m){return"storage/"+m}function co(m){return new Br(Tr.INVALID_ARGUMENT,m)}function Yi(){return new Br(Tr.APP_DELETED,"The Firebase app was deleted.")}class _i{constructor(v,w){this.bucket=v,this.path_=w}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const v=encodeURIComponent;return"/b/"+v(this.bucket)+"/o/"+v(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(v,w){let M;try{M=_i.makeFromUrl(v,w)}catch{return new _i(v,"")}if(""===M.path)return M;throw function ba(m){return new Br(Tr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+m+"'.")}(v)}static makeFromUrl(v,w){let M=null;const Q="([A-Za-z0-9.\\-_]+)",bn=new RegExp("^gs://"+Q+"(/(.*))?$","i");function vr(na){na.path_=decodeURIComponent(na.path)}const xi=w.replace(/[.]/g,"\\."),wo=[{regex:bn,indices:{bucket:1,path:3},postModify:function Ve(na){"/"===na.path.charAt(na.path.length-1)&&(na.path_=na.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${xi}/v[A-Za-z0-9_]+/b/${Q}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:vr},{regex:new RegExp(`^https?://${w===sr?"(?:storage.googleapis.com|storage.cloud.google.com)":w}/${Q}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:vr}];for(let na=0;na<wo.length;na++){const Tc=wo[na],Na=Tc.regex.exec(v);if(Na){let zl=Na[Tc.indices.path];zl||(zl=""),M=new _i(Na[Tc.indices.bucket],zl),Tc.postModify(M);break}}if(null==M)throw function $o(m){return new Br(Tr.INVALID_URL,"Invalid URL '"+m+"'.")}(v);return M}}class So{constructor(v){this.promise_=Promise.reject(v)}getPromise(){return this.promise_}cancel(v=!1){}}function Kn(m,v,w,M){if(M<v)throw co(`Invalid value for '${m}'. Expected ${v} or greater.`);if(M>w)throw co(`Invalid value for '${m}'. Expected ${w} or less.`)}var cr=(()=>{return(m=cr||(cr={}))[m.NO_ERROR=0]="NO_ERROR",m[m.NETWORK_ERROR=1]="NETWORK_ERROR",m[m.ABORT=2]="ABORT",cr;var m})();class ti{constructor(v,w,M,Q,Ve,Ot,bn,Vn,vr,Xr,xi,bs=!0){this.url_=v,this.method_=w,this.headers_=M,this.body_=Q,this.successCodes_=Ve,this.additionalRetryCodes_=Ot,this.callback_=bn,this.errorCallback_=Vn,this.timeout_=vr,this.progressCallback_=Xr,this.connectionFactory_=xi,this.retry=bs,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Bs,_s)=>{this.resolve_=Bs,this.reject_=_s,this.start_()})}start_(){const w=(M,Q)=>{const Ve=this.resolve_,Ot=this.reject_,bn=Q.connection;if(Q.wasSuccessCode)try{const Vn=this.callback_(bn,bn.getResponse());!function we(m){return void 0!==m}(Vn)?Ve():Ve(Vn)}catch(Vn){Ot(Vn)}else if(null!==bn){const Vn=function ir(){return new Br(Tr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();Vn.serverResponse=bn.getErrorText(),Ot(this.errorCallback_?this.errorCallback_(bn,Vn):Vn)}else Ot(Q.canceled?this.appDelete_?Yi():function Fa(){return new Br(Tr.CANCELED,"User canceled the upload/download.")}():function Do(){return new Br(Tr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?w(0,new li(!1,null,!0)):this.backoffId_=function mr(m,v,w){let M=1,Q=null,Ve=null,Ot=!1,bn=0;function Vn(){return 2===bn}let vr=!1;function Xr(...Ts){vr||(vr=!0,v.apply(null,Ts))}function xi(Ts){Q=setTimeout(()=>{Q=null,m(Bs,Vn())},Ts)}function bs(){Ve&&clearTimeout(Ve)}function Bs(Ts,...Hl){if(vr)return void bs();if(Ts)return bs(),void Xr.call(null,Ts,...Hl);if(Vn()||Ot)return bs(),void Xr.call(null,Ts,...Hl);let wo;M<64&&(M*=2),1===bn?(bn=2,wo=0):wo=1e3*(M+Math.random()),xi(wo)}let _s=!1;function _u(Ts){_s||(_s=!0,bs(),!vr&&(null!==Q?(Ts||(bn=2),clearTimeout(Q),xi(0)):Ts||(bn=1)))}return xi(0),Ve=setTimeout(()=>{Ot=!0,_u(!0)},w),_u}((M,Q)=>{if(Q)return void M(!1,new li(!1,null,!0));const Ve=this.connectionFactory_();this.pendingConnection_=Ve;const Ot=bn=>{null!==this.progressCallback_&&this.progressCallback_(bn.loaded,bn.lengthComputable?bn.total:-1)};null!==this.progressCallback_&&Ve.addUploadProgressListener(Ot),Ve.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Ve.removeUploadProgressListener(Ot),this.pendingConnection_=null;const bn=Ve.getErrorCode()===cr.NO_ERROR,Vn=Ve.getStatus();if(!bn||function Oi(m,v){const w=m>=500&&m<600,Q=-1!==[408,429].indexOf(m),Ve=-1!==v.indexOf(m);return w||Q||Ve}(Vn,this.additionalRetryCodes_)&&this.retry){const Xr=Ve.getErrorCode()===cr.ABORT;return void M(!1,new li(!1,null,Xr))}const vr=-1!==this.successCodes_.indexOf(Vn);M(!0,new li(vr,Ve))})},w,this.timeout_)}getPromise(){return this.promise_}cancel(v){this.canceled_=!0,this.appDelete_=v||!1,null!==this.backoffId_&&function Ce(m){m(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class li{constructor(v,w,M){this.wasSuccessCode=v,this.connection=w,this.canceled=!!M}}class Qr{constructor(v,w){this._service=v,this._location=w instanceof _i?w:_i.makeFromUrl(w,v.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(v,w){return new Qr(v,w)}get root(){const v=new _i(this._location.bucket,"");return this._newRef(this._service,v)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function Va(m){const v=m.lastIndexOf("/",m.length-2);return-1===v?m:m.slice(v+1)}(this._location.path)}get storage(){return this._service}get parent(){const v=function Lu(m){if(0===m.length)return null;const v=m.lastIndexOf("/");return-1===v?"":m.slice(0,v)}(this._location.path);if(null===v)return null;const w=new _i(this._location.bucket,v);return new Qr(this._service,w)}_throwIfRoot(v){if(""===this._location.path)throw function jo(m){return new Br(Tr.INVALID_ROOT_OPERATION,"The operation '"+m+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(v)}}function Kl(m,v){const w=v?.[Hs];return null==w?null:_i.makeFromBucketSpec(w,m)}class $u{constructor(v,w,M,Q,Ve){this.app=v,this._authProvider=w,this._appCheckProvider=M,this._url=Q,this._firebaseVersion=Ve,this._bucket=null,this._host=sr,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Q?_i.makeFromBucketSpec(Q,this._host):Kl(this._host,this.app.options)}get host(){return this._host}set host(v){this._host=v,this._bucket=null!=this._url?_i.makeFromBucketSpec(this._url,v):Kl(v,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(v){Kn("time",0,Number.POSITIVE_INFINITY,v),this._maxUploadRetryTime=v}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(v){Kn("time",0,Number.POSITIVE_INFINITY,v),this._maxOperationRetryTime=v}_getAuthToken(){var v=this;return(0,X.Z)(function*(){if(v._overrideAuthToken)return v._overrideAuthToken;const w=v._authProvider.getImmediate({optional:!0});if(w){const M=yield w.getToken();if(null!==M)return M.accessToken}return null})()}_getAppCheckToken(){var v=this;return(0,X.Z)(function*(){const w=v._appCheckProvider.getImmediate({optional:!0});return w?(yield w.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(v=>v.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(v){return new Qr(this,v)}_makeRequest(v,w,M,Q,Ve=!0){if(this._deleted)return new So(Yi());{const Ot=function yi(m,v,w,M,Q,Ve,Ot=!0){const bn=function Un(m){const v=encodeURIComponent;let w="?";for(const M in m)m.hasOwnProperty(M)&&(w=w+(v(M)+"=")+v(m[M])+"&");return w=w.slice(0,-1),w}(m.urlParams),Vn=m.url+bn,vr=Object.assign({},m.headers);return function ki(m,v){v&&(m["X-Firebase-GMPID"]=v)}(vr,v),function Ho(m,v){null!==v&&v.length>0&&(m.Authorization="Firebase "+v)}(vr,w),function ii(m,v){m["X-Firebase-Storage-Version"]="webjs/"+(v??"AppManager")}(vr,Ve),function rs(m,v){null!==v&&(m["X-Firebase-AppCheck"]=v)}(vr,M),new ti(Vn,m.method,vr,m.body,m.successCodes,m.additionalRetryCodes,m.handler,m.errorHandler,m.timeout,m.progressCallback,Q,Ot)}(v,this._appId,M,Q,w,this._firebaseVersion,Ve);return this._requests.add(Ot),Ot.getPromise().then(()=>this._requests.delete(Ot),()=>this._requests.delete(Ot)),Ot}}makeRequestWithTokens(v,w){var M=this;return(0,X.Z)(function*(){const[Q,Ve]=yield Promise.all([M._getAuthToken(),M._getAppCheckToken()]);return M._makeRequest(v,w,Q,Ve).getPromise()})()}}const ju="@firebase/storage",Ml="storage";function gn(m=(0,Jn.getApp)(),v){m=(0,Qe.m9)(m);const M=(0,Jn._getProvider)(m,Ml).getImmediate({identifier:v}),Q=(0,Qe.P0)("storage");return Q&&function pa(m,v,w,M={}){!function mo(m,v,w,M={}){m.host=`${v}:${w}`,m._protocol="http";const{mockUserToken:Q}=M;Q&&(m._overrideAuthToken="string"==typeof Q?Q:(0,Qe.Sg)(Q,m.app.options.projectId))}(m,v,w,M)}(M,...Q),M}function wu(m,{instanceIdentifier:v}){const w=m.getProvider("app").getImmediate(),M=m.getProvider("auth-internal"),Q=m.getProvider("app-check-internal");return new $u(w,M,Q,v,Jn.SDK_VERSION)}!function Iu(){(0,Jn._registerComponent)(new De.wA(Ml,wu,"PUBLIC").setMultipleInstances(!0)),(0,Jn.registerVersion)(ju,"0.11.2",""),(0,Jn.registerVersion)(ju,"0.11.2","esm2017")}();class su{constructor(v){return v}}const Qi="storage",ds=new p.OlP("angularfire2.storage-instances");function ro(m){return(v,w)=>{const M=v.runOutsideAngular(()=>m(w));return new su(M)}}const No={provide:class no{constructor(){return(0,Ye.vb)(Qi)}},deps:[[new p.FiY,ds]]},ou={provide:su,useFactory:function _o(m,v){const w=(0,Ye.JM)(Qi,m,v);return w&&new su(w)},deps:[[new p.FiY,ds],ye.Ot]};let Jl=(()=>{class m{constructor(){(0,Nt.KN)("angularfire",Ye.q4.full,"gcs")}}return m.\u0275fac=function(w){return new(w||m)},m.\u0275mod=p.oAB({type:m}),m.\u0275inj=p.cJS({providers:[ou,No]}),m})();function Ke(m,...v){return{ngModule:Jl,providers:[{provide:ds,useFactory:ro(m),multi:!0,deps:[p.R0b,p.zs3,Ye.HU,ye.z6,[new p.FiY,tt.dh],[new p.FiY,Qt.nm],...v]}]}}const hl=(0,Ye.u3)(gn,!0);var uu=j(9260),es=j(3900),bu=j(4004),za=j(2371);let lu=(()=>{class m{constructor(w,M,Q){this.afs=w,this.authSvc=M,this.router=Q,this.getUseMail()}addChatMessage(w){return this.getUseMail(),this.afs.collection("messages").add({msg:w,from:this.mail,createdAt:uu.Z.firestore.FieldValue.serverTimestamp()})}getChatMessages(){let w=[];return this.getUseMail(),this.getUsers().pipe((0,es.w)(M=>(w=M,this.afs.collection("messages",Q=>Q.orderBy("createdAt","desc")).valueChanges({idField:"id"}))),(0,bu.U)(M=>{for(let Q of M)Q.fromName=this.getUserForMsg(Q.from,w),Q.myMsg=this.mail===Q.from;return M}))}getUsers(){return this.afs.collection("user").valueChanges({idField:"uid"})}getUseMail(){var w=this;return(0,X.Z)(function*(){w.mail=(yield w.authSvc.getUsuarioFire())?w.authSvc.getUsuarioFire()?.email:"usuario anonimo"})()}getUserForMsg(w,M){this.getUseMail(),console.log("users mail",this.mail);for(let Q of M)if(console.log("users usr.email",Q.email),console.log("msgFromId",w),Q.email==w)return Q.email;return"Deleted"}}return m.\u0275fac=function(w){return new(w||m)(p.LFG(za.ST),p.LFG(Se.e),p.LFG(K.F0))},m.\u0275prov=p.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();var Gu=j(8996),yo=j(9751),Ga=j(4742),D=j(8421),A=j(7669),b=j(5403),O=j(3268),$=j(1810);let le=(()=>{class m{constructor(w,M){this._renderer=w,this._elementRef=M,this.onChange=Q=>{},this.onTouched=()=>{}}setProperty(w,M){this._renderer.setProperty(this._elementRef.nativeElement,w,M)}registerOnTouched(w){this.onTouched=w}registerOnChange(w){this.onChange=w}setDisabledState(w){this.setProperty("disabled",w)}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(p.Qsj),p.Y36(p.SBq))},m.\u0275dir=p.lG2({type:m}),m})(),ze=(()=>{class m extends le{}return m.\u0275fac=function(){let v;return function(M){return(v||(v=p.n5z(m)))(M||m)}}(),m.\u0275dir=p.lG2({type:m,features:[p.qOj]}),m})();const At=new p.OlP("NgValueAccessor"),Cn={provide:At,useExisting:(0,p.Gpc)(()=>En),multi:!0};let En=(()=>{class m extends ze{writeValue(w){this.setProperty("checked",w)}}return m.\u0275fac=function(){let v;return function(M){return(v||(v=p.n5z(m)))(M||m)}}(),m.\u0275dir=p.lG2({type:m,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(w,M){1&w&&p.NdJ("change",function(Ve){return M.onChange(Ve.target.checked)})("blur",function(){return M.onTouched()})},features:[p._Bn([Cn]),p.qOj]}),m})();const Jr={provide:At,useExisting:(0,p.Gpc)(()=>Ii),multi:!0},Fo=new p.OlP("CompositionEventMode");let Ii=(()=>{class m extends le{constructor(w,M,Q){super(w,M),this._compositionMode=Q,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Si(){const m=(0,Ne.q)()?(0,Ne.q)().getUserAgent():"";return/android (\d+)/.test(m.toLowerCase())}())}writeValue(w){this.setProperty("value",w??"")}_handleInput(w){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(w)}_compositionStart(){this._composing=!0}_compositionEnd(w){this._composing=!1,this._compositionMode&&this.onChange(w)}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Fo,8))},m.\u0275dir=p.lG2({type:m,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(w,M){1&w&&p.NdJ("input",function(Ve){return M._handleInput(Ve.target.value)})("blur",function(){return M.onTouched()})("compositionstart",function(){return M._compositionStart()})("compositionend",function(Ve){return M._compositionEnd(Ve.target.value)})},features:[p._Bn([Jr]),p.qOj]}),m})();const Lo=!1;function as(m){return null==m||("string"==typeof m||Array.isArray(m))&&0===m.length}function Ko(m){return null!=m&&"number"==typeof m.length}const $r=new p.OlP("NgValidators"),Yo=new p.OlP("NgAsyncValidators"),Wa=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class pi{static min(v){return function ci(m){return v=>{if(as(v.value)||as(m))return null;const w=parseFloat(v.value);return!isNaN(w)&&w<m?{min:{min:m,actual:v.value}}:null}}(v)}static max(v){return function cu(m){return v=>{if(as(v.value)||as(m))return null;const w=parseFloat(v.value);return!isNaN(w)&&w>m?{max:{max:m,actual:v.value}}:null}}(v)}static required(v){return ws(v)}static requiredTrue(v){return function $i(m){return!0===m.value?null:{required:!0}}(v)}static email(v){return function Wu(m){return as(m.value)||Wa.test(m.value)?null:{email:!0}}(v)}static minLength(v){return function qa(m){return v=>as(v.value)||!Ko(v.value)?null:v.value.length<m?{minlength:{requiredLength:m,actualLength:v.value.length}}:null}(v)}static maxLength(v){return function vo(m){return v=>Ko(v.value)&&v.value.length>m?{maxlength:{requiredLength:m,actualLength:v.value.length}}:null}(v)}static pattern(v){return function Nl(m){if(!m)return Tu;let v,w;return"string"==typeof m?(w="","^"!==m.charAt(0)&&(w+="^"),w+=m,"$"!==m.charAt(m.length-1)&&(w+="$"),v=new RegExp(w)):(w=m.toString(),v=m),M=>{if(as(M.value))return null;const Q=M.value;return v.test(Q)?null:{pattern:{requiredPattern:w,actualValue:Q}}}}(v)}static nullValidator(v){return null}static compose(v){return Ka(v)}static composeAsync(v){return Qo(v)}}function ws(m){return as(m.value)?{required:!0}:null}function Tu(m){return null}function Ai(m){return null!=m}function Aa(m){const v=(0,p.QGY)(m)?(0,Gu.D)(m):m;if(Lo&&!(0,p.CqO)(v)){let w="Expected async validator to return Promise or Observable.";throw"object"==typeof m&&(w+=" Are you using a synchronous validator where an async validator is expected?"),new p.vHH(-1101,w)}return v}function Za(m){let v={};return m.forEach(w=>{v=null!=w?{...v,...w}:v}),0===Object.keys(v).length?null:v}function Xi(m,v){return v.map(w=>w(m))}function Du(m){return m.map(v=>function Uo(m){return!m.validate}(v)?v:w=>v.validate(w))}function Ka(m){if(!m)return null;const v=m.filter(Ai);return 0==v.length?null:function(w){return Za(Xi(w,v))}}function Su(m){return null!=m?Ka(Du(m)):null}function Qo(m){if(!m)return null;const v=m.filter(Ai);return 0==v.length?null:function(w){return function J(...m){const v=(0,A.jO)(m),{args:w,keys:M}=(0,Ga.D)(m),Q=new yo.y(Ve=>{const{length:Ot}=w;if(!Ot)return void Ve.complete();const bn=new Array(Ot);let Vn=Ot,vr=Ot;for(let Xr=0;Xr<Ot;Xr++){let xi=!1;(0,D.Xf)(w[Xr]).subscribe((0,b.x)(Ve,bs=>{xi||(xi=!0,vr--),bn[Xr]=bs},()=>Vn--,void 0,()=>{(!Vn||!xi)&&(vr||Ve.next(M?(0,$.n)(M,bn):bn),Ve.complete())}))}});return v?Q.pipe((0,O.Z)(v)):Q}(Xi(w,v).map(Aa)).pipe((0,bu.U)(Za))}}function _a(m){return null!=m?Qo(Du(m)):null}function Jo(m,v){return null===m?[v]:Array.isArray(m)?[...m,v]:[m,v]}function qu(m){return m._rawValidators}function Ya(m){return m._rawAsyncValidators}function Li(m){return m?Array.isArray(m)?m:[m]:[]}function du(m,v){return Array.isArray(m)?m.includes(v):m===v}function Au(m,v){const w=Li(v);return Li(m).forEach(Q=>{du(w,Q)||w.push(Q)}),w}function Xl(m,v){return Li(v).filter(w=>!du(m,w))}class xu{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(v){this._rawValidators=v||[],this._composedValidatorFn=Su(this._rawValidators)}_setAsyncValidators(v){this._rawAsyncValidators=v||[],this._composedAsyncValidatorFn=_a(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(v){this._onDestroyCallbacks.push(v)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(v=>v()),this._onDestroyCallbacks=[]}reset(v){this.control&&this.control.reset(v)}hasError(v,w){return!!this.control&&this.control.hasError(v,w)}getError(v,w){return this.control?this.control.getError(v,w):null}}class io extends xu{get formDirective(){return null}get path(){return null}}class xa extends xu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Qa{constructor(v){this._cd=v}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Mu=(()=>{class m extends Qa{constructor(w){super(w)}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(xa,2))},m.\u0275dir=p.lG2({type:m,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(w,M){2&w&&p.ekj("ng-untouched",M.isUntouched)("ng-touched",M.isTouched)("ng-pristine",M.isPristine)("ng-dirty",M.isDirty)("ng-valid",M.isValid)("ng-invalid",M.isInvalid)("ng-pending",M.isPending)},features:[p.qOj]}),m})(),Zu=(()=>{class m extends Qa{constructor(w){super(w)}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(io,10))},m.\u0275dir=p.lG2({type:m,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(w,M){2&w&&p.ekj("ng-untouched",M.isUntouched)("ng-touched",M.isTouched)("ng-pristine",M.isPristine)("ng-dirty",M.isDirty)("ng-valid",M.isValid)("ng-invalid",M.isInvalid)("ng-pending",M.isPending)("ng-submitted",M.isSubmitted)},features:[p.qOj]}),m})();function fu(m,v){return m?`with name: '${v}'`:`at index: ${v}`}const oi=!1,Bo="VALID",Yu="INVALID",Xo="PENDING",Qu="DISABLED";function Ru(m){return(ml(m)?m.validators:m)||null}function kl(m,v){return(ml(v)?v.asyncValidators:m)||null}function ml(m){return null!=m&&!Array.isArray(m)&&"object"==typeof m}function Fl(m,v,w){const M=m.controls;if(!(v?Object.keys(M):M).length)throw new p.vHH(1e3,oi?function Ku(m){return`\n    There are no form controls registered with this ${m?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(v):"");if(!M[w])throw new p.vHH(1001,oi?function Ma(m,v){return`Cannot find form control ${fu(m,v)}`}(v,w):"")}function ec(m,v,w){m._forEachChild((M,Q)=>{if(void 0===w[Q])throw new p.vHH(1002,oi?function _r(m,v){return`Must supply a value for form control ${fu(m,v)}`}(v,Q):"")})}class pu{constructor(v,w){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(v),this._assignAsyncValidators(w)}get validator(){return this._composedValidatorFn}set validator(v){this._rawValidators=this._composedValidatorFn=v}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(v){this._rawAsyncValidators=this._composedAsyncValidatorFn=v}get parent(){return this._parent}get valid(){return this.status===Bo}get invalid(){return this.status===Yu}get pending(){return this.status==Xo}get disabled(){return this.status===Qu}get enabled(){return this.status!==Qu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(v){this._assignValidators(v)}setAsyncValidators(v){this._assignAsyncValidators(v)}addValidators(v){this.setValidators(Au(v,this._rawValidators))}addAsyncValidators(v){this.setAsyncValidators(Au(v,this._rawAsyncValidators))}removeValidators(v){this.setValidators(Xl(v,this._rawValidators))}removeAsyncValidators(v){this.setAsyncValidators(Xl(v,this._rawAsyncValidators))}hasValidator(v){return du(this._rawValidators,v)}hasAsyncValidator(v){return du(this._rawAsyncValidators,v)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(v={}){this.touched=!0,this._parent&&!v.onlySelf&&this._parent.markAsTouched(v)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(v=>v.markAllAsTouched())}markAsUntouched(v={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(w=>{w.markAsUntouched({onlySelf:!0})}),this._parent&&!v.onlySelf&&this._parent._updateTouched(v)}markAsDirty(v={}){this.pristine=!1,this._parent&&!v.onlySelf&&this._parent.markAsDirty(v)}markAsPristine(v={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(w=>{w.markAsPristine({onlySelf:!0})}),this._parent&&!v.onlySelf&&this._parent._updatePristine(v)}markAsPending(v={}){this.status=Xo,!1!==v.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!v.onlySelf&&this._parent.markAsPending(v)}disable(v={}){const w=this._parentMarkedDirty(v.onlySelf);this.status=Qu,this.errors=null,this._forEachChild(M=>{M.disable({...v,onlySelf:!0})}),this._updateValue(),!1!==v.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...v,skipPristineCheck:w}),this._onDisabledChange.forEach(M=>M(!0))}enable(v={}){const w=this._parentMarkedDirty(v.onlySelf);this.status=Bo,this._forEachChild(M=>{M.enable({...v,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:v.emitEvent}),this._updateAncestors({...v,skipPristineCheck:w}),this._onDisabledChange.forEach(M=>M(!1))}_updateAncestors(v){this._parent&&!v.onlySelf&&(this._parent.updateValueAndValidity(v),v.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(v){this._parent=v}getRawValue(){return this.value}updateValueAndValidity(v={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bo||this.status===Xo)&&this._runAsyncValidator(v.emitEvent)),!1!==v.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!v.onlySelf&&this._parent.updateValueAndValidity(v)}_updateTreeValidity(v={emitEvent:!0}){this._forEachChild(w=>w._updateTreeValidity(v)),this.updateValueAndValidity({onlySelf:!0,emitEvent:v.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qu:Bo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(v){if(this.asyncValidator){this.status=Xo,this._hasOwnPendingAsyncValidator=!0;const w=Aa(this.asyncValidator(this));this._asyncValidationSubscription=w.subscribe(M=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(M,{emitEvent:v})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(v,w={}){this.errors=v,this._updateControlsErrors(!1!==w.emitEvent)}get(v){let w=v;return null==w||(Array.isArray(w)||(w=w.split(".")),0===w.length)?null:w.reduce((M,Q)=>M&&M._find(Q),this)}getError(v,w){const M=w?this.get(w):this;return M&&M.errors?M.errors[v]:null}hasError(v,w){return!!this.getError(v,w)}get root(){let v=this;for(;v._parent;)v=v._parent;return v}_updateControlsErrors(v){this.status=this._calculateStatus(),v&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(v)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Qu:this.errors?Yu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xo)?Xo:this._anyControlsHaveStatus(Yu)?Yu:Bo}_anyControlsHaveStatus(v){return this._anyControls(w=>w.status===v)}_anyControlsDirty(){return this._anyControls(v=>v.dirty)}_anyControlsTouched(){return this._anyControls(v=>v.touched)}_updatePristine(v={}){this.pristine=!this._anyControlsDirty(),this._parent&&!v.onlySelf&&this._parent._updatePristine(v)}_updateTouched(v={}){this.touched=this._anyControlsTouched(),this._parent&&!v.onlySelf&&this._parent._updateTouched(v)}_registerOnCollectionChange(v){this._onCollectionChange=v}_setUpdateStrategy(v){ml(v)&&null!=v.updateOn&&(this._updateOn=v.updateOn)}_parentMarkedDirty(v){return!v&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(v){return null}_assignValidators(v){this._rawValidators=Array.isArray(v)?v.slice():v,this._composedValidatorFn=function gl(m){return Array.isArray(m)?Su(m):m||null}(this._rawValidators)}_assignAsyncValidators(v){this._rawAsyncValidators=Array.isArray(v)?v.slice():v,this._composedAsyncValidatorFn=function Pu(m){return Array.isArray(m)?_a(m):m||null}(this._rawAsyncValidators)}}class Ju extends pu{constructor(v,w,M){super(Ru(w),kl(M,w)),this.controls=v,this._initObservables(),this._setUpdateStrategy(w),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(v,w){return this.controls[v]?this.controls[v]:(this.controls[v]=w,w.setParent(this),w._registerOnCollectionChange(this._onCollectionChange),w)}addControl(v,w,M={}){this.registerControl(v,w),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}removeControl(v,w={}){this.controls[v]&&this.controls[v]._registerOnCollectionChange(()=>{}),delete this.controls[v],this.updateValueAndValidity({emitEvent:w.emitEvent}),this._onCollectionChange()}setControl(v,w,M={}){this.controls[v]&&this.controls[v]._registerOnCollectionChange(()=>{}),delete this.controls[v],w&&this.registerControl(v,w),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}contains(v){return this.controls.hasOwnProperty(v)&&this.controls[v].enabled}setValue(v,w={}){ec(this,!0,v),Object.keys(v).forEach(M=>{Fl(this,!0,M),this.controls[M].setValue(v[M],{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w)}patchValue(v,w={}){null!=v&&(Object.keys(v).forEach(M=>{const Q=this.controls[M];Q&&Q.patchValue(v[M],{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w))}reset(v={},w={}){this._forEachChild((M,Q)=>{M.reset(v[Q],{onlySelf:!0,emitEvent:w.emitEvent})}),this._updatePristine(w),this._updateTouched(w),this.updateValueAndValidity(w)}getRawValue(){return this._reduceChildren({},(v,w,M)=>(v[M]=w.getRawValue(),v))}_syncPendingControls(){let v=this._reduceChildren(!1,(w,M)=>!!M._syncPendingControls()||w);return v&&this.updateValueAndValidity({onlySelf:!0}),v}_forEachChild(v){Object.keys(this.controls).forEach(w=>{const M=this.controls[w];M&&v(M,w)})}_setUpControls(){this._forEachChild(v=>{v.setParent(this),v._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(v){for(const[w,M]of Object.entries(this.controls))if(this.contains(w)&&v(M))return!0;return!1}_reduceValue(){return this._reduceChildren({},(w,M,Q)=>((M.enabled||this.disabled)&&(w[Q]=M.value),w))}_reduceChildren(v,w){let M=v;return this._forEachChild((Q,Ve)=>{M=w(M,Q,Ve)}),M}_allControlsDisabled(){for(const v of Object.keys(this.controls))if(this.controls[v].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(v){return this.controls.hasOwnProperty(v)?this.controls[v]:null}}class mc extends Ju{}const ea=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Eo}),Eo="always";function ta(m,v){return[...v.path,m]}function us(m,v,w=Eo){ls(m,v),v.valueAccessor.writeValue(m.value),(m.disabled||"always"===w)&&v.valueAccessor.setDisabledState?.(m.disabled),function yl(m,v){v.valueAccessor.registerOnChange(w=>{m._pendingValue=w,m._pendingChange=!0,m._pendingDirty=!0,"change"===m.updateOn&&g(m,v)})}(m,v),function I(m,v){const w=(M,Q)=>{v.valueAccessor.writeValue(M),Q&&v.viewToModelUpdate(M)};m.registerOnChange(w),v._registerOnDestroy(()=>{m._unregisterOnChange(w)})}(m,v),function S(m,v){v.valueAccessor.registerOnTouched(()=>{m._pendingTouched=!0,"blur"===m.updateOn&&m._pendingChange&&g(m,v),"submit"!==m.updateOn&&m.markAsTouched()})}(m,v),function Xu(m,v){if(v.valueAccessor.setDisabledState){const w=M=>{v.valueAccessor.setDisabledState(M)};m.registerOnDisabledChange(w),v._registerOnDestroy(()=>{m._unregisterOnDisabledChange(w)})}}(m,v)}function Ra(m,v,w=!0){const M=()=>{};v.valueAccessor&&(v.valueAccessor.registerOnChange(M),v.valueAccessor.registerOnTouched(M)),Pa(m,v),m&&(v._invokeOnDestroyCallbacks(),m._registerOnCollectionChange(()=>{}))}function ya(m,v){m.forEach(w=>{w.registerOnValidatorChange&&w.registerOnValidatorChange(v)})}function ls(m,v){const w=qu(m);null!==v.validator?m.setValidators(Jo(w,v.validator)):"function"==typeof w&&m.setValidators([w]);const M=Ya(m);null!==v.asyncValidator?m.setAsyncValidators(Jo(M,v.asyncValidator)):"function"==typeof M&&m.setAsyncValidators([M]);const Q=()=>m.updateValueAndValidity();ya(v._rawValidators,Q),ya(v._rawAsyncValidators,Q)}function Pa(m,v){let w=!1;if(null!==m){if(null!==v.validator){const Q=qu(m);if(Array.isArray(Q)&&Q.length>0){const Ve=Q.filter(Ot=>Ot!==v.validator);Ve.length!==Q.length&&(w=!0,m.setValidators(Ve))}}if(null!==v.asyncValidator){const Q=Ya(m);if(Array.isArray(Q)&&Q.length>0){const Ve=Q.filter(Ot=>Ot!==v.asyncValidator);Ve.length!==Q.length&&(w=!0,m.setAsyncValidators(Ve))}}}const M=()=>{};return ya(v._rawValidators,M),ya(v._rawAsyncValidators,M),w}function g(m,v){m._pendingDirty&&m.markAsDirty(),m.setValue(m._pendingValue,{emitModelToViewChange:!1}),v.viewToModelUpdate(m._pendingValue),m._pendingChange=!1}function qn(m,v){if(!m.hasOwnProperty("model"))return!1;const w=m.model;return!!w.isFirstChange()||!Object.is(v,w.currentValue)}function va(m,v){if(!v)return null;let w,M,Q;return Array.isArray(v),v.forEach(Ve=>{Ve.constructor===Ii?w=Ve:function Cr(m){return Object.getPrototypeOf(m.constructor)===ze}(Ve)?M=Ve:Q=Ve}),Q||M||w||null}function Nu(m,v){const w=m.indexOf(v);w>-1&&m.splice(w,1)}function vl(m){return"object"==typeof m&&null!==m&&2===Object.keys(m).length&&"value"in m&&"disabled"in m}const Is=class extends pu{constructor(v=null,w,M){super(Ru(w),kl(M,w)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(v),this._setUpdateStrategy(w),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ml(w)&&(w.nonNullable||w.initialValueIsDefault)&&(this.defaultValue=vl(v)?v.value:v)}setValue(v,w={}){this.value=this._pendingValue=v,this._onChange.length&&!1!==w.emitModelToViewChange&&this._onChange.forEach(M=>M(this.value,!1!==w.emitViewToModelChange)),this.updateValueAndValidity(w)}patchValue(v,w={}){this.setValue(v,w)}reset(v=this.defaultValue,w={}){this._applyFormState(v),this.markAsPristine(w),this.markAsUntouched(w),this.setValue(this.value,w),this._pendingChange=!1}_updateValue(){}_anyControls(v){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(v){this._onChange.push(v)}_unregisterOnChange(v){Nu(this._onChange,v)}registerOnDisabledChange(v){this._onDisabledChange.push(v)}_unregisterOnDisabledChange(v){Nu(this._onDisabledChange,v)}_forEachChild(v){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(v){vl(v)?(this.value=this._pendingValue=v.value,v.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=v}},jd={provide:xa,useExisting:(0,p.Gpc)(()=>yd)},vc=(()=>Promise.resolve())();let yd=(()=>{class m extends xa{constructor(w,M,Q,Ve,Ot,bn){super(),this._changeDetectorRef=Ot,this.callSetDisabledState=bn,this.control=new Is,this._registered=!1,this.update=new p.vpe,this._parent=w,this._setValidators(M),this._setAsyncValidators(Q),this.valueAccessor=va(0,Ve)}ngOnChanges(w){if(this._checkForErrors(),!this._registered||"name"in w){if(this._registered&&(this._checkName(),this.formDirective)){const M=w.name.previousValue;this.formDirective.removeControl({name:M,path:this._getPath(M)})}this._setUpControl()}"isDisabled"in w&&this._updateDisabled(w),qn(w,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(w){this.viewModel=w,this.update.emit(w)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){us(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(w){vc.then(()=>{this.control.setValue(w,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(w){const M=w.isDisabled.currentValue,Q=0!==M&&(0,p.D6c)(M);vc.then(()=>{Q&&!this.control.disabled?this.control.disable():!Q&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(w){return this._parent?ta(w,this._parent):[w]}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(io,9),p.Y36($r,10),p.Y36(Yo,10),p.Y36(At,10),p.Y36(p.sBO,8),p.Y36(ea,8))},m.\u0275dir=p.lG2({type:m,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([jd]),p.qOj,p.TTD]}),m})(),Fc=(()=>{class m{}return m.\u0275fac=function(w){return new(w||m)},m.\u0275dir=p.lG2({type:m,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),m})();const tl={provide:At,useExisting:(0,p.Gpc)(()=>Vl),multi:!0};let Xa=(()=>{class m{}return m.\u0275fac=function(w){return new(w||m)},m.\u0275mod=p.oAB({type:m}),m.\u0275inj=p.cJS({}),m})(),zd=(()=>{class m{constructor(){this._accessors=[]}add(w,M){this._accessors.push([w,M])}remove(w){for(let M=this._accessors.length-1;M>=0;--M)if(this._accessors[M][1]===w)return void this._accessors.splice(M,1)}select(w){this._accessors.forEach(M=>{this._isSameGroup(M,w)&&M[1]!==w&&M[1].fireUncheck(w.value)})}_isSameGroup(w,M){return!!w[0].control&&w[0]._parent===M._control._parent&&w[1].name===M.name}}return m.\u0275fac=function(w){return new(w||m)},m.\u0275prov=p.Yz7({token:m,factory:m.\u0275fac,providedIn:Xa}),m})(),Vl=(()=>{class m extends ze{constructor(w,M,Q,Ve){super(w,M),this._registry=Q,this._injector=Ve,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,p.f3M)(ea,{optional:!0})??Eo}ngOnInit(){this._control=this._injector.get(xa),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(w){this._state=w===this.value,this.setProperty("checked",this._state)}registerOnChange(w){this._fn=w,this.onChange=()=>{w(this.value),this._registry.select(this)}}setDisabledState(w){(this.setDisabledStateFired||w||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",w),this.setDisabledStateFired=!0}fireUncheck(w){this.writeValue(w)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(zd),p.Y36(p.zs3))},m.\u0275dir=p.lG2({type:m,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(w,M){1&w&&p.NdJ("change",function(){return M.onChange()})("blur",function(){return M.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[p._Bn([tl]),p.qOj]}),m})();const gu=new p.OlP("NgModelWithFormControlWarning"),Ki={provide:io,useExisting:(0,p.Gpc)(()=>mu)};let mu=(()=>{class m extends io{constructor(w,M,Q){super(),this.callSetDisabledState=Q,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(w),this._setAsyncValidators(M)}ngOnChanges(w){this._checkFormPresent(),w.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Pa(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(w){const M=this.form.get(w.path);return us(M,w,this.callSetDisabledState),M.updateValueAndValidity({emitEvent:!1}),this.directives.push(w),M}getControl(w){return this.form.get(w.path)}removeControl(w){Ra(w.control||null,w,!1),function _c(m,v){const w=m.indexOf(v);w>-1&&m.splice(w,1)}(this.directives,w)}addFormGroup(w){this._setUpFormContainer(w)}removeFormGroup(w){this._cleanUpFormContainer(w)}getFormGroup(w){return this.form.get(w.path)}addFormArray(w){this._setUpFormContainer(w)}removeFormArray(w){this._cleanUpFormContainer(w)}getFormArray(w){return this.form.get(w.path)}updateModel(w,M){this.form.get(w.path).setValue(M)}onSubmit(w){return this.submitted=!0,function fs(m,v){m._syncPendingControls(),v.forEach(w=>{const M=w.control;"submit"===M.updateOn&&M._pendingChange&&(w.viewToModelUpdate(M._pendingValue),M._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(w),"dialog"===w?.target?.method}onReset(){this.resetForm()}resetForm(w){this.form.reset(w),this.submitted=!1}_updateDomValue(){this.directives.forEach(w=>{const M=w.control,Q=this.form.get(w.path);M!==Q&&(Ra(M||null,w),(m=>m instanceof Is)(Q)&&(us(Q,w,this.callSetDisabledState),w.control=Q))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(w){const M=this.form.get(w.path);(function R(m,v){ls(m,v)})(M,w),M.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(w){if(this.form){const M=this.form.get(w.path);M&&function q(m,v){return Pa(m,v)}(M,w)&&M.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ls(this.form,this),this._oldForm&&Pa(this._oldForm,this)}_checkFormPresent(){}}return m.\u0275fac=function(w){return new(w||m)(p.Y36($r,10),p.Y36(Yo,10),p.Y36(ea,8))},m.\u0275dir=p.lG2({type:m,selectors:[["","formGroup",""]],hostBindings:function(w,M){1&w&&p.NdJ("submit",function(Ve){return M.onSubmit(Ve)})("reset",function(){return M.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Ki]),p.qOj,p.TTD]}),m})();const Dh={provide:xa,useExisting:(0,p.Gpc)(()=>ku)};let ku=(()=>{class m extends xa{set isDisabled(w){}constructor(w,M,Q,Ve,Ot){super(),this._ngModelWarningConfig=Ot,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=w,this._setValidators(M),this._setAsyncValidators(Q),this.valueAccessor=va(0,Ve)}ngOnChanges(w){this._added||this._setUpControl(),qn(w,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(w){this.viewModel=w,this.update.emit(w)}get path(){return ta(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return m._ngModelWarningSentOnce=!1,m.\u0275fac=function(w){return new(w||m)(p.Y36(io,13),p.Y36($r,10),p.Y36(Yo,10),p.Y36(At,10),p.Y36(gu,8))},m.\u0275dir=p.lG2({type:m,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([Dh]),p.qOj,p.TTD]}),m})();const rl={provide:At,useExisting:(0,p.Gpc)(()=>il),multi:!0};function qd(m,v){return null==m?`${v}`:(v&&"object"==typeof v&&(v="Object"),`${m}: ${v}`.slice(0,50))}let il=(()=>{class m extends ze{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(w){this._compareWith=w}writeValue(w){this.value=w;const Q=qd(this._getOptionId(w),w);this.setProperty("value",Q)}registerOnChange(w){this.onChange=M=>{this.value=this._getOptionValue(M),w(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(w){for(const M of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(M),w))return M;return null}_getOptionValue(w){const M=function Il(m){return m.split(":")[0]}(w);return this._optionMap.has(M)?this._optionMap.get(M):w}}return m.\u0275fac=function(){let v;return function(M){return(v||(v=p.n5z(m)))(M||m)}}(),m.\u0275dir=p.lG2({type:m,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(w,M){1&w&&p.NdJ("change",function(Ve){return M.onChange(Ve.target.value)})("blur",function(){return M.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([rl]),p.qOj]}),m})(),Cl=(()=>{class m{constructor(w,M,Q){this._element=w,this._renderer=M,this._select=Q,this._select&&(this.id=this._select._registerOption())}set ngValue(w){null!=this._select&&(this._select._optionMap.set(this.id,w),this._setElementValue(qd(this.id,w)),this._select.writeValue(this._select.value))}set value(w){this._setElementValue(w),this._select&&this._select.writeValue(this._select.value)}_setElementValue(w){this._renderer.setProperty(this._element.nativeElement,"value",w)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(il,9))},m.\u0275dir=p.lG2({type:m,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),m})();const Zd={provide:At,useExisting:(0,p.Gpc)(()=>xh),multi:!0};function Kd(m,v){return null==m?`${v}`:("string"==typeof v&&(v=`'${v}'`),v&&"object"==typeof v&&(v="Object"),`${m}: ${v}`.slice(0,50))}let xh=(()=>{class m extends ze{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(w){this._compareWith=w}writeValue(w){let M;if(this.value=w,Array.isArray(w)){const Q=w.map(Ve=>this._getOptionId(Ve));M=(Ve,Ot)=>{Ve._setSelected(Q.indexOf(Ot.toString())>-1)}}else M=(Q,Ve)=>{Q._setSelected(!1)};this._optionMap.forEach(M)}registerOnChange(w){this.onChange=M=>{const Q=[],Ve=M.selectedOptions;if(void 0!==Ve){const Ot=Ve;for(let bn=0;bn<Ot.length;bn++){const vr=this._getOptionValue(Ot[bn].value);Q.push(vr)}}else{const Ot=M.options;for(let bn=0;bn<Ot.length;bn++){const Vn=Ot[bn];if(Vn.selected){const vr=this._getOptionValue(Vn.value);Q.push(vr)}}}this.value=Q,w(Q)}}_registerOption(w){const M=(this._idCounter++).toString();return this._optionMap.set(M,w),M}_getOptionId(w){for(const M of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(M)._value,w))return M;return null}_getOptionValue(w){const M=function Sh(m){return m.split(":")[0]}(w);return this._optionMap.has(M)?this._optionMap.get(M)._value:w}}return m.\u0275fac=function(){let v;return function(M){return(v||(v=p.n5z(m)))(M||m)}}(),m.\u0275dir=p.lG2({type:m,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(w,M){1&w&&p.NdJ("change",function(Ve){return M.onChange(Ve.target)})("blur",function(){return M.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Zd]),p.qOj]}),m})(),Id=(()=>{class m{constructor(w,M,Q){this._element=w,this._renderer=M,this._select=Q,this._select&&(this.id=this._select._registerOption(this))}set ngValue(w){null!=this._select&&(this._value=w,this._setElementValue(Kd(this.id,w)),this._select.writeValue(this._select.value))}set value(w){this._select?(this._value=w,this._setElementValue(Kd(this.id,w)),this._select.writeValue(this._select.value)):this._setElementValue(w)}_setElementValue(w){this._renderer.setProperty(this._element.nativeElement,"value",w)}_setSelected(w){this._renderer.setProperty(this._element.nativeElement,"selected",w)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(xh,9))},m.\u0275dir=p.lG2({type:m,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),m})(),l=(()=>{class m{constructor(){this._validator=Tu}ngOnChanges(w){if(this.inputName in w){const M=this.normalizeInput(w[this.inputName].currentValue);this._enabled=this.enabled(M),this._validator=this._enabled?this.createValidator(M):Tu,this._onChange&&this._onChange()}}validate(w){return this._validator(w)}registerOnValidatorChange(w){this._onChange=w}enabled(w){return null!=w}}return m.\u0275fac=function(w){return new(w||m)},m.\u0275dir=p.lG2({type:m,features:[p.TTD]}),m})();const H={provide:$r,useExisting:(0,p.Gpc)(()=>Re),multi:!0};let Re=(()=>{class m extends l{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.D6c,this.createValidator=w=>ws}enabled(w){return w}}return m.\u0275fac=function(){let v;return function(M){return(v||(v=p.n5z(m)))(M||m)}}(),m.\u0275dir=p.lG2({type:m,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(w,M){2&w&&p.uIk("required",M._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([H]),p.qOj]}),m})(),Mh=(()=>{class m{}return m.\u0275fac=function(w){return new(w||m)},m.\u0275mod=p.oAB({type:m}),m.\u0275inj=p.cJS({imports:[Xa]}),m})();class bd extends pu{constructor(v,w,M){super(Ru(w),kl(M,w)),this.controls=v,this._initObservables(),this._setUpdateStrategy(w),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(v){return this.controls[this._adjustIndex(v)]}push(v,w={}){this.controls.push(v),this._registerControl(v),this.updateValueAndValidity({emitEvent:w.emitEvent}),this._onCollectionChange()}insert(v,w,M={}){this.controls.splice(v,0,w),this._registerControl(w),this.updateValueAndValidity({emitEvent:M.emitEvent})}removeAt(v,w={}){let M=this._adjustIndex(v);M<0&&(M=0),this.controls[M]&&this.controls[M]._registerOnCollectionChange(()=>{}),this.controls.splice(M,1),this.updateValueAndValidity({emitEvent:w.emitEvent})}setControl(v,w,M={}){let Q=this._adjustIndex(v);Q<0&&(Q=0),this.controls[Q]&&this.controls[Q]._registerOnCollectionChange(()=>{}),this.controls.splice(Q,1),w&&(this.controls.splice(Q,0,w),this._registerControl(w)),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(v,w={}){ec(this,!1,v),v.forEach((M,Q)=>{Fl(this,!1,Q),this.at(Q).setValue(M,{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w)}patchValue(v,w={}){null!=v&&(v.forEach((M,Q)=>{this.at(Q)&&this.at(Q).patchValue(M,{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w))}reset(v=[],w={}){this._forEachChild((M,Q)=>{M.reset(v[Q],{onlySelf:!0,emitEvent:w.emitEvent})}),this._updatePristine(w),this._updateTouched(w),this.updateValueAndValidity(w)}getRawValue(){return this.controls.map(v=>v.getRawValue())}clear(v={}){this.controls.length<1||(this._forEachChild(w=>w._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:v.emitEvent}))}_adjustIndex(v){return v<0?v+this.length:v}_syncPendingControls(){let v=this.controls.reduce((w,M)=>!!M._syncPendingControls()||w,!1);return v&&this.updateValueAndValidity({onlySelf:!0}),v}_forEachChild(v){this.controls.forEach((w,M)=>{v(w,M)})}_updateValue(){this.value=this.controls.filter(v=>v.enabled||this.disabled).map(v=>v.value)}_anyControls(v){return this.controls.some(w=>w.enabled&&v(w))}_setUpControls(){this._forEachChild(v=>this._registerControl(v))}_allControlsDisabled(){for(const v of this.controls)if(v.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(v){v.setParent(this),v._registerOnCollectionChange(this._onCollectionChange)}_find(v){return this.at(v)??null}}function Ic(m){return!!m&&(void 0!==m.asyncValidators||void 0!==m.validators||void 0!==m.updateOn)}let Cs=(()=>{class m{constructor(){this.useNonNullable=!1}get nonNullable(){const w=new m;return w.useNonNullable=!0,w}group(w,M=null){const Q=this._reduceControls(w);let Ve={};return Ic(M)?Ve=M:null!==M&&(Ve.validators=M.validator,Ve.asyncValidators=M.asyncValidator),new Ju(Q,Ve)}record(w,M=null){const Q=this._reduceControls(w);return new mc(Q,M)}control(w,M,Q){let Ve={};return this.useNonNullable?(Ic(M)?Ve=M:(Ve.validators=M,Ve.asyncValidators=Q),new Is(w,{...Ve,nonNullable:!0})):new Is(w,M,Q)}array(w,M,Q){const Ve=w.map(Ot=>this._createControl(Ot));return new bd(Ve,M,Q)}_reduceControls(w){const M={};return Object.keys(w).forEach(Q=>{M[Q]=this._createControl(w[Q])}),M}_createControl(w){return w instanceof Is||w instanceof pu?w:Array.isArray(w)?this.control(w[0],w.length>1?w[1]:null,w.length>2?w[2]:null):this.control(w)}}return m.\u0275fac=function(w){return new(w||m)},m.\u0275prov=p.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})(),Rh=(()=>{class m{static withConfig(w){return{ngModule:m,providers:[{provide:ea,useValue:w.callSetDisabledState??Eo}]}}}return m.\u0275fac=function(w){return new(w||m)},m.\u0275mod=p.oAB({type:m}),m.\u0275inj=p.cJS({imports:[Mh]}),m})(),Td=(()=>{class m{static withConfig(w){return{ngModule:m,providers:[{provide:gu,useValue:w.warnOnNgModelWithFormControl??"always"},{provide:ea,useValue:w.callSetDisabledState??Eo}]}}}return m.\u0275fac=function(w){return new(w||m)},m.\u0275mod=p.oAB({type:m}),m.\u0275inj=p.cJS({imports:[Mh]}),m})();const bl=[".container"],Ph=function(m,v){return{"messages__item--operator":m,"messages__item--visitor":v}};function xf(m,v){if(1&m&&(p.TgZ(0,"div")(1,"div",14)(2,"b"),p._uU(3),p.qZA(),p._UZ(4,"br"),p.TgZ(5,"span"),p._uU(6),p.qZA(),p.TgZ(7,"span",15),p._UZ(8,"br"),p._uU(9),p.ALo(10,"date"),p.qZA()()()),2&m){const w=v.$implicit;p.xp6(1),p.Q6J("ngClass",p.WLB(7,Ph,w.myMsg,!w.myMsg)),p.xp6(2),p.Oqu(w.fromName),p.xp6(3),p.hij("",w.msg," "),p.xp6(3),p.Oqu(p.xi3(10,4,null==w.createdAt?null:w.createdAt.toMillis(),"short"))}}let Uc=(()=>{class m{constructor(w,M){this.chatSer=w,this.router=M,this.newMsg="",this.state=!1}ngOnInit(){this.messages=this.chatSer.getChatMessages()}toggleState(){this.state=!this.state,this.showOrHideChatBox()}showOrHideChatBox(){this.state?this.chatboxStatus="chatbox--active":this.state||(this.chatboxStatus="")}sendMessage(){this.chatSer.addChatMessage(this.newMsg).then(()=>{this.newMsg=""})}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(lu),p.Y36(K.F0))},m.\u0275cmp=p.Xpm({type:m,selectors:[["app-chat"]],viewQuery:function(w,M){if(1&w&&p.Gf(bl,5),2&w){let Q;p.iGM(Q=p.CRH())&&(M.content=Q.first)}},decls:18,vars:7,consts:[[1,"container"],[1,"chatbox"],[1,"chatbox__header"],[1,"chatbox__image--header"],[1,"chatbox__content--header"],[1,"chatbox__heading--header"],[1,"chatbox__messages"],[4,"ngFor","ngForOf"],[1,"chatbox__footer"],["type","text","placeholder","Escriba un mensaje...","maxLength","500",3,"ngModel","ngModelChange","keydown.enter"],[1,"chatbox__send--footer",3,"click"],[1,"chatbox__button"],[3,"click"],["src","././assets/imagenes/chat/chatbox-icon.svg"],[1,"messages__item",3,"ngClass"],[1,"time"]],template:function(w,M){1&w&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2),p._UZ(4,"div",3),p.TgZ(5,"div",4)(6,"h4",5),p._uU(7,"Chat"),p.qZA()()(),p.TgZ(8,"div",6),p.YNc(9,xf,11,10,"div",7),p.ALo(10,"async"),p.qZA(),p.TgZ(11,"div",8)(12,"input",9),p.NdJ("ngModelChange",function(Ve){return M.newMsg=Ve})("keydown.enter",function(){return M.sendMessage()}),p.qZA(),p.TgZ(13,"p",10),p.NdJ("click",function(){return M.sendMessage()}),p._uU(14,"Enviar"),p.qZA()()(),p.TgZ(15,"div",11)(16,"button",12),p.NdJ("click",function(){return M.toggleState()}),p._UZ(17,"img",13),p.qZA()()()()),2&w&&(p.xp6(2),p.Gre("chatbox__support ",M.chatboxStatus,""),p.xp6(7),p.Q6J("ngForOf",p.lcZ(10,5,M.messages)),p.xp6(3),p.Q6J("ngModel",M.newMsg))},dependencies:[Ne.mk,Ne.sg,Ii,Mu,yd,Ne.Ov,Ne.uU],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}.container[_ngcontent-%COMP%]{--primaryGradient: linear-gradient(93.12deg, #581b98 .52%, #9c1de7 100%);--secondaryGradient: linear-gradient(268.91deg, #581b98 -2.14%, #9c1de7 99.69%);--primaryBoxShadow: 0px 10px 15px rgba(0, 0, 0, .1);--secondaryBoxShadow: 0px -10px 15px rgba(0, 0, 0, .1);--light: 300;--regular: 400;--semiBold: 600;--extraLight: 300;--italic: 300;--primary: #581b98;font-family:Nunito,sans-serif;font-weight:400;font-size:100%;background:#f1f1f1;z-index:20}body[_ngcontent-%COMP%]{font-family:Nunito,sans-serif;font-weight:400;font-size:100%;background:#f1f1f1;z-index:20}.chatbox__support[_ngcontent-%COMP%]{background:#f9f9f9;height:450px;width:350px;box-shadow:0 0 15px #0000001a;border-top-left-radius:20px;border-top-right-radius:20px}.chatbox__header[_ngcontent-%COMP%]{background:var(--primaryGradient);display:flex;flex-direction:row;align-items:center;justify-content:center;padding:15px 20px;border-top-left-radius:20px;border-top-right-radius:20px;box-shadow:var(--primaryBoxShadow)}.chatbox__image--header[_ngcontent-%COMP%]{margin-right:10px}.chatbox__heading--header[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff}.chatbox__description--header[_ngcontent-%COMP%]{font-size:.9rem;color:#fff}.chatbox__messages[_ngcontent-%COMP%]{padding:0 20px}.messages__item[_ngcontent-%COMP%]{margin-top:10px;background:#e0e0e0;padding:8px 12px;max-width:70%}.messages__item--visitor[_ngcontent-%COMP%], .messages__item--typing[_ngcontent-%COMP%]{border-top-left-radius:20px;border-top-right-radius:20px;border-bottom-right-radius:20px}.messages__item--operator[_ngcontent-%COMP%]{border-top-left-radius:20px;border-top-right-radius:20px;border-bottom-left-radius:20px;background:var(--primary);color:#fff}.chatbox__footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:20px;background:var(--secondaryGradient);box-shadow:var(--secondaryBoxShadow);border-bottom-right-radius:10px;border-bottom-left-radius:10px;margin-top:20px}.chatbox__footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding:10px;border-radius:30px;text-align:center}.chatbox__send--footer[_ngcontent-%COMP%]{color:#fff;font-weight:400}.chatbox__button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .chatbox__button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .chatbox__button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:visited{padding:10px;background:white;border:none;outline:none;border-top-left-radius:50px;border-top-right-radius:50px;border-bottom-left-radius:50px;box-shadow:0 10px 15px #0000001a;cursor:pointer}.chatbox[_ngcontent-%COMP%]{position:absolute;bottom:30px;right:30px}.chatbox__support[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#eee;width:300px;height:500px;z-index:-123456;opacity:0;transition:all .5s ease-in-out}.chatbox--active[_ngcontent-%COMP%]{transform:translateY(-40px);z-index:123456;opacity:1}.chatbox__button[_ngcontent-%COMP%]{text-align:right}.chatbox__header[_ngcontent-%COMP%]{position:sticky;top:0;background:linear-gradient(93.12deg,#581b98 .52%,#9c1de7 100%)}.chatbox__messages[_ngcontent-%COMP%]{margin-top:auto;display:flex;flex-direction:column;overflow-y:scroll;flex-direction:column-reverse}.messages__item[_ngcontent-%COMP%]{background:linear-gradient(93.12deg,#581b98 .52%,#9c1de7 100%);max-width:80.6%;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;display:table}.messages__item--operator[_ngcontent-%COMP%]{margin-left:auto;color:#fff}.messages__item--visitor[_ngcontent-%COMP%]{margin-right:auto;background:linear-gradient(93.12deg,#d9bbf8 .52%,#c997e6 100%)}.chatbox__footer[_ngcontent-%COMP%]{position:sticky;bottom:0}.messages__item--typing[_ngcontent-%COMP%]{will-change:transform;width:auto;border-top-right-radius:20px;border-top-left-radius:20px;border-bottom-right-radius:20px;padding:15px 20px;display:table;margin-right:auto;position:relative;animation:2s _ngcontent-%COMP%_bulge infinite ease-out}.messages__item--typing[_ngcontent-%COMP%]:before, .messages__item--typing[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:-2px;height:10px;width:10px;border-radius:50%}.messages__item--typing[_ngcontent-%COMP%]:after{height:10px;width:10px;left:-10px;bottom:-10px}span.messages__dot[_ngcontent-%COMP%]{height:8px;width:8px;float:left;margin:0 1px;background-color:#9e9ea1;display:block;border-radius:50%;opacity:.4;animation:1s _ngcontent-%COMP%_blink infinite}@keyframes _ngcontent-%COMP%_blink{50%{opacity:1}}@keyframes _ngcontent-%COMP%_bulge{50%{transform:scale(1.05)}}.message[_ngcontent-%COMP%]{padding:10px!important;border-radius:10px!important;margin-bottom:4px!important;white-space:pre-wrap}.time[_ngcontent-%COMP%]{color:#fff;float:right;font-size:small}.my-message[_ngcontent-%COMP%]{background:var(--ion-color-tertiary);color:#fff}.other-message[_ngcontent-%COMP%]{background:var(--ion-color-secondary);color:#fff}']}),m})();function Vp(m,v){1&m&&p._UZ(0,"app-chat")}let Mf=(()=>{class m{constructor(w){this.authSvc=w}ngOnInit(){this.user2$=this.authSvc.user$}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(Se.e))},m.\u0275cmp=p.Xpm({type:m,selectors:[["app-home"]],decls:14,vars:3,consts:[[1,"body"],[1,"background-one"],[1,"link-container"],["routerLink","/listado",1,"link-one"],[1,"background-two","link-container"],["routerLink","/juegos",1,"link-two"],[1,"background-three","link-container"],["routerLink","/encuesta",1,"link-three"],[1,"chat"],[4,"ngIfUser","ngIf"]],template:function(w,M){1&w&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),p._uU(4,"Listado Resultados"),p.qZA()()(),p.TgZ(5,"div",4)(6,"a",5),p._uU(7,"Juegos"),p.qZA()(),p.TgZ(8,"div",6)(9,"a",7),p._uU(10,"Encuesta"),p.qZA()(),p.TgZ(11,"div",8),p.YNc(12,Vp,1,0,"app-chat",9),p.ALo(13,"async"),p.qZA()()),2&w&&(p.xp6(12),p.Q6J("ngIf",p.lcZ(13,1,M.user2$)))},dependencies:[Ne.O5,K.rH,Uc,Ne.Ov],styles:['.body[_ngcontent-%COMP%]{margin:0;height:100vh;display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:1fr}.background-one[_ngcontent-%COMP%], .background-two[_ngcontent-%COMP%], .background-three[_ngcontent-%COMP%]{background-color:#151515}.link-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;position:relative;z-index:0}a[_ngcontent-%COMP%]{font-family:Bungee,cursive;font-size:2.5em}.link-one[_ngcontent-%COMP%]{color:#53d9d1;transition:color 1s cubic-bezier(.32,0,.67,0);line-height:1em}.link-one[_ngcontent-%COMP%]:hover{color:#111;transition:color 1s cubic-bezier(.33,1,.68,1)}.link-one[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:-1;width:100%;height:100%;top:0;right:0;background-color:#53d9d1;clip-path:circle(0% at 50% 50%);transition:clip-path 1s cubic-bezier(.65,0,.35,1)}.link-one[_ngcontent-%COMP%]:hover:before{clip-path:circle(100% at 50% 50%)}.link-one[_ngcontent-%COMP%]:after{content:"";position:absolute;z-index:-1;width:100%;height:100%;top:0;right:0;background-color:#151515;clip-path:polygon(40% 0%,60% 0%,60% 0%,40% 0%,40% 100%,60% 100%,60% 100%,40% 100%);transition:clip-path 1s cubic-bezier(.65,0,.35,1)}.link-one[_ngcontent-%COMP%]:hover:after{clip-path:polygon(40% 10%,60% 10%,60% 35%,40% 35%,40% 90%,60% 90%,60% 65%,40% 65%)}.link-two[_ngcontent-%COMP%]{color:#f27b9b;transition:color 1s cubic-bezier(.32,0,.67,0)}.link-two[_ngcontent-%COMP%]:hover{color:#111;transition:color 1s cubic-bezier(.33,1,.68,1)}.link-two[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:-2;width:100%;height:100%;top:0;right:0;clip-path:polygon(0% -20%,100% -30%,100% -10%,0% 0%,0% 130%,100% 120%,100% 100%,0% 110%);background-color:#f27b9b;transition:clip-path 1s cubic-bezier(.25,1,.5,1)}.link-two[_ngcontent-%COMP%]:hover:before{clip-path:polygon(0% 10%,100% 0%,100% 20%,0% 30%,0% 100%,100% 90%,100% 70%,0% 80%)}.link-two[_ngcontent-%COMP%]:after{content:"";position:absolute;z-index:-1;width:5ch;height:5ch;top:50%;right:50%;transform:translate(50%,-50%) rotate(0) scale(0);transition:transform 1s ease;background-color:#f27b9b}.link-two[_ngcontent-%COMP%]:hover:after{transform:translate(50%,-50%) rotate(135deg) scale(1)}.link-three[_ngcontent-%COMP%]{color:#eb7132}.link-three[_ngcontent-%COMP%]:after{content:"";position:absolute;z-index:2;width:50%;height:100%;top:0%;left:0%;transform:translateY(-50%) scaleY(0);transition:transform 1s ease;mix-blend-mode:difference;clip-path:polygon(20% 60%,100% 60%,100% 40%,20% 40%,20% 0%,60% 0%,60% 20%,20% 20%);background-color:#eb7132}.link-three[_ngcontent-%COMP%]:hover:after{transform:translate(0) scaleY(1)}.link-three[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:2;width:50%;height:100%;bottom:0%;right:0%;transform:translateY(50%) scaleY(0);transition:transform 1s ease;mix-blend-mode:difference;clip-path:polygon(80% 40%,0% 40%,0% 60%,80% 60%,80% 100%,40% 100%,40% 80%,80% 80%);background-color:#eb7132}.link-three[_ngcontent-%COMP%]:hover:before{transform:translate(0) scaleY(1)}']}),m})();function Vc(m,v){1&m&&(p.TgZ(0,"span",20),p._uU(1," El email es requerido "),p.qZA())}function Nh(m,v){1&m&&(p.TgZ(0,"span",20),p._uU(1," No cumple el formato de email. "),p.qZA())}function Rf(m,v){1&m&&(p.TgZ(0,"span",20),p._uU(1," La contrase\xf1a es requerida. "),p.qZA())}let Bc=(()=>{class m{constructor(w,M,Q){this.fb=w,this.authService=M,this.router=Q,this.message="",this.seleccion="",this.usuario="",this.clave=""}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}ngOnInit(){this.loginForm=this.fb.group({email:["",[pi.required,pi.email]],password:["",[pi.required,pi.minLength(6)]]})}onLogin(){var w=this;return(0,X.Z)(function*(){const{email:M,password:Q}=w.loginForm.value;try{const Ve=yield w.authService.login(M,Q);Ve&&(w.message="Bienvenido "+M,console.log("pagina 2"+JSON.stringify(Ve)),setTimeout(()=>{w.router.navigate(["/home"])},1e3))}catch(Ve){console.log("pagina error "+Ve),console.log("error.message "+Ve.message),w.message=Ve.message}})()}onChange(w){switch(console.log(w),this.message="",w){case"admin":this.loginForm.setValue({email:"admin@admin.com",password:"111111"}),console.log(this.loginForm.value);break;case"usuario":this.loginForm.setValue({email:"usuario@usuario.com",password:"123456"}),console.log(this.loginForm.value);break;case"fulanito":this.loginForm.setValue({email:"mail@hola.com",password:"clave123"})}}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(Cs),p.Y36(Se.e),p.Y36(K.F0))},m.\u0275cmp=p.Xpm({type:m,selectors:[["app-login"]],decls:37,vars:8,consts:[[1,"row"],[1,"col-md-6","mx-auto","mt-5"],[1,"car"],[1,"card-body"],[1,"tetx-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","formControlName","email",1,"form-control",3,"value"],["class","error ion-padding",4,"ngIf"],["for","password"],["type","password","formControlName","password",1,"form-control",3,"value"],["type","submit",1,"fill","btn-lg","btn-block"],[1,"form-group","mt-3"],["routerLink","/registro",1,"button"],["for","usuarios"],["value","seleccione","okText","Seleccionar","name","usuarios","cancelText","Cancelar",1,"form-control",3,"ngModel","ngModelChange","change"],["value","admin"],["value","usuario"],["value","fulanito"],[1,"error","ion-padding"]],template:function(w,M){1&w&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),p._uU(5,"Login"),p.qZA(),p.TgZ(6,"form",5),p.NdJ("ngSubmit",function(){return M.onLogin()}),p.TgZ(7,"H2"),p._uU(8),p.qZA(),p.TgZ(9,"div",6)(10,"label",7),p._uU(11,"Email"),p.qZA(),p._UZ(12,"input",8),p.YNc(13,Vc,2,0,"span",9),p.YNc(14,Nh,2,0,"span",9),p.qZA(),p.TgZ(15,"div",6)(16,"label",10),p._uU(17,"Clave"),p.qZA(),p._UZ(18,"input",11),p.YNc(19,Rf,2,0,"span",9),p.qZA(),p.TgZ(20,"button",12),p._uU(21,"Ingresar"),p.qZA()(),p.TgZ(22,"div",13)(23,"p"),p._uU(24," \xbfNo tienes una cuenta? "),p.TgZ(25,"a",14),p._uU(26,"Registro de usuario"),p.qZA()()(),p.TgZ(27,"div",13)(28,"label",15),p._uU(29,"Seleccione usuario "),p.qZA(),p.TgZ(30,"select",16),p.NdJ("ngModelChange",function(Ve){return M.seleccion=Ve})("change",function(){return M.onChange(M.seleccion)}),p.TgZ(31,"option",17),p._uU(32,"admin"),p.qZA(),p.TgZ(33,"option",18),p._uU(34,"usuario"),p.qZA(),p.TgZ(35,"option",19),p._uU(36,"Fulanito"),p.qZA()()()()()()()),2&w&&(p.xp6(6),p.Q6J("formGroup",M.loginForm),p.xp6(2),p.Oqu(M.message),p.xp6(4),p.s9C("value",M.usuario),p.xp6(1),p.Q6J("ngIf",(null==M.loginForm.get("email").errors?null:M.loginForm.get("email").errors.required)&&M.loginForm.get("email").touched),p.xp6(1),p.Q6J("ngIf",null==M.loginForm.get("email").errors?null:M.loginForm.get("email").errors.email),p.xp6(4),p.s9C("value",M.clave),p.xp6(1),p.Q6J("ngIf",(null==M.loginForm.get("password").errors?null:M.loginForm.get("password").errors.required)&&M.loginForm.get("password").touched),p.xp6(11),p.Q6J("ngModel",M.seleccion))},dependencies:[Ne.O5,K.rH,Fc,Cl,Id,Ii,il,Mu,Zu,yd,mu,ku],styles:['@import"https://fonts.googleapis.com/css2?family=Grandstander:ital,wght@1,900&display=swap";@import"http://fonts.cdnfonts.com/css/pastel-colors";.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;outline:0;border:1px solid #04049d;cursor:pointer;position:relative;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#2acdc1;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0;left:0}h1[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:3.1em}h2[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:3.1em;color:red}.row[_ngcontent-%COMP%]{color:#f0f8ff}span[_ngcontent-%COMP%]{color:red}']}),m})();function Jd(m,v){1&m&&(p.TgZ(0,"span",17),p._uU(1," El email es requerido "),p.qZA())}function Bp(m,v){1&m&&(p.TgZ(0,"span",17),p._uU(1," No cumple el formato de email. "),p.qZA())}function Pf(m,v){1&m&&(p.TgZ(0,"span",17),p._uU(1," La contrase\xf1a es requerida. "),p.qZA())}function Xd(m,v){1&m&&(p.TgZ(0,"span",17),p._uU(1," La contrase\xf1a tiene que tener minimo 6 caracteres "),p.qZA())}function Oh(m,v){1&m&&(p.TgZ(0,"span",17),p._uU(1," Repetir la contrase\xf1a es requerido. "),p.qZA())}function kh(m,v){1&m&&(p.TgZ(0,"span",17),p._uU(1," La contrase\xf1a tiene que tener minimo 6 caracteres "),p.qZA())}let $p=(()=>{class m{constructor(w,M,Q){this.authSvc=w,this.router=M,this.fb=Q,this.message=""}ngOnInit(){this.registerForm=this.fb.group({email:new Is("",[pi.required,pi.email]),password:new Is("",[pi.required,pi.minLength(6)]),passwordR:new Is("",[pi.required,pi.minLength(6)])})}onRegister(){var w=this;return(0,X.Z)(function*(){const{email:M,password:Q}=w.registerForm.value;try{(yield w.authSvc.registro(M,Q))&&w.router.navigate(["/home"])}catch(Ve){console.log(Ve),w.message=Ve.message}})()}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(Se.e),p.Y36(K.F0),p.Y36(Cs))},m.\u0275cmp=p.Xpm({type:m,selectors:[["app-registro"]],decls:34,vars:9,consts:[[1,"row"],[1,"col-md-6","mx-auto","mt-5"],[1,"car"],[1,"card-body"],[1,"tetx-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","formControlName","email",1,"form-control"],["class","error ion-padding",4,"ngIf"],["for","password"],["type","password","formControlName","password",1,"form-control"],["for","passwordR"],["type","password","formControlName","passwordR",1,"form-control"],["type","submit",1,"fill","btn-primary","btn-lg","btn-block",3,"disabled"],[1,"form-group","mt-3"],["routerLink","/",1,"button"],[1,"error","ion-padding"]],template:function(w,M){1&w&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),p._uU(5,"Registro de Usuario"),p.qZA(),p.TgZ(6,"H2"),p._uU(7),p.qZA(),p.TgZ(8,"form",5),p.NdJ("ngSubmit",function(){return M.onRegister()}),p.TgZ(9,"div",6)(10,"label",7),p._uU(11,"Email"),p.qZA(),p._UZ(12,"input",8),p.YNc(13,Jd,2,0,"span",9),p.YNc(14,Bp,2,0,"span",9),p.qZA(),p.TgZ(15,"div",6)(16,"label",10),p._uU(17,"Contrase\xf1a"),p.qZA(),p._UZ(18,"input",11),p.qZA(),p.YNc(19,Pf,2,0,"span",9),p.YNc(20,Xd,2,0,"span",9),p.TgZ(21,"div",6)(22,"label",12),p._uU(23,"Repetir Contrase\xf1a"),p.qZA(),p._UZ(24,"input",13),p.YNc(25,Oh,2,0,"span",9),p.YNc(26,kh,2,0,"span",9),p.qZA(),p.TgZ(27,"button",14),p._uU(28," Registrar "),p.qZA()(),p.TgZ(29,"div",15)(30,"p"),p._uU(31," \xbfYa tienes una cuenta? "),p.TgZ(32,"a",16),p._uU(33,"Login"),p.qZA()()()()()()()),2&w&&(p.xp6(7),p.Oqu(M.message),p.xp6(1),p.Q6J("formGroup",M.registerForm),p.xp6(5),p.Q6J("ngIf",(null==M.registerForm.get("email").errors?null:M.registerForm.get("email").errors.required)&&M.registerForm.get("email").touched),p.xp6(1),p.Q6J("ngIf",null==M.registerForm.get("email").errors?null:M.registerForm.get("email").errors.email),p.xp6(5),p.Q6J("ngIf",(null==M.registerForm.get("password").errors?null:M.registerForm.get("password").errors.required)&&M.registerForm.get("password").touched),p.xp6(1),p.Q6J("ngIf",M.registerForm.get("password").hasError("minLength")&&M.registerForm.get("password").touched),p.xp6(5),p.Q6J("ngIf",(null==M.registerForm.get("passwordR").errors?null:M.registerForm.get("passwordR").errors.required)&&M.registerForm.get("passwordR").touched),p.xp6(1),p.Q6J("ngIf",M.registerForm.get("passwordR").hasError("minLength")&&M.registerForm.get("passwordR").touched),p.xp6(1),p.Q6J("disabled",M.registerForm.invalid))},dependencies:[Ne.O5,K.rH,Fc,Ii,Mu,Zu,mu,ku],styles:['.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#ffe54c;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0;left:0}h1[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:3.1em}span[_ngcontent-%COMP%]{color:red}']}),m})(),Fh=(()=>{class m{}return m.\u0275fac=function(w){return new(w||m)},m.\u0275cmp=p.Xpm({type:m,selectors:[["app-quiensoy"]],decls:42,vars:0,consts:[[1,"row"],["id","quiwn",1,"col-md-6","text-center"],[1,"margin"],["href","https://github.com/Vaninaquezada/tp1SaladeJuegos/tree/master","target","_blank"],[1,"fa","fa-github"],["src","./assets/imagenes/quiensoy.jpeg","alt","Bird","width","350","height","350",1,"img-responsive","img-circle","margin",2,"display","inline"],["id","que",1,"col-md-6","text-center"],["src","./assets/imagenes/grilla1.png",1,"juego"],["src","./assets/imagenes/Flecha_tesela.svg",1,"flecha"],["src","./assets/imagenes/grilla2.png",1,"juego"],["id","donde",1,"container-fluid","bg-3","text-center"],[1,"col-sm-4"],["src","./assets/imagenes/quiensoy1.jpg","alt","Image",1,"img-responsive","margin","imagenDeQuienSoy"],["src","./assets/imagenes/quiensoy2.jpg","alt","Image",1,"img-responsive","margin","imagenDeQuienSoy"],["src","./assets/imagenes/quiensoy3.png","alt","Image",1,"img-responsive","margin","imagenDeQuienSoy"],[1,"container-fluid","bg-4","text-center"],["href","https://www.blablabla.com.ar"]],template:function(w,M){1&w&&(p.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),p._uU(3,"\xbfQui\xe9n Soy?"),p.qZA(),p.TgZ(4,"a",3),p._uU(5,"en GitHub "),p._UZ(6,"i",4),p.qZA(),p.TgZ(7,"p"),p._uU(8,"Vanina Quezada"),p.qZA(),p._UZ(9,"img",5),p.TgZ(10,"h3"),p._uU(11,"Soy Un alumno de la UTN FRA, Vanina Quezada"),p.qZA()(),p.TgZ(12,"div",6)(13,"h2",2),p._uU(14,"Juego: Rompecabezas de numeros"),p.qZA(),p.TgZ(15,"p"),p._uU(16," El objetivo del juego es mover los casilleros de manera tal que los n\xfameros queden ordenados del 1 al 8, quedando el casillero vac\xedo \xfaltimo. "),p.qZA(),p._UZ(17,"img",7)(18,"img",8)(19,"img",9),p.qZA()(),p.TgZ(20,"div",10)(21,"h3",2),p._uU(22,"\xbfD\xf3nde Funciona?"),p.qZA(),p._UZ(23,"br"),p.TgZ(24,"div",0)(25,"div",11),p._UZ(26,"img",12),p.TgZ(27,"p"),p._uU(28," Con las tecnologias WEB que permiten desarrollar aplicaciones multiplataforma "),p.qZA()(),p.TgZ(29,"div",11),p._UZ(30,"img",13),p.TgZ(31,"p"),p._uU(32," Principalmente orientada a la experiencia del usuario, garantizando que su funcionamieto sea fluido y pensado en el comportamiento del usuario y en la funcionalidad. "),p.qZA()(),p.TgZ(33,"div",11),p._UZ(34,"img",14),p.TgZ(35,"p"),p._uU(36," Para los sistemas operativos lideres en el mercado del consumo masivo "),p.qZA()()()(),p.TgZ(37,"footer",15)(38,"p"),p._uU(39," Modificado por "),p.TgZ(40,"a",16),p._uU(41,"https://www.blablabla.com.ar"),p.qZA()()())},styles:[".imagenDeQuienSoy[_ngcontent-%COMP%]{width:400px;height:250px}body[_ngcontent-%COMP%]{font:20px Montserrat,sans-serif;line-height:1.8;color:#f5f6f7}p[_ngcontent-%COMP%]{font-size:16px}.margin[_ngcontent-%COMP%]{margin-bottom:45px}.bg-1[_ngcontent-%COMP%]{background-color:#1abc9c;color:#fff}.bg-2[_ngcontent-%COMP%]{background-color:#474e5d;color:#fff}.bg-3[_ngcontent-%COMP%]{background-color:#fff;color:#555}.bg-4[_ngcontent-%COMP%]{background-color:#3a0447;color:#fff;height:20%}.container-fluid[_ngcontent-%COMP%]{padding-top:70px;padding-bottom:70px}.navbar[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px;border:0;border-radius:0;margin-bottom:0;font-size:12px;letter-spacing:5px}.navbar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1abc9c!important}nav[_ngcontent-%COMP%]{display:flex;background-color:#0e3aff;color:#fff}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px}.active[_ngcontent-%COMP%]{background-color:#f3f3f3;border:solid;border-radius:25px;border-color:#328afd;color:#fff}a[_ngcontent-%COMP%]{color:#fff}.row[_ngcontent-%COMP%]{background-color:#151515;padding:30px;color:#fff}#que[_ngcontent-%COMP%]{margin-top:60px}.juego[_ngcontent-%COMP%]{height:250px}.flecha[_ngcontent-%COMP%]{height:80px;margin:15px}"]}),m})(),Nf=(()=>{class m{constructor(w,M,Q){this.afs=w,this.authSvc=M,this.router=Q,this.getUserMail()}addEncuesta(w){return this.getUserMail(),this.afs.collection("encuesta").add({user:w.user,pregunta1:w.pregunta1,respuesta1:w.respuesta1,pregunta2:w.pregunta2,respuesta2:w.respuesta2,pregunta3:w.pregunta3,respuesta3:w.respuesta3,nombre:w.nombre,apellido:w.apellido,edad:w.edad,telefono:w.telefono,sexo:w.sexo,createdAt:uu.Z.firestore.FieldValue.serverTimestamp()})}getEncuestas(){this.getUserMail();let w=[];return this.getUserMail(),this.getEncuesta().pipe((0,es.w)(M=>(w=M,this.afs.collection("encuesta",Q=>Q.orderBy("createdAt","desc")).valueChanges({idField:"id"}))))}getEncuesta(){return this.afs.collection("encuesta",w=>w.orderBy("createdAt","desc")).valueChanges({idField:"id"})}getUserMail(){var w=this;return(0,X.Z)(function*(){(yield w.authSvc.getUsuarioFire())?(w.mail=w.authSvc.getUsuarioFire()?.email,console.log(w.mail)):w.mail="usuario anonimo"})()}}return m.\u0275fac=function(w){return new(w||m)(p.LFG(za.ST),p.LFG(Se.e),p.LFG(K.F0))},m.\u0275prov=p.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();function Lh(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"El nombre es requerido"),p.qZA())}function $l(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"El nombre solo puede estar compuesto por letras"),p.qZA())}function Cc(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"El apellido es requerido"),p.qZA())}function rc(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"El apellido solo puede estar compuesto por letras"),p.qZA())}function jp(m,v){1&m&&(p.TgZ(0,"span",52),p._uU(1," El email es requerido "),p.qZA())}function eh(m,v){1&m&&(p.TgZ(0,"span",52),p._uU(1," No cumple el formato de email. "),p.qZA())}function Fu(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"La edad es requerida"),p.qZA())}function Of(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"La edad tiene que ser numerica"),p.qZA())}function Uh(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"La edad no puede ser menor a 18"),p.qZA())}function Dd(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"La edad no puede ser mayor a 99"),p.qZA())}function Tl(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"El numero de telefono es requerido"),p.qZA())}function ic(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"El numero de telefono no puede exceder los 10 caracteres "),p.qZA())}function jl(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"El telefono tiene que ser numerico"),p.qZA())}function bc(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"No ha seleccionado sexo"),p.qZA())}function Sd(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"No ha contestado la pregunta"),p.qZA())}function Vh(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"No ha contestado la pregunta"),p.qZA())}function sc(m,v){1&m&&(p.TgZ(0,"small",51),p._uU(1,"No ha contestado la pregunta"),p.qZA())}let Bh=(()=>{class m{constructor(w,M,Q,Ve){this.fb=w,this.authSvc=M,this.enSvc=Q,this.router=Ve,this.encuesta={}}ngOnInit(){this.getmail(),this.formGroup=this.fb.group({nombre:["",[pi.required,pi.pattern("[a-zA-Z]+")]],apellido:["",[pi.required,pi.pattern("[a-zA-Z]+")]],edad:["",[pi.required,pi.min(18),pi.max(99),pi.pattern("^[0-9]+$")]],sexo:["",pi.required],telefono:["",[pi.required,pi.maxLength(10),pi.pattern("^[0-9]+$")]],pregunta2:["",pi.required],pregunta1:["",pi.required],pregunta3:["",pi.required],email:["",[pi.required,pi.email]]})}enviar(){this.encuesta={pregunta1:"\xbfLe gusto la pagina?",respuesta1:this.formGroup.get("pregunta1").value,pregunta2:"\xbfQue juegos que le gustaria ver en la pagina?",respuesta2:this.formGroup.get("pregunta2").value,pregunta3:"\xbfCual es su juego favorito?",respuesta3:this.formGroup.get("pregunta3").value,nombre:this.formGroup.get("nombre").value,apellido:this.formGroup.get("apellido").value,edad:this.formGroup.get("edad").value,telefono:this.formGroup.get("telefono").value,sexo:this.formGroup.get("sexo").value,user:this.formGroup.get("email").value},console.log(this.formGroup.get("apellido").value),this.enSvc.addEncuesta(this.encuesta),this.router.navigate(["/home"])}getmail(){var w=this;return(0,X.Z)(function*(){w.mail=w.authSvc.getUsuarioFire().email})()}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(Cs),p.Y36(Se.e),p.Y36(Nf),p.Y36(K.F0))},m.\u0275cmp=p.Xpm({type:m,selectors:[["app-encuesta"]],decls:106,vars:20,consts:[[1,"container"],[1,"py-5","text-center"],[1,"row","justify-content-md-center"],[1,"col-md-7","col-lg-8"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"col-sm-6"],["for","firstName",1,"form-label"],["type","text","formControlName","nombre","id","firstName","placeholder","","value","","required","",1,"form-control"],[1,"invalid-feedback"],["class","invalid",4,"ngIf"],["for","lastName",1,"form-label"],["type","text","formControlName","apellido","id","lastName","placeholder","","value","","required","",1,"form-control"],[1,"col-12"],["for","email",1,"form-label"],[1,"text-muted"],["type","email","id","email","formControlName","email",1,"form-control","mail",3,"value"],["class","error ion-padding",4,"ngIf"],[1,"col-6"],["for","address",1,"form-label"],["type","text","formControlName","edad","id","address","placeholder","","required","",1,"form-control"],["for","address2",1,"form-label"],["type","text","formControlName","telefono","id","address2","placeholder","",1,"form-control"],[1,"col-md-5"],["for","se",1,"sexo"],["id","country","formControlName","sexo","required","",1,"form-select"],["value",""],["value","Femenino"],["value","Masculino"],["value","Otro"],["value","N/A"],[1,"my-4"],[1,"mb-3"],[1,"form-check"],["type","checkbox","id","same-address","formControlName","pregunta1","value","Si",1,"form-check-input"],["for","same-address",1,"form-check-label"],["type","checkbox","id","save-info","formControlName","pregunta1","value","No",1,"form-check-input"],["for","save-info",1,"form-check-label"],[1,"form-group"],["for","exampleFormControlTextarea1"],["id","exampleFormControlTextarea1","formControlName","pregunta2","rows","3","value","",1,"form-control"],[1,"my-3"],["id","Memotest","name","pregunta3","type","radio","formControlName","pregunta3","value","Memotest","checked","","required","",1,"form-check-input"],["for","Memotest",1,"form-check-label"],["id","TaTeTi","name","pregunta3","type","radio","formControlName","pregunta3","value","TaTeTi","required","",1,"form-check-input"],["for","TaTeTi",1,"form-check-label"],["id","Piedra papel o Tijera","name","pregunta3","type","radio","formControlName","pregunta3","value","Piedra papel o Tijera","required","",1,"form-check-input"],["for","Piedra papel o Tijera",1,"form-check-label"],["id","Rompecabezas de numeros","name","pregunta3","type","radio","formControlName","pregunta3","value","Rompecabezas de numeros","required","",1,"form-check-input"],["for","Rompecabezas de numeros",1,"form-check-label"],["type","submit",1,"fill","w-100","btn","btn-primary","btn-lg",3,"disabled"],[1,"invalid"],[1,"error","ion-padding"]],template:function(w,M){if(1&w&&(p.TgZ(0,"div",0)(1,"main")(2,"div",1)(3,"h1"),p._uU(4,"Encuesta"),p.qZA()(),p.TgZ(5,"div",2)(6,"div",3)(7,"form",4),p.NdJ("ngSubmit",function(){return M.enviar()}),p.TgZ(8,"div",5)(9,"div",6)(10,"label",7),p._uU(11,"Nombre"),p.qZA(),p._UZ(12,"input",8),p.TgZ(13,"div",9),p._uU(14,"Ingrese un nombre valido."),p.qZA(),p.YNc(15,Lh,2,0,"small",10),p.YNc(16,$l,2,0,"small",10),p.qZA(),p.TgZ(17,"div",6)(18,"label",11),p._uU(19,"Apellido"),p.qZA(),p._UZ(20,"input",12),p.TgZ(21,"div",9),p._uU(22,"Ingrese un apellido valido."),p.qZA(),p.YNc(23,Cc,2,0,"small",10),p.YNc(24,rc,2,0,"small",10),p.qZA(),p.TgZ(25,"div",13)(26,"label",14),p._uU(27,"Email "),p._UZ(28,"span",15),p.qZA(),p._UZ(29,"input",16),p.YNc(30,jp,2,0,"span",17),p.YNc(31,eh,2,0,"span",17),p.qZA(),p.TgZ(32,"div",18)(33,"label",19),p._uU(34,"Edad"),p.qZA(),p._UZ(35,"input",20),p.TgZ(36,"div",9),p._uU(37,"Ingrese edad."),p.qZA(),p.YNc(38,Fu,2,0,"small",10),p.YNc(39,Of,2,0,"small",10),p.YNc(40,Uh,2,0,"small",10),p.YNc(41,Dd,2,0,"small",10),p.qZA(),p.TgZ(42,"div",18)(43,"label",21),p._uU(44,"N\xfamero de tel\xe9fono "),p.qZA(),p._UZ(45,"input",22),p.YNc(46,Tl,2,0,"small",10),p.YNc(47,ic,2,0,"small",10),p.YNc(48,jl,2,0,"small",10),p.qZA(),p.TgZ(49,"div",23)(50,"label",24),p._uU(51,"Sexo "),p.qZA(),p.TgZ(52,"select",25)(53,"option",26),p._uU(54,"Seleccione..."),p.qZA(),p.TgZ(55,"option",27),p._uU(56,"Femenino"),p.qZA(),p.TgZ(57,"option",28),p._uU(58,"Masculino"),p.qZA(),p.TgZ(59,"option",29),p._uU(60,"Otro"),p.qZA(),p.TgZ(61,"option",30),p._uU(62,"N/A"),p.qZA()(),p._UZ(63,"br"),p.YNc(64,bc,2,0,"small",10),p.qZA()(),p._UZ(65,"hr",31),p.TgZ(66,"h4",32),p._uU(67,"\xbfLe gusto la pagina?"),p.qZA(),p.TgZ(68,"div",33),p._UZ(69,"input",34),p.TgZ(70,"label",35),p._uU(71,"Si"),p.qZA()(),p.TgZ(72,"div",33),p._UZ(73,"input",36),p.TgZ(74,"label",37),p._uU(75,"No"),p.qZA()(),p.YNc(76,Sd,2,0,"small",10),p._UZ(77,"hr",31),p.TgZ(78,"div",38)(79,"label",39),p._uU(80,"\xbfQue juegos que le gustaria ver en la pagina?"),p.qZA(),p._UZ(81,"textarea",40),p.YNc(82,Vh,2,0,"small",10),p.qZA(),p._UZ(83,"hr",31),p.TgZ(84,"h4",32),p._uU(85,"\xbfCual es su juego favorito?"),p.qZA(),p.TgZ(86,"div",41)(87,"div",33),p._UZ(88,"input",42),p.TgZ(89,"label",43),p._uU(90,"Preguntados"),p.qZA()(),p.TgZ(91,"div",33),p._UZ(92,"input",44),p.TgZ(93,"label",45),p._uU(94,"Ahorcado"),p.qZA()(),p.TgZ(95,"div",33),p._UZ(96,"input",46),p.TgZ(97,"label",47),p._uU(98,"Mayor o menor"),p.qZA()(),p.TgZ(99,"div",33),p._UZ(100,"input",48),p.TgZ(101,"label",49),p._uU(102,"Rompecabezas de numeros"),p.qZA()(),p.YNc(103,sc,2,0,"small",10),p.qZA(),p.TgZ(104,"button",50),p._uU(105," Enviar "),p.qZA()()()()()()),2&w){let Q;p.xp6(7),p.Q6J("formGroup",M.formGroup),p.xp6(8),p.Q6J("ngIf",(null==M.formGroup.get("nombre").errors?null:M.formGroup.get("nombre").errors.required)&&M.formGroup.get("nombre").touched),p.xp6(1),p.Q6J("ngIf",M.formGroup.get("nombre").hasError("pattern")),p.xp6(7),p.Q6J("ngIf",(null==M.formGroup.get("apellido").errors?null:M.formGroup.get("apellido").errors.required)&&M.formGroup.get("apellido").touched),p.xp6(1),p.Q6J("ngIf",M.formGroup.get("apellido").hasError("pattern")),p.xp6(5),p.s9C("value",M.mail),p.xp6(1),p.Q6J("ngIf",(null==M.formGroup.get("email").errors?null:M.formGroup.get("email").errors.required)&&M.formGroup.get("email").touched),p.xp6(1),p.Q6J("ngIf",null==M.formGroup.get("email").errors?null:M.formGroup.get("email").errors.email),p.xp6(7),p.Q6J("ngIf",(null==M.formGroup.get("edad").errors?null:M.formGroup.get("edad").errors.required)&&M.formGroup.get("edad").touched),p.xp6(1),p.Q6J("ngIf",M.formGroup.get("edad").hasError("pattern")),p.xp6(1),p.Q6J("ngIf",M.formGroup.get("edad").hasError("min")),p.xp6(1),p.Q6J("ngIf",M.formGroup.get("edad").hasError("max")),p.xp6(5),p.Q6J("ngIf",(null==M.formGroup.get("telefono").errors?null:M.formGroup.get("telefono").errors.required)&&M.formGroup.get("telefono").touched),p.xp6(1),p.Q6J("ngIf",M.formGroup.get("telefono").hasError("maxlength")),p.xp6(1),p.Q6J("ngIf",M.formGroup.get("telefono").hasError("pattern")),p.xp6(16),p.Q6J("ngIf",(null==M.formGroup.get("sexo").errors?null:M.formGroup.get("sexo").errors.required)&&M.formGroup.get("sexo").touched),p.xp6(12),p.Q6J("ngIf",(null==M.formGroup.get("pregunta1").errors?null:M.formGroup.get("pregunta1").errors.required)&&M.formGroup.get("pregunta2").touched),p.xp6(6),p.Q6J("ngIf",(null==M.formGroup.get("pregunta2").errors?null:M.formGroup.get("pregunta2").errors.required)&&M.formGroup.get("pregunta2").touched),p.xp6(21),p.Q6J("ngIf",(null==M.formGroup.get("pregunta3").errors?null:M.formGroup.get("pregunta3").errors.required)&&(null==(Q=M.formGroup.get("pregunta3"))?null:Q.touched)),p.xp6(1),p.Q6J("disabled",!M.formGroup.valid)}},dependencies:[Ne.O5,Fc,Cl,Id,Ii,En,il,Vl,Mu,Zu,Re,mu,ku],styles:['@import"https://fonts.googleapis.com/css2?family=Grandstander:ital,wght@1,900&display=swap";@import"http://fonts.cdnfonts.com/css/pastel-colors";.container[_ngcontent-%COMP%]{color:#0d606b;font-family:Grandstander,cursive}.mail[_ngcontent-%COMP%]{color:#f0f}.invalid[_ngcontent-%COMP%]{color:red;font-size:large}.sexo[_ngcontent-%COMP%]{margin:20px}main[_ngcontent-%COMP%]{background-color:#bdf3e1}.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;color:#0d606b;padding:13px 50px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000;margin:20px;font-family:Pastel Colors,sans-serif}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#ffe54c;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0;left:0}']}),m})();var kf=j(4359);function Ff(m,v){if(1&m&&(p.TgZ(0,"tr")(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.qZA(),p.TgZ(9,"td"),p._uU(10),p.qZA(),p.TgZ(11,"td"),p._uU(12),p.qZA(),p.TgZ(13,"td"),p._uU(14),p.qZA(),p.TgZ(15,"td"),p._uU(16),p.ALo(17,"date"),p.qZA()()),2&m){const w=v.$implicit;p.xp6(2),p.Oqu(w.juego),p.xp6(2),p.Oqu(w.usuario),p.xp6(2),p.Oqu(w.resultado),p.xp6(2),p.Oqu(w.correctas),p.xp6(2),p.Oqu(w.errores),p.xp6(2),p.Oqu(w.clicks),p.xp6(2),p.Oqu(w.tiempo),p.xp6(2),p.Oqu(p.xi3(17,8,null==w.createdAt?null:w.createdAt.toMillis(),"dd/MM/yy, h:mm a"))}}let $h=(()=>{class m{constructor(w){this.listado=w,this.lista=this.listado.getListas(),console.log(this.lista)}ngOnInit(){}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(kf.L))},m.\u0275cmp=p.Xpm({type:m,selectors:[["app-listado"]],decls:22,vars:3,consts:[[1,"table","table-condensed"],[4,"ngFor","ngForOf"]],template:function(w,M){1&w&&(p.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),p._uU(4,"Juego"),p.qZA(),p.TgZ(5,"th"),p._uU(6,"Jugador"),p.qZA(),p.TgZ(7,"th"),p._uU(8,"Resultado"),p.qZA(),p.TgZ(9,"th"),p._uU(10,"Correctas"),p.qZA(),p.TgZ(11,"th"),p._uU(12,"Errores"),p.qZA(),p.TgZ(13,"th"),p._uU(14,"Movimientos"),p.qZA(),p.TgZ(15,"th"),p._uU(16,"Tiempo"),p.qZA(),p.TgZ(17,"th"),p._uU(18,"Fecha"),p.qZA()()(),p.TgZ(19,"tbody"),p.YNc(20,Ff,18,11,"tr",1),p.ALo(21,"async"),p.qZA()()),2&w&&(p.xp6(20),p.Q6J("ngForOf",p.lcZ(21,1,M.lista)))},dependencies:[Ne.sg,Ne.Ov,Ne.uU],styles:["table[_ngcontent-%COMP%]{color:#53d9d1;font-weight:bolder;border-bottom:2px,solid,palevioletred}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-bottom:2px solid palevioletred}"]}),m})();function Lf(m,v){if(1&m&&(p.TgZ(0,"tr")(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p._UZ(5,"br"),p._uU(6),p._UZ(7,"br"),p._uU(8),p._UZ(9,"br"),p._uU(10),p._UZ(11,"br"),p._uU(12),p._UZ(13,"br"),p._uU(14),p._UZ(15,"br"),p._uU(16),p._UZ(17,"br"),p._uU(18),p._UZ(19,"br"),p._uU(20),p.ALo(21,"date"),p._UZ(22,"br"),p.qZA()()),2&m){const w=v.$implicit;p.xp6(2),p.Oqu(w.user),p.xp6(2),p.hij(" Nombre: ",w.nombre,""),p.xp6(2),p.hij(" Apellido: ",w.apellido,""),p.xp6(2),p.hij(" Edad: ",w.edad,""),p.xp6(2),p.hij(" Telefono: ",w.telefono,""),p.xp6(2),p.hij(" Sexo: ",w.sexo,""),p.xp6(2),p.AsE(" ",w.pregunta1,": ",w.respuesta1,""),p.xp6(2),p.AsE(" ",w.pregunta2,": ",w.respuesta2,""),p.xp6(2),p.AsE(" ",w.pregunta3,": ",w.respuesta3,""),p.xp6(2),p.hij(" Fecha: ",p.xi3(21,13,null==w.createdAt?null:w.createdAt.toMillis(),"d/M/yy, h:mm a"),"")}}const th=[{path:"home",component:Mf},{path:"",component:Mf},{path:"login",component:Bc},{path:"registro",component:$p},{path:"quiensoy",component:Fh},{path:"encuesta",component:Bh},{path:"resultadoencuesta",component:(()=>{class m{constructor(w){this.encuestaServ=w,this.lista=this.encuestaServ.getEncuestas(),console.log(this.lista)}ngOnInit(){}}return m.\u0275fac=function(w){return new(w||m)(p.Y36(Nf))},m.\u0275cmp=p.Xpm({type:m,selectors:[["app-resultado-encuesta"]],decls:10,vars:3,consts:[[1,"table","table-condensed"],[4,"ngFor","ngForOf"]],template:function(w,M){1&w&&(p.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),p._uU(4,"Usuario"),p.qZA(),p.TgZ(5,"th"),p._uU(6,"Datos Encuesta"),p.qZA()()(),p.TgZ(7,"tbody"),p.YNc(8,Lf,23,16,"tr",1),p.ALo(9,"async"),p.qZA()()),2&w&&(p.xp6(8),p.Q6J("ngForOf",p.lcZ(9,1,M.lista)))},dependencies:[Ne.sg,Ne.Ov,Ne.uU],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{color:#0d606b;font-weight:bolder;border-bottom:2px solid palevioletred}"]}),m})()},{path:"listado",component:$h},{path:"juegos",loadChildren:()=>j.e(148).then(j.bind(j,1148)).then(m=>m.JuegosModule)}];let $c=(()=>{class m{}return m.\u0275fac=function(w){return new(w||m)},m.\u0275mod=p.oAB({type:m}),m.\u0275inj=p.cJS({imports:[K.Bz.forRoot(th),K.Bz]}),m})();var jc=j(2011),Hp=j(529);let Hc=(()=>{class m{}return m.\u0275fac=function(w){return new(w||m)},m.\u0275mod=p.oAB({type:m,bootstrap:[de]}),m.\u0275inj=p.cJS({imports:[C.b2,jc.hO.initializeApp(Me_firebase),(0,ye.hX)(()=>(0,ye.ZF)(Me_firebase)),(0,tt.AR)(()=>(0,tt.v0)()),ln(()=>pr()),(0,xr.Cm)(()=>(0,xr.ad)()),te(()=>He()),Js(()=>zi()),Ke(()=>hl()),$c,Rh,Td,Hp.JF]}),m})();C.q6().bootstrapModule(Hc).catch(m=>console.error(m))},9751:(mn,ot,j)=>{j.d(ot,{y:()=>be});var C=j(2961),p=j(727),K=j(8822),X=j(9635),Se=j(2416),Ne=j(576),$e=j(2806);let be=(()=>{class Me{constructor(Ye){Ye&&(this._subscribe=Ye)}lift(Ye){const Nt=new Me;return Nt.source=this,Nt.operator=Ye,Nt}subscribe(Ye,Nt,Qt){const nt=function ye(Me){return Me&&Me instanceof C.Lv||function de(Me){return Me&&(0,Ne.m)(Me.next)&&(0,Ne.m)(Me.error)&&(0,Ne.m)(Me.complete)}(Me)&&(0,p.Nn)(Me)}(Ye)?Ye:new C.Hp(Ye,Nt,Qt);return(0,$e.x)(()=>{const{operator:yt,source:ft}=this;nt.add(yt?yt.call(nt,ft):ft?this._subscribe(nt):this._trySubscribe(nt))}),nt}_trySubscribe(Ye){try{return this._subscribe(Ye)}catch(Nt){Ye.error(Nt)}}forEach(Ye,Nt){return new(Nt=Ze(Nt))((Qt,nt)=>{const yt=new C.Hp({next:ft=>{try{Ye(ft)}catch(Rt){nt(Rt),yt.unsubscribe()}},error:nt,complete:Qt});this.subscribe(yt)})}_subscribe(Ye){var Nt;return null===(Nt=this.source)||void 0===Nt?void 0:Nt.subscribe(Ye)}[K.L](){return this}pipe(...Ye){return(0,X.U)(Ye)(this)}toPromise(Ye){return new(Ye=Ze(Ye))((Nt,Qt)=>{let nt;this.subscribe(yt=>nt=yt,yt=>Qt(yt),()=>Nt(nt))})}}return Me.create=tt=>new Me(tt),Me})();function Ze(Me){var tt;return null!==(tt=Me??Se.v.Promise)&&void 0!==tt?tt:Promise}},7579:(mn,ot,j)=>{j.d(ot,{x:()=>$e});var C=j(9751),p=j(727);const X=(0,j(3888).d)(Ze=>function(){Ze(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Se=j(8737),Ne=j(2806);let $e=(()=>{class Ze extends C.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ye){const Me=new be(this,this);return Me.operator=ye,Me}_throwIfClosed(){if(this.closed)throw new X}next(ye){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Me of this.currentObservers)Me.next(ye)}})}error(ye){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ye;const{observers:Me}=this;for(;Me.length;)Me.shift().error(ye)}})}complete(){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ye}=this;for(;ye.length;)ye.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ye;return(null===(ye=this.observers)||void 0===ye?void 0:ye.length)>0}_trySubscribe(ye){return this._throwIfClosed(),super._trySubscribe(ye)}_subscribe(ye){return this._throwIfClosed(),this._checkFinalizedStatuses(ye),this._innerSubscribe(ye)}_innerSubscribe(ye){const{hasError:Me,isStopped:tt,observers:Ye}=this;return Me||tt?p.Lc:(this.currentObservers=null,Ye.push(ye),new p.w0(()=>{this.currentObservers=null,(0,Se.P)(Ye,ye)}))}_checkFinalizedStatuses(ye){const{hasError:Me,thrownError:tt,isStopped:Ye}=this;Me?ye.error(tt):Ye&&ye.complete()}asObservable(){const ye=new C.y;return ye.source=this,ye}}return Ze.create=(de,ye)=>new be(de,ye),Ze})();class be extends $e{constructor(de,ye){super(),this.destination=de,this.source=ye}next(de){var ye,Me;null===(Me=null===(ye=this.destination)||void 0===ye?void 0:ye.next)||void 0===Me||Me.call(ye,de)}error(de){var ye,Me;null===(Me=null===(ye=this.destination)||void 0===ye?void 0:ye.error)||void 0===Me||Me.call(ye,de)}complete(){var de,ye;null===(ye=null===(de=this.destination)||void 0===de?void 0:de.complete)||void 0===ye||ye.call(de)}_subscribe(de){var ye,Me;return null!==(Me=null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(de))&&void 0!==Me?Me:p.Lc}}},2961:(mn,ot,j)=>{j.d(ot,{Hp:()=>Qt,Lv:()=>Me});var C=j(576),p=j(727),K=j(2416),X=j(7849);function Se(){}const Ne=Ze("C",void 0,void 0);function Ze(Te,Je,vt){return{kind:Te,value:Je,error:vt}}var de=j(3410),ye=j(2806);class Me extends p.w0{constructor(Je){super(),this.isStopped=!1,Je?(this.destination=Je,(0,p.Nn)(Je)&&Je.add(this)):this.destination=Rt}static create(Je,vt,$t){return new Qt(Je,vt,$t)}next(Je){this.isStopped?ft(function be(Te){return Ze("N",Te,void 0)}(Je),this):this._next(Je)}error(Je){this.isStopped?ft(function $e(Te){return Ze("E",void 0,Te)}(Je),this):(this.isStopped=!0,this._error(Je))}complete(){this.isStopped?ft(Ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Je){this.destination.next(Je)}_error(Je){try{this.destination.error(Je)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const tt=Function.prototype.bind;function Ye(Te,Je){return tt.call(Te,Je)}class Nt{constructor(Je){this.partialObserver=Je}next(Je){const{partialObserver:vt}=this;if(vt.next)try{vt.next(Je)}catch($t){nt($t)}}error(Je){const{partialObserver:vt}=this;if(vt.error)try{vt.error(Je)}catch($t){nt($t)}else nt(Je)}complete(){const{partialObserver:Je}=this;if(Je.complete)try{Je.complete()}catch(vt){nt(vt)}}}class Qt extends Me{constructor(Je,vt,$t){let wt;if(super(),(0,C.m)(Je)||!Je)wt={next:Je??void 0,error:vt??void 0,complete:$t??void 0};else{let je;this&&K.v.useDeprecatedNextContext?(je=Object.create(Je),je.unsubscribe=()=>this.unsubscribe(),wt={next:Je.next&&Ye(Je.next,je),error:Je.error&&Ye(Je.error,je),complete:Je.complete&&Ye(Je.complete,je)}):wt=Je}this.destination=new Nt(wt)}}function nt(Te){K.v.useDeprecatedSynchronousErrorHandling?(0,ye.O)(Te):(0,X.h)(Te)}function ft(Te,Je){const{onStoppedNotification:vt}=K.v;vt&&de.z.setTimeout(()=>vt(Te,Je))}const Rt={closed:!0,next:Se,error:function yt(Te){throw Te},complete:Se}},727:(mn,ot,j)=>{j.d(ot,{Lc:()=>Ne,w0:()=>Se,Nn:()=>$e});var C=j(576);const K=(0,j(3888).d)(Ze=>function(ye){Ze(this),this.message=ye?`${ye.length} errors occurred during unsubscription:\n${ye.map((Me,tt)=>`${tt+1}) ${Me.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ye});var X=j(8737);class Se{constructor(de){this.initialTeardown=de,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let de;if(!this.closed){this.closed=!0;const{_parentage:ye}=this;if(ye)if(this._parentage=null,Array.isArray(ye))for(const Ye of ye)Ye.remove(this);else ye.remove(this);const{initialTeardown:Me}=this;if((0,C.m)(Me))try{Me()}catch(Ye){de=Ye instanceof K?Ye.errors:[Ye]}const{_finalizers:tt}=this;if(tt){this._finalizers=null;for(const Ye of tt)try{be(Ye)}catch(Nt){de=de??[],Nt instanceof K?de=[...de,...Nt.errors]:de.push(Nt)}}if(de)throw new K(de)}}add(de){var ye;if(de&&de!==this)if(this.closed)be(de);else{if(de instanceof Se){if(de.closed||de._hasParent(this))return;de._addParent(this)}(this._finalizers=null!==(ye=this._finalizers)&&void 0!==ye?ye:[]).push(de)}}_hasParent(de){const{_parentage:ye}=this;return ye===de||Array.isArray(ye)&&ye.includes(de)}_addParent(de){const{_parentage:ye}=this;this._parentage=Array.isArray(ye)?(ye.push(de),ye):ye?[ye,de]:de}_removeParent(de){const{_parentage:ye}=this;ye===de?this._parentage=null:Array.isArray(ye)&&(0,X.P)(ye,de)}remove(de){const{_finalizers:ye}=this;ye&&(0,X.P)(ye,de),de instanceof Se&&de._removeParent(this)}}Se.EMPTY=(()=>{const Ze=new Se;return Ze.closed=!0,Ze})();const Ne=Se.EMPTY;function $e(Ze){return Ze instanceof Se||Ze&&"closed"in Ze&&(0,C.m)(Ze.remove)&&(0,C.m)(Ze.add)&&(0,C.m)(Ze.unsubscribe)}function be(Ze){(0,C.m)(Ze)?Ze():Ze.unsubscribe()}},2416:(mn,ot,j)=>{j.d(ot,{v:()=>C});const C={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(mn,ot,j)=>{j.d(ot,{z:()=>Se});var C=j(8189),K=j(7669),X=j(8996);function Se(...Ne){return function p(){return(0,C.J)(1)}()((0,X.D)(Ne,(0,K.yG)(Ne)))}},515:(mn,ot,j)=>{j.d(ot,{E:()=>p});const p=new(j(9751).y)(Se=>Se.complete())},8996:(mn,ot,j)=>{j.d(ot,{D:()=>Je});var C=j(8421),p=j(5363),K=j(9468),Ne=j(9751),be=j(2202),Ze=j(576),de=j(9672);function Me(vt,$t){if(!vt)throw new Error("Iterable cannot be null");return new Ne.y(wt=>{(0,de.f)(wt,$t,()=>{const je=vt[Symbol.asyncIterator]();(0,de.f)(wt,$t,()=>{je.next().then(xt=>{xt.done?wt.complete():wt.next(xt.value)})},0,!0)})})}var tt=j(3670),Ye=j(8239),Nt=j(1144),Qt=j(6495),nt=j(2206),yt=j(4532),ft=j(3260);function Je(vt,$t){return $t?function Te(vt,$t){if(null!=vt){if((0,tt.c)(vt))return function X(vt,$t){return(0,C.Xf)(vt).pipe((0,K.R)($t),(0,p.Q)($t))}(vt,$t);if((0,Nt.z)(vt))return function $e(vt,$t){return new Ne.y(wt=>{let je=0;return $t.schedule(function(){je===vt.length?wt.complete():(wt.next(vt[je++]),wt.closed||this.schedule())})})}(vt,$t);if((0,Ye.t)(vt))return function Se(vt,$t){return(0,C.Xf)(vt).pipe((0,K.R)($t),(0,p.Q)($t))}(vt,$t);if((0,nt.D)(vt))return Me(vt,$t);if((0,Qt.T)(vt))return function ye(vt,$t){return new Ne.y(wt=>{let je;return(0,de.f)(wt,$t,()=>{je=vt[be.h](),(0,de.f)(wt,$t,()=>{let xt,ln;try{({value:xt,done:ln}=je.next())}catch(jt){return void wt.error(jt)}ln?wt.complete():wt.next(xt)},0,!0)}),()=>(0,Ze.m)(je?.return)&&je.return()})}(vt,$t);if((0,ft.L)(vt))return function Rt(vt,$t){return Me((0,ft.Q)(vt),$t)}(vt,$t)}throw(0,yt.z)(vt)}(vt,$t):(0,C.Xf)(vt)}},8421:(mn,ot,j)=>{j.d(ot,{Xf:()=>tt});var C=j(655),p=j(1144),K=j(8239),X=j(9751),Se=j(3670),Ne=j(2206),$e=j(4532),be=j(6495),Ze=j(3260),de=j(576),ye=j(7849),Me=j(8822);function tt(Te){if(Te instanceof X.y)return Te;if(null!=Te){if((0,Se.c)(Te))return function Ye(Te){return new X.y(Je=>{const vt=Te[Me.L]();if((0,de.m)(vt.subscribe))return vt.subscribe(Je);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,p.z)(Te))return function Nt(Te){return new X.y(Je=>{for(let vt=0;vt<Te.length&&!Je.closed;vt++)Je.next(Te[vt]);Je.complete()})}(Te);if((0,K.t)(Te))return function Qt(Te){return new X.y(Je=>{Te.then(vt=>{Je.closed||(Je.next(vt),Je.complete())},vt=>Je.error(vt)).then(null,ye.h)})}(Te);if((0,Ne.D)(Te))return yt(Te);if((0,be.T)(Te))return function nt(Te){return new X.y(Je=>{for(const vt of Te)if(Je.next(vt),Je.closed)return;Je.complete()})}(Te);if((0,Ze.L)(Te))return function ft(Te){return yt((0,Ze.Q)(Te))}(Te)}throw(0,$e.z)(Te)}function yt(Te){return new X.y(Je=>{(function Rt(Te,Je){var vt,$t,wt,je;return(0,C.mG)(this,void 0,void 0,function*(){try{for(vt=(0,C.KL)(Te);!($t=yield vt.next()).done;)if(Je.next($t.value),Je.closed)return}catch(xt){wt={error:xt}}finally{try{$t&&!$t.done&&(je=vt.return)&&(yield je.call(vt))}finally{if(wt)throw wt.error}}Je.complete()})})(Te,Je).catch(vt=>Je.error(vt))})}},6451:(mn,ot,j)=>{j.d(ot,{T:()=>Ne});var C=j(8189),p=j(8421),K=j(515),X=j(7669),Se=j(8996);function Ne(...$e){const be=(0,X.yG)($e),Ze=(0,X._6)($e,1/0),de=$e;return de.length?1===de.length?(0,p.Xf)(de[0]):(0,C.J)(Ze)((0,Se.D)(de,be)):K.E}},9646:(mn,ot,j)=>{j.d(ot,{of:()=>K});var C=j(7669),p=j(8996);function K(...X){const Se=(0,C.yG)(X);return(0,p.D)(X,Se)}},5403:(mn,ot,j)=>{j.d(ot,{x:()=>p});var C=j(2961);function p(X,Se,Ne,$e,be){return new K(X,Se,Ne,$e,be)}class K extends C.Lv{constructor(Se,Ne,$e,be,Ze,de){super(Se),this.onFinalize=Ze,this.shouldUnsubscribe=de,this._next=Ne?function(ye){try{Ne(ye)}catch(Me){Se.error(Me)}}:super._next,this._error=be?function(ye){try{be(ye)}catch(Me){Se.error(Me)}finally{this.unsubscribe()}}:super._error,this._complete=$e?function(){try{$e()}catch(ye){Se.error(ye)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ne}=this;super.unsubscribe(),!Ne&&(null===(Se=this.onFinalize)||void 0===Se||Se.call(this))}}}},4351:(mn,ot,j)=>{j.d(ot,{b:()=>K});var C=j(5577),p=j(576);function K(X,Se){return(0,p.m)(Se)?(0,C.z)(X,Se,1):(0,C.z)(X,1)}},6590:(mn,ot,j)=>{j.d(ot,{d:()=>K});var C=j(4482),p=j(5403);function K(X){return(0,C.e)((Se,Ne)=>{let $e=!1;Se.subscribe((0,p.x)(Ne,be=>{$e=!0,Ne.next(be)},()=>{$e||Ne.next(X),Ne.complete()}))})}},9300:(mn,ot,j)=>{j.d(ot,{h:()=>K});var C=j(4482),p=j(5403);function K(X,Se){return(0,C.e)((Ne,$e)=>{let be=0;Ne.subscribe((0,p.x)($e,Ze=>X.call(Se,Ze,be++)&&$e.next(Ze)))})}},590:(mn,ot,j)=>{j.d(ot,{P:()=>$e});var C=j(6805),p=j(9300),K=j(5698),X=j(6590),Se=j(8068),Ne=j(4671);function $e(be,Ze){const de=arguments.length>=2;return ye=>ye.pipe(be?(0,p.h)((Me,tt)=>be(Me,tt,ye)):Ne.y,(0,K.q)(1),de?(0,X.d)(Ze):(0,Se.T)(()=>new C.K))}},4004:(mn,ot,j)=>{j.d(ot,{U:()=>K});var C=j(4482),p=j(5403);function K(X,Se){return(0,C.e)((Ne,$e)=>{let be=0;Ne.subscribe((0,p.x)($e,Ze=>{$e.next(X.call(Se,Ze,be++))}))})}},8189:(mn,ot,j)=>{j.d(ot,{J:()=>K});var C=j(5577),p=j(4671);function K(X=1/0){return(0,C.z)(p.y,X)}},5577:(mn,ot,j)=>{j.d(ot,{z:()=>be});var C=j(4004),p=j(8421),K=j(4482),X=j(9672),Se=j(5403),$e=j(576);function be(Ze,de,ye=1/0){return(0,$e.m)(de)?be((Me,tt)=>(0,C.U)((Ye,Nt)=>de(Me,Ye,tt,Nt))((0,p.Xf)(Ze(Me,tt))),ye):("number"==typeof de&&(ye=de),(0,K.e)((Me,tt)=>function Ne(Ze,de,ye,Me,tt,Ye,Nt,Qt){const nt=[];let yt=0,ft=0,Rt=!1;const Te=()=>{Rt&&!nt.length&&!yt&&de.complete()},Je=$t=>yt<Me?vt($t):nt.push($t),vt=$t=>{Ye&&de.next($t),yt++;let wt=!1;(0,p.Xf)(ye($t,ft++)).subscribe((0,Se.x)(de,je=>{tt?.(je),Ye?Je(je):de.next(je)},()=>{wt=!0},void 0,()=>{if(wt)try{for(yt--;nt.length&&yt<Me;){const je=nt.shift();Nt?(0,X.f)(de,Nt,()=>vt(je)):vt(je)}Te()}catch(je){de.error(je)}}))};return Ze.subscribe((0,Se.x)(de,Je,()=>{Rt=!0,Te()})),()=>{Qt?.()}}(Me,tt,Ze,ye)))}},5363:(mn,ot,j)=>{j.d(ot,{Q:()=>X});var C=j(9672),p=j(4482),K=j(5403);function X(Se,Ne=0){return(0,p.e)(($e,be)=>{$e.subscribe((0,K.x)(be,Ze=>(0,C.f)(be,Se,()=>be.next(Ze),Ne),()=>(0,C.f)(be,Se,()=>be.complete(),Ne),Ze=>(0,C.f)(be,Se,()=>be.error(Ze),Ne)))})}},5026:(mn,ot,j)=>{j.d(ot,{R:()=>X});var C=j(4482),p=j(5403);function X(Se,Ne){return(0,C.e)(function K(Se,Ne,$e,be,Ze){return(de,ye)=>{let Me=$e,tt=Ne,Ye=0;de.subscribe((0,p.x)(ye,Nt=>{const Qt=Ye++;tt=Me?Se(tt,Nt,Qt):(Me=!0,Nt),be&&ye.next(tt)},Ze&&(()=>{Me&&ye.next(tt),ye.complete()})))}}(Se,Ne,arguments.length>=2,!0))}},3099:(mn,ot,j)=>{j.d(ot,{B:()=>Se});var C=j(8421),p=j(7579),K=j(2961),X=j(4482);function Se($e={}){const{connector:be=(()=>new p.x),resetOnError:Ze=!0,resetOnComplete:de=!0,resetOnRefCountZero:ye=!0}=$e;return Me=>{let tt,Ye,Nt,Qt=0,nt=!1,yt=!1;const ft=()=>{Ye?.unsubscribe(),Ye=void 0},Rt=()=>{ft(),tt=Nt=void 0,nt=yt=!1},Te=()=>{const Je=tt;Rt(),Je?.unsubscribe()};return(0,X.e)((Je,vt)=>{Qt++,!yt&&!nt&&ft();const $t=Nt=Nt??be();vt.add(()=>{Qt--,0===Qt&&!yt&&!nt&&(Ye=Ne(Te,ye))}),$t.subscribe(vt),!tt&&Qt>0&&(tt=new K.Hp({next:wt=>$t.next(wt),error:wt=>{yt=!0,ft(),Ye=Ne(Rt,Ze,wt),$t.error(wt)},complete:()=>{nt=!0,ft(),Ye=Ne(Rt,de),$t.complete()}}),(0,C.Xf)(Je).subscribe(tt))})(Me)}}function Ne($e,be,...Ze){if(!0===be)return void $e();if(!1===be)return;const de=new K.Hp({next:()=>{de.unsubscribe(),$e()}});return(0,C.Xf)(be(...Ze)).subscribe(de)}},8675:(mn,ot,j)=>{j.d(ot,{O:()=>X});var C=j(7272),p=j(7669),K=j(4482);function X(...Se){const Ne=(0,p.yG)(Se);return(0,K.e)(($e,be)=>{(Ne?(0,C.z)(Se,$e,Ne):(0,C.z)(Se,$e)).subscribe(be)})}},9468:(mn,ot,j)=>{j.d(ot,{R:()=>p});var C=j(4482);function p(K,X=0){return(0,C.e)((Se,Ne)=>{Ne.add(K.schedule(()=>Se.subscribe(Ne),X))})}},3900:(mn,ot,j)=>{j.d(ot,{w:()=>X});var C=j(8421),p=j(4482),K=j(5403);function X(Se,Ne){return(0,p.e)(($e,be)=>{let Ze=null,de=0,ye=!1;const Me=()=>ye&&!Ze&&be.complete();$e.subscribe((0,K.x)(be,tt=>{Ze?.unsubscribe();let Ye=0;const Nt=de++;(0,C.Xf)(Se(tt,Nt)).subscribe(Ze=(0,K.x)(be,Qt=>be.next(Ne?Ne(tt,Qt,Nt,Ye++):Qt),()=>{Ze=null,Me()}))},()=>{ye=!0,Me()}))})}},5698:(mn,ot,j)=>{j.d(ot,{q:()=>X});var C=j(515),p=j(4482),K=j(5403);function X(Se){return Se<=0?()=>C.E:(0,p.e)((Ne,$e)=>{let be=0;Ne.subscribe((0,K.x)($e,Ze=>{++be<=Se&&($e.next(Ze),Se<=be&&$e.complete())}))})}},8505:(mn,ot,j)=>{j.d(ot,{b:()=>Se});var C=j(576),p=j(4482),K=j(5403),X=j(4671);function Se(Ne,$e,be){const Ze=(0,C.m)(Ne)||$e||be?{next:Ne,error:$e,complete:be}:Ne;return Ze?(0,p.e)((de,ye)=>{var Me;null===(Me=Ze.subscribe)||void 0===Me||Me.call(Ze);let tt=!0;de.subscribe((0,K.x)(ye,Ye=>{var Nt;null===(Nt=Ze.next)||void 0===Nt||Nt.call(Ze,Ye),ye.next(Ye)},()=>{var Ye;tt=!1,null===(Ye=Ze.complete)||void 0===Ye||Ye.call(Ze),ye.complete()},Ye=>{var Nt;tt=!1,null===(Nt=Ze.error)||void 0===Nt||Nt.call(Ze,Ye),ye.error(Ye)},()=>{var Ye,Nt;tt&&(null===(Ye=Ze.unsubscribe)||void 0===Ye||Ye.call(Ze)),null===(Nt=Ze.finalize)||void 0===Nt||Nt.call(Ze)}))}):X.y}},8068:(mn,ot,j)=>{j.d(ot,{T:()=>X});var C=j(6805),p=j(4482),K=j(5403);function X(Ne=Se){return(0,p.e)(($e,be)=>{let Ze=!1;$e.subscribe((0,K.x)(be,de=>{Ze=!0,be.next(de)},()=>Ze?be.complete():be.error(Ne())))})}function Se(){return new C.K}},4408:(mn,ot,j)=>{j.d(ot,{o:()=>Se});var C=j(727);class p extends C.w0{constructor($e,be){super()}schedule($e,be=0){return this}}const K={setInterval(Ne,$e,...be){const{delegate:Ze}=K;return Ze?.setInterval?Ze.setInterval(Ne,$e,...be):setInterval(Ne,$e,...be)},clearInterval(Ne){const{delegate:$e}=K;return($e?.clearInterval||clearInterval)(Ne)},delegate:void 0};var X=j(8737);class Se extends p{constructor($e,be){super($e,be),this.scheduler=$e,this.work=be,this.pending=!1}schedule($e,be=0){var Ze;if(this.closed)return this;this.state=$e;const de=this.id,ye=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId(ye,de,be)),this.pending=!0,this.delay=be,this.id=null!==(Ze=this.id)&&void 0!==Ze?Ze:this.requestAsyncId(ye,this.id,be),this}requestAsyncId($e,be,Ze=0){return K.setInterval($e.flush.bind($e,this),Ze)}recycleAsyncId($e,be,Ze=0){if(null!=Ze&&this.delay===Ze&&!1===this.pending)return be;null!=be&&K.clearInterval(be)}execute($e,be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ze=this._execute($e,be);if(Ze)return Ze;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute($e,be){let de,Ze=!1;try{this.work($e)}catch(ye){Ze=!0,de=ye||new Error("Scheduled action threw falsy error")}if(Ze)return this.unsubscribe(),de}unsubscribe(){if(!this.closed){const{id:$e,scheduler:be}=this,{actions:Ze}=be;this.work=this.state=this.scheduler=null,this.pending=!1,(0,X.P)(Ze,this),null!=$e&&(this.id=this.recycleAsyncId(be,$e,null)),this.delay=null,super.unsubscribe()}}}},7565:(mn,ot,j)=>{j.d(ot,{v:()=>K});var C=j(6063);class p{constructor(Se,Ne=p.now){this.schedulerActionCtor=Se,this.now=Ne}schedule(Se,Ne=0,$e){return new this.schedulerActionCtor(this,Se).schedule($e,Ne)}}p.now=C.l.now;class K extends p{constructor(Se,Ne=p.now){super(Se,Ne),this.actions=[],this._active=!1}flush(Se){const{actions:Ne}=this;if(this._active)return void Ne.push(Se);let $e;this._active=!0;do{if($e=Se.execute(Se.state,Se.delay))break}while(Se=Ne.shift());if(this._active=!1,$e){for(;Se=Ne.shift();)Se.unsubscribe();throw $e}}}},4986:(mn,ot,j)=>{j.d(ot,{z:()=>K});var C=j(4408);const K=new(j(7565).v)(C.o)},6063:(mn,ot,j)=>{j.d(ot,{l:()=>C});const C={now:()=>(C.delegate||Date).now(),delegate:void 0}},3410:(mn,ot,j)=>{j.d(ot,{z:()=>C});const C={setTimeout(p,K,...X){const{delegate:Se}=C;return Se?.setTimeout?Se.setTimeout(p,K,...X):setTimeout(p,K,...X)},clearTimeout(p){const{delegate:K}=C;return(K?.clearTimeout||clearTimeout)(p)},delegate:void 0}},2202:(mn,ot,j)=>{j.d(ot,{h:()=>p});const p=function C(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mn,ot,j)=>{j.d(ot,{L:()=>C});const C="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(mn,ot,j)=>{j.d(ot,{K:()=>p});const p=(0,j(3888).d)(K=>function(){K(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(mn,ot,j)=>{j.d(ot,{_6:()=>Ne,jO:()=>X,yG:()=>Se});var C=j(576);function K($e){return $e[$e.length-1]}function X($e){return(0,C.m)(K($e))?$e.pop():void 0}function Se($e){return function p($e){return $e&&(0,C.m)($e.schedule)}(K($e))?$e.pop():void 0}function Ne($e,be){return"number"==typeof K($e)?$e.pop():be}},4742:(mn,ot,j)=>{j.d(ot,{D:()=>Se});const{isArray:C}=Array,{getPrototypeOf:p,prototype:K,keys:X}=Object;function Se($e){if(1===$e.length){const be=$e[0];if(C(be))return{args:be,keys:null};if(function Ne($e){return $e&&"object"==typeof $e&&p($e)===K}(be)){const Ze=X(be);return{args:Ze.map(de=>be[de]),keys:Ze}}}return{args:$e,keys:null}}},8737:(mn,ot,j)=>{function C(p,K){if(p){const X=p.indexOf(K);0<=X&&p.splice(X,1)}}j.d(ot,{P:()=>C})},3888:(mn,ot,j)=>{function C(p){const X=p(Se=>{Error.call(Se),Se.stack=(new Error).stack});return X.prototype=Object.create(Error.prototype),X.prototype.constructor=X,X}j.d(ot,{d:()=>C})},1810:(mn,ot,j)=>{function C(p,K){return p.reduce((X,Se,Ne)=>(X[Se]=K[Ne],X),{})}j.d(ot,{n:()=>C})},2806:(mn,ot,j)=>{j.d(ot,{O:()=>X,x:()=>K});var C=j(2416);let p=null;function K(Se){if(C.v.useDeprecatedSynchronousErrorHandling){const Ne=!p;if(Ne&&(p={errorThrown:!1,error:null}),Se(),Ne){const{errorThrown:$e,error:be}=p;if(p=null,$e)throw be}}else Se()}function X(Se){C.v.useDeprecatedSynchronousErrorHandling&&p&&(p.errorThrown=!0,p.error=Se)}},9672:(mn,ot,j)=>{function C(p,K,X,Se=0,Ne=!1){const $e=K.schedule(function(){X(),Ne?p.add(this.schedule(null,Se)):this.unsubscribe()},Se);if(p.add($e),!Ne)return $e}j.d(ot,{f:()=>C})},4671:(mn,ot,j)=>{function C(p){return p}j.d(ot,{y:()=>C})},1144:(mn,ot,j)=>{j.d(ot,{z:()=>C});const C=p=>p&&"number"==typeof p.length&&"function"!=typeof p},2206:(mn,ot,j)=>{j.d(ot,{D:()=>p});var C=j(576);function p(K){return Symbol.asyncIterator&&(0,C.m)(K?.[Symbol.asyncIterator])}},576:(mn,ot,j)=>{function C(p){return"function"==typeof p}j.d(ot,{m:()=>C})},3670:(mn,ot,j)=>{j.d(ot,{c:()=>K});var C=j(8822),p=j(576);function K(X){return(0,p.m)(X[C.L])}},6495:(mn,ot,j)=>{j.d(ot,{T:()=>K});var C=j(2202),p=j(576);function K(X){return(0,p.m)(X?.[C.h])}},8239:(mn,ot,j)=>{j.d(ot,{t:()=>p});var C=j(576);function p(K){return(0,C.m)(K?.then)}},3260:(mn,ot,j)=>{j.d(ot,{L:()=>X,Q:()=>K});var C=j(655),p=j(576);function K(Se){return(0,C.FC)(this,arguments,function*(){const $e=Se.getReader();try{for(;;){const{value:be,done:Ze}=yield(0,C.qq)($e.read());if(Ze)return yield(0,C.qq)(void 0);yield yield(0,C.qq)(be)}}finally{$e.releaseLock()}})}function X(Se){return(0,p.m)(Se?.getReader)}},4482:(mn,ot,j)=>{j.d(ot,{A:()=>p,e:()=>K});var C=j(576);function p(X){return(0,C.m)(X?.lift)}function K(X){return Se=>{if(p(Se))return Se.lift(function(Ne){try{return X(Ne,this)}catch($e){this.error($e)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(mn,ot,j)=>{j.d(ot,{Z:()=>X});var C=j(4004);const{isArray:p}=Array;function X(Se){return(0,C.U)(Ne=>function K(Se,Ne){return p(Ne)?Se(...Ne):Se(Ne)}(Se,Ne))}},9635:(mn,ot,j)=>{j.d(ot,{U:()=>K,z:()=>p});var C=j(4671);function p(...X){return K(X)}function K(X){return 0===X.length?C.y:1===X.length?X[0]:function(Ne){return X.reduce(($e,be)=>be($e),Ne)}}},7849:(mn,ot,j)=>{j.d(ot,{h:()=>K});var C=j(2416),p=j(3410);function K(X){p.z.setTimeout(()=>{const{onUnhandledError:Se}=C.v;if(!Se)throw X;Se(X)})}},4532:(mn,ot,j)=>{function C(p){return new TypeError(`You provided ${null!==p&&"object"==typeof p?"an invalid object":`'${p}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(ot,{z:()=>C})},655:(mn,ot,j)=>{function X(rt,at){var lt={};for(var bt in rt)Object.prototype.hasOwnProperty.call(rt,bt)&&at.indexOf(bt)<0&&(lt[bt]=rt[bt]);if(null!=rt&&"function"==typeof Object.getOwnPropertySymbols){var Ht=0;for(bt=Object.getOwnPropertySymbols(rt);Ht<bt.length;Ht++)at.indexOf(bt[Ht])<0&&Object.prototype.propertyIsEnumerable.call(rt,bt[Ht])&&(lt[bt[Ht]]=rt[bt[Ht]])}return lt}function Me(rt,at,lt,bt){return new(lt||(lt=Promise))(function(It,Gt){function Ct(tr){try{Sn(bt.next(tr))}catch(_n){Gt(_n)}}function rn(tr){try{Sn(bt.throw(tr))}catch(_n){Gt(_n)}}function Sn(tr){tr.done?It(tr.value):function Ht(It){return It instanceof lt?It:new lt(function(Gt){Gt(It)})}(tr.value).then(Ct,rn)}Sn((bt=bt.apply(rt,at||[])).next())})}function Te(rt){return this instanceof Te?(this.v=rt,this):new Te(rt)}function Je(rt,at,lt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ht,bt=lt.apply(rt,at||[]),It=[];return Ht={},Gt("next"),Gt("throw"),Gt("return"),Ht[Symbol.asyncIterator]=function(){return this},Ht;function Gt(xn){bt[xn]&&(Ht[xn]=function(nr){return new Promise(function(pr,zr){It.push([xn,nr,pr,zr])>1||Ct(xn,nr)})})}function Ct(xn,nr){try{!function rn(xn){xn.value instanceof Te?Promise.resolve(xn.value.v).then(Sn,tr):_n(It[0][2],xn)}(bt[xn](nr))}catch(pr){_n(It[0][3],pr)}}function Sn(xn){Ct("next",xn)}function tr(xn){Ct("throw",xn)}function _n(xn,nr){xn(nr),It.shift(),It.length&&Ct(It[0][0],It[0][1])}}function $t(rt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lt,at=rt[Symbol.asyncIterator];return at?at.call(rt):(rt=function Qt(rt){var at="function"==typeof Symbol&&Symbol.iterator,lt=at&&rt[at],bt=0;if(lt)return lt.call(rt);if(rt&&"number"==typeof rt.length)return{next:function(){return rt&&bt>=rt.length&&(rt=void 0),{value:rt&&rt[bt++],done:!rt}}};throw new TypeError(at?"Object is not iterable.":"Symbol.iterator is not defined.")}(rt),lt={},bt("next"),bt("throw"),bt("return"),lt[Symbol.asyncIterator]=function(){return this},lt);function bt(It){lt[It]=rt[It]&&function(Gt){return new Promise(function(Ct,rn){!function Ht(It,Gt,Ct,rn){Promise.resolve(rn).then(function(Sn){It({value:Sn,done:Ct})},Gt)}(Ct,rn,(Gt=rt[It](Gt)).done,Gt.value)})}}}j.d(ot,{FC:()=>Je,KL:()=>$t,_T:()=>X,mG:()=>Me,qq:()=>Te})},6895:(mn,ot,j)=>{j.d(ot,{Do:()=>ft,EM:()=>So,HT:()=>X,JF:()=>et,K0:()=>Ne,Mx:()=>ei,O5:()=>he,Ov:()=>ps,PC:()=>br,PM:()=>jo,S$:()=>Qt,V_:()=>Ze,Ye:()=>Rt,b0:()=>yt,bD:()=>tu,ez:()=>zs,mk:()=>zn,q:()=>K,sg:()=>Zn,uU:()=>Yr,w_:()=>Se});var C=j(4650);let p=null;function K(){return p}function X(k){p||(p=k)}class Se{}const Ne=new C.OlP("DocumentToken");let $e=(()=>{class k{historyGo(L){throw new Error("Not implemented")}}return k.\u0275fac=function(L){return new(L||k)},k.\u0275prov=C.Yz7({token:k,factory:function(){return function be(){return(0,C.LFG)(de)}()},providedIn:"platform"}),k})();const Ze=new C.OlP("Location Initialized");let de=(()=>{class k extends $e{constructor(L){super(),this._doc=L,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return K().getBaseHref(this._doc)}onPopState(L){const ie=K().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("popstate",L,!1),()=>ie.removeEventListener("popstate",L)}onHashChange(L){const ie=K().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("hashchange",L,!1),()=>ie.removeEventListener("hashchange",L)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(L){this._location.pathname=L}pushState(L,ie,xe){ye()?this._history.pushState(L,ie,xe):this._location.hash=xe}replaceState(L,ie,xe){ye()?this._history.replaceState(L,ie,xe):this._location.hash=xe}forward(){this._history.forward()}back(){this._history.back()}historyGo(L=0){this._history.go(L)}getState(){return this._history.state}}return k.\u0275fac=function(L){return new(L||k)(C.LFG(Ne))},k.\u0275prov=C.Yz7({token:k,factory:function(){return function Me(){return new de((0,C.LFG)(Ne))}()},providedIn:"platform"}),k})();function ye(){return!!window.history.pushState}function tt(k,G){if(0==k.length)return G;if(0==G.length)return k;let L=0;return k.endsWith("/")&&L++,G.startsWith("/")&&L++,2==L?k+G.substring(1):1==L?k+G:k+"/"+G}function Ye(k){const G=k.match(/#|\?|$/),L=G&&G.index||k.length;return k.slice(0,L-("/"===k[L-1]?1:0))+k.slice(L)}function Nt(k){return k&&"?"!==k[0]?"?"+k:k}let Qt=(()=>{class k{historyGo(L){throw new Error("Not implemented")}}return k.\u0275fac=function(L){return new(L||k)},k.\u0275prov=C.Yz7({token:k,factory:function(){return(0,C.f3M)(yt)},providedIn:"root"}),k})();const nt=new C.OlP("appBaseHref");let yt=(()=>{class k extends Qt{constructor(L,ie){super(),this._platformLocation=L,this._removeListenerFns=[],this._baseHref=ie??this._platformLocation.getBaseHrefFromDOM()??(0,C.f3M)(Ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}prepareExternalUrl(L){return tt(this._baseHref,L)}path(L=!1){const ie=this._platformLocation.pathname+Nt(this._platformLocation.search),xe=this._platformLocation.hash;return xe&&L?`${ie}${xe}`:ie}pushState(L,ie,xe,pt){const Ft=this.prepareExternalUrl(xe+Nt(pt));this._platformLocation.pushState(L,ie,Ft)}replaceState(L,ie,xe,pt){const Ft=this.prepareExternalUrl(xe+Nt(pt));this._platformLocation.replaceState(L,ie,Ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}}return k.\u0275fac=function(L){return new(L||k)(C.LFG($e),C.LFG(nt,8))},k.\u0275prov=C.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),ft=(()=>{class k extends Qt{constructor(L,ie){super(),this._platformLocation=L,this._baseHref="",this._removeListenerFns=[],null!=ie&&(this._baseHref=ie)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(L){this._removeListenerFns.push(this._platformLocation.onPopState(L),this._platformLocation.onHashChange(L))}getBaseHref(){return this._baseHref}path(L=!1){let ie=this._platformLocation.hash;return null==ie&&(ie="#"),ie.length>0?ie.substring(1):ie}prepareExternalUrl(L){const ie=tt(this._baseHref,L);return ie.length>0?"#"+ie:ie}pushState(L,ie,xe,pt){let Ft=this.prepareExternalUrl(xe+Nt(pt));0==Ft.length&&(Ft=this._platformLocation.pathname),this._platformLocation.pushState(L,ie,Ft)}replaceState(L,ie,xe,pt){let Ft=this.prepareExternalUrl(xe+Nt(pt));0==Ft.length&&(Ft=this._platformLocation.pathname),this._platformLocation.replaceState(L,ie,Ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(L=0){this._platformLocation.historyGo?.(L)}}return k.\u0275fac=function(L){return new(L||k)(C.LFG($e),C.LFG(nt,8))},k.\u0275prov=C.Yz7({token:k,factory:k.\u0275fac}),k})(),Rt=(()=>{class k{constructor(L){this._subject=new C.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=L;const ie=this._locationStrategy.getBaseHref();this._basePath=function $t(k){if(new RegExp("^(https?:)?//").test(k)){const[,L]=k.split(/\/\/[^\/]+/);return L}return k}(Ye(vt(ie))),this._locationStrategy.onPopState(xe=>{this._subject.emit({url:this.path(!0),pop:!0,state:xe.state,type:xe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(L=!1){return this.normalize(this._locationStrategy.path(L))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(L,ie=""){return this.path()==this.normalize(L+Nt(ie))}normalize(L){return k.stripTrailingSlash(function Je(k,G){if(!k||!G.startsWith(k))return G;const L=G.substring(k.length);return""===L||["/",";","?","#"].includes(L[0])?L:G}(this._basePath,vt(L)))}prepareExternalUrl(L){return L&&"/"!==L[0]&&(L="/"+L),this._locationStrategy.prepareExternalUrl(L)}go(L,ie="",xe=null){this._locationStrategy.pushState(xe,"",L,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+Nt(ie)),xe)}replaceState(L,ie="",xe=null){this._locationStrategy.replaceState(xe,"",L,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(L+Nt(ie)),xe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(L=0){this._locationStrategy.historyGo?.(L)}onUrlChange(L){return this._urlChangeListeners.push(L),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ie=>{this._notifyUrlChangeListeners(ie.url,ie.state)})),()=>{const ie=this._urlChangeListeners.indexOf(L);this._urlChangeListeners.splice(ie,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(L="",ie){this._urlChangeListeners.forEach(xe=>xe(L,ie))}subscribe(L,ie,xe){return this._subject.subscribe({next:L,error:ie,complete:xe})}}return k.normalizeQueryParams=Nt,k.joinWithSlash=tt,k.stripTrailingSlash=Ye,k.\u0275fac=function(L){return new(L||k)(C.LFG(Qt))},k.\u0275prov=C.Yz7({token:k,factory:function(){return function Te(){return new Rt((0,C.LFG)(Qt))}()},providedIn:"root"}),k})();function vt(k){return k.replace(/\/index.html$/,"")}var ln=(()=>((ln=ln||{})[ln.Format=0]="Format",ln[ln.Standalone=1]="Standalone",ln))(),jt=(()=>((jt=jt||{})[jt.Narrow=0]="Narrow",jt[jt.Abbreviated=1]="Abbreviated",jt[jt.Wide=2]="Wide",jt[jt.Short=3]="Short",jt))(),Kt=(()=>((Kt=Kt||{})[Kt.Short=0]="Short",Kt[Kt.Medium=1]="Medium",Kt[Kt.Long=2]="Long",Kt[Kt.Full=3]="Full",Kt))(),qt=(()=>((qt=qt||{})[qt.Decimal=0]="Decimal",qt[qt.Group=1]="Group",qt[qt.List=2]="List",qt[qt.PercentSign=3]="PercentSign",qt[qt.PlusSign=4]="PlusSign",qt[qt.MinusSign=5]="MinusSign",qt[qt.Exponential=6]="Exponential",qt[qt.SuperscriptingExponent=7]="SuperscriptingExponent",qt[qt.PerMille=8]="PerMille",qt[qt.Infinity=9]="Infinity",qt[qt.NaN=10]="NaN",qt[qt.TimeSeparator=11]="TimeSeparator",qt[qt.CurrencyDecimal=12]="CurrencyDecimal",qt[qt.CurrencyGroup=13]="CurrencyGroup",qt))();function rn(k,G){return gr((0,C.cg1)(k)[C.wAp.DateFormat],G)}function Sn(k,G){return gr((0,C.cg1)(k)[C.wAp.TimeFormat],G)}function tr(k,G){return gr((0,C.cg1)(k)[C.wAp.DateTimeFormat],G)}function _n(k,G){const L=(0,C.cg1)(k),ie=L[C.wAp.NumberSymbols][G];if(typeof ie>"u"){if(G===qt.CurrencyDecimal)return L[C.wAp.NumberSymbols][qt.Decimal];if(G===qt.CurrencyGroup)return L[C.wAp.NumberSymbols][qt.Group]}return ie}function pn(k){if(!k[C.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${k[C.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function gr(k,G){for(let L=G;L>-1;L--)if(typeof k[L]<"u")return k[L];throw new Error("Locale data API: locale data undefined")}function cn(k){const[G,L]=k.split(":");return{hours:+G,minutes:+L}}const Fr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Gr={},an=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var dn=(()=>((dn=dn||{})[dn.Short=0]="Short",dn[dn.ShortGMT=1]="ShortGMT",dn[dn.Long=2]="Long",dn[dn.Extended=3]="Extended",dn))(),hn=(()=>((hn=hn||{})[hn.FullYear=0]="FullYear",hn[hn.Month=1]="Month",hn[hn.Date=2]="Date",hn[hn.Hours=3]="Hours",hn[hn.Minutes=4]="Minutes",hn[hn.Seconds=5]="Seconds",hn[hn.FractionalSeconds=6]="FractionalSeconds",hn[hn.Day=7]="Day",hn))(),Yt=(()=>((Yt=Yt||{})[Yt.DayPeriods=0]="DayPeriods",Yt[Yt.Days=1]="Days",Yt[Yt.Months=2]="Months",Yt[Yt.Eras=3]="Eras",Yt))();function lr(k,G,L,ie){let xe=function Y(k){if(me(k))return k;if("number"==typeof k&&!isNaN(k))return new Date(k);if("string"==typeof k){if(k=k.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(k)){const[xe,pt=1,Ft=1]=k.split("-").map(Rn=>+Rn);return yr(xe,pt-1,Ft)}const L=parseFloat(k);if(!isNaN(k-L))return new Date(L);let ie;if(ie=k.match(Fr))return function Ue(k){const G=new Date(0);let L=0,ie=0;const xe=k[8]?G.setUTCFullYear:G.setFullYear,pt=k[8]?G.setUTCHours:G.setHours;k[9]&&(L=Number(k[9]+k[10]),ie=Number(k[9]+k[11])),xe.call(G,Number(k[1]),Number(k[2])-1,Number(k[3]));const Ft=Number(k[4]||0)-L,Rn=Number(k[5]||0)-ie,Qr=Number(k[6]||0),ar=Math.floor(1e3*parseFloat("0."+(k[7]||0)));return pt.call(G,Ft,Rn,Qr,ar),G}(ie)}const G=new Date(k);if(!me(G))throw new Error(`Unable to convert "${k}" into a date`);return G}(k);G=Er(L,G)||G;let Rn,Ft=[];for(;G;){if(Rn=an.exec(G),!Rn){Ft.push(G);break}{Ft=Ft.concat(Rn.slice(1));const Or=Ft.pop();if(!Or)break;G=Or}}let Qr=xe.getTimezoneOffset();ie&&(Qr=_e(ie,Qr),xe=function re(k,G,L){const ie=L?-1:1,xe=k.getTimezoneOffset();return function ee(k,G){return(k=new Date(k.getTime())).setMinutes(k.getMinutes()+G),k}(k,ie*(_e(G,xe)-xe))}(xe,ie,!0));let ar="";return Ft.forEach(Or=>{const Dr=function ge(k){if(ct[k])return ct[k];let G;switch(k){case"G":case"GG":case"GGG":G=Bn(Yt.Eras,jt.Abbreviated);break;case"GGGG":G=Bn(Yt.Eras,jt.Wide);break;case"GGGGG":G=Bn(Yt.Eras,jt.Narrow);break;case"y":G=Nn(hn.FullYear,1,0,!1,!0);break;case"yy":G=Nn(hn.FullYear,2,0,!0,!0);break;case"yyy":G=Nn(hn.FullYear,3,0,!1,!0);break;case"yyyy":G=Nn(hn.FullYear,4,0,!1,!0);break;case"Y":G=gt(1);break;case"YY":G=gt(2,!0);break;case"YYY":G=gt(3);break;case"YYYY":G=gt(4);break;case"M":case"L":G=Nn(hn.Month,1,1);break;case"MM":case"LL":G=Nn(hn.Month,2,1);break;case"MMM":G=Bn(Yt.Months,jt.Abbreviated);break;case"MMMM":G=Bn(Yt.Months,jt.Wide);break;case"MMMMM":G=Bn(Yt.Months,jt.Narrow);break;case"LLL":G=Bn(Yt.Months,jt.Abbreviated,ln.Standalone);break;case"LLLL":G=Bn(Yt.Months,jt.Wide,ln.Standalone);break;case"LLLLL":G=Bn(Yt.Months,jt.Narrow,ln.Standalone);break;case"w":G=Pe(1);break;case"ww":G=Pe(2);break;case"W":G=Pe(1,!0);break;case"d":G=Nn(hn.Date,1);break;case"dd":G=Nn(hn.Date,2);break;case"c":case"cc":G=Nn(hn.Day,1);break;case"ccc":G=Bn(Yt.Days,jt.Abbreviated,ln.Standalone);break;case"cccc":G=Bn(Yt.Days,jt.Wide,ln.Standalone);break;case"ccccc":G=Bn(Yt.Days,jt.Narrow,ln.Standalone);break;case"cccccc":G=Bn(Yt.Days,jt.Short,ln.Standalone);break;case"E":case"EE":case"EEE":G=Bn(Yt.Days,jt.Abbreviated);break;case"EEEE":G=Bn(Yt.Days,jt.Wide);break;case"EEEEE":G=Bn(Yt.Days,jt.Narrow);break;case"EEEEEE":G=Bn(Yt.Days,jt.Short);break;case"a":case"aa":case"aaa":G=Bn(Yt.DayPeriods,jt.Abbreviated);break;case"aaaa":G=Bn(Yt.DayPeriods,jt.Wide);break;case"aaaaa":G=Bn(Yt.DayPeriods,jt.Narrow);break;case"b":case"bb":case"bbb":G=Bn(Yt.DayPeriods,jt.Abbreviated,ln.Standalone,!0);break;case"bbbb":G=Bn(Yt.DayPeriods,jt.Wide,ln.Standalone,!0);break;case"bbbbb":G=Bn(Yt.DayPeriods,jt.Narrow,ln.Standalone,!0);break;case"B":case"BB":case"BBB":G=Bn(Yt.DayPeriods,jt.Abbreviated,ln.Format,!0);break;case"BBBB":G=Bn(Yt.DayPeriods,jt.Wide,ln.Format,!0);break;case"BBBBB":G=Bn(Yt.DayPeriods,jt.Narrow,ln.Format,!0);break;case"h":G=Nn(hn.Hours,1,-12);break;case"hh":G=Nn(hn.Hours,2,-12);break;case"H":G=Nn(hn.Hours,1);break;case"HH":G=Nn(hn.Hours,2);break;case"m":G=Nn(hn.Minutes,1);break;case"mm":G=Nn(hn.Minutes,2);break;case"s":G=Nn(hn.Seconds,1);break;case"ss":G=Nn(hn.Seconds,2);break;case"S":G=Nn(hn.FractionalSeconds,1);break;case"SS":G=Nn(hn.FractionalSeconds,2);break;case"SSS":G=Nn(hn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":G=Hn(dn.Short);break;case"ZZZZZ":G=Hn(dn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":G=Hn(dn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":G=Hn(dn.Long);break;default:return null}return ct[k]=G,G}(Or);ar+=Dr?Dr(xe,L,Qr):"''"===Or?"'":Or.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),ar}function yr(k,G,L){const ie=new Date(0);return ie.setFullYear(k,G,L),ie.setHours(0,0,0),ie}function Er(k,G){const L=function at(k){return(0,C.cg1)(k)[C.wAp.LocaleId]}(k);if(Gr[L]=Gr[L]||{},Gr[L][G])return Gr[L][G];let ie="";switch(G){case"shortDate":ie=rn(k,Kt.Short);break;case"mediumDate":ie=rn(k,Kt.Medium);break;case"longDate":ie=rn(k,Kt.Long);break;case"fullDate":ie=rn(k,Kt.Full);break;case"shortTime":ie=Sn(k,Kt.Short);break;case"mediumTime":ie=Sn(k,Kt.Medium);break;case"longTime":ie=Sn(k,Kt.Long);break;case"fullTime":ie=Sn(k,Kt.Full);break;case"short":const xe=Er(k,"shortTime"),pt=Er(k,"shortDate");ie=Vr(tr(k,Kt.Short),[xe,pt]);break;case"medium":const Ft=Er(k,"mediumTime"),Rn=Er(k,"mediumDate");ie=Vr(tr(k,Kt.Medium),[Ft,Rn]);break;case"long":const Qr=Er(k,"longTime"),ar=Er(k,"longDate");ie=Vr(tr(k,Kt.Long),[Qr,ar]);break;case"full":const Or=Er(k,"fullTime"),Dr=Er(k,"fullDate");ie=Vr(tr(k,Kt.Full),[Or,Dr])}return ie&&(Gr[L][G]=ie),ie}function Vr(k,G){return G&&(k=k.replace(/\{([^}]+)}/g,function(L,ie){return null!=G&&ie in G?G[ie]:L})),k}function ri(k,G,L="-",ie,xe){let pt="";(k<0||xe&&k<=0)&&(xe?k=1-k:(k=-k,pt=L));let Ft=String(k);for(;Ft.length<G;)Ft="0"+Ft;return ie&&(Ft=Ft.slice(Ft.length-G)),pt+Ft}function Nn(k,G,L=0,ie=!1,xe=!1){return function(pt,Ft){let Rn=function qr(k,G){switch(k){case hn.FullYear:return G.getFullYear();case hn.Month:return G.getMonth();case hn.Date:return G.getDate();case hn.Hours:return G.getHours();case hn.Minutes:return G.getMinutes();case hn.Seconds:return G.getSeconds();case hn.FractionalSeconds:return G.getMilliseconds();case hn.Day:return G.getDay();default:throw new Error(`Unknown DateType value "${k}".`)}}(k,pt);if((L>0||Rn>-L)&&(Rn+=L),k===hn.Hours)0===Rn&&-12===L&&(Rn=12);else if(k===hn.FractionalSeconds)return function Wr(k,G){return ri(k,3).substring(0,G)}(Rn,G);const Qr=_n(Ft,qt.MinusSign);return ri(Rn,G,Qr,ie,xe)}}function Bn(k,G,L=ln.Format,ie=!1){return function(xe,pt){return function jn(k,G,L,ie,xe,pt){switch(L){case Yt.Months:return function Ht(k,G,L){const ie=(0,C.cg1)(k),pt=gr([ie[C.wAp.MonthsFormat],ie[C.wAp.MonthsStandalone]],G);return gr(pt,L)}(G,xe,ie)[k.getMonth()];case Yt.Days:return function bt(k,G,L){const ie=(0,C.cg1)(k),pt=gr([ie[C.wAp.DaysFormat],ie[C.wAp.DaysStandalone]],G);return gr(pt,L)}(G,xe,ie)[k.getDay()];case Yt.DayPeriods:const Ft=k.getHours(),Rn=k.getMinutes();if(pt){const ar=function Nr(k){const G=(0,C.cg1)(k);return pn(G),(G[C.wAp.ExtraData][2]||[]).map(ie=>"string"==typeof ie?cn(ie):[cn(ie[0]),cn(ie[1])])}(G),Or=function Sr(k,G,L){const ie=(0,C.cg1)(k);pn(ie);const pt=gr([ie[C.wAp.ExtraData][0],ie[C.wAp.ExtraData][1]],G)||[];return gr(pt,L)||[]}(G,xe,ie),Dr=ar.findIndex(Ri=>{if(Array.isArray(Ri)){const[mi,Lt]=Ri,fi=Ft>=mi.hours&&Rn>=mi.minutes,wi=Ft<Lt.hours||Ft===Lt.hours&&Rn<Lt.minutes;if(mi.hours<Lt.hours){if(fi&&wi)return!0}else if(fi||wi)return!0}else if(Ri.hours===Ft&&Ri.minutes===Rn)return!0;return!1});if(-1!==Dr)return Or[Dr]}return function lt(k,G,L){const ie=(0,C.cg1)(k),pt=gr([ie[C.wAp.DayPeriodsFormat],ie[C.wAp.DayPeriodsStandalone]],G);return gr(pt,L)}(G,xe,ie)[Ft<12?0:1];case Yt.Eras:return function It(k,G){return gr((0,C.cg1)(k)[C.wAp.Eras],G)}(G,ie)[k.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${L}`)}}(xe,pt,k,G,L,ie)}}function Hn(k){return function(G,L,ie){const xe=-1*ie,pt=_n(L,qt.MinusSign),Ft=xe>0?Math.floor(xe/60):Math.ceil(xe/60);switch(k){case dn.Short:return(xe>=0?"+":"")+ri(Ft,2,pt)+ri(Math.abs(xe%60),2,pt);case dn.ShortGMT:return"GMT"+(xe>=0?"+":"")+ri(Ft,1,pt);case dn.Long:return"GMT"+(xe>=0?"+":"")+ri(Ft,2,pt)+":"+ri(Math.abs(xe%60),2,pt);case dn.Extended:return 0===ie?"Z":(xe>=0?"+":"")+ri(Ft,2,pt)+":"+ri(Math.abs(xe%60),2,pt);default:throw new Error(`Unknown zone width "${k}"`)}}}const xr=0,Jn=4;function De(k){return yr(k.getFullYear(),k.getMonth(),k.getDate()+(Jn-k.getDay()))}function Pe(k,G=!1){return function(L,ie){let xe;if(G){const pt=new Date(L.getFullYear(),L.getMonth(),1).getDay()-1,Ft=L.getDate();xe=1+Math.floor((Ft+pt)/7)}else{const pt=De(L),Ft=function Qe(k){const G=yr(k,xr,1).getDay();return yr(k,0,1+(G<=Jn?Jn:Jn+7)-G)}(pt.getFullYear()),Rn=pt.getTime()-Ft.getTime();xe=1+Math.round(Rn/6048e5)}return ri(xe,k,_n(ie,qt.MinusSign))}}function gt(k,G=!1){return function(L,ie){return ri(De(L).getFullYear(),k,_n(ie,qt.MinusSign),G)}}const ct={};function _e(k,G){k=k.replace(/:/g,"");const L=Date.parse("Jan 01, 1970 00:00:00 "+k)/6e4;return isNaN(L)?G:L}function me(k){return k instanceof Date&&!isNaN(k.valueOf())}function ei(k,G){G=encodeURIComponent(G);for(const L of k.split(";")){const ie=L.indexOf("="),[xe,pt]=-1==ie?[L,""]:[L.slice(0,ie),L.slice(ie+1)];if(xe.trim()===G)return decodeURIComponent(pt)}return null}const Lr=/\s+/,Zt=[];let zn=(()=>{class k{constructor(L,ie,xe,pt){this._iterableDiffers=L,this._keyValueDiffers=ie,this._ngEl=xe,this._renderer=pt,this.initialClasses=Zt,this.stateMap=new Map}set klass(L){this.initialClasses=null!=L?L.trim().split(Lr):Zt}set ngClass(L){this.rawClass="string"==typeof L?L.trim().split(Lr):L}ngDoCheck(){for(const ie of this.initialClasses)this._updateState(ie,!0);const L=this.rawClass;if(Array.isArray(L)||L instanceof Set)for(const ie of L)this._updateState(ie,!0);else if(null!=L)for(const ie of Object.keys(L))this._updateState(ie,Boolean(L[ie]));this._applyStateDiff()}_updateState(L,ie){const xe=this.stateMap.get(L);void 0!==xe?(xe.enabled!==ie&&(xe.changed=!0,xe.enabled=ie),xe.touched=!0):this.stateMap.set(L,{enabled:ie,changed:!0,touched:!0})}_applyStateDiff(){for(const L of this.stateMap){const ie=L[0],xe=L[1];xe.changed?(this._toggleClass(ie,xe.enabled),xe.changed=!1):xe.touched||(xe.enabled&&this._toggleClass(ie,!1),this.stateMap.delete(ie)),xe.touched=!1}}_toggleClass(L,ie){(L=L.trim()).length>0&&L.split(Lr).forEach(xe=>{ie?this._renderer.addClass(this._ngEl.nativeElement,xe):this._renderer.removeClass(this._ngEl.nativeElement,xe)})}}return k.\u0275fac=function(L){return new(L||k)(C.Y36(C.ZZ4),C.Y36(C.aQg),C.Y36(C.SBq),C.Y36(C.Qsj))},k.\u0275dir=C.lG2({type:k,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),k})();class Xn{constructor(G,L,ie,xe){this.$implicit=G,this.ngForOf=L,this.index=ie,this.count=xe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Zn=(()=>{class k{set ngForOf(L){this._ngForOf=L,this._ngForOfDirty=!0}set ngForTrackBy(L){this._trackByFn=L}get ngForTrackBy(){return this._trackByFn}constructor(L,ie,xe){this._viewContainer=L,this._template=ie,this._differs=xe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(L){L&&(this._template=L)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const L=this._ngForOf;!this._differ&&L&&(this._differ=this._differs.find(L).create(this.ngForTrackBy))}if(this._differ){const L=this._differ.diff(this._ngForOf);L&&this._applyChanges(L)}}_applyChanges(L){const ie=this._viewContainer;L.forEachOperation((xe,pt,Ft)=>{if(null==xe.previousIndex)ie.createEmbeddedView(this._template,new Xn(xe.item,this._ngForOf,-1,-1),null===Ft?void 0:Ft);else if(null==Ft)ie.remove(null===pt?void 0:pt);else if(null!==pt){const Rn=ie.get(pt);ie.move(Rn,Ft),fe(Rn,xe)}});for(let xe=0,pt=ie.length;xe<pt;xe++){const Rn=ie.get(xe).context;Rn.index=xe,Rn.count=pt,Rn.ngForOf=this._ngForOf}L.forEachIdentityChange(xe=>{fe(ie.get(xe.currentIndex),xe)})}static ngTemplateContextGuard(L,ie){return!0}}return k.\u0275fac=function(L){return new(L||k)(C.Y36(C.s_b),C.Y36(C.Rgc),C.Y36(C.ZZ4))},k.\u0275dir=C.lG2({type:k,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),k})();function fe(k,G){k.context.$implicit=G.item}let he=(()=>{class k{constructor(L,ie){this._viewContainer=L,this._context=new Ie,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ie}set ngIf(L){this._context.$implicit=this._context.ngIf=L,this._updateView()}set ngIfThen(L){He("ngIfThen",L),this._thenTemplateRef=L,this._thenViewRef=null,this._updateView()}set ngIfElse(L){He("ngIfElse",L),this._elseTemplateRef=L,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(L,ie){return!0}}return k.\u0275fac=function(L){return new(L||k)(C.Y36(C.s_b),C.Y36(C.Rgc))},k.\u0275dir=C.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),k})();class Ie{constructor(){this.$implicit=null,this.ngIf=null}}function He(k,G){if(G&&!G.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,C.AaK)(G)}'.`)}let br=(()=>{class k{constructor(L,ie,xe){this._ngEl=L,this._differs=ie,this._renderer=xe,this._ngStyle=null,this._differ=null}set ngStyle(L){this._ngStyle=L,!this._differ&&L&&(this._differ=this._differs.find(L).create())}ngDoCheck(){if(this._differ){const L=this._differ.diff(this._ngStyle);L&&this._applyChanges(L)}}_setStyle(L,ie){const[xe,pt]=L.split("."),Ft=-1===xe.indexOf("-")?void 0:C.JOm.DashCase;null!=ie?this._renderer.setStyle(this._ngEl.nativeElement,xe,pt?`${ie}${pt}`:ie,Ft):this._renderer.removeStyle(this._ngEl.nativeElement,xe,Ft)}_applyChanges(L){L.forEachRemovedItem(ie=>this._setStyle(ie.key,null)),L.forEachAddedItem(ie=>this._setStyle(ie.key,ie.currentValue)),L.forEachChangedItem(ie=>this._setStyle(ie.key,ie.currentValue))}}return k.\u0275fac=function(L){return new(L||k)(C.Y36(C.SBq),C.Y36(C.aQg),C.Y36(C.Qsj))},k.\u0275dir=C.lG2({type:k,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),k})();function Ni(k,G){return new C.vHH(2100,!1)}class Ss{createSubscription(G,L){return G.subscribe({next:L,error:ie=>{throw ie}})}dispose(G){G.unsubscribe()}}class Ia{createSubscription(G,L){return G.then(L,ie=>{throw ie})}dispose(G){}}const Js=new Ia,uo=new Ss;let ps=(()=>{class k{constructor(L){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=L}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(L){return this._obj?L!==this._obj?(this._dispose(),this.transform(L)):this._latestValue:(L&&this._subscribe(L),this._latestValue)}_subscribe(L){this._obj=L,this._strategy=this._selectStrategy(L),this._subscription=this._strategy.createSubscription(L,ie=>this._updateLatestValue(L,ie))}_selectStrategy(L){if((0,C.QGY)(L))return Js;if((0,C.F4k)(L))return uo;throw Ni()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(L,ie){L===this._obj&&(this._latestValue=ie,this._ref.markForCheck())}}return k.\u0275fac=function(L){return new(L||k)(C.Y36(C.sBO,16))},k.\u0275pipe=C.Yjl({name:"async",type:k,pure:!1,standalone:!0}),k})();const bo=new C.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),gs=new C.OlP("DATE_PIPE_DEFAULT_OPTIONS");let Yr=(()=>{class k{constructor(L,ie,xe){this.locale=L,this.defaultTimezone=ie,this.defaultOptions=xe}transform(L,ie,xe,pt){if(null==L||""===L||L!=L)return null;try{return lr(L,ie??this.defaultOptions?.dateFormat??"mediumDate",pt||this.locale,xe??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(Ft){throw Ni()}}}return k.\u0275fac=function(L){return new(L||k)(C.Y36(C.soG,16),C.Y36(bo,24),C.Y36(gs,24))},k.\u0275pipe=C.Yjl({name:"date",type:k,pure:!0,standalone:!0}),k})(),zs=(()=>{class k{}return k.\u0275fac=function(L){return new(L||k)},k.\u0275mod=C.oAB({type:k}),k.\u0275inj=C.cJS({}),k})();const tu="browser",lo="server";function jo(k){return k===lo}let So=(()=>{class k{}return k.\u0275prov=(0,C.Yz7)({token:k,providedIn:"root",factory:()=>new mr((0,C.LFG)(Ne),window)}),k})();class mr{constructor(G,L){this.document=G,this.window=L,this.offset=()=>[0,0]}setOffset(G){this.offset=Array.isArray(G)?()=>G:G}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(G){this.supportsScrolling()&&this.window.scrollTo(G[0],G[1])}scrollToAnchor(G){if(!this.supportsScrolling())return;const L=function we(k,G){const L=k.getElementById(G)||k.getElementsByName(G)[0];if(L)return L;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const ie=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let xe=ie.currentNode;for(;xe;){const pt=xe.shadowRoot;if(pt){const Ft=pt.getElementById(G)||pt.querySelector(`[name="${G}"]`);if(Ft)return Ft}xe=ie.nextNode()}}return null}(this.document,G);L&&(this.scrollToElement(L),L.focus())}setHistoryScrollRestoration(G){if(this.supportScrollRestoration()){const L=this.window.history;L&&L.scrollRestoration&&(L.scrollRestoration=G)}}scrollToElement(G){const L=G.getBoundingClientRect(),ie=L.left+this.window.pageXOffset,xe=L.top+this.window.pageYOffset,pt=this.offset();this.window.scrollTo(ie-pt[0],xe-pt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const G=Ce(this.window.history)||Ce(Object.getPrototypeOf(this.window.history));return!(!G||!G.writable&&!G.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ce(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class et{}},529:(mn,ot,j)=>{j.d(ot,{JF:()=>Hn,eN:()=>at});var C=j(6895),p=j(4650),K=j(9646),X=j(9751),Se=j(4351),Ne=j(9300),$e=j(4004);class be{}class Ze{}class de{constructor(De){this.normalizedNames=new Map,this.lazyUpdate=null,De?this.lazyInit="string"==typeof De?()=>{this.headers=new Map,De.split("\n").forEach(Pe=>{const gt=Pe.indexOf(":");if(gt>0){const ct=Pe.slice(0,gt),ge=ct.toLowerCase(),_e=Pe.slice(gt+1).trim();this.maybeSetNormalizedName(ct,ge),this.headers.has(ge)?this.headers.get(ge).push(_e):this.headers.set(ge,[_e])}})}:()=>{this.headers=new Map,Object.entries(De).forEach(([Pe,gt])=>{let ct;if(ct="string"==typeof gt?[gt]:"number"==typeof gt?[gt.toString()]:gt.map(ge=>ge.toString()),ct.length>0){const ge=Pe.toLowerCase();this.headers.set(ge,ct),this.maybeSetNormalizedName(Pe,ge)}})}:this.headers=new Map}has(De){return this.init(),this.headers.has(De.toLowerCase())}get(De){this.init();const Pe=this.headers.get(De.toLowerCase());return Pe&&Pe.length>0?Pe[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(De){return this.init(),this.headers.get(De.toLowerCase())||null}append(De,Pe){return this.clone({name:De,value:Pe,op:"a"})}set(De,Pe){return this.clone({name:De,value:Pe,op:"s"})}delete(De,Pe){return this.clone({name:De,value:Pe,op:"d"})}maybeSetNormalizedName(De,Pe){this.normalizedNames.has(Pe)||this.normalizedNames.set(Pe,De)}init(){this.lazyInit&&(this.lazyInit instanceof de?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(De=>this.applyUpdate(De)),this.lazyUpdate=null))}copyFrom(De){De.init(),Array.from(De.headers.keys()).forEach(Pe=>{this.headers.set(Pe,De.headers.get(Pe)),this.normalizedNames.set(Pe,De.normalizedNames.get(Pe))})}clone(De){const Pe=new de;return Pe.lazyInit=this.lazyInit&&this.lazyInit instanceof de?this.lazyInit:this,Pe.lazyUpdate=(this.lazyUpdate||[]).concat([De]),Pe}applyUpdate(De){const Pe=De.name.toLowerCase();switch(De.op){case"a":case"s":let gt=De.value;if("string"==typeof gt&&(gt=[gt]),0===gt.length)return;this.maybeSetNormalizedName(De.name,Pe);const ct=("a"===De.op?this.headers.get(Pe):void 0)||[];ct.push(...gt),this.headers.set(Pe,ct);break;case"d":const ge=De.value;if(ge){let _e=this.headers.get(Pe);if(!_e)return;_e=_e.filter(ee=>-1===ge.indexOf(ee)),0===_e.length?(this.headers.delete(Pe),this.normalizedNames.delete(Pe)):this.headers.set(Pe,_e)}else this.headers.delete(Pe),this.normalizedNames.delete(Pe)}}forEach(De){this.init(),Array.from(this.normalizedNames.keys()).forEach(Pe=>De(this.normalizedNames.get(Pe),this.headers.get(Pe)))}}class Me{encodeKey(De){return Qt(De)}encodeValue(De){return Qt(De)}decodeKey(De){return decodeURIComponent(De)}decodeValue(De){return decodeURIComponent(De)}}const Ye=/%(\d[a-f0-9])/gi,Nt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Qt(Qe){return encodeURIComponent(Qe).replace(Ye,(De,Pe)=>Nt[Pe]??De)}function nt(Qe){return`${Qe}`}class yt{constructor(De={}){if(this.updates=null,this.cloneFrom=null,this.encoder=De.encoder||new Me,De.fromString){if(De.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function tt(Qe,De){const Pe=new Map;return Qe.length>0&&Qe.replace(/^\?/,"").split("&").forEach(ct=>{const ge=ct.indexOf("="),[_e,ee]=-1==ge?[De.decodeKey(ct),""]:[De.decodeKey(ct.slice(0,ge)),De.decodeValue(ct.slice(ge+1))],re=Pe.get(_e)||[];re.push(ee),Pe.set(_e,re)}),Pe}(De.fromString,this.encoder)}else De.fromObject?(this.map=new Map,Object.keys(De.fromObject).forEach(Pe=>{const gt=De.fromObject[Pe],ct=Array.isArray(gt)?gt.map(nt):[nt(gt)];this.map.set(Pe,ct)})):this.map=null}has(De){return this.init(),this.map.has(De)}get(De){this.init();const Pe=this.map.get(De);return Pe?Pe[0]:null}getAll(De){return this.init(),this.map.get(De)||null}keys(){return this.init(),Array.from(this.map.keys())}append(De,Pe){return this.clone({param:De,value:Pe,op:"a"})}appendAll(De){const Pe=[];return Object.keys(De).forEach(gt=>{const ct=De[gt];Array.isArray(ct)?ct.forEach(ge=>{Pe.push({param:gt,value:ge,op:"a"})}):Pe.push({param:gt,value:ct,op:"a"})}),this.clone(Pe)}set(De,Pe){return this.clone({param:De,value:Pe,op:"s"})}delete(De,Pe){return this.clone({param:De,value:Pe,op:"d"})}toString(){return this.init(),this.keys().map(De=>{const Pe=this.encoder.encodeKey(De);return this.map.get(De).map(gt=>Pe+"="+this.encoder.encodeValue(gt)).join("&")}).filter(De=>""!==De).join("&")}clone(De){const Pe=new yt({encoder:this.encoder});return Pe.cloneFrom=this.cloneFrom||this,Pe.updates=(this.updates||[]).concat(De),Pe}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(De=>this.map.set(De,this.cloneFrom.map.get(De))),this.updates.forEach(De=>{switch(De.op){case"a":case"s":const Pe=("a"===De.op?this.map.get(De.param):void 0)||[];Pe.push(nt(De.value)),this.map.set(De.param,Pe);break;case"d":if(void 0===De.value){this.map.delete(De.param);break}{let gt=this.map.get(De.param)||[];const ct=gt.indexOf(nt(De.value));-1!==ct&&gt.splice(ct,1),gt.length>0?this.map.set(De.param,gt):this.map.delete(De.param)}}}),this.cloneFrom=this.updates=null)}}class Rt{constructor(){this.map=new Map}set(De,Pe){return this.map.set(De,Pe),this}get(De){return this.map.has(De)||this.map.set(De,De.defaultValue()),this.map.get(De)}delete(De){return this.map.delete(De),this}has(De){return this.map.has(De)}keys(){return this.map.keys()}}function Je(Qe){return typeof ArrayBuffer<"u"&&Qe instanceof ArrayBuffer}function vt(Qe){return typeof Blob<"u"&&Qe instanceof Blob}function $t(Qe){return typeof FormData<"u"&&Qe instanceof FormData}class je{constructor(De,Pe,gt,ct){let ge;if(this.url=Pe,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=De.toUpperCase(),function Te(Qe){switch(Qe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ct?(this.body=void 0!==gt?gt:null,ge=ct):ge=gt,ge&&(this.reportProgress=!!ge.reportProgress,this.withCredentials=!!ge.withCredentials,ge.responseType&&(this.responseType=ge.responseType),ge.headers&&(this.headers=ge.headers),ge.context&&(this.context=ge.context),ge.params&&(this.params=ge.params)),this.headers||(this.headers=new de),this.context||(this.context=new Rt),this.params){const _e=this.params.toString();if(0===_e.length)this.urlWithParams=Pe;else{const ee=Pe.indexOf("?");this.urlWithParams=Pe+(-1===ee?"?":ee<Pe.length-1?"&":"")+_e}}else this.params=new yt,this.urlWithParams=Pe}serializeBody(){return null===this.body?null:Je(this.body)||vt(this.body)||$t(this.body)||function wt(Qe){return typeof URLSearchParams<"u"&&Qe instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof yt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||$t(this.body)?null:vt(this.body)?this.body.type||null:Je(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof yt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(De={}){const Pe=De.method||this.method,gt=De.url||this.url,ct=De.responseType||this.responseType,ge=void 0!==De.body?De.body:this.body,_e=void 0!==De.withCredentials?De.withCredentials:this.withCredentials,ee=void 0!==De.reportProgress?De.reportProgress:this.reportProgress;let re=De.headers||this.headers,Y=De.params||this.params;const Ue=De.context??this.context;return void 0!==De.setHeaders&&(re=Object.keys(De.setHeaders).reduce((me,Ee)=>me.set(Ee,De.setHeaders[Ee]),re)),De.setParams&&(Y=Object.keys(De.setParams).reduce((me,Ee)=>me.set(Ee,De.setParams[Ee]),Y)),new je(Pe,gt,ge,{params:Y,headers:re,context:Ue,reportProgress:ee,responseType:ct,withCredentials:_e})}}var xt=(()=>((xt=xt||{})[xt.Sent=0]="Sent",xt[xt.UploadProgress=1]="UploadProgress",xt[xt.ResponseHeader=2]="ResponseHeader",xt[xt.DownloadProgress=3]="DownloadProgress",xt[xt.Response=4]="Response",xt[xt.User=5]="User",xt))();class ln{constructor(De,Pe=200,gt="OK"){this.headers=De.headers||new de,this.status=void 0!==De.status?De.status:Pe,this.statusText=De.statusText||gt,this.url=De.url||null,this.ok=this.status>=200&&this.status<300}}class jt extends ln{constructor(De={}){super(De),this.type=xt.ResponseHeader}clone(De={}){return new jt({headers:De.headers||this.headers,status:void 0!==De.status?De.status:this.status,statusText:De.statusText||this.statusText,url:De.url||this.url||void 0})}}class Kt extends ln{constructor(De={}){super(De),this.type=xt.Response,this.body=void 0!==De.body?De.body:null}clone(De={}){return new Kt({body:void 0!==De.body?De.body:this.body,headers:De.headers||this.headers,status:void 0!==De.status?De.status:this.status,statusText:De.statusText||this.statusText,url:De.url||this.url||void 0})}}class qt extends ln{constructor(De){super(De,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${De.url||"(unknown url)"}`:`Http failure response for ${De.url||"(unknown url)"}: ${De.status} ${De.statusText}`,this.error=De.error||null}}function rt(Qe,De){return{body:De,headers:Qe.headers,context:Qe.context,observe:Qe.observe,params:Qe.params,reportProgress:Qe.reportProgress,responseType:Qe.responseType,withCredentials:Qe.withCredentials}}let at=(()=>{class Qe{constructor(Pe){this.handler=Pe}request(Pe,gt,ct={}){let ge;if(Pe instanceof je)ge=Pe;else{let re,Y;re=ct.headers instanceof de?ct.headers:new de(ct.headers),ct.params&&(Y=ct.params instanceof yt?ct.params:new yt({fromObject:ct.params})),ge=new je(Pe,gt,void 0!==ct.body?ct.body:null,{headers:re,context:ct.context,params:Y,reportProgress:ct.reportProgress,responseType:ct.responseType||"json",withCredentials:ct.withCredentials})}const _e=(0,K.of)(ge).pipe((0,Se.b)(re=>this.handler.handle(re)));if(Pe instanceof je||"events"===ct.observe)return _e;const ee=_e.pipe((0,Ne.h)(re=>re instanceof Kt));switch(ct.observe||"body"){case"body":switch(ge.responseType){case"arraybuffer":return ee.pipe((0,$e.U)(re=>{if(null!==re.body&&!(re.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return re.body}));case"blob":return ee.pipe((0,$e.U)(re=>{if(null!==re.body&&!(re.body instanceof Blob))throw new Error("Response is not a Blob.");return re.body}));case"text":return ee.pipe((0,$e.U)(re=>{if(null!==re.body&&"string"!=typeof re.body)throw new Error("Response is not a string.");return re.body}));default:return ee.pipe((0,$e.U)(re=>re.body))}case"response":return ee;default:throw new Error(`Unreachable: unhandled observe type ${ct.observe}}`)}}delete(Pe,gt={}){return this.request("DELETE",Pe,gt)}get(Pe,gt={}){return this.request("GET",Pe,gt)}head(Pe,gt={}){return this.request("HEAD",Pe,gt)}jsonp(Pe,gt){return this.request("JSONP",Pe,{params:(new yt).append(gt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Pe,gt={}){return this.request("OPTIONS",Pe,gt)}patch(Pe,gt,ct={}){return this.request("PATCH",Pe,rt(ct,gt))}post(Pe,gt,ct={}){return this.request("POST",Pe,rt(ct,gt))}put(Pe,gt,ct={}){return this.request("PUT",Pe,rt(ct,gt))}}return Qe.\u0275fac=function(Pe){return new(Pe||Qe)(p.LFG(be))},Qe.\u0275prov=p.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();function lt(Qe,De){return De(Qe)}function bt(Qe,De){return(Pe,gt)=>De.intercept(Pe,{handle:ct=>Qe(ct,gt)})}const It=new p.OlP("HTTP_INTERCEPTORS"),Gt=new p.OlP("HTTP_INTERCEPTOR_FNS");function Ct(){let Qe=null;return(De,Pe)=>(null===Qe&&(Qe=((0,p.f3M)(It,{optional:!0})??[]).reduceRight(bt,lt)),Qe(De,Pe))}let rn=(()=>{class Qe extends be{constructor(Pe,gt){super(),this.backend=Pe,this.injector=gt,this.chain=null}handle(Pe){if(null===this.chain){const gt=Array.from(new Set(this.injector.get(Gt)));this.chain=gt.reduceRight((ct,ge)=>function Ht(Qe,De,Pe){return(gt,ct)=>Pe.runInContext(()=>De(gt,ge=>Qe(ge,ct)))}(ct,ge,this.injector),lt)}return this.chain(Pe,gt=>this.backend.handle(gt))}}return Qe.\u0275fac=function(Pe){return new(Pe||Qe)(p.LFG(Ze),p.LFG(p.lqb))},Qe.\u0275prov=p.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();const Sr=/^\)\]\}',?\n/;let gr=(()=>{class Qe{constructor(Pe){this.xhrFactory=Pe}handle(Pe){if("JSONP"===Pe.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new X.y(gt=>{const ct=this.xhrFactory.build();if(ct.open(Pe.method,Pe.urlWithParams),Pe.withCredentials&&(ct.withCredentials=!0),Pe.headers.forEach((ue,ke)=>ct.setRequestHeader(ue,ke.join(","))),Pe.headers.has("Accept")||ct.setRequestHeader("Accept","application/json, text/plain, */*"),!Pe.headers.has("Content-Type")){const ue=Pe.detectContentTypeHeader();null!==ue&&ct.setRequestHeader("Content-Type",ue)}if(Pe.responseType){const ue=Pe.responseType.toLowerCase();ct.responseType="json"!==ue?ue:"text"}const ge=Pe.serializeBody();let _e=null;const ee=()=>{if(null!==_e)return _e;const ue=ct.statusText||"OK",ke=new de(ct.getAllResponseHeaders()),Xe=function ui(Qe){return"responseURL"in Qe&&Qe.responseURL?Qe.responseURL:/^X-Request-URL:/m.test(Qe.getAllResponseHeaders())?Qe.getResponseHeader("X-Request-URL"):null}(ct)||Pe.url;return _e=new jt({headers:ke,status:ct.status,statusText:ue,url:Xe}),_e},re=()=>{let{headers:ue,status:ke,statusText:Xe,url:Et}=ee(),tn=null;204!==ke&&(tn=typeof ct.response>"u"?ct.responseText:ct.response),0===ke&&(ke=tn?200:0);let mt=ke>=200&&ke<300;if("json"===Pe.responseType&&"string"==typeof tn){const Pt=tn;tn=tn.replace(Sr,"");try{tn=""!==tn?JSON.parse(tn):null}catch(wn){tn=Pt,mt&&(mt=!1,tn={error:wn,text:tn})}}mt?(gt.next(new Kt({body:tn,headers:ue,status:ke,statusText:Xe,url:Et||void 0})),gt.complete()):gt.error(new qt({error:tn,headers:ue,status:ke,statusText:Xe,url:Et||void 0}))},Y=ue=>{const{url:ke}=ee(),Xe=new qt({error:ue,status:ct.status||0,statusText:ct.statusText||"Unknown Error",url:ke||void 0});gt.error(Xe)};let Ue=!1;const me=ue=>{Ue||(gt.next(ee()),Ue=!0);let ke={type:xt.DownloadProgress,loaded:ue.loaded};ue.lengthComputable&&(ke.total=ue.total),"text"===Pe.responseType&&ct.responseText&&(ke.partialText=ct.responseText),gt.next(ke)},Ee=ue=>{let ke={type:xt.UploadProgress,loaded:ue.loaded};ue.lengthComputable&&(ke.total=ue.total),gt.next(ke)};return ct.addEventListener("load",re),ct.addEventListener("error",Y),ct.addEventListener("timeout",Y),ct.addEventListener("abort",Y),Pe.reportProgress&&(ct.addEventListener("progress",me),null!==ge&&ct.upload&&ct.upload.addEventListener("progress",Ee)),ct.send(ge),gt.next({type:xt.Sent}),()=>{ct.removeEventListener("error",Y),ct.removeEventListener("abort",Y),ct.removeEventListener("load",re),ct.removeEventListener("timeout",Y),Pe.reportProgress&&(ct.removeEventListener("progress",me),null!==ge&&ct.upload&&ct.upload.removeEventListener("progress",Ee)),ct.readyState!==ct.DONE&&ct.abort()}})}}return Qe.\u0275fac=function(Pe){return new(Pe||Qe)(p.LFG(C.JF))},Qe.\u0275prov=p.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();const cn=new p.OlP("XSRF_ENABLED"),Kr=new p.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Fr=new p.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Gr{}let an=(()=>{class Qe{constructor(Pe,gt,ct){this.doc=Pe,this.platform=gt,this.cookieName=ct,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Pe=this.doc.cookie||"";return Pe!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,C.Mx)(Pe,this.cookieName),this.lastCookieString=Pe),this.lastToken}}return Qe.\u0275fac=function(Pe){return new(Pe||Qe)(p.LFG(C.K0),p.LFG(p.Lbi),p.LFG(Kr))},Qe.\u0275prov=p.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();function dn(Qe,De){const Pe=Qe.url.toLowerCase();if(!(0,p.f3M)(cn)||"GET"===Qe.method||"HEAD"===Qe.method||Pe.startsWith("http://")||Pe.startsWith("https://"))return De(Qe);const gt=(0,p.f3M)(Gr).getToken(),ct=(0,p.f3M)(Fr);return null!=gt&&!Qe.headers.has(ct)&&(Qe=Qe.clone({headers:Qe.headers.set(ct,gt)})),De(Qe)}var Yt=(()=>((Yt=Yt||{})[Yt.Interceptors=0]="Interceptors",Yt[Yt.LegacyInterceptors=1]="LegacyInterceptors",Yt[Yt.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Yt[Yt.NoXsrfProtection=3]="NoXsrfProtection",Yt[Yt.JsonpSupport=4]="JsonpSupport",Yt[Yt.RequestsMadeViaParent=5]="RequestsMadeViaParent",Yt))();function lr(Qe,De){return{\u0275kind:Qe,\u0275providers:De}}function yr(...Qe){const De=[at,gr,rn,{provide:be,useExisting:rn},{provide:Ze,useExisting:gr},{provide:Gt,useValue:dn,multi:!0},{provide:cn,useValue:!0},{provide:Gr,useClass:an}];for(const Pe of Qe)De.push(...Pe.\u0275providers);return(0,p.MR2)(De)}const Vr=new p.OlP("LEGACY_INTERCEPTOR_FN");let Hn=(()=>{class Qe{}return Qe.\u0275fac=function(Pe){return new(Pe||Qe)},Qe.\u0275mod=p.oAB({type:Qe}),Qe.\u0275inj=p.cJS({providers:[yr(lr(Yt.LegacyInterceptors,[{provide:Vr,useFactory:Ct},{provide:Gt,useExisting:Vr,multi:!0}]))]}),Qe})()},4650:(mn,ot,j)=>{j.d(ot,{$8M:()=>Qi,$WT:()=>Ar,$Z:()=>sg,AFp:()=>rE,ALo:()=>C0,AaK:()=>be,AsE:()=>Xg,CHM:()=>Go,CRH:()=>O0,CZH:()=>W_,CqO:()=>cp,D6c:()=>DI,EJc:()=>jw,EpF:()=>Xm,F4k:()=>lp,FYo:()=>Q,FiY:()=>Si,Gf:()=>P0,GfV:()=>Vn,Gpc:()=>ye,Gre:()=>em,JOm:()=>qs,KtG:()=>Lu,LFG:()=>Hn,LSH:()=>Qd,Lbi:()=>Vw,Lck:()=>UE,MAs:()=>ap,MMx:()=>dv,MR2:()=>Bp,NdJ:()=>Bg,OlP:()=>Ke,Oqu:()=>Ip,P3R:()=>Uc,PXZ:()=>rI,Q6J:()=>Lg,QGY:()=>cf,Qsj:()=>Ve,R0b:()=>dc,RDi:()=>Gd,Rgc:()=>hm,SBq:()=>w,Sil:()=>zw,Suo:()=>N0,TTD:()=>_i,TgZ:()=>gh,VKq:()=>m0,W1O:()=>U0,WLB:()=>_0,X6Q:()=>uI,XFs:()=>cn,Xpm:()=>mt,Xts:()=>Nh,Y36:()=>Rd,YKP:()=>a0,YNc:()=>op,Yjl:()=>Wt,Yz7:()=>_n,Z0I:()=>zr,ZZ4:()=>Lv,_Bn:()=>o0,_UZ:()=>lf,_Vd:()=>Hc,_c5:()=>bI,_uU:()=>f_,aQg:()=>Uv,c2e:()=>Bw,cJS:()=>nr,cg1:()=>C_,dDg:()=>Xw,dqk:()=>an,eFA:()=>mE,eJc:()=>wv,ekj:()=>Al,eoX:()=>hE,f3M:()=>Jn,g9A:()=>sE,h0i:()=>Fp,hGG:()=>TI,hij:()=>ad,iGM:()=>R0,ifc:()=>re,ip1:()=>nE,jDz:()=>l0,kL8:()=>Sp,lG2:()=>it,lcZ:()=>b0,lqb:()=>Tl,lri:()=>cE,n5z:()=>Sa,oAB:()=>V,oxw:()=>jg,q4F:()=>vr,qLn:()=>_s,qOj:()=>nf,qZA:()=>uf,rWj:()=>dE,s9C:()=>Hg,sBO:()=>lI,s_b:()=>H_,soG:()=>q_,tb:()=>pE,tp0:()=>Ii,uIk:()=>kg,vHH:()=>nt,vpe:()=>hd,wAp:()=>Pr,xi3:()=>T0,xp6:()=>wm,z2F:()=>Z_,zSh:()=>eh,zs3:()=>$s});var C=j(7579),p=j(727),K=j(9751),X=j(6451),Se=j(3099);function Ne(n){for(let i in n)if(n[i]===Ne)return i;throw Error("Could not find renamed property on target object.")}function $e(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function be(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(be).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Ze(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const de=Ne({__forward_ref__:Ne});function ye(n){return n.__forward_ref__=ye,n.toString=function(){return be(this())},n}function Me(n){return tt(n)?n():n}function tt(n){return"function"==typeof n&&n.hasOwnProperty(de)&&n.__forward_ref__===ye}function Ye(n){return n&&!!n.\u0275providers}const Qt="https://g.co/ng/security#xss";class nt extends Error{constructor(i,o){super(yt(i,o)),this.code=i}}function yt(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function ft(n){return"string"==typeof n?n:null==n?"":String(n)}function $t(n,i){throw new nt(-201,!1)}function Gt(n,i){null==n&&function Ct(n,i,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,n,null,"!=")}function _n(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nr(n){return{providers:n.providers||[],imports:n.imports||[]}}function pr(n){return hr(n,Nr)||hr(n,ui)}function zr(n){return null!==pr(n)}function hr(n,i){return n.hasOwnProperty(i)?n[i]:null}function pn(n){return n&&(n.hasOwnProperty(Sr)||n.hasOwnProperty(gr))?n[Sr]:null}const Nr=Ne({\u0275prov:Ne}),Sr=Ne({\u0275inj:Ne}),ui=Ne({ngInjectableDef:Ne}),gr=Ne({ngInjectorDef:Ne});var cn=(()=>((cn=cn||{})[cn.Default=0]="Default",cn[cn.Host=1]="Host",cn[cn.Self=2]="Self",cn[cn.SkipSelf=4]="SkipSelf",cn[cn.Optional=8]="Optional",cn))();let Qn;function ur(n){const i=Qn;return Qn=n,i}function Fr(n,i,o){const u=pr(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&cn.Optional?null:void 0!==i?i:void $t(be(n))}const an=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),lr={},yr="__NG_DI_FLAG__",Er="ngTempTokenPath",Vr="ngTokenPath",ri=/\n/gm,Wr="\u0275",Nn="__source";let qr;function Bn(n){const i=qr;return qr=n,i}function jn(n,i=cn.Default){if(void 0===qr)throw new nt(-203,!1);return null===qr?Fr(n,void 0,i):qr.get(n,i&cn.Optional?null:void 0,i)}function Hn(n,i=cn.Default){return(function Kr(){return Qn}()||jn)(Me(n),i)}function Jn(n,i=cn.Default){return Hn(n,Qe(i))}function Qe(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function De(n){const i=[];for(let o=0;o<n.length;o++){const u=Me(n[o]);if(Array.isArray(u)){if(0===u.length)throw new nt(900,!1);let d,_=cn.Default;for(let T=0;T<u.length;T++){const N=u[T],F=gt(N);"number"==typeof F?-1===F?d=N.token:_|=F:d=N}i.push(Hn(d,_))}else i.push(Hn(u))}return i}function Pe(n,i){return n[yr]=i,n.prototype[yr]=i,n}function gt(n){return n[yr]}function _e(n){return{toString:n}.toString()}var ee=(()=>((ee=ee||{})[ee.OnPush=0]="OnPush",ee[ee.Default=1]="Default",ee))(),re=(()=>{return(n=re||(re={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",re;var n})();const Y={},Ue=[],me=Ne({\u0275cmp:Ne}),Ee=Ne({\u0275dir:Ne}),ue=Ne({\u0275pipe:Ne}),ke=Ne({\u0275mod:Ne}),Xe=Ne({\u0275fac:Ne}),Et=Ne({__NG_ELEMENT_ID__:Ne});let tn=0;function mt(n){return _e(()=>{const i=Pi(n),o={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ee.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||re.Emulated,id:"c"+tn++,styles:n.styles||Ue,_:null,schemas:n.schemas||null,tView:null};Hi(o);const u=n.dependencies;return o.directiveDefs=ei(u,!1),o.pipeDefs=ei(u,!0),o})}function wn(n){return Ut(n)||Mn(n)}function pe(n){return null!==n}function V(n){return _e(()=>({type:n.type,bootstrap:n.bootstrap||Ue,declarations:n.declarations||Ue,imports:n.imports||Ue,exports:n.exports||Ue,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Fe(n,i){if(null==n)return Y;const o={};for(const u in n)if(n.hasOwnProperty(u)){let d=n[u],_=d;Array.isArray(d)&&(_=d[1],d=d[0]),o[d]=u,i&&(i[d]=_)}return o}function it(n){return _e(()=>{const i=Pi(n);return Hi(i),i})}function Wt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ut(n){return n[me]||null}function Mn(n){return n[Ee]||null}function Fn(n){return n[ue]||null}function Ar(n){const i=Ut(n)||Mn(n)||Fn(n);return null!==i&&i.standalone}function Mr(n,i){const o=n[ke]||null;if(!o&&!0===i)throw new Error(`Type ${be(n)} does not have '\u0275mod' property.`);return o}function Pi(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Ue,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Fe(n.inputs,i),outputs:Fe(n.outputs)}}function Hi(n){n.features?.forEach(i=>i(n))}function ei(n,i){if(!n)return null;const o=i?Fn:wn;return()=>("function"==typeof n?n():n).map(u=>o(u)).filter(pe)}const Lr=0,Zt=1,zn=2,Tn=3,In=4,Dn=5,Xn=6,Zn=7,fe=8,te=9,he=10,Ie=11,He=12,Z=13,ve=14,qe=15,_t=16,Xt=17,$n=18,vn=19,br=20,Ti=21,dr=22,Ss=1,Ia=2,Js=7,uo=8,ps=9,zi=10;function Gi(n){return Array.isArray(n)&&"object"==typeof n[Ss]}function sr(n){return Array.isArray(n)&&!0===n[Ss]}function Hs(n){return 0!=(4&n.flags)}function bo(n){return n.componentOffset>-1}function gs(n){return 1==(1&n.flags)}function Yr(n){return!!n.template}function Br(n){return 0!=(256&n[zn])}function ns(n,i){return n.hasOwnProperty(Xe)?n[Xe]:null}class As{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function _i(){return So}function So(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ce),mr}function mr(){const n=Oe(this),i=n?.current;if(i){const o=n.previous;if(o===Y)n.previous=i;else for(let u in i)o[u]=i[u];n.current=null,this.ngOnChanges(i)}}function Ce(n,i,o,u){const d=this.declaredInputs[o],_=Oe(n)||function et(n,i){return n[we]=i}(n,{previous:Y,current:null}),T=_.current||(_.current={}),N=_.previous,F=N[d];T[d]=new As(F&&F.currentValue,i,N===Y),n[u]=i}_i.ngInherit=!0;const we="__ngSimpleChanges__";function Oe(n){return n[we]||null}const en=function(n,i,o){};function Un(n){for(;Array.isArray(n);)n=n[Lr];return n}function Oi(n,i){return Un(i[n])}function ti(n,i){return Un(i[n.index])}function Ho(n,i){return n.data[i]}function ii(n,i){return n[i]}function ki(n,i){const o=i[n];return Gi(o)?o:o[Lr]}function yi(n){return 64==(64&n[zn])}function xs(n,i){return null==i?null:n[i]}function La(n){n[$n]=0}function Ua(n,i){n[Dn]+=i;let o=n,u=n[Tn];for(;null!==u&&(1===i&&1===o[Dn]||-1===i&&0===o[Dn]);)u[Dn]+=i,o=u,u=u[Tn]}const Wn={lFrame:Os(null),bindingsEnabled:!0};function eo(){return Wn.bindingsEnabled}function Dt(){return Wn.lFrame.lView}function wr(){return Wn.lFrame.tView}function Go(n){return Wn.lFrame.contextLView=n,n[fe]}function Lu(n){return Wn.lFrame.contextLView=null,n}function Ui(){let n=Va();for(;null!==n&&64===n.type;)n=n.parent;return n}function Va(){return Wn.lFrame.currentTNode}function vi(n,i){const o=Wn.lFrame;o.currentTNode=n,o.isParent=i}function fo(){return Wn.lFrame.isParent}function Vi(){const n=Wn.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function qo(){return Wn.lFrame.bindingIndex++}function Rs(n){const i=Wn.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}function Mi(n,i){const o=Wn.lFrame;o.bindingIndex=o.bindingRootIndex=n,xo(i)}function xo(n){Wn.lFrame.currentDirectiveIndex=n}function Mo(){return Wn.lFrame.currentQueryIndex}function Wi(n){Wn.lFrame.currentQueryIndex=n}function go(n){const i=n[Zt];return 2===i.type?i.declTNode:1===i.type?n[Xn]:null}function rr(n,i,o){if(o&cn.SkipSelf){let d=i,_=n;for(;!(d=d.parent,null!==d||o&cn.Host||(d=go(_),null===d||(_=_[qe],10&d.type))););if(null===d)return!1;i=d,n=_}const u=Wn.lFrame=ca();return u.currentTNode=i,u.lView=n,!0}function Ns(n){const i=ca(),o=n[Zt];Wn.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function ca(){const n=Wn.lFrame,i=null===n?null:n.child;return null===i?Os(n):i}function Os(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Ba(){const n=Wn.lFrame;return Wn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const da=Ba;function ks(){const n=Ba();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function gi(){return Wn.lFrame.selectedIndex}function hi(n){Wn.lFrame.selectedIndex=n}function Rr(){const n=Wn.lFrame;return Ho(n.tView,n.selectedIndex)}function Vu(n,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const _=n.data[o].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:N,ngAfterViewInit:F,ngAfterViewChecked:z,ngOnDestroy:se}=_;T&&(n.contentHooks??(n.contentHooks=[])).push(-o,T),N&&((n.contentHooks??(n.contentHooks=[])).push(o,N),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(o,N)),F&&(n.viewHooks??(n.viewHooks=[])).push(-o,F),z&&((n.viewHooks??(n.viewHooks=[])).push(o,z),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(o,z)),null!=se&&(n.destroyHooks??(n.destroyHooks=[])).push(o,se)}}function fa(n,i,o){G(n,i,3,o)}function ja(n,i,o,u){(3&n[zn])===o&&G(n,i,o,u)}function k(n,i){let o=n[zn];(3&o)===i&&(o&=2047,o+=1,n[zn]=o)}function G(n,i,o,u){const _=u??-1,T=i.length-1;let N=0;for(let F=void 0!==u?65535&n[$n]:0;F<T;F++)if("number"==typeof i[F+1]){if(N=i[F],null!=u&&N>=u)break}else i[F]<0&&(n[$n]+=65536),(N<_||-1==_)&&(L(n,o,i,F),n[$n]=(4294901760&n[$n])+F+2),F++}function L(n,i,o,u){const d=o[u]<0,_=o[u+1],N=n[d?-o[u]:o[u]];if(d){if(n[zn]>>11<n[$n]>>16&&(3&n[zn])===i){n[zn]+=2048,en(4,N,_);try{_.call(N)}finally{en(5,N,_)}}}else{en(4,N,_);try{_.call(N)}finally{en(5,N,_)}}}const ie=-1;class xe{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function mi(n,i,o){let u=0;for(;u<o.length;){const d=o[u];if("number"==typeof d){if(0!==d)break;u++;const _=o[u++],T=o[u++],N=o[u++];n.setAttribute(i,T,N,_)}else{const _=d,T=o[++u];fi(_)?n.setProperty(i,_,T):n.setAttribute(i,_,T),u++}}return u}function Lt(n){return 3===n||4===n||6===n}function fi(n){return 64===n.charCodeAt(0)}function wi(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const d=i[u];"number"==typeof d?o=d:0===o||Ls(n,o,d,null,-1===o||2===o?i[++u]:null)}}return n}function Ls(n,i,o,u,d){let _=0,T=n.length;if(-1===i)T=-1;else for(;_<n.length;){const N=n[_++];if("number"==typeof N){if(N===i){T=-1;break}if(N>i){T=_-1;break}}}for(;_<n.length;){const N=n[_];if("number"==typeof N)break;if(N===o){if(null===u)return void(null!==d&&(n[_+1]=d));if(u===n[_+1])return void(n[_+2]=d)}_++,null!==u&&_++,null!==d&&_++}-1!==T&&(n.splice(T,0,i),_=T+1),n.splice(_++,0,o),null!==u&&n.splice(_++,0,u),null!==d&&n.splice(_++,0,d)}function un(n){return n!==ie}function On(n){return 32767&n}function sn(n,i){let o=function Es(n){return n>>16}(n),u=i;for(;o>0;)u=u[qe],o--;return u}let ht=!0;function zt(n){const i=ht;return ht=n,i}const Ha=255,Bu=5;let Kl=0;const mo={};function ju(n,i){const o=Ml(n,i);if(-1!==o)return o;const u=i[Zt];u.firstCreatePass&&(n.injectorIndex=i.length,Ta(u.data,n),Ta(i,null),Ta(u.blueprint,null));const d=qi(n,i),_=n.injectorIndex;if(un(d)){const T=On(d),N=sn(d,i),F=N[Zt].data;for(let z=0;z<8;z++)i[_+z]=N[T+z]|F[T+z]}return i[_+8]=d,_}function Ta(n,i){n.push(0,0,0,0,0,0,0,0,i)}function Ml(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function qi(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,d=i;for(;null!==d;){if(u=su(d),null===u)return ie;if(o++,d=d[qe],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return ie}function Yl(n,i,o){!function $u(n,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Et)&&(u=o[Et]),null==u&&(u=o[Et]=Kl++);const d=u&Ha;i.data[n+(d>>Bu)]|=1<<d}(n,i,o)}function Ir(n,i,o){if(o&cn.Optional||void 0!==n)return n;$t()}function Da(n,i,o,u){if(o&cn.Optional&&void 0===u&&(u=null),!(o&(cn.Self|cn.Host))){const d=n[te],_=ur(void 0);try{return d?d.get(i,u,o&cn.Optional):Fr(i,u,o&cn.Optional)}finally{ur(_)}}return Ir(u,0,o)}function Ql(n,i,o,u=cn.Default,d){if(null!==n){if(1024&i[zn]){const T=function Iu(n,i,o,u,d){let _=n,T=i;for(;null!==_&&null!==T&&1024&T[zn]&&!(256&T[zn]);){const N=Fi(_,T,o,u|cn.Self,mo);if(N!==mo)return N;let F=_.parent;if(!F){const z=T[Ti];if(z){const se=z.get(o,mo,u);if(se!==mo)return se}F=su(T),T=T[qe]}_=F}return d}(n,i,o,u,mo);if(T!==mo)return T}const _=Fi(n,i,o,u,mo);if(_!==mo)return _}return Da(i,o,u,d)}function Fi(n,i,o,u,d){const _=function iu(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Et)?n[Et]:void 0;return"number"==typeof i?i>=0?i&Ha:Pl:i}(o);if("function"==typeof _){if(!rr(i,n,u))return u&cn.Host?Ir(d,0,u):Da(i,o,u,d);try{const T=_(u);if(null!=T||u&cn.Optional)return T;$t()}finally{da()}}else if("number"==typeof _){let T=null,N=Ml(n,i),F=ie,z=u&cn.Host?i[_t][Xn]:null;for((-1===N||u&cn.SkipSelf)&&(F=-1===N?qi(n,i):i[N+8],F!==ie&&gn(u,!1)?(T=i[Zt],N=On(F),i=sn(F,i)):N=-1);-1!==N;){const se=i[Zt];if(Di(_,N,se.data)){const Ae=Yn(N,i,o,T,u,z);if(Ae!==mo)return Ae}F=i[N+8],F!==ie&&gn(u,i[Zt].data[N+8]===z)&&Di(_,N,i)?(T=se,N=On(F),i=sn(F,i)):N=-1}}return d}function Yn(n,i,o,u,d,_){const T=i[Zt],N=T.data[n+8],se=ss(N,T,o,null==u?bo(N)&&ht:u!=T&&0!=(3&N.type),d&cn.Host&&_===N);return null!==se?kr(i,T,se,N):mo}function ss(n,i,o,u,d){const _=n.providerIndexes,T=i.data,N=1048575&_,F=n.directiveStart,se=_>>20,We=d?N+se:n.directiveEnd;for(let ut=u?N:N+se;ut<We;ut++){const Bt=T[ut];if(ut<F&&o===Bt||ut>=F&&Bt.type===o)return ut}if(d){const ut=T[F];if(ut&&Yr(ut)&&ut.type===o)return F}return null}function kr(n,i,o,u){let d=n[o];const _=i.data;if(function pt(n){return n instanceof xe}(d)){const T=d;T.resolving&&function Te(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new nt(-200,`Circular dependency in DI detected for ${n}${o}`)}(function Rt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ft(n)}(_[o]));const N=zt(T.canSeeViewProviders);T.resolving=!0;const F=T.injectImpl?ur(T.injectImpl):null;rr(n,u,cn.Default);try{d=n[o]=T.factory(void 0,_,n,u),i.firstCreatePass&&o>=u.directiveStart&&function ha(n,i,o){const{ngOnChanges:u,ngOnInit:d,ngDoCheck:_}=i.type.prototype;if(u){const T=So(i);(o.preOrderHooks??(o.preOrderHooks=[])).push(n,T),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,T)}d&&(o.preOrderHooks??(o.preOrderHooks=[])).push(0-n,d),_&&((o.preOrderHooks??(o.preOrderHooks=[])).push(n,_),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,_))}(o,_[o],i)}finally{null!==F&&ur(F),zt(N),T.resolving=!1,da()}}return d}function Di(n,i,o){return!!(o[i+(n>>Bu)]&1<<n)}function gn(n,i){return!(n&cn.Self||n&cn.Host&&i)}class pa{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return Ql(this._tNode,this._lView,i,Qe(u),o)}}function Pl(){return new pa(Ui(),Dt())}function Sa(n){return _e(()=>{const i=n.prototype.constructor,o=i[Xe]||wu(i),u=Object.prototype;let d=Object.getPrototypeOf(n.prototype).constructor;for(;d&&d!==u;){const _=d[Xe]||wu(d);if(_&&_!==o)return _;d=Object.getPrototypeOf(d)}return _=>new _})}function wu(n){return tt(n)?()=>{const i=wu(Me(n));return i&&i()}:ns(n)}function su(n){const i=n[Zt],o=i.type;return 2===o?i.declTNode:1===o?n[Xn]:null}function Qi(n){return function Rl(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const u=o.length;let d=0;for(;d<u;){const _=o[d];if(Lt(_))break;if(0===_)d+=2;else if("number"==typeof _)for(d++;d<u&&"string"==typeof o[d];)d++;else{if(_===i)return o[d+1];d+=2}}}return null}(Ui(),n)}const Po="__parameters__";function No(n,i,o){return _e(()=>{const u=function ro(n){return function(...o){if(n){const u=n(...o);for(const d in u)this[d]=u[d]}}}(i);function d(..._){if(this instanceof d)return u.apply(this,_),this;const T=new d(..._);return N.annotation=T,N;function N(F,z,se){const Ae=F.hasOwnProperty(Po)?F[Po]:Object.defineProperty(F,Po,{value:[]})[Po];for(;Ae.length<=se;)Ae.push(null);return(Ae[se]=Ae[se]||[]).push(T),F}}return o&&(d.prototype=Object.create(o.prototype)),d.prototype.ngMetadataName=n,d.annotationCls=d,d})}class Ke{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=_n({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ji(n,i){n.forEach(o=>Array.isArray(o)?Ji(o,i):i(o))}function fl(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function uu(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function yo(n,i,o){let u=D(n,i);return u>=0?n[1|u]=o:(u=~u,function lu(n,i,o,u){let d=n.length;if(d==i)n.push(o,u);else if(1===d)n.push(u,n[0]),n[0]=o;else{for(d--,n.push(n[d-1],n[d]);d>i;)n[d]=n[d-2],d--;n[i]=o,n[i+1]=u}}(n,u,i,o)),u}function Ga(n,i){const o=D(n,i);if(o>=0)return n[1|o]}function D(n,i){return function b(n,i,o){let u=0,d=n.length>>o;for(;d!==u;){const _=u+(d-u>>1),T=n[_<<o];if(i===T)return _<<o;T>i?d=_:u=_+1}return~(d<<o)}(n,i,1)}const Si=Pe(No("Optional"),8),Ii=Pe(No("SkipSelf"),4);var qs=(()=>((qs=qs||{})[qs.Important=1]="Important",qs[qs.DashCase=2]="DashCase",qs))();const fc=new Map;let gd=0;const Ma="__ngContext__";function _r(n,i){Gi(i)?(n[Ma]=i[br],function md(n){fc.set(n[br],n)}(i)):n[Ma]=i}let ec;function pu(n,i){return ec(n,i)}function tc(n){const i=n[Tn];return sr(i)?i[Tn]:i}function _l(n){return Eo(n[Z])}function ea(n){return Eo(n[In])}function Eo(n){for(;null!==n&&!sr(n);)n=n[In];return n}function ta(n,i,o,u,d){if(null!=u){let _,T=!1;sr(u)?_=u:Gi(u)&&(T=!0,u=u[Lr]);const N=Un(u);0===n&&null!==o?null==d?fs(i,o,N):Cr(i,o,N,d||null,!0):1===n&&null!==o?Cr(i,o,N,d||null,!0):2===n?function bh(n,i,o){const u=Ll(n,i);u&&function _c(n,i,o,u){n.removeChild(i,o,u)}(n,u,i,o)}(i,N,T):3===n&&i.destroyNode(N),null!=_&&function vc(n,i,o,u,d){const _=o[Js];_!==Un(o)&&ta(i,n,u,_,d);for(let N=zi;N<o.length;N++){const F=o[N];yc(F[Zt],F,n,i,u,_)}}(i,n,_,o,d)}}function Xu(n,i,o){return n.createElement(i,o)}function R(n,i){const o=n[ps],u=o.indexOf(i),d=i[Tn];512&i[zn]&&(i[zn]&=-513,Ua(d,-1)),o.splice(u,1)}function q(n,i){if(n.length<=zi)return;const o=zi+i,u=n[o];if(u){const d=u[Xt];null!==d&&d!==n&&R(d,u),i>0&&(n[o-1][In]=u[In]);const _=uu(n,zi+i);!function ls(n,i){yc(n,i,i[Ie],2,null,null),i[Lr]=null,i[Xn]=null}(u[Zt],u);const T=_[vn];null!==T&&T.detachView(_[Zt]),u[Tn]=null,u[In]=null,u[zn]&=-65}return u}function oe(n,i){if(!(128&i[zn])){const o=i[Ie];o.destroyNode&&yc(n,i,o,3,null,null),function S(n){let i=n[Z];if(!i)return Ge(n[Zt],n);for(;i;){let o=null;if(Gi(i))o=i[Z];else{const u=i[zi];u&&(o=u)}if(!o){for(;i&&!i[In]&&i!==n;)Gi(i)&&Ge(i[Zt],i),i=i[Tn];null===i&&(i=n),Gi(i)&&Ge(i[Zt],i),o=i&&i[In]}i=o}}(i)}}function Ge(n,i){if(!(128&i[zn])){i[zn]&=-65,i[zn]|=128,function on(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const d=i[o[u]];if(!(d instanceof xe)){const _=o[u+1];if(Array.isArray(_))for(let T=0;T<_.length;T+=2){const N=d[_[T]],F=_[T+1];en(4,N,F);try{F.call(N)}finally{en(5,N,F)}}else{en(4,d,_);try{_.call(d)}finally{en(5,d,_)}}}}}(n,i),function dt(n,i){const o=n.cleanup,u=i[Zn];let d=-1;if(null!==o)for(let _=0;_<o.length-1;_+=2)if("string"==typeof o[_]){const T=o[_+3];T>=0?u[d=T]():u[d=-T].unsubscribe(),_+=2}else{const T=u[d=o[_+1]];o[_].call(T)}if(null!==u){for(let _=d+1;_<u.length;_++)(0,u[_])();i[Zn]=null}}(n,i),1===i[Zt].type&&i[Ie].destroy();const o=i[Xt];if(null!==o&&sr(i[Tn])){o!==i[Tn]&&R(o,i);const u=i[vn];null!==u&&u.detachView(n)}!function hu(n){fc.delete(n[br])}(i)}}function Pn(n,i,o){return function qn(n,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[Lr];{const{componentOffset:d}=u;if(d>-1){const{encapsulation:_}=n.data[u.directiveStart+d];if(_===re.None||_===re.Emulated)return null}return ti(u,o)}}(n,i.parent,o)}function Cr(n,i,o,u,d){n.insertBefore(i,o,u,d)}function fs(n,i,o){n.appendChild(i,o)}function va(n,i,o,u,d){null!==u?Cr(n,i,o,u,d):fs(n,i,o)}function Ll(n,i){return n.parentNode(i)}let Is,gu,Ki,vl=function Nu(n,i,o){return 40&n.type?ti(n,o):null};function Ou(n,i,o,u){const d=Pn(n,u,i),_=i[Ie],N=function Ul(n,i,o){return vl(n,i,o)}(u.parent||i[Xn],u,i);if(null!=d)if(Array.isArray(o))for(let F=0;F<o.length;F++)va(_,d,o[F],N,!1);else va(_,d,o,N,!1);void 0!==Is&&Is(_,u,i,o,d)}function El(n,i){if(null!==i){const o=i.type;if(3&o)return ti(i,n);if(4&o)return jr(-1,n[i.index]);if(8&o){const u=i.child;if(null!==u)return El(n,u);{const d=n[i.index];return sr(d)?jr(-1,d):Un(d)}}if(32&o)return pu(i,n)()||Un(n[i.index]);{const u=Oc(n,i);return null!==u?Array.isArray(u)?u[0]:El(tc(n[_t]),u):El(n,i.next)}}return null}function Oc(n,i){return null!==i?n[_t][Xn].projection[i.projection]:null}function jr(n,i){const o=zi+n+1;if(o<i.length){const u=i[o],d=u[Zt].firstChild;if(null!==d)return El(u,d)}return i[Js]}function kc(n,i,o,u,d,_,T){for(;null!=o;){const N=u[o.index],F=o.type;if(T&&0===i&&(N&&_r(Un(N),u),o.flags|=2),32!=(32&o.flags))if(8&F)kc(n,i,o.child,u,d,_,!1),ta(i,n,d,N,_);else if(32&F){const z=pu(o,u);let se;for(;se=z();)ta(i,n,d,se,_);ta(i,n,d,N,_)}else 16&F?jd(n,i,u,o,d,_):ta(i,n,d,N,_);o=T?o.projectionNext:o.next}}function yc(n,i,o,u,d,_){kc(o,u,n.firstChild,i,d,_,!1)}function jd(n,i,o,u,d,_){const T=o[_t],F=T[Xn].projection[u.projection];if(Array.isArray(F))for(let z=0;z<F.length;z++)ta(i,n,d,F[z],_);else kc(n,i,F,T[Tn],d,_,!0)}function Hd(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function wl(n,i,o){const{mergedAttrs:u,classes:d,styles:_}=o;null!==u&&mi(n,i,u),null!==d&&Hd(n,i,d),null!==_&&function Fc(n,i,o){n.setAttribute(i,"style",o)}(n,i,_)}function Gd(n){gu=n}function Wd(n){return function mu(){if(void 0===Ki&&(Ki=null,an.trustedTypes))try{Ki=an.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ki}()?.createScriptURL(n)||n}class nl{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qt})`}}function Il(n){return n instanceof nl?n.changingThisBreaksApplicationSecurity:n}function il(n,i){const o=function Cl(n){return n instanceof nl&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${Qt})`)}return o===i}const c=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Cs=(()=>((Cs=Cs||{})[Cs.NONE=0]="NONE",Cs[Cs.HTML=1]="HTML",Cs[Cs.STYLE=2]="STYLE",Cs[Cs.SCRIPT=3]="SCRIPT",Cs[Cs.URL=4]="URL",Cs[Cs.RESOURCE_URL=5]="RESOURCE_URL",Cs))();function Qd(n){const i=Vc();return i?i.sanitize(Cs.URL,n)||"":il(n,"URL")?Il(n):function E(n){return(n=String(n)).match(c)?n:"unsafe:"+n}(ft(n))}function Rh(n){const i=Vc();if(i)return Wd(i.sanitize(Cs.RESOURCE_URL,n)||"");if(il(n,"ResourceURL"))return Wd(Il(n));throw new nt(904,!1)}function Uc(n,i,o){return function xf(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?Rh:Qd}(i,o)(n)}function Vc(){const n=Dt();return n&&n[He]}const Nh=new Ke("ENVIRONMENT_INITIALIZER"),Rf=new Ke("INJECTOR",-1),Bc=new Ke("INJECTOR_DEF_TYPES");class Jd{get(i,o=lr){if(o===lr){const u=new Error(`NullInjectorError: No provider for ${be(i)}!`);throw u.name="NullInjectorError",u}return o}}function Bp(n){return{\u0275providers:n}}function Pf(...n){return{\u0275providers:Xd(0,n),\u0275fromNgModule:!0}}function Xd(n,...i){const o=[],u=new Set;let d;return Ji(i,_=>{const T=_;kh(T,o,[],u)&&(d||(d=[]),d.push(T))}),void 0!==d&&Oh(d,o),o}function Oh(n,i){for(let o=0;o<n.length;o++){const{providers:d}=n[o];Fh(d,_=>{i.push(_)})}}function kh(n,i,o,u){if(!(n=Me(n)))return!1;let d=null,_=pn(n);const T=!_&&Ut(n);if(_||T){if(T&&!T.standalone)return!1;d=n}else{const F=n.ngModule;if(_=pn(F),!_)return!1;d=F}const N=u.has(d);if(T){if(N)return!1;if(u.add(d),T.dependencies){const F="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const z of F)kh(z,i,o,u)}}else{if(!_)return!1;{if(null!=_.imports&&!N){let z;u.add(d);try{Ji(_.imports,se=>{kh(se,i,o,u)&&(z||(z=[]),z.push(se))})}finally{}void 0!==z&&Oh(z,i)}if(!N){const z=ns(d)||(()=>new d);i.push({provide:d,useFactory:z,deps:Ue},{provide:Bc,useValue:d,multi:!0},{provide:Nh,useValue:()=>Hn(d),multi:!0})}const F=_.providers;null==F||N||Fh(F,se=>{i.push(se)})}}return d!==n&&void 0!==n.providers}function Fh(n,i){for(let o of n)Ye(o)&&(o=o.\u0275providers),Array.isArray(o)?Fh(o,i):i(o)}const Nf=Ne({provide:String,useValue:Ne});function Lh(n){return null!==n&&"object"==typeof n&&Nf in n}function rc(n){return"function"==typeof n}const eh=new Ke("Set Injector scope."),Fu={},Of={};let Uh;function Dd(){return void 0===Uh&&(Uh=new Jd),Uh}class Tl{}class ic extends Tl{get destroyed(){return this._destroyed}constructor(i,o,u,d){super(),this.parent=o,this.source=u,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$h(i,T=>this.processProvider(T)),this.records.set(Rf,sc(void 0,this)),d.has("environment")&&this.records.set(Tl,sc(void 0,this));const _=this.records.get(eh);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(Bc.multi,Ue,cn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=Bn(this),u=ur(void 0);try{return i()}finally{Bn(o),ur(u)}}get(i,o=lr,u=cn.Default){this.assertNotDestroyed(),u=Qe(u);const d=Bn(this),_=ur(void 0);try{if(!(u&cn.SkipSelf)){let N=this.records.get(i);if(void 0===N){const F=function Ff(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ke}(i)&&pr(i);N=F&&this.injectableDefInScope(F)?sc(jl(i),Fu):null,this.records.set(i,N)}if(null!=N)return this.hydrate(i,N)}return(u&cn.Self?Dd():this.parent).get(i,o=u&cn.Optional&&o===lr?null:o)}catch(T){if("NullInjectorError"===T.name){if((T[Er]=T[Er]||[]).unshift(be(i)),d)throw T;return function ct(n,i,o,u){const d=n[Er];throw i[Nn]&&d.unshift(i[Nn]),n.message=function ge(n,i,o,u=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Wr?n.slice(2):n;let d=be(i);if(Array.isArray(i))d=i.map(be).join(" -> ");else if("object"==typeof i){let _=[];for(let T in i)if(i.hasOwnProperty(T)){let N=i[T];_.push(T+":"+("string"==typeof N?JSON.stringify(N):be(N)))}d=`{${_.join(", ")}}`}return`${o}${u?"("+u+")":""}[${d}]: ${n.replace(ri,"\n  ")}`}("\n"+n.message,d,o,u),n[Vr]=d,n[Er]=null,n}(T,i,"R3InjectorError",this.source)}throw T}finally{ur(_),Bn(d)}}resolveInjectorInitializers(){const i=Bn(this),o=ur(void 0);try{const u=this.get(Nh.multi,Ue,cn.Self);for(const d of u)d()}finally{Bn(i),ur(o)}}toString(){const i=[],o=this.records;for(const u of o.keys())i.push(be(u));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new nt(205,!1)}processProvider(i){let o=rc(i=Me(i))?i:Me(i&&i.provide);const u=function Sd(n){return Lh(n)?sc(void 0,n.useValue):sc(Vh(n),Fu)}(i);if(rc(i)||!0!==i.multi)this.records.get(o);else{let d=this.records.get(o);d||(d=sc(void 0,Fu,!0),d.factory=()=>De(d.multi),this.records.set(o,d)),o=i,d.multi.push(i)}this.records.set(o,u)}hydrate(i,o){return o.value===Fu&&(o.value=Of,o.value=o.factory()),"object"==typeof o.value&&o.value&&function kf(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=Me(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function jl(n){const i=pr(n),o=null!==i?i.factory:ns(n);if(null!==o)return o;if(n instanceof Ke)throw new nt(204,!1);if(n instanceof Function)return function bc(n){const i=n.length;if(i>0)throw function es(n,i){const o=[];for(let u=0;u<n;u++)o.push(i);return o}(i,"?"),new nt(204,!1);const o=function Ur(n){return n&&(n[Nr]||n[ui])||null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new nt(204,!1)}function Vh(n,i,o){let u;if(rc(n)){const d=Me(n);return ns(d)||jl(d)}if(Lh(n))u=()=>Me(n.useValue);else if(function Cc(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...De(n.deps||[]));else if(function $l(n){return!(!n||!n.useExisting)}(n))u=()=>Hn(Me(n.useExisting));else{const d=Me(n&&(n.useClass||n.provide));if(!function Bh(n){return!!n.deps}(n))return ns(d)||jl(d);u=()=>new d(...De(n.deps))}return u}function sc(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function $h(n,i){for(const o of n)Array.isArray(o)?$h(o,i):o&&Ye(o)?$h(o.\u0275providers,i):i(o)}class Lf{}class Uf{}class Hp{resolveComponentFactory(i){throw function th(n){const i=Error(`No component factory found for ${be(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let Hc=(()=>{class n{}return n.NULL=new Hp,n})();function m(){return v(Ui(),Dt())}function v(n,i){return new w(ti(n,i))}let w=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=m,n})();function M(n){return n instanceof w?n.nativeElement:n}class Q{}let Ve=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Ot(){const n=Dt(),o=ki(Ui().index,n);return(Gi(o)?o:n)[Ie]}(),n})(),bn=(()=>{class n{}return n.\u0275prov=_n({token:n,providedIn:"root",factory:()=>null}),n})();class Vn{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const vr=new Vn("15.2.9"),Xr={},xi="ngOriginalError";function Bs(n){return n[xi]}class _s{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Bs(i);for(;o&&Bs(o);)o=Bs(o);return o||null}}function eu(n){return n instanceof Function?n():n}function jh(n,i,o){let u=n.length;for(;;){const d=n.indexOf(i,o);if(-1===d)return d;if(0===d||n.charCodeAt(d-1)<=32){const _=i.length;if(d+_===u||n.charCodeAt(d+_)<=32)return d}o=d+1}}const Wp="ng-template";function zc(n,i,o){let u=0,d=!0;for(;u<n.length;){let _=n[u++];if("string"==typeof _&&d){const T=n[u++];if(o&&"class"===_&&-1!==jh(T.toLowerCase(),i,0))return!0}else{if(1===_){for(;u<n.length&&"string"==typeof(_=n[u++]);)if(_.toLowerCase()===i)return!0;return!1}"number"==typeof _&&(d=!1)}}return!1}function Ad(n){return 4===n.type&&n.value!==Wp}function mm(n,i,o){return i===(4!==n.type||o?n.value:Wp)}function xd(n,i,o){let u=4;const d=n.attrs||[],_=function _m(n){for(let i=0;i<n.length;i++)if(Lt(n[i]))return i;return n.length}(d);let T=!1;for(let N=0;N<i.length;N++){const F=i[N];if("number"!=typeof F){if(!T)if(4&u){if(u=2|1&u,""!==F&&!mm(n,F,o)||""===F&&1===i.length){if(Gl(u))return!1;T=!0}}else{const z=8&u?F:i[++N];if(8&u&&null!==n.attrs){if(!zc(n.attrs,z,o)){if(Gl(u))return!1;T=!0}continue}const Ae=rh(8&u?"class":F,d,Ad(n),o);if(-1===Ae){if(Gl(u))return!1;T=!0;continue}if(""!==z){let We;We=Ae>_?"":d[Ae+1].toLowerCase();const ut=8&u?We:null;if(ut&&-1!==jh(ut,z,0)||2&u&&z!==We){if(Gl(u))return!1;T=!0}}}}else{if(!T&&!Gl(u)&&!Gl(F))return!1;if(T&&Gl(F))continue;T=!1,u=F|1&u}}return Gl(u)||T}function Gl(n){return 0==(1&n)}function rh(n,i,o,u){if(null===i)return-1;let d=0;if(u||!o){let _=!1;for(;d<i.length;){const T=i[d];if(T===n)return d;if(3===T||6===T)_=!0;else{if(1===T||2===T){let N=i[++d];for(;"string"==typeof N;)N=i[++d];continue}if(4===T)break;if(0===T){d+=4;continue}}d+=_?1:2}return-1}return function X_(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,n)}function qp(n,i,o=!1){for(let u=0;u<i.length;u++)if(xd(n,i[u],o))return!0;return!1}function vm(n,i){return n?":not("+i.trim()+")":i}function Em(n){let i=n[0],o=1,u=2,d="",_=!1;for(;o<n.length;){let T=n[o];if("string"==typeof T)if(2&u){const N=n[++o];d+="["+T+(N.length>0?'="'+N+'"':"")+"]"}else 8&u?d+="."+T:4&u&&(d+=" "+T);else""!==d&&!Gl(T)&&(i+=vm(_,d),d=""),u=T,_=_||!Gl(u);o++}return""!==d&&(i+=vm(_,d)),i}const ni={};function wm(n){Zp(wr(),Dt(),gi()+n,!1)}function Zp(n,i,o,u){if(!u)if(3==(3&i[zn])){const _=n.preOrderCheckHooks;null!==_&&fa(i,_,o)}else{const _=n.preOrderHooks;null!==_&&ja(i,_,0,o)}hi(o)}function Dm(n,i=null,o=null,u){const d=Bf(n,i,o,u);return d.resolveInjectorInitializers(),d}function Bf(n,i=null,o=null,u,d=new Set){const _=[o||Ue,Pf(n)];return u=u||("object"==typeof n?void 0:be(n)),new ic(_,i||Dd(),u||null,d)}let $s=(()=>{class n{static create(o,u){if(Array.isArray(o))return Dm({name:""},u,o,"");{const d=o.name??"";return Dm({name:d},o.parent,o.providers,d)}}}return n.THROW_IF_NOT_FOUND=lr,n.NULL=new Jd,n.\u0275prov=_n({token:n,providedIn:"any",factory:()=>Hn(Rf)}),n.__NG_ELEMENT_ID__=-1,n})();function Rd(n,i=cn.Default){const o=Dt();return null===o?Hn(n,i):Ql(Ui(),o,Me(n),i)}function sg(){throw new Error("invalid")}function Hf(n,i){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const _=o[u+1];if(-1!==_){const T=n.data[_];Wi(o[u]),T.contentQueries(2,i[_],_)}}}function qh(n,i,o,u,d,_,T,N,F,z,se){const Ae=i.blueprint.slice();return Ae[Lr]=d,Ae[zn]=76|u,(null!==se||n&&1024&n[zn])&&(Ae[zn]|=1024),La(Ae),Ae[Tn]=Ae[qe]=n,Ae[fe]=o,Ae[he]=T||n&&n[he],Ae[Ie]=N||n&&n[Ie],Ae[He]=F||n&&n[He]||null,Ae[te]=z||n&&n[te]||null,Ae[Xn]=_,Ae[br]=function Zs(){return gd++}(),Ae[Ti]=se,Ae[_t]=2==i.type?n[_t]:Ae,Ae}function Pd(n,i,o,u,d){let _=n.data[i];if(null===_)_=function Zh(n,i,o,u,d){const _=Va(),T=fo(),F=n.data[i]=function dy(n,i,o,u,d,_){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?_:_&&_.parent,o,i,u,d);return null===n.firstChild&&(n.firstChild=F),null!==_&&(T?null==_.child&&null!==F.parent&&(_.child=F):null===_.next&&(_.next=F,F.prev=_)),F}(n,i,o,u,d),function Uu(){return Wn.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=o,_.value=u,_.attrs=d;const T=function is(){const n=Wn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();_.injectorIndex=null===T?-1:T.injectorIndex}return vi(_,!0),_}function Zc(n,i,o,u){if(0===o)return-1;const d=i.length;for(let _=0;_<o;_++)i.push(u),n.blueprint.push(u),n.data.push(null);return d}function Nd(n,i,o){Ns(i);try{const u=n.viewQuery;null!==u&&yg(1,u,o);const d=n.template;null!==d&&zf(n,i,d,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Hf(n,i),n.staticViewQueries&&yg(2,n.viewQuery,o);const _=n.components;null!==_&&function og(n,i){for(let o=0;o<i.length;o++)_g(n,i[o])}(i,_)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{i[zn]&=-5,ks()}}function Od(n,i,o,u){const d=i[zn];if(128!=(128&d)){Ns(i);try{La(i),function Wo(n){return Wn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&zf(n,i,o,2,u);const T=3==(3&d);if(T){const z=n.preOrderCheckHooks;null!==z&&fa(i,z,null)}else{const z=n.preOrderHooks;null!==z&&ja(i,z,0,null),k(i,0)}if(function py(n){for(let i=_l(n);null!==i;i=ea(i)){if(!i[Ia])continue;const o=i[ps];for(let u=0;u<o.length;u++){const d=o[u];512&d[zn]||Ua(d[Tn],1),d[zn]|=512}}}(i),function pg(n){for(let i=_l(n);null!==i;i=ea(i))for(let o=zi;o<i.length;o++){const u=i[o],d=u[Zt];yi(u)&&Od(d,u,d.template,u[fe])}}(i),null!==n.contentQueries&&Hf(n,i),T){const z=n.contentCheckHooks;null!==z&&fa(i,z)}else{const z=n.contentHooks;null!==z&&ja(i,z,1),k(i,1)}!function ly(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const d=o[u];if(d<0)hi(~d);else{const _=d,T=o[++u],N=o[++u];Mi(T,_),N(2,i[_])}}}finally{hi(-1)}}(n,i);const N=n.components;null!==N&&function cy(n,i){for(let o=0;o<i.length;o++)gg(n,i[o])}(i,N);const F=n.viewQuery;if(null!==F&&yg(2,F,u),T){const z=n.viewCheckHooks;null!==z&&fa(i,z)}else{const z=n.viewHooks;null!==z&&ja(i,z,2),k(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[zn]&=-41,512&i[zn]&&(i[zn]&=-513,Ua(i[Tn],-1))}finally{ks()}}}function zf(n,i,o,u,d){const _=gi(),T=2&u;try{hi(-1),T&&i.length>dr&&Zp(n,i,dr,!1),en(T?2:0,d),o(u,d)}finally{hi(_),en(T?3:1,d)}}function Kh(n,i,o){if(Hs(i)){const d=i.directiveEnd;for(let _=i.directiveStart;_<d;_++){const T=n.data[_];T.contentQueries&&T.contentQueries(1,o[_],_)}}}function Yh(n,i,o){eo()&&(function fy(n,i,o,u){const d=o.directiveStart,_=o.directiveEnd;bo(o)&&function Vm(n,i,o){const u=ti(i,n),d=Pm(o),_=n[he],T=oh(n,qh(n,d,null,o.onPush?32:16,u,i,_,_.createRenderer(u,o),null,null,null));n[i.index]=T}(i,o,n.data[d+o.componentOffset]),n.firstCreatePass||ju(o,i),_r(u,i);const T=o.initialInputs;for(let N=d;N<_;N++){const F=n.data[N],z=kr(i,n,N,o);_r(z,i),null!==T&&Yc(0,N-d,z,F,0,T),Yr(F)&&(ki(o.index,i)[fe]=kr(i,n,N,o))}}(n,i,o,ti(o,i)),64==(64&o.flags)&&Um(n,i,o))}function Gf(n,i,o=ti){const u=i.localNames;if(null!==u){let d=i.index+1;for(let _=0;_<u.length;_+=2){const T=u[_+1],N=-1===T?o(i,n):n[T];n[d++]=N}}}function Pm(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=Wf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function Wf(n,i,o,u,d,_,T,N,F,z){const se=dr+u,Ae=se+d,We=function qf(n,i){const o=[];for(let u=0;u<i;u++)o.push(u<n?null:ni);return o}(se,Ae),ut="function"==typeof z?z():z;return We[Zt]={type:n,blueprint:We,template:o,queries:null,viewQuery:N,declTNode:i,data:We.slice().fill(null,se),bindingStartIndex:se,expandoStartIndex:Ae,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:F,consts:ut,incompleteFirstPass:!1}}function Nm(n,i,o,u){const d=vg(i);null===o?d.push(u):(d.push(o),n.firstCreatePass&&Eg(n).push(u,d.length-1))}function Oa(n,i,o,u){for(let d in n)if(n.hasOwnProperty(d)){o=null===o?{}:o;const _=n[d];null===u?Om(o,i,d,_):u.hasOwnProperty(d)&&Om(o,i,u[d],_)}return o}function Om(n,i,o,u){n.hasOwnProperty(o)?n[o].push(i,u):n[o]=[i,u]}function ka(n,i,o,u,d,_,T,N){const F=ti(i,o);let se,z=i.inputs;!N&&null!=z&&(se=z[u])?(wg(n,o,se,u,d),bo(i)&&function ug(n,i){const o=ki(i,n);16&o[zn]||(o[zn]|=32)}(o,i.index)):3&i.type&&(u=function Zf(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),d=null!=T?T(d,i.value||"",u):d,_.setProperty(F,u,d))}function lg(n,i,o,u){if(eo()){const d=null===u?null:{"":-1},_=function dg(n,i){const o=n.directiveRegistry;let u=null,d=null;if(o)for(let _=0;_<o.length;_++){const T=o[_];if(qp(i,T.selectors,!1))if(u||(u=[]),Yr(T))if(null!==T.findHostDirectiveDefs){const N=[];d=d||new Map,T.findHostDirectiveDefs(T,N,d),u.unshift(...N,T),Kc(n,i,N.length)}else u.unshift(T),Kc(n,i,0);else d=d||new Map,T.findHostDirectiveDefs?.(T,u,d),u.push(T)}return null===u?null:[u,d]}(n,o);let T,N;null===_?T=N=null:[T,N]=_,null!==T&&Lm(n,i,o,T,d,N),d&&function hg(n,i,o){if(i){const u=n.localNames=[];for(let d=0;d<i.length;d+=2){const _=o[i[d+1]];if(null==_)throw new nt(-301,!1);u.push(i[d],_)}}}(o,u,d)}o.mergedAttrs=wi(o.mergedAttrs,o.attrs)}function Lm(n,i,o,u,d,_){for(let z=0;z<u.length;z++)Yl(ju(o,i),n,u[z].type);!function Jh(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,u.length);for(let z=0;z<u.length;z++){const se=u[z];se.providersResolver&&se.providersResolver(se)}let T=!1,N=!1,F=Zc(n,i,u.length,null);for(let z=0;z<u.length;z++){const se=u[z];o.mergedAttrs=wi(o.mergedAttrs,se.hostAttrs),fg(n,o,i,F,se),Kf(F,se,d),null!==se.contentQueries&&(o.flags|=4),(null!==se.hostBindings||null!==se.hostAttrs||0!==se.hostVars)&&(o.flags|=64);const Ae=se.type.prototype;!T&&(Ae.ngOnChanges||Ae.ngOnInit||Ae.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(o.index),T=!0),!N&&(Ae.ngOnChanges||Ae.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(o.index),N=!0),F++}!function km(n,i,o){const d=i.directiveEnd,_=n.data,T=i.attrs,N=[];let F=null,z=null;for(let se=i.directiveStart;se<d;se++){const Ae=_[se],We=o?o.get(Ae):null,Bt=We?We.outputs:null;F=Oa(Ae.inputs,se,F,We?We.inputs:null),z=Oa(Ae.outputs,se,z,Bt);const yn=null===F||null===T||Ad(i)?null:Bm(F,se,T);N.push(yn)}null!==F&&(F.hasOwnProperty("class")&&(i.flags|=8),F.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=N,i.inputs=F,i.outputs=z}(n,o,_)}function Um(n,i,o){const u=o.directiveStart,d=o.directiveEnd,_=o.index,T=function vs(){return Wn.lFrame.currentDirectiveIndex}();try{hi(_);for(let N=u;N<d;N++){const F=n.data[N],z=i[N];xo(N),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&Qh(F,z)}}finally{hi(-1),xo(T)}}function Qh(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Kc(n,i,o){i.componentOffset=o,(n.components??(n.components=[])).push(i.index)}function Kf(n,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=n;Yr(i)&&(o[""]=n)}}function fg(n,i,o,u,d){n.data[u]=d;const _=d.factory||(d.factory=ns(d.type)),T=new xe(_,Yr(d),Rd);n.blueprint[u]=T,o[u]=T,function hy(n,i,o,u,d){const _=d.hostBindings;if(_){let T=n.hostBindingOpCodes;null===T&&(T=n.hostBindingOpCodes=[]);const N=~i.index;(function cg(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(T)!=N&&T.push(N),T.push(o,u,_)}}(n,i,u,Zc(n,o,d.hostVars,ni),d)}function Dl(n,i,o,u,d,_){const T=ti(n,i);!function Xh(n,i,o,u,d,_,T){if(null==_)n.removeAttribute(i,d,o);else{const N=null==T?ft(_):T(_,u||"",d);n.setAttribute(i,d,N,o)}}(i[Ie],T,_,n.value,o,u,d)}function Yc(n,i,o,u,d,_){const T=_[i];if(null!==T){const N=u.setInput;for(let F=0;F<T.length;){const z=T[F++],se=T[F++],Ae=T[F++];null!==N?u.setInput(o,Ae,z,se):o[se]=Ae}}}function Bm(n,i,o){let u=null,d=0;for(;d<o.length;){const _=o[d];if(0!==_)if(5!==_){if("number"==typeof _)break;if(n.hasOwnProperty(_)){null===u&&(u=[]);const T=n[_];for(let N=0;N<T.length;N+=2)if(T[N]===i){u.push(_,T[N+1],o[d+1]);break}}d+=2}else d+=2;else d+=4}return u}function $m(n,i,o,u){return[n,!0,!1,i,null,0,u,o,null,null]}function gg(n,i){const o=ki(i,n);if(yi(o)){const u=o[Zt];48&o[zn]?Od(u,o,u.template,o[fe]):o[Dn]>0&&mg(o)}}function mg(n){for(let u=_l(n);null!==u;u=ea(u))for(let d=zi;d<u.length;d++){const _=u[d];if(yi(_))if(512&_[zn]){const T=_[Zt];Od(T,_,T.template,_[fe])}else _[Dn]>0&&mg(_)}const o=n[Zt].components;if(null!==o)for(let u=0;u<o.length;u++){const d=ki(o[u],n);yi(d)&&d[Dn]>0&&mg(d)}}function _g(n,i){const o=ki(i,n),u=o[Zt];(function Yf(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(u,o),Nd(u,o,o[fe])}function oh(n,i){return n[Z]?n[ve][In]=i:n[Z]=i,n[ve]=i,i}function ef(n){for(;n;){n[zn]|=32;const i=tc(n);if(Br(n)&&!i)return n;n=i}return null}function Dc(n,i,o,u=!0){const d=i[he];d.begin&&d.begin();try{Od(n,i,n.template,o)}catch(T){throw u&&Qf(i,T),T}finally{d.end&&d.end()}}function yg(n,i,o){Wi(0),i(n,o)}function vg(n){return n[Zn]||(n[Zn]=[])}function Eg(n){return n.cleanup||(n.cleanup=[])}function Qf(n,i){const o=n[te],u=o?o.get(_s,null):null;u&&u.handleError(i)}function wg(n,i,o,u,d){for(let _=0;_<o.length;){const T=o[_++],N=o[_++],F=i[T],z=n.data[T];null!==z.setInput?z.setInput(F,d,u,N):F[N]=d}}function Wl(n,i,o){const u=Oi(i,n);!function Ra(n,i,o){n.setValue(i,o)}(n[Ie],u,o)}function Jf(n,i,o){let u=o?n.styles:null,d=o?n.classes:null,_=0;if(null!==i)for(let T=0;T<i.length;T++){const N=i[T];"number"==typeof N?_=N:1==_?d=Ze(d,N):2==_&&(u=Ze(u,N+": "+i[++T]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=d:n.classesWithoutHost=d}function ah(n,i,o,u,d=!1){for(;null!==o;){const _=i[o.index];if(null!==_&&u.push(Un(_)),sr(_))for(let N=zi;N<_.length;N++){const F=_[N],z=F[Zt].firstChild;null!==z&&ah(F[Zt],F,z,u)}const T=o.type;if(8&T)ah(n,i,o.child,u);else if(32&T){const N=pu(o,i);let F;for(;F=N();)u.push(F)}else if(16&T){const N=Oc(i,o);if(Array.isArray(N))u.push(...N);else{const F=tc(i[_t]);ah(F[Zt],F,N,u,!0)}}o=d?o.projectionNext:o.next}return u}class tf{get rootNodes(){const i=this._lView,o=i[Zt];return ah(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[fe]}set context(i){this._lView[fe]=i}get destroyed(){return 128==(128&this._lView[zn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[Tn];if(sr(i)){const o=i[uo],u=o?o.indexOf(this):-1;u>-1&&(q(i,u),uu(o,u))}this._attachedToViewContainer=!1}oe(this._lView[Zt],this._lView)}onDestroy(i){Nm(this._lView[Zt],this._lView,null,i)}markForCheck(){ef(this._cdRefInjectingView||this._lView)}detach(){this._lView[zn]&=-65}reattach(){this._lView[zn]|=64}detectChanges(){Dc(this._lView[Zt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new nt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function yl(n,i){yc(n,i,i[Ie],2,null,null)}(this._lView[Zt],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new nt(902,!1);this._appRef=i}}class Ig extends tf{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Dc(i[Zt],i,i[fe],!1)}checkNoChanges(){}get context(){return null}}class Cg extends Hc{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Ut(i);return new oc(o,this.ngModule)}}function Xf(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class Tg{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,u){u=Qe(u);const d=this.injector.get(i,Xr,u);return d!==Xr||o===Xr?d:this.parentInjector.get(i,o,u)}}class oc extends Uf{get inputs(){return Xf(this.componentDef.inputs)}get outputs(){return Xf(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function ey(n){return n.map(Em).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,u,d){let _=(d=d||this.ngModule)instanceof Tl?d:d?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const T=_?new Tg(i,_):i,N=T.get(Q,null);if(null===N)throw new nt(407,!1);const F=T.get(bn,null),z=N.createRenderer(null,this.componentDef),se=this.componentDef.selectors[0][0]||"div",Ae=u?function ag(n,i,o){return n.selectRootElement(i,o===re.ShadowDom)}(z,u,this.componentDef.encapsulation):Xu(z,se,function bg(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(se)),We=this.componentDef.onPush?288:272,ut=Wf(0,null,null,1,0,null,null,null,null,null),Bt=qh(null,ut,null,We,null,null,N,z,F,T,null);let yn,Gn;Ns(Bt);try{const or=this.componentDef;let Hr,nn=null;or.findHostDirectiveDefs?(Hr=[],nn=new Map,or.findHostDirectiveDefs(or,Hr,nn),Hr.push(or)):Hr=[or];const ai=function uh(n,i){const o=n[Zt],u=dr;return n[u]=i,Pd(o,u,2,"#host",null)}(Bt,Ae),ao=function lh(n,i,o,u,d,_,T,N){const F=d[Zt];!function Gm(n,i,o,u){for(const d of n)i.mergedAttrs=wi(i.mergedAttrs,d.hostAttrs);null!==i.mergedAttrs&&(Jf(i,i.mergedAttrs,!0),null!==o&&wl(u,o,i))}(u,n,i,T);const z=_.createRenderer(i,o),se=qh(d,Pm(o),null,o.onPush?32:16,d[n.index],n,_,z,N||null,null,null);return F.firstCreatePass&&Kc(F,n,u.length-1),oh(d,se),d[n.index]=se}(ai,Ae,or,Hr,Bt,N,z);Gn=Ho(ut,dr),Ae&&function gy(n,i,o,u){if(u)mi(n,o,["ng-version",vr.full]);else{const{attrs:d,classes:_}=function Vf(n){const i=[],o=[];let u=1,d=2;for(;u<n.length;){let _=n[u];if("string"==typeof _)2===d?""!==_&&i.push(_,n[++u]):8===d&&o.push(_);else{if(!Gl(d))break;d=_}u++}return{attrs:i,classes:o}}(i.selectors[0]);d&&mi(n,o,d),_&&_.length>0&&Hd(n,o,_.join(" "))}}(z,or,Ae,u),void 0!==o&&function my(n,i,o){const u=n.projection=[];for(let d=0;d<i.length;d++){const _=o[d];u.push(null!=_?Array.from(_):null)}}(Gn,this.ngContentSelectors,o),yn=function ch(n,i,o,u,d,_){const T=Ui(),N=d[Zt],F=ti(T,d);Lm(N,d,T,o,null,u);for(let se=0;se<o.length;se++)_r(kr(d,N,T.directiveStart+se,T),d);Um(N,d,T),F&&_r(F,d);const z=kr(d,N,T.directiveStart+T.componentOffset,T);if(n[fe]=d[fe]=z,null!==_)for(const se of _)se(z,i);return Kh(N,T,n),z}(ao,or,Hr,nn,Bt,[Dg]),Nd(ut,Bt,null)}finally{ks()}return new Qc(this.componentType,yn,v(Gn,Bt),Bt,Gn)}}class Qc extends Lf{constructor(i,o,u,d,_){super(),this.location=u,this._rootLView=d,this._tNode=_,this.instance=o,this.hostView=this.changeDetectorRef=new Ig(d),this.componentType=i}setInput(i,o){const u=this._tNode.inputs;let d;if(null!==u&&(d=u[i])){const _=this._rootLView;wg(_[Zt],_,d,i,o),ef(ki(this._tNode.index,_))}}get injector(){return new pa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Dg(){const n=Ui();Vu(Dt()[Zt],n)}function nf(n){let i=function ep(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;i;){let d;if(Yr(n))d=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new nt(903,!1);d=i.\u0275dir}if(d){if(o){u.push(d);const T=n;T.inputs=Ag(n.inputs),T.declaredInputs=Ag(n.declaredInputs),T.outputs=Ag(n.outputs);const N=d.hostBindings;N&&Mg(n,N);const F=d.viewQuery,z=d.contentQueries;if(F&&_y(n,F),z&&xg(n,z),$e(n.inputs,d.inputs),$e(n.declaredInputs,d.declaredInputs),$e(n.outputs,d.outputs),Yr(d)&&d.data.animation){const se=n.data;se.animation=(se.animation||[]).concat(d.data.animation)}}const _=d.features;if(_)for(let T=0;T<_.length;T++){const N=_[T];N&&N.ngInherit&&N(n),N===nf&&(o=!1)}}i=Object.getPrototypeOf(i)}!function Sg(n){let i=0,o=null;for(let u=n.length-1;u>=0;u--){const d=n[u];d.hostVars=i+=d.hostVars,d.hostAttrs=wi(d.hostAttrs,o=wi(o,d.hostAttrs))}}(u)}function Ag(n){return n===Y?{}:n===Ue?[]:n}function _y(n,i){const o=n.viewQuery;n.viewQuery=o?(u,d)=>{i(u,d),o(u,d)}:i}function xg(n,i){const o=n.contentQueries;n.contentQueries=o?(u,d,_)=>{i(u,d,_),o(u,d,_)}:i}function Mg(n,i){const o=n.hostBindings;n.hostBindings=o?(u,d)=>{i(u,d),o(u,d)}:i}function tp(n){return!!rf(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function rf(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Sl(n,i,o){return n[i]=o}function Ea(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function Jc(n,i,o,u){const d=Ea(n,i,o);return Ea(n,i+1,u)||d}function kg(n,i,o,u){const d=Dt();return Ea(d,qo(),i)&&(wr(),Dl(Rr(),d,n,i,o,u)),kg}function hh(n,i,o,u){return Ea(n,qo(),o)?i+ft(o)+u:ni}function ed(n,i,o,u,d,_){const N=Jc(n,function Ei(){return Wn.lFrame.bindingIndex}(),o,d);return Rs(2),N?i+ft(o)+u+ft(d)+_:ni}function op(n,i,o,u,d,_,T,N){const F=Dt(),z=wr(),se=n+dr,Ae=z.firstCreatePass?function Iy(n,i,o,u,d,_,T,N,F){const z=i.consts,se=Pd(i,n,4,T||null,xs(z,N));lg(i,o,se,xs(z,F)),Vu(i,se);const Ae=se.tView=Wf(2,se,u,d,_,i.directiveRegistry,i.pipeRegistry,null,i.schemas,z);return null!==i.queries&&(i.queries.template(i,se),Ae.queries=i.queries.embeddedTView(se)),se}(se,z,F,i,o,u,d,_,T):z.data[se];vi(Ae,!1);const We=F[Ie].createComment("");Ou(z,F,We,Ae),_r(We,F),oh(F,F[se]=$m(We,F,We,Ae)),gs(Ae)&&Yh(z,F,Ae),null!=T&&Gf(F,Ae,N)}function ap(n){return ii(function Ws(){return Wn.lFrame.contextLView}(),dr+n)}function Lg(n,i,o){const u=Dt();return Ea(u,qo(),i)&&ka(wr(),Rr(),u,n,i,u[Ie],o,!1),Lg}function af(n,i,o,u,d){const T=d?"class":"style";wg(n,o,i.inputs[T],T,u)}function gh(n,i,o,u){const d=Dt(),_=wr(),T=dr+n,N=d[Ie],F=_.firstCreatePass?function by(n,i,o,u,d,_){const T=i.consts,F=Pd(i,n,2,u,xs(T,d));return lg(i,o,F,xs(T,_)),null!==F.attrs&&Jf(F,F.attrs,!1),null!==F.mergedAttrs&&Jf(F,F.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,F),F}(T,_,d,i,o,u):_.data[T],z=d[T]=Xu(N,i,function Fs(){return Wn.lFrame.currentNamespace}()),se=gs(F);return vi(F,!0),wl(N,z,F),32!=(32&F.flags)&&Ou(_,d,z,F),0===function oa(){return Wn.lFrame.elementDepthCount}()&&_r(z,d),function aa(){Wn.lFrame.elementDepthCount++}(),se&&(Yh(_,d,F),Kh(_,F,d)),null!==u&&Gf(d,F),gh}function uf(){let n=Ui();fo()?function ua(){Wn.lFrame.isParent=!1}():(n=n.parent,vi(n,!1));const i=n;!function Gs(){Wn.lFrame.elementDepthCount--}();const o=wr();return o.firstCreatePass&&(Vu(o,n),Hs(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function ar(n){return 0!=(8&n.flags)}(i)&&af(o,i,Dt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Or(n){return 0!=(16&n.flags)}(i)&&af(o,i,Dt(),i.stylesWithoutHost,!1),uf}function lf(n,i,o,u){return gh(n,i,o,u),uf(),lf}function Xm(){return Dt()}function cf(n){return!!n&&"function"==typeof n.then}function lp(n){return!!n&&"function"==typeof n.subscribe}const cp=lp;function Bg(n,i,o,u){const d=Dt(),_=wr(),T=Ui();return function dp(n,i,o,u,d,_,T){const N=gs(u),z=n.firstCreatePass&&Eg(n),se=i[fe],Ae=vg(i);let We=!0;if(3&u.type||T){const yn=ti(u,i),Gn=T?T(yn):yn,or=Ae.length,Hr=T?ai=>T(Un(ai[u.index])):u.index;let nn=null;if(!T&&N&&(nn=function Ty(n,i,o,u){const d=n.cleanup;if(null!=d)for(let _=0;_<d.length-1;_+=2){const T=d[_];if(T===o&&d[_+1]===u){const N=i[Zn],F=d[_+2];return N.length>F?N[F]:null}"string"==typeof T&&(_+=2)}return null}(n,i,d,u.index)),null!==nn)(nn.__ngLastListenerFn__||nn).__ngNextListenerFn__=_,nn.__ngLastListenerFn__=_,We=!1;else{_=Fd(u,i,se,_,!1);const ai=o.listen(Gn,d,_);Ae.push(_,ai),z&&z.push(d,Hr,or,or+1)}}else _=Fd(u,i,se,_,!1);const ut=u.outputs;let Bt;if(We&&null!==ut&&(Bt=ut[d])){const yn=Bt.length;if(yn)for(let Gn=0;Gn<yn;Gn+=2){const ao=i[Bt[Gn]][Bt[Gn+1]].subscribe(_),ia=Ae.length;Ae.push(_,ao),z&&z.push(d,u.index,ia,-(ia+1))}}}(_,d,d[Ie],T,n,i,u),Bg}function $g(n,i,o,u){try{return en(6,i,o),!1!==o(u)}catch(d){return Qf(n,d),!1}finally{en(7,i,o)}}function Fd(n,i,o,u,d){return function _(T){if(T===Function)return u;ef(n.componentOffset>-1?ki(n.index,i):i);let F=$g(i,o,u,T),z=_.__ngNextListenerFn__;for(;z;)F=$g(i,o,z,T)&&F,z=z.__ngNextListenerFn__;return d&&!1===F&&(T.preventDefault(),T.returnValue=!1),F}}function jg(n=1){return function Ro(n){return(Wn.lFrame.contextLView=function to(n,i){for(;n>0;)i=i[qe],n--;return i}(n,Wn.lFrame.contextLView))[fe]}(n)}function Hg(n,i,o){return zg(n,"",i,"",o),Hg}function zg(n,i,o,u,d){const _=Dt(),T=hh(_,i,o,u);return T!==ni&&ka(wr(),Rr(),_,n,T,_[Ie],d,!1),zg}function _h(n,i){return n<<17|i<<2}function Sc(n){return n>>17&32767}function ff(n){return 2|n}function sd(n){return(131068&n)>>2}function od(n,i){return-131069&n|i<<2}function qg(n){return 1|n}function Zg(n,i,o,u,d){const _=n[o+1],T=null===i;let N=u?Sc(_):sd(_),F=!1;for(;0!==N&&(!1===F||T);){const se=n[N+1];xy(n[N],i)&&(F=!0,n[N+1]=u?qg(se):ff(se)),N=u?Sc(se):sd(se)}F&&(n[o+1]=u?ff(_):qg(_))}function xy(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&D(n,i)>=0}const ra={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function n_(n){return n.substring(ra.key,ra.keyEnd)}function vp(n,i){const o=ra.textEnd;return o===i?-1:(i=ra.keyEnd=function bi(n,i,o){for(;i<o&&n.charCodeAt(i)>32;)i++;return i}(n,ra.key=i,o),Ac(n,i,o))}function Ac(n,i,o){for(;i<o&&n.charCodeAt(i)<=32;)i++;return i}function Al(n,i){return function al(n,i,o,u){const d=Dt(),_=wr(),T=Rs(2);_.firstUpdatePass&&a_(_,n,T,u),i!==ni&&Ea(d,T,i)&&c_(_,_.data[gi()],d,d[Ie],n,d[T+1]=function Zv(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=be(Il(n)))),n}(i,o),u,T)}(n,i,null,!0),Al}function lc(n,i){for(let o=function r_(n){return function Yg(n){ra.key=0,ra.keyEnd=0,ra.value=0,ra.valueEnd=0,ra.textEnd=n.length}(n),vp(n,Ac(n,0,ra.textEnd))}(i);o>=0;o=vp(i,o))yo(n,n_(i),!0)}function Ep(n,i){return i>=n.expandoStartIndex}function a_(n,i,o,u){const d=n.data;if(null===d[o+1]){const _=d[gi()],T=Ep(n,o);h_(_,u)&&null===i&&!T&&(i=!1),i=function Py(n,i,o,u){const d=function Ps(n){const i=Wn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let _=u?i.residualClasses:i.residualStyles;if(null===d)0===(u?i.classBindings:i.styleBindings)&&(o=yh(o=Ys(null,n,i,o,u),i.attrs,u),_=null);else{const T=i.directiveStylingLast;if(-1===T||n[T]!==d)if(o=Ys(d,n,i,o,u),null===_){let F=function Ds(n,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==sd(u))return n[Sc(u)]}(n,i,u);void 0!==F&&Array.isArray(F)&&(F=Ys(null,n,i,F[1],u),F=yh(F,i.attrs,u),function qv(n,i,o,u){n[Sc(o?i.classBindings:i.styleBindings)]=u}(n,i,u,F))}else _=function Ny(n,i,o){let u;const d=i.directiveEnd;for(let _=1+i.directiveStylingLast;_<d;_++)u=yh(u,n[_].hostAttrs,o);return yh(u,i.attrs,o)}(n,i,u)}return void 0!==_&&(u?i.residualClasses=_:i.residualStyles=_),o}(d,_,i,u),function t_(n,i,o,u,d,_){let T=_?i.classBindings:i.styleBindings,N=Sc(T),F=sd(T);n[u]=o;let se,z=!1;if(Array.isArray(o)?(se=o[1],(null===se||D(o,se)>0)&&(z=!0)):se=o,d)if(0!==F){const We=Sc(n[N+1]);n[u+1]=_h(We,N),0!==We&&(n[We+1]=od(n[We+1],u)),n[N+1]=function e_(n,i){return 131071&n|i<<17}(n[N+1],u)}else n[u+1]=_h(N,0),0!==N&&(n[N+1]=od(n[N+1],u)),N=u;else n[u+1]=_h(F,0),0===N?N=u:n[F+1]=od(n[F+1],u),F=u;z&&(n[u+1]=ff(n[u+1])),Zg(n,se,u,!0),Zg(n,se,u,!1),function Ay(n,i,o,u,d){const _=d?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof i&&D(_,i)>=0&&(o[u+1]=qg(o[u+1]))}(i,se,n,u,_),T=_h(N,F),_?i.classBindings=T:i.styleBindings=T}(d,_,i,o,T,u)}}function Ys(n,i,o,u,d){let _=null;const T=o.directiveEnd;let N=o.directiveStylingLast;for(-1===N?N=o.directiveStart:N++;N<T&&(_=i[N],u=yh(u,_.hostAttrs,d),_!==n);)N++;return null!==n&&(o.directiveStylingLast=N),u}function yh(n,i,o){const u=o?1:2;let d=-1;if(null!==i)for(let _=0;_<i.length;_++){const T=i[_];"number"==typeof T?d=T:d===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),yo(n,T,!!o||i[++_]))}return void 0===n?null:n}function c_(n,i,o,u,d,_,T,N){if(!(3&i.type))return;const F=n.data,z=F[N+1],se=function Wg(n){return 1==(1&n)}(z)?d_(F,i,o,d,sd(z),T):void 0;wp(se)||(wp(_)||function yp(n){return 2==(2&n)}(z)&&(_=d_(F,null,o,d,N,T)),function yd(n,i,o,u,d){if(i)d?n.addClass(o,u):n.removeClass(o,u);else{let _=-1===u.indexOf("-")?void 0:qs.DashCase;null==d?n.removeStyle(o,u,_):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),_|=qs.Important),n.setStyle(o,u,d,_))}}(u,T,Oi(gi(),o),d,_))}function d_(n,i,o,u,d,_){const T=null===i;let N;for(;d>0;){const F=n[d],z=Array.isArray(F),se=z?F[1]:F,Ae=null===se;let We=o[d+1];We===ni&&(We=Ae?Ue:void 0);let ut=Ae?Ga(We,u):se===u?We:void 0;if(z&&!wp(ut)&&(ut=Ga(F,u)),wp(ut)&&(N=ut,T))return N;const Bt=n[d+1];d=T?Sc(Bt):sd(Bt)}if(null!==i){let F=_?i.residualClasses:i.residualStyles;null!=F&&(N=Ga(F,u))}return N}function wp(n){return void 0!==n}function h_(n,i){return 0!=(n.flags&(i?8:16))}function f_(n,i=""){const o=Dt(),u=wr(),d=n+dr,_=u.firstCreatePass?Pd(u,d,1,i,null):u.data[d],T=o[d]=function us(n,i){return n.createText(i)}(o[Ie],i);Ou(u,o,T,_),vi(_,!1)}function Ip(n){return ad("",n,""),Ip}function ad(n,i,o){const u=Dt(),d=hh(u,n,i,o);return d!==ni&&Wl(u,gi(),d),ad}function Xg(n,i,o,u,d){const _=Dt(),T=ed(_,n,i,o,u,d);return T!==ni&&Wl(_,gi(),T),Xg}function em(n,i,o){!function ql(n,i,o,u){const d=wr(),_=Rs(2);d.firstUpdatePass&&a_(d,null,_,u);const T=Dt();if(o!==ni&&Ea(T,_,o)){const N=d.data[gi()];if(h_(N,u)&&!Ep(d,_)){let F=u?N.classesWithoutHost:N.stylesWithoutHost;null!==F&&(o=Ze(F,o||"")),af(d,N,T,o,u)}else!function ky(n,i,o,u,d,_,T,N){d===ni&&(d=Ue);let F=0,z=0,se=0<d.length?d[0]:null,Ae=0<_.length?_[0]:null;for(;null!==se||null!==Ae;){const We=F<d.length?d[F+1]:void 0,ut=z<_.length?_[z+1]:void 0;let yn,Bt=null;se===Ae?(F+=2,z+=2,We!==ut&&(Bt=Ae,yn=ut)):null===Ae||null!==se&&se<Ae?(F+=2,Bt=se):(z+=2,Bt=Ae,yn=ut),null!==Bt&&c_(n,i,o,u,Bt,yn,T,N),se=F<d.length?d[F]:null,Ae=z<_.length?_[z]:null}}(d,N,T,T[Ie],T[_+1],T[_+1]=function Oy(n,i,o){if(null==o||""===o)return Ue;const u=[],d=Il(o);if(Array.isArray(d))for(let _=0;_<d.length;_++)n(u,d[_],!0);else if("object"==typeof d)for(const _ in d)d.hasOwnProperty(_)&&n(u,_,d[_]);else"string"==typeof d&&i(u,d);return u}(n,i,o),u,_)}}(yo,lc,hh(Dt(),n,i,o),!0)}const Zl=void 0;var Ef=["en",[["a","p"],["AM","PM"],Zl],[["AM","PM"],Zl,Zl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zl,"{1} 'at' {0}",Zl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function $y(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let wh={};function C_(n){const i=function jy(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=b_(i);if(o)return o;const u=i.split("-")[0];if(o=b_(u),o)return o;if("en"===u)return Ef;throw new nt(701,!1)}function Sp(n){return C_(n)[Pr.PluralCase]}function b_(n){return n in wh||(wh[n]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[n]),wh[n]}var Pr=(()=>((Pr=Pr||{})[Pr.LocaleId=0]="LocaleId",Pr[Pr.DayPeriodsFormat=1]="DayPeriodsFormat",Pr[Pr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pr[Pr.DaysFormat=3]="DaysFormat",Pr[Pr.DaysStandalone=4]="DaysStandalone",Pr[Pr.MonthsFormat=5]="MonthsFormat",Pr[Pr.MonthsStandalone=6]="MonthsStandalone",Pr[Pr.Eras=7]="Eras",Pr[Pr.FirstDayOfWeek=8]="FirstDayOfWeek",Pr[Pr.WeekendRange=9]="WeekendRange",Pr[Pr.DateFormat=10]="DateFormat",Pr[Pr.TimeFormat=11]="TimeFormat",Pr[Pr.DateTimeFormat=12]="DateTimeFormat",Pr[Pr.NumberSymbols=13]="NumberSymbols",Pr[Pr.NumberFormats=14]="NumberFormats",Pr[Pr.CurrencyCode=15]="CurrencyCode",Pr[Pr.CurrencySymbol=16]="CurrencySymbol",Pr[Pr.CurrencyName=17]="CurrencyName",Pr[Pr.Currencies=18]="Currencies",Pr[Pr.Directionality=19]="Directionality",Pr[Pr.PluralCase=20]="PluralCase",Pr[Pr.ExtraData=21]="ExtraData",Pr))();const Ih="en-US";let am=Ih;function cc(n,i,o,u,d){if(n=Me(n),Array.isArray(n))for(let _=0;_<n.length;_++)cc(n[_],i,o,u,d);else{const _=wr(),T=Dt();let N=rc(n)?n:Me(n.provide),F=Vh(n);const z=Ui(),se=1048575&z.providerIndexes,Ae=z.directiveStart,We=z.providerIndexes>>20;if(rc(n)||!n.multi){const ut=new xe(F,d,Rd),Bt=uv(N,i,d?se:se+We,Ae);-1===Bt?(Yl(ju(z,T),_,N),av(_,n,i.length),i.push(N),z.directiveStart++,z.directiveEnd++,d&&(z.providerIndexes+=1048576),o.push(ut),T.push(ut)):(o[Bt]=ut,T[Bt]=ut)}else{const ut=uv(N,i,se+We,Ae),Bt=uv(N,i,se,se+We),Gn=Bt>=0&&o[Bt];if(d&&!Gn||!d&&!(ut>=0&&o[ut])){Yl(ju(z,T),_,N);const or=function LE(n,i,o,u,d){const _=new xe(n,o,Rd);return _.multi=[],_.index=i,_.componentProviders=0,s0(_,d,u&&!o),_}(d?FE:kE,o.length,d,u,F);!d&&Gn&&(o[Bt].providerFactory=or),av(_,n,i.length,0),i.push(N),z.directiveStart++,z.directiveEnd++,d&&(z.providerIndexes+=1048576),o.push(or),T.push(or)}else av(_,n,ut>-1?ut:Bt,s0(o[d?Bt:ut],F,!d&&u));!d&&u&&Gn&&o[Bt].componentProviders++}}}function av(n,i,o,u){const d=rc(i),_=function jp(n){return!!n.useClass}(i);if(d||_){const F=(_?Me(i.useClass):i).prototype.ngOnDestroy;if(F){const z=n.destroyHooks||(n.destroyHooks=[]);if(!d&&i.multi){const se=z.indexOf(o);-1===se?z.push(o,[u,F]):z[se+1].push(u,F)}else z.push(o,F)}}}function s0(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function uv(n,i,o,u){for(let d=o;d<u;d++)if(i[d]===n)return d;return-1}function kE(n,i,o,u){return lv(this.multi,[])}function FE(n,i,o,u){const d=this.multi;let _;if(this.providerFactory){const T=this.providerFactory.componentProviders,N=kr(o,o[Zt],this.providerFactory.index,u);_=N.slice(0,T),lv(d,_);for(let F=T;F<N.length;F++)_.push(N[F])}else _=[],lv(d,_);return _}function lv(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function o0(n,i=[]){return o=>{o.providersResolver=(u,d)=>function ul(n,i,o){const u=wr();if(u.firstCreatePass){const d=Yr(n);cc(o,u.data,u.blueprint,d,!0),cc(i,u.data,u.blueprint,d,!1)}}(u,d?d(n):n,i)}}class Fp{}class a0{}function UE(n,i){return new u0(n,i??null)}class u0 extends Fp{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cg(this);const u=Mr(i);this._bootstrapComponents=eu(u.bootstrap),this._r3Injector=Bf(i,o,[{provide:Fp,useValue:this},{provide:Hc,useValue:this.componentFactoryResolver}],be(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class cv extends a0{constructor(i){super(),this.moduleType=i}create(i){return new u0(this.moduleType,i)}}class VE extends Fp{constructor(i,o,u){super(),this.componentFactoryResolver=new Cg(this),this.instance=null;const d=new ic([...i,{provide:Fp,useValue:this},{provide:Hc,useValue:this.componentFactoryResolver}],o||Dd(),u,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function dv(n,i,o=null){return new VE(n,i,o).injector}let BE=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=Xd(0,o.type),d=u.length>0?dv([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,d)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=_n({token:n,providedIn:"environment",factory:()=>new n(Hn(Tl))}),n})();function l0(n){n.getStandaloneInjector=i=>i.get(BE).getOrCreateStandaloneInjector(n)}function m0(n,i,o,u){return y0(Dt(),Vi(),n,i,o,u)}function _0(n,i,o,u,d){return v0(Dt(),Vi(),n,i,o,u,d)}function cm(n,i){const o=n[i];return o===ni?void 0:o}function y0(n,i,o,u,d,_){const T=i+o;return Ea(n,T,d)?Sl(n,T+1,_?u.call(_,d):u(d)):cm(n,T+1)}function v0(n,i,o,u,d,_,T){const N=i+o;return Jc(n,N,d,_)?Sl(n,N+2,T?u.call(T,d,_):u(d,_)):cm(n,N+2)}function C0(n,i){const o=wr();let u;const d=n+dr;o.firstCreatePass?(u=function rw(n,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(n===u.name)return u}}(i,o.pipeRegistry),o.data[d]=u,u.onDestroy&&(o.destroyHooks??(o.destroyHooks=[])).push(d,u.onDestroy)):u=o.data[d];const _=u.factory||(u.factory=ns(u.type)),T=ur(Rd);try{const N=zt(!1),F=_();return zt(N),function Cy(n,i,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=u}(o,Dt(),d,F),F}finally{ur(T)}}function b0(n,i,o){const u=n+dr,d=Dt(),_=ii(d,u);return dm(d,u)?y0(d,Vi(),i,_.transform,o,_):_.transform(o)}function T0(n,i,o,u){const d=n+dr,_=Dt(),T=ii(_,d);return dm(_,d)?v0(_,Vi(),i,T.transform,o,u,T):T.transform(o,u)}function dm(n,i){return n[Zt].data[i].pure}function fv(n){return i=>{setTimeout(n,void 0,i)}}const hd=class aw extends C.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){let d=i,_=o||(()=>null),T=u;if(i&&"object"==typeof i){const F=i;d=F.next?.bind(F),_=F.error?.bind(F),T=F.complete?.bind(F)}this.__isAsync&&(_=fv(_),d&&(d=fv(d)),T&&(T=fv(T)));const N=super.subscribe({next:d,error:_,complete:T});return i instanceof p.w0&&i.add(N),N}};function uw(){return this._results[Symbol.iterator]()}class pv{get changes(){return this._changes||(this._changes=new hd)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=pv.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=uw)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const d=function hs(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function zu(n,i,o){if(n.length!==i.length)return!1;for(let u=0;u<n.length;u++){let d=n[u],_=i[u];if(o&&(d=o(d),_=o(_)),_!==d)return!1}return!0}(u._results,d,o))&&(u._results=d,u.length=d.length,u.last=d[this.length-1],u.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let hm=(()=>{class n{}return n.__NG_ELEMENT_ID__=dw,n})();const lw=hm,cw=class extends lw{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i,o){const u=this._declarationTContainer.tView,d=qh(this._declarationLView,u,i,16,null,u.declTNode,null,null,null,null,o||null);d[Xt]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[vn];return null!==T&&(d[vn]=T.createEmbeddedView(u)),Nd(u,d,i),new tf(d)}};function dw(){return j_(Ui(),Dt())}function j_(n,i){return 4&n.type?new cw(i,n,v(n,i)):null}let H_=(()=>{class n{}return n.__NG_ELEMENT_ID__=hw,n})();function hw(){return A0(Ui(),Dt())}const fw=H_,D0=class extends fw{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return v(this._hostTNode,this._hostLView)}get injector(){return new pa(this._hostTNode,this._hostLView)}get parentInjector(){const i=qi(this._hostTNode,this._hostLView);if(un(i)){const o=sn(i,this._hostLView),u=On(i);return new pa(o[Zt].data[u+8],o)}return new pa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=S0(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-zi}createEmbeddedView(i,o,u){let d,_;"number"==typeof u?d=u:null!=u&&(d=u.index,_=u.injector);const T=i.createEmbeddedView(o||{},_);return this.insert(T,d),T}createComponent(i,o,u,d,_){const T=i&&!function ma(n){return"function"==typeof n}(i);let N;if(T)N=o;else{const Ae=o||{};N=Ae.index,u=Ae.injector,d=Ae.projectableNodes,_=Ae.environmentInjector||Ae.ngModuleRef}const F=T?i:new oc(Ut(i)),z=u||this.parentInjector;if(!_&&null==F.ngModule){const We=(T?z:this.parentInjector).get(Tl,null);We&&(_=We)}const se=F.create(z,d,void 0,_);return this.insert(se.hostView,N),se}insert(i,o){const u=i._lView,d=u[Zt];if(function sa(n){return sr(n[Tn])}(u)){const se=this.indexOf(i);if(-1!==se)this.detach(se);else{const Ae=u[Tn],We=new D0(Ae,Ae[Xn],Ae[Tn]);We.detach(We.indexOf(i))}}const _=this._adjustIndex(o),T=this._lContainer;!function g(n,i,o,u){const d=zi+u,_=o.length;u>0&&(o[d-1][In]=i),u<_-zi?(i[In]=o[d],fl(o,zi+u,i)):(o.push(i),i[In]=null),i[Tn]=o;const T=i[Xt];null!==T&&o!==T&&function I(n,i){const o=n[ps];i[_t]!==i[Tn][Tn][_t]&&(n[Ia]=!0),null===o?n[ps]=[i]:o.push(i)}(T,i);const N=i[vn];null!==N&&N.insertView(n),i[zn]|=64}(d,u,T,_);const N=jr(_,T),F=u[Ie],z=Ll(F,T[Js]);return null!==z&&function Pa(n,i,o,u,d,_){u[Lr]=d,u[Xn]=i,yc(n,u,o,1,d,_)}(d,T[Xn],F,u,z,N),i.attachToViewContainerRef(),fl(gv(T),_,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=S0(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=q(this._lContainer,o);u&&(uu(gv(this._lContainer),o),oe(u[Zt],u))}detach(i){const o=this._adjustIndex(i,-1),u=q(this._lContainer,o);return u&&null!=uu(gv(this._lContainer),o)?new tf(u):null}_adjustIndex(i,o=0){return i??this.length+o}};function S0(n){return n[uo]}function gv(n){return n[uo]||(n[uo]=[])}function A0(n,i){let o;const u=i[n.index];if(sr(u))o=u;else{let d;if(8&n.type)d=Un(u);else{const _=i[Ie];d=_.createComment("");const T=ti(n,i);Cr(_,Ll(_,T),d,function Us(n,i){return n.nextSibling(i)}(_,T),!1)}i[n.index]=o=$m(u,i,d,n),oh(i,o)}return new D0(o,n,i)}class mv{constructor(i){this.queryList=i,this.matches=null}clone(){return new mv(this.queryList)}setDirty(){this.queryList.setDirty()}}class _v{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,d=[];for(let _=0;_<u;_++){const T=o.getByIndex(_);d.push(this.queries[T.indexInDeclarationView].clone())}return new _v(d)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==L0(i,o).matches&&this.queries[o].setDirty()}}class x0{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class yv{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const d=null!==o?o.length:0,_=this.getByIndex(u).embeddedTView(i,d);_&&(_.indexInDeclarationView=u,null!==o?o.push(_):o=[_])}return null!==o?new yv(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class vv{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new vv(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let d=0;d<u.length;d++){const _=u[d];this.matchTNodeWithReadOption(i,o,pw(o,_)),this.matchTNodeWithReadOption(i,o,ss(o,i,_,!1,!1))}else u===hm?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,ss(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const d=this.metadata.read;if(null!==d)if(d===w||d===H_||d===hm&&4&o.type)this.addMatch(o.index,-2);else{const _=ss(o,i,d,!1,!1);null!==_&&this.addMatch(o.index,_)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function pw(n,i){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function mw(n,i,o,u){return-1===o?function gw(n,i){return 11&n.type?v(n,i):4&n.type?j_(n,i):null}(i,n):-2===o?function _w(n,i,o){return o===w?v(i,n):o===hm?j_(i,n):o===H_?A0(i,n):void 0}(n,i,u):kr(n,n[Zt],o,i)}function M0(n,i,o,u){const d=i[vn].queries[u];if(null===d.matches){const _=n.data,T=o.matches,N=[];for(let F=0;F<T.length;F+=2){const z=T[F];N.push(z<0?null:mw(i,_[z],T[F+1],o.metadata.read))}d.matches=N}return d.matches}function Ev(n,i,o,u){const d=n.queries.getByIndex(o),_=d.matches;if(null!==_){const T=M0(n,i,d,o);for(let N=0;N<_.length;N+=2){const F=_[N];if(F>0)u.push(T[N/2]);else{const z=_[N+1],se=i[-F];for(let Ae=zi;Ae<se.length;Ae++){const We=se[Ae];We[Xt]===We[Tn]&&Ev(We[Zt],We,z,u)}if(null!==se[ps]){const Ae=se[ps];for(let We=0;We<Ae.length;We++){const ut=Ae[We];Ev(ut[Zt],ut,z,u)}}}}}return u}function R0(n){const i=Dt(),o=wr(),u=Mo();Wi(u+1);const d=L0(o,u);if(n.dirty&&function rs(n){return 4==(4&n[zn])}(i)===(2==(2&d.metadata.flags))){if(null===d.matches)n.reset([]);else{const _=d.crossesNgTemplate?Ev(o,i,u,[]):M0(o,i,d,u);n.reset(_,M),n.notifyOnChanges()}return!0}return!1}function P0(n,i,o){const u=wr();u.firstCreatePass&&(F0(u,new x0(n,i,o),-1),2==(2&i)&&(u.staticViewQueries=!0)),k0(u,Dt(),i)}function N0(n,i,o,u){const d=wr();if(d.firstCreatePass){const _=Ui();F0(d,new x0(i,o,u),_.index),function vw(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(d,n),2==(2&o)&&(d.staticContentQueries=!0)}k0(d,Dt(),o)}function O0(){return function yw(n,i){return n[vn].queries[i].queryList}(Dt(),Mo())}function k0(n,i,o){const u=new pv(4==(4&o));Nm(n,i,u,u.destroy),null===i[vn]&&(i[vn]=new _v),i[vn].queries.push(new mv(u))}function F0(n,i,o){null===n.queries&&(n.queries=new yv),n.queries.track(new vv(i,o))}function L0(n,i){return n.queries.getByIndex(i)}function U0(n,i){return j_(n,i)}function wv(n){return!!Mr(n)}function G_(...n){}const nE=new Ke("Application Initializer");let W_=(()=>{class n{constructor(o){this.appInits=o,this.resolve=G_,this.reject=G_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,d)=>{this.resolve=u,this.reject=d})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const _=this.appInits[d]();if(cf(_))o.push(_);else if(cp(_)){const T=new Promise((N,F)=>{_.subscribe({complete:N,error:F})});o.push(T)}}Promise.all(o).then(()=>{u()}).catch(d=>{this.reject(d)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Hn(nE,8))},n.\u0275prov=_n({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rE=new Ke("AppId",{providedIn:"root",factory:function iE(){return`${Dv()}${Dv()}${Dv()}`}});function Dv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sE=new Ke("Platform Initializer"),Vw=new Ke("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let Bw=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=_n({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const q_=new Ke("LocaleId",{providedIn:"root",factory:()=>Jn(q_,cn.Optional|cn.SkipSelf)||function $w(){return typeof $localize<"u"&&$localize.locale||Ih}()}),jw=new Ke("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Hw{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let zw=(()=>{class n{compileModuleSync(o){return new cv(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),_=eu(Mr(o).declarations).reduce((T,N)=>{const F=Ut(N);return F&&T.push(new oc(F)),T},[]);return new Hw(u,_)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=_n({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qw=(()=>Promise.resolve(0))();function Sv(n){typeof Zone>"u"?qw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class dc{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hd(!1),this.onMicrotaskEmpty=new hd(!1),this.onStable=new hd(!1),this.onError=new hd(!1),typeof Zone>"u")throw new nt(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!u&&o,d.shouldCoalesceRunChangeDetection=u,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Zw(){let n=an.requestAnimationFrame,i=an.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Qw(n){const i=()=>{!function Yw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(an,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,xv(n),n.isCheckStableRunning=!0,Av(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),xv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,d,_,T,N)=>{try{return uE(n),o.invokeTask(d,_,T,N)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&i(),lE(n)}},onInvoke:(o,u,d,_,T,N,F)=>{try{return uE(n),o.invoke(d,_,T,N,F)}finally{n.shouldCoalesceRunChangeDetection&&i(),lE(n)}},onHasTask:(o,u,d,_)=>{o.hasTask(d,_),u===d&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,xv(n),Av(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(o,u,d,_)=>(o.handleError(d,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!dc.isInAngularZone())throw new nt(909,!1)}static assertNotInAngularZone(){if(dc.isInAngularZone())throw new nt(909,!1)}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,d){const _=this._inner,T=_.scheduleEventTask("NgZoneEvent: "+d,i,Kw,G_,G_);try{return _.runTask(T,o,u)}finally{_.cancelTask(T)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const Kw={};function Av(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function uE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function lE(n){n._nesting--,Av(n)}class Jw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hd,this.onMicrotaskEmpty=new hd,this.onStable=new hd,this.onError=new hd}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,d){return i.apply(o,u)}}const cE=new Ke(""),dE=new Ke("");let Mv,Xw=(()=>{class n{constructor(o,u,d){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Mv||(function eI(n){Mv=n}(d),d.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{dc.assertNotInAngularZone(),Sv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Sv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,d){let _=-1;u&&u>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==_),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:_,updateCb:d})}whenStable(o,u,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,d){return[]}}return n.\u0275fac=function(o){return new(o||n)(Hn(dc),Hn(hE),Hn(dE))},n.\u0275prov=_n({token:n,factory:n.\u0275fac}),n})(),hE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return Mv?.findTestabilityInTree(this,o,u)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=_n({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const $d=!1;let Ch=null;const fE=new Ke("AllowMultipleToken"),Rv=new Ke("PlatformDestroyListeners"),pE=new Ke("appBootstrapListener");class rI{constructor(i,o){this.name=i,this.token=o}}function mE(n,i,o=[]){const u=`Platform: ${i}`,d=new Ke(u);return(_=[])=>{let T=Pv();if(!T||T.injector.get(fE,!1)){const N=[...o,..._,{provide:d,useValue:!0}];n?n(N):function iI(n){if(Ch&&!Ch.get(fE,!1))throw new nt(400,!1);Ch=n;const i=n.get(yE);(function gE(n){const i=n.get(sE,null);i&&i.forEach(o=>o())})(n)}(function _E(n=[],i){return $s.create({name:i,providers:[{provide:eh,useValue:"platform"},{provide:Rv,useValue:new Set([()=>Ch=null])},...n]})}(N,u))}return function oI(n){const i=Pv();if(!i)throw new nt(401,!1);return i}()}}function Pv(){return Ch?.get(yE)??null}let yE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const d=function EE(n,i){let o;return o="noop"===n?new Jw:("zone.js"===n?void 0:n)||new dc(i),o}(u?.ngZone,function vE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),_=[{provide:dc,useValue:d}];return d.run(()=>{const T=$s.create({providers:_,parent:this.injector,name:o.moduleType.name}),N=o.create(T),F=N.injector.get(_s,null);if(!F)throw new nt(402,!1);return d.runOutsideAngular(()=>{const z=d.onError.subscribe({next:se=>{F.handleError(se)}});N.onDestroy(()=>{K_(this._modules,N),z.unsubscribe()})}),function wE(n,i,o){try{const u=o();return cf(u)?u.catch(d=>{throw i.runOutsideAngular(()=>n.handleError(d)),d}):u}catch(u){throw i.runOutsideAngular(()=>n.handleError(u)),u}}(F,d,()=>{const z=N.injector.get(W_);return z.runInitializers(),z.donePromise.then(()=>(function um(n){Gt(n,"Expected localeId to be defined"),"string"==typeof n&&(am=n.toLowerCase().replace(/_/g,"-"))}(N.injector.get(q_,Ih)||Ih),this._moduleDoBootstrap(N),N))})})}bootstrapModule(o,u=[]){const d=IE({},u);return function tI(n,i,o){const u=new cv(o);return Promise.resolve(u)}(0,0,o).then(_=>this.bootstrapModuleFactory(_,d))}_moduleDoBootstrap(o){const u=o.injector.get(Z_);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(d=>u.bootstrap(d));else{if(!o.instance.ngDoBootstrap)throw new nt(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new nt(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(Rv,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Hn($s))},n.\u0275prov=_n({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function IE(n,i){return Array.isArray(i)?i.reduce(IE,n):{...n,...i}}let Z_=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,u,d){this._zone=o,this._injector=u,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new K.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),T=new K.y(N=>{let F;this._zone.runOutsideAngular(()=>{F=this._zone.onStable.subscribe(()=>{dc.assertNotInAngularZone(),Sv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const z=this._zone.onUnstable.subscribe(()=>{dc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{F.unsubscribe(),z.unsubscribe()}});this.isStable=(0,X.T)(_,T.pipe((0,Se.B)()))}bootstrap(o,u){const d=o instanceof Uf;if(!this._injector.get(W_).done){!d&&Ar(o);throw new nt(405,$d)}let T;T=d?o:this._injector.get(Hc).resolveComponentFactory(o),this.componentTypes.push(T.componentType);const N=function nI(n){return n.isBoundToModule}(T)?void 0:this._injector.get(Fp),z=T.create($s.NULL,[],u||T.selector,N),se=z.location.nativeElement,Ae=z.injector.get(cE,null);return Ae?.registerApplication(se),z.onDestroy(()=>{this.detachView(z.hostView),K_(this.components,z),Ae?.unregisterApplication(se)}),this._loadComponent(z),z}tick(){if(this._runningTick)throw new nt(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;K_(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(pE,[]);u.push(...this._bootstrapListeners),u.forEach(d=>d(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>K_(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new nt(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Hn(dc),Hn(Tl),Hn(_s))},n.\u0275prov=_n({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function K_(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function uI(){return!1}let lI=(()=>{class n{}return n.__NG_ELEMENT_ID__=cI,n})();function cI(n){return function dI(n,i,o){if(bo(n)&&!o){const u=ki(n.index,i);return new tf(u,u)}return 47&n.type?new tf(i[_t],i):null}(Ui(),Dt(),16==(16&n))}class SE{constructor(){}supports(i){return tp(i)}create(i){return new _I(i)}}const mI=(n,i)=>i;class _I{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||mI}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,d=0,_=null;for(;o||u;){const T=!u||o&&o.currentIndex<xE(u,d,_)?o:u,N=xE(T,d,_),F=T.currentIndex;if(T===u)d--,u=u._nextRemoved;else if(o=o._next,null==T.previousIndex)d++;else{_||(_=[]);const z=N-d,se=F-d;if(z!=se){for(let We=0;We<z;We++){const ut=We<_.length?_[We]:_[We]=0,Bt=ut+We;se<=Bt&&Bt<z&&(_[We]=ut+1)}_[T.previousIndex]=se-z}}N!==F&&i(T,N,F)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!tp(i))throw new nt(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let d,_,T,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let N=0;N<this.length;N++)_=i[N],T=this._trackByFn(N,_),null!==o&&Object.is(o.trackById,T)?(u&&(o=this._verifyReinsertion(o,_,T,N)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,T,N),u=!0),o=o._next}else d=0,function Og(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,N=>{T=this._trackByFn(d,N),null!==o&&Object.is(o.trackById,T)?(u&&(o=this._verifyReinsertion(o,N,T,d)),Object.is(o.item,N)||this._addIdentityChange(o,N)):(o=this._mismatch(o,N,T,d),u=!0),o=o._next,d++}),this.length=d;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,d){let _;return null===i?_=this._itTail:(_=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,_,d)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,d))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,_,d)):i=this._addAfter(new yI(o,u),_,d),i}_verifyReinsertion(i,o,u,d){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==_?i=this._reinsertAfter(_,i._prev,d):i.currentIndex!=d&&(i.currentIndex=d,this._addToMoves(i,d)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const d=i._prevRemoved,_=i._nextRemoved;return null===d?this._removalsHead=_:d._nextRemoved=_,null===_?this._removalsTail=d:_._prevRemoved=d,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const d=null===o?this._itHead:o._next;return i._next=d,i._prev=o,null===d?this._itTail=i:d._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new AE),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AE),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class yI{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class AE{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new vI,this.map.set(o,u)),u.add(i)}get(i,o){const d=this.map.get(i);return d?d.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xE(n,i,o){const u=n.previousIndex;if(null===u)return u;let d=0;return o&&u<o.length&&(d=o[u]),u+i+d}class ME{constructor(){}supports(i){return i instanceof Map||rf(i)}create(){return new EI}}class EI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||rf(i)))throw new nt(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,d)=>{if(o&&o.key===d)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const _=this._getOrCreateRecordForKey(d,u);o=this._insertBeforeOrAppend(o,_)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const d=this._records.get(i);this._maybeAddToChanges(d,o);const _=d._prev,T=d._next;return _&&(_._next=T),T&&(T._prev=_),d._next=null,d._prev=null,d}const u=new wI(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class wI{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function RE(){return new Lv([new SE])}let Lv=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const d=u.factories.slice();o=o.concat(d)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||RE()),deps:[[n,new Ii,new Si]]}}find(o){const u=this.factories.find(d=>d.supports(o));if(null!=u)return u;throw new nt(901,!1)}}return n.\u0275prov=_n({token:n,providedIn:"root",factory:RE}),n})();function PE(){return new Uv([new ME])}let Uv=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const d=u.factories.slice();o=o.concat(d)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||PE()),deps:[[n,new Ii,new Si]]}}find(o){const u=this.factories.find(d=>d.supports(o));if(u)return u;throw new nt(901,!1)}}return n.\u0275prov=_n({token:n,providedIn:"root",factory:PE}),n})();const bI=mE(null,"core",[]);let TI=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Hn(Z_))},n.\u0275mod=V({type:n}),n.\u0275inj=nr({}),n})();function DI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},1481:(mn,ot,j)=>{j.d(ot,{Dx:()=>dn,b2:()=>Kr,q6:()=>ui});var C=j(6895),p=j(4650);class K extends C.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class X extends K{static makeCurrent(){(0,C.HT)(new X)}onAndCancel(Ee,ue,ke){return Ee.addEventListener(ue,ke,!1),()=>{Ee.removeEventListener(ue,ke,!1)}}dispatchEvent(Ee,ue){Ee.dispatchEvent(ue)}remove(Ee){Ee.parentNode&&Ee.parentNode.removeChild(Ee)}createElement(Ee,ue){return(ue=ue||this.getDefaultDocument()).createElement(Ee)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ee){return Ee.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ee){return Ee instanceof DocumentFragment}getGlobalEventTarget(Ee,ue){return"window"===ue?window:"document"===ue?Ee:"body"===ue?Ee.body:null}getBaseHref(Ee){const ue=function Ne(){return Se=Se||document.querySelector("base"),Se?Se.getAttribute("href"):null}();return null==ue?null:function be(me){$e=$e||document.createElement("a"),$e.setAttribute("href",me);const Ee=$e.pathname;return"/"===Ee.charAt(0)?Ee:`/${Ee}`}(ue)}resetBaseElement(){Se=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ee){return(0,C.Mx)(document.cookie,Ee)}}let $e,Se=null;const Ze=new p.OlP("TRANSITION_ID"),ye=[{provide:p.ip1,useFactory:function de(me,Ee,ue){return()=>{ue.get(p.CZH).donePromise.then(()=>{const ke=(0,C.q)(),Xe=Ee.querySelectorAll(`style[ng-transition="${me}"]`);for(let Et=0;Et<Xe.length;Et++)ke.remove(Xe[Et])})}},deps:[Ze,C.K0,p.zs3],multi:!0}];let tt=(()=>{class me{build(){return new XMLHttpRequest}}return me.\u0275fac=function(ue){return new(ue||me)},me.\u0275prov=p.Yz7({token:me,factory:me.\u0275fac}),me})();const Ye=new p.OlP("EventManagerPlugins");let Nt=(()=>{class me{constructor(ue,ke){this._zone=ke,this._eventNameToPlugin=new Map,ue.forEach(Xe=>{Xe.manager=this}),this._plugins=ue.slice().reverse()}addEventListener(ue,ke,Xe){return this._findPluginFor(ke).addEventListener(ue,ke,Xe)}addGlobalEventListener(ue,ke,Xe){return this._findPluginFor(ke).addGlobalEventListener(ue,ke,Xe)}getZone(){return this._zone}_findPluginFor(ue){const ke=this._eventNameToPlugin.get(ue);if(ke)return ke;const Xe=this._plugins;for(let Et=0;Et<Xe.length;Et++){const tn=Xe[Et];if(tn.supports(ue))return this._eventNameToPlugin.set(ue,tn),tn}throw new Error(`No event manager plugin found for event ${ue}`)}}return me.\u0275fac=function(ue){return new(ue||me)(p.LFG(Ye),p.LFG(p.R0b))},me.\u0275prov=p.Yz7({token:me,factory:me.\u0275fac}),me})();class Qt{constructor(Ee){this._doc=Ee}addGlobalEventListener(Ee,ue,ke){const Xe=(0,C.q)().getGlobalEventTarget(this._doc,Ee);if(!Xe)throw new Error(`Unsupported event target ${Xe} for event ${ue}`);return this.addEventListener(Xe,ue,ke)}}let nt=(()=>{class me{constructor(){this.usageCount=new Map}addStyles(ue){for(const ke of ue)1===this.changeUsageCount(ke,1)&&this.onStyleAdded(ke)}removeStyles(ue){for(const ke of ue)0===this.changeUsageCount(ke,-1)&&this.onStyleRemoved(ke)}onStyleRemoved(ue){}onStyleAdded(ue){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ue,ke){const Xe=this.usageCount;let Et=Xe.get(ue)??0;return Et+=ke,Et>0?Xe.set(ue,Et):Xe.delete(ue),Et}ngOnDestroy(){for(const ue of this.getAllStyles())this.onStyleRemoved(ue);this.usageCount.clear()}}return me.\u0275fac=function(ue){return new(ue||me)},me.\u0275prov=p.Yz7({token:me,factory:me.\u0275fac}),me})(),yt=(()=>{class me extends nt{constructor(ue){super(),this.doc=ue,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ue){for(const ke of this.hostNodes)this.addStyleToHost(ke,ue)}onStyleRemoved(ue){const ke=this.styleRef;ke.get(ue)?.forEach(Et=>Et.remove()),ke.delete(ue)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ue){this.hostNodes.add(ue);for(const ke of this.getAllStyles())this.addStyleToHost(ue,ke)}removeHost(ue){this.hostNodes.delete(ue)}addStyleToHost(ue,ke){const Xe=this.doc.createElement("style");Xe.textContent=ke,ue.appendChild(Xe);const Et=this.styleRef.get(ke);Et?Et.push(Xe):this.styleRef.set(ke,[Xe])}resetHostNodes(){const ue=this.hostNodes;ue.clear(),ue.add(this.doc.head)}}return me.\u0275fac=function(ue){return new(ue||me)(p.LFG(C.K0))},me.\u0275prov=p.Yz7({token:me,factory:me.\u0275fac}),me})();const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Rt=/%COMP%/g,je=new p.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function jt(me,Ee){return Ee.flat(100).map(ue=>ue.replace(Rt,me))}function Kt(me){return Ee=>{if("__ngUnwrap__"===Ee)return me;!1===me(Ee)&&(Ee.preventDefault(),Ee.returnValue=!1)}}let qt=(()=>{class me{constructor(ue,ke,Xe,Et){this.eventManager=ue,this.sharedStylesHost=ke,this.appId=Xe,this.removeStylesOnCompDestory=Et,this.rendererByCompId=new Map,this.defaultRenderer=new rt(ue)}createRenderer(ue,ke){if(!ue||!ke)return this.defaultRenderer;const Xe=this.getOrCreateRenderer(ue,ke);return Xe instanceof Gt?Xe.applyToHost(ue):Xe instanceof It&&Xe.applyStyles(),Xe}getOrCreateRenderer(ue,ke){const Xe=this.rendererByCompId;let Et=Xe.get(ke.id);if(!Et){const tn=this.eventManager,mt=this.sharedStylesHost,Pt=this.removeStylesOnCompDestory;switch(ke.encapsulation){case p.ifc.Emulated:Et=new Gt(tn,mt,ke,this.appId,Pt);break;case p.ifc.ShadowDom:return new Ht(tn,mt,ue,ke);default:Et=new It(tn,mt,ke,Pt)}Et.onDestroy=()=>Xe.delete(ke.id),Xe.set(ke.id,Et)}return Et}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return me.\u0275fac=function(ue){return new(ue||me)(p.LFG(Nt),p.LFG(yt),p.LFG(p.AFp),p.LFG(je))},me.\u0275prov=p.Yz7({token:me,factory:me.\u0275fac}),me})();class rt{constructor(Ee){this.eventManager=Ee,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ee,ue){return ue?document.createElementNS(ft[ue]||ue,Ee):document.createElement(Ee)}createComment(Ee){return document.createComment(Ee)}createText(Ee){return document.createTextNode(Ee)}appendChild(Ee,ue){(bt(Ee)?Ee.content:Ee).appendChild(ue)}insertBefore(Ee,ue,ke){Ee&&(bt(Ee)?Ee.content:Ee).insertBefore(ue,ke)}removeChild(Ee,ue){Ee&&Ee.removeChild(ue)}selectRootElement(Ee,ue){let ke="string"==typeof Ee?document.querySelector(Ee):Ee;if(!ke)throw new Error(`The selector "${Ee}" did not match any elements`);return ue||(ke.textContent=""),ke}parentNode(Ee){return Ee.parentNode}nextSibling(Ee){return Ee.nextSibling}setAttribute(Ee,ue,ke,Xe){if(Xe){ue=Xe+":"+ue;const Et=ft[Xe];Et?Ee.setAttributeNS(Et,ue,ke):Ee.setAttribute(ue,ke)}else Ee.setAttribute(ue,ke)}removeAttribute(Ee,ue,ke){if(ke){const Xe=ft[ke];Xe?Ee.removeAttributeNS(Xe,ue):Ee.removeAttribute(`${ke}:${ue}`)}else Ee.removeAttribute(ue)}addClass(Ee,ue){Ee.classList.add(ue)}removeClass(Ee,ue){Ee.classList.remove(ue)}setStyle(Ee,ue,ke,Xe){Xe&(p.JOm.DashCase|p.JOm.Important)?Ee.style.setProperty(ue,ke,Xe&p.JOm.Important?"important":""):Ee.style[ue]=ke}removeStyle(Ee,ue,ke){ke&p.JOm.DashCase?Ee.style.removeProperty(ue):Ee.style[ue]=""}setProperty(Ee,ue,ke){Ee[ue]=ke}setValue(Ee,ue){Ee.nodeValue=ue}listen(Ee,ue,ke){return"string"==typeof Ee?this.eventManager.addGlobalEventListener(Ee,ue,Kt(ke)):this.eventManager.addEventListener(Ee,ue,Kt(ke))}}function bt(me){return"TEMPLATE"===me.tagName&&void 0!==me.content}class Ht extends rt{constructor(Ee,ue,ke,Xe){super(Ee),this.sharedStylesHost=ue,this.hostEl=ke,this.shadowRoot=ke.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Et=jt(Xe.id,Xe.styles);for(const tn of Et){const mt=document.createElement("style");mt.textContent=tn,this.shadowRoot.appendChild(mt)}}nodeOrShadowRoot(Ee){return Ee===this.hostEl?this.shadowRoot:Ee}appendChild(Ee,ue){return super.appendChild(this.nodeOrShadowRoot(Ee),ue)}insertBefore(Ee,ue,ke){return super.insertBefore(this.nodeOrShadowRoot(Ee),ue,ke)}removeChild(Ee,ue){return super.removeChild(this.nodeOrShadowRoot(Ee),ue)}parentNode(Ee){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ee)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class It extends rt{constructor(Ee,ue,ke,Xe,Et=ke.id){super(Ee),this.sharedStylesHost=ue,this.removeStylesOnCompDestory=Xe,this.rendererUsageCount=0,this.styles=jt(Et,ke.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Gt extends It{constructor(Ee,ue,ke,Xe,Et){const tn=Xe+"-"+ke.id;super(Ee,ue,ke,Et,tn),this.contentAttr=function xt(me){return"_ngcontent-%COMP%".replace(Rt,me)}(tn),this.hostAttr=function ln(me){return"_nghost-%COMP%".replace(Rt,me)}(tn)}applyToHost(Ee){this.applyStyles(),this.setAttribute(Ee,this.hostAttr,"")}createElement(Ee,ue){const ke=super.createElement(Ee,ue);return super.setAttribute(ke,this.contentAttr,""),ke}}let Ct=(()=>{class me extends Qt{constructor(ue){super(ue)}supports(ue){return!0}addEventListener(ue,ke,Xe){return ue.addEventListener(ke,Xe,!1),()=>this.removeEventListener(ue,ke,Xe)}removeEventListener(ue,ke,Xe){return ue.removeEventListener(ke,Xe)}}return me.\u0275fac=function(ue){return new(ue||me)(p.LFG(C.K0))},me.\u0275prov=p.Yz7({token:me,factory:me.\u0275fac}),me})();const rn=["alt","control","meta","shift"],Sn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tr={alt:me=>me.altKey,control:me=>me.ctrlKey,meta:me=>me.metaKey,shift:me=>me.shiftKey};let _n=(()=>{class me extends Qt{constructor(ue){super(ue)}supports(ue){return null!=me.parseEventName(ue)}addEventListener(ue,ke,Xe){const Et=me.parseEventName(ke),tn=me.eventCallback(Et.fullKey,Xe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,C.q)().onAndCancel(ue,Et.domEventName,tn))}static parseEventName(ue){const ke=ue.toLowerCase().split("."),Xe=ke.shift();if(0===ke.length||"keydown"!==Xe&&"keyup"!==Xe)return null;const Et=me._normalizeKey(ke.pop());let tn="",mt=ke.indexOf("code");if(mt>-1&&(ke.splice(mt,1),tn="code."),rn.forEach(wn=>{const pe=ke.indexOf(wn);pe>-1&&(ke.splice(pe,1),tn+=wn+".")}),tn+=Et,0!=ke.length||0===Et.length)return null;const Pt={};return Pt.domEventName=Xe,Pt.fullKey=tn,Pt}static matchEventFullKeyCode(ue,ke){let Xe=Sn[ue.key]||ue.key,Et="";return ke.indexOf("code.")>-1&&(Xe=ue.code,Et="code."),!(null==Xe||!Xe)&&(Xe=Xe.toLowerCase()," "===Xe?Xe="space":"."===Xe&&(Xe="dot"),rn.forEach(tn=>{tn!==Xe&&(0,tr[tn])(ue)&&(Et+=tn+".")}),Et+=Xe,Et===ke)}static eventCallback(ue,ke,Xe){return Et=>{me.matchEventFullKeyCode(Et,ue)&&Xe.runGuarded(()=>ke(Et))}}static _normalizeKey(ue){return"esc"===ue?"escape":ue}}return me.\u0275fac=function(ue){return new(ue||me)(p.LFG(C.K0))},me.\u0275prov=p.Yz7({token:me,factory:me.\u0275fac}),me})();const ui=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:C.bD},{provide:p.g9A,useValue:function Ur(){X.makeCurrent()},multi:!0},{provide:C.K0,useFactory:function Nr(){return(0,p.RDi)(document),document},deps:[]}]),gr=new p.OlP(""),cn=[{provide:p.rWj,useClass:class Me{addToWindow(Ee){p.dqk.getAngularTestability=(ke,Xe=!0)=>{const Et=Ee.findTestabilityInTree(ke,Xe);if(null==Et)throw new Error("Could not find testability for element.");return Et},p.dqk.getAllAngularTestabilities=()=>Ee.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>Ee.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(ke=>{const Xe=p.dqk.getAllAngularTestabilities();let Et=Xe.length,tn=!1;const mt=function(Pt){tn=tn||Pt,Et--,0==Et&&ke(tn)};Xe.forEach(function(Pt){Pt.whenStable(mt)})})}findTestabilityInTree(Ee,ue,ke){return null==ue?null:Ee.getTestability(ue)??(ke?(0,C.q)().isShadowRoot(ue)?this.findTestabilityInTree(Ee,ue.host,!0):this.findTestabilityInTree(Ee,ue.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],Qn=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function pn(){return new p.qLn},deps:[]},{provide:Ye,useClass:Ct,multi:!0,deps:[C.K0,p.R0b,p.Lbi]},{provide:Ye,useClass:_n,multi:!0,deps:[C.K0]},{provide:qt,useClass:qt,deps:[Nt,yt,p.AFp,je]},{provide:p.FYo,useExisting:qt},{provide:nt,useExisting:yt},{provide:yt,useClass:yt,deps:[C.K0]},{provide:Nt,useClass:Nt,deps:[Ye,p.R0b]},{provide:C.JF,useClass:tt,deps:[]},[]];let Kr=(()=>{class me{constructor(ue){}static withServerTransition(ue){return{ngModule:me,providers:[{provide:p.AFp,useValue:ue.appId},{provide:Ze,useExisting:p.AFp},ye]}}}return me.\u0275fac=function(ue){return new(ue||me)(p.LFG(gr,12))},me.\u0275mod=p.oAB({type:me}),me.\u0275inj=p.cJS({providers:[...Qn,...cn],imports:[C.ez,p.hGG]}),me})(),dn=(()=>{class me{constructor(ue){this._doc=ue}getTitle(){return this._doc.title}setTitle(ue){this._doc.title=ue||""}}return me.\u0275fac=function(ue){return new(ue||me)(p.LFG(C.K0))},me.\u0275prov=p.Yz7({token:me,factory:function(ue){let ke=null;return ke=ue?new ue:function an(){return new dn((0,p.LFG)(C.K0))}(),ke},providedIn:"root"}),me})();typeof window<"u"&&window},7001:(mn,ot,j)=>{j.d(ot,{F0:()=>ss,rH:()=>iu,Bz:()=>fl,lC:()=>Tt});var C=j(4650),p=j(8996),K=j(9646),X=j(7579);class Se extends X.x{constructor(A){super(),this._value=A}get value(){return this.getValue()}_subscribe(A){const b=super._subscribe(A);return!b.closed&&A.next(this._value),b}getValue(){const{hasError:A,thrownError:b,_value:O}=this;if(A)throw b;return this._throwIfClosed(),O}next(A){super.next(this._value=A)}}var Ne=j(6805),$e=j(9751),be=j(4742),Ze=j(4671),de=j(3268),ye=j(7669),Me=j(1810),tt=j(5403),Ye=j(9672);function Nt(...D){const A=(0,ye.yG)(D),b=(0,ye.jO)(D),{args:O,keys:$}=(0,be.D)(D);if(0===O.length)return(0,p.D)([],A);const J=new $e.y(function Qt(D,A,b=Ze.y){return O=>{nt(A,()=>{const{length:$}=D,J=new Array($);let le=$,ze=$;for(let At=0;At<$;At++)nt(A,()=>{const Cn=(0,p.D)(D[At],A);let En=!1;Cn.subscribe((0,tt.x)(O,Jr=>{J[At]=Jr,En||(En=!0,ze--),ze||O.next(b(J.slice()))},()=>{--le||O.complete()}))},O)},O)}}(O,A,$?le=>(0,Me.n)($,le):Ze.y));return b?J.pipe((0,de.Z)(b)):J}function nt(D,A,b){D?(0,Ye.f)(b,D,A):A()}var yt=j(7272),ft=j(8421);function Rt(D){return new $e.y(A=>{(0,ft.Xf)(D()).subscribe(A)})}var Te=j(9635),Je=j(576);function vt(D,A){const b=(0,Je.m)(D)?D:()=>D,O=$=>$.error(b());return new $e.y(A?$=>A.schedule(O,0,$):O)}var $t=j(515),wt=j(727),je=j(4482);function xt(){return(0,je.e)((D,A)=>{let b=null;D._refCount++;const O=(0,tt.x)(A,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(b=null);const $=D._connection,J=b;b=null,$&&(!J||$===J)&&$.unsubscribe(),A.unsubscribe()});D.subscribe(O),O.closed||(b=D.connect())})}class ln extends $e.y{constructor(A,b){super(),this.source=A,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,je.A)(A)&&(this.lift=A.lift)}_subscribe(A){return this.getSubject().subscribe(A)}getSubject(){const A=this._subject;return(!A||A.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:A}=this;this._subject=this._connection=null,A?.unsubscribe()}connect(){let A=this._connection;if(!A){A=this._connection=new wt.w0;const b=this.getSubject();A.add(this.source.subscribe((0,tt.x)(b,void 0,()=>{this._teardown(),b.complete()},O=>{this._teardown(),b.error(O)},()=>this._teardown()))),A.closed&&(this._connection=null,A=wt.w0.EMPTY)}return A}refCount(){return xt()(this)}}var jt=j(6895),Kt=j(4004),qt=j(3900),rt=j(5698),at=j(8675),lt=j(9300),bt=j(5577),Ht=j(590),It=j(4351),Gt=j(8505);function Ct(D){return(0,je.e)((A,b)=>{let J,O=null,$=!1;O=A.subscribe((0,tt.x)(b,void 0,void 0,le=>{J=(0,ft.Xf)(D(le,Ct(D)(A))),O?(O.unsubscribe(),O=null,J.subscribe(b)):$=!0})),$&&(O.unsubscribe(),O=null,J.subscribe(b))})}var rn=j(5026);function Sn(D){return D<=0?()=>$t.E:(0,je.e)((A,b)=>{let O=[];A.subscribe((0,tt.x)(b,$=>{O.push($),D<O.length&&O.shift()},()=>{for(const $ of O)b.next($);b.complete()},void 0,()=>{O=null}))})}var tr=j(8068),_n=j(6590);function xn(D,A){const b=arguments.length>=2;return O=>O.pipe(D?(0,lt.h)(($,J)=>D($,J,O)):Ze.y,Sn(1),b?(0,_n.d)(A):(0,tr.T)(()=>new Ne.K))}function zr(D){return(0,je.e)((A,b)=>{try{A.subscribe(b)}finally{b.add(D)}})}var hr=j(8189),Ur=j(1481);const pn="primary",Nr=Symbol("RouteTitle");class Sr{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const b=this.params[A];return Array.isArray(b)?b[0]:b}return null}getAll(A){if(this.has(A)){const b=this.params[A];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function ui(D){return new Sr(D)}function gr(D,A,b){const O=b.path.split("/");if(O.length>D.length||"full"===b.pathMatch&&(A.hasChildren()||O.length<D.length))return null;const $={};for(let J=0;J<O.length;J++){const le=O[J],ze=D[J];if(le.startsWith(":"))$[le.substring(1)]=ze;else if(le!==ze.path)return null}return{consumed:D.slice(0,O.length),posParams:$}}function Qn(D,A){const b=D?Object.keys(D):void 0,O=A?Object.keys(A):void 0;if(!b||!O||b.length!=O.length)return!1;let $;for(let J=0;J<b.length;J++)if($=b[J],!Kr(D[$],A[$]))return!1;return!0}function Kr(D,A){if(Array.isArray(D)&&Array.isArray(A)){if(D.length!==A.length)return!1;const b=[...D].sort(),O=[...A].sort();return b.every(($,J)=>O[J]===$)}return D===A}function ur(D){return Array.prototype.concat.apply([],D)}function Fr(D){return D.length>0?D[D.length-1]:null}function an(D,A){for(const b in D)D.hasOwnProperty(b)&&A(D[b],b)}function dn(D){return(0,C.CqO)(D)?D:(0,C.QGY)(D)?(0,p.D)(Promise.resolve(D)):(0,K.of)(D)}const hn=!1,Yt={exact:function Vr(D,A,b){if(!Jn(D.segments,A.segments)||!qr(D.segments,A.segments,b)||D.numberOfChildren!==A.numberOfChildren)return!1;for(const O in A.children)if(!D.children[O]||!Vr(D.children[O],A.children[O],b))return!1;return!0},subset:Wr},lr={exact:function Er(D,A){return Qn(D,A)},subset:function ri(D,A){return Object.keys(A).length<=Object.keys(D).length&&Object.keys(A).every(b=>Kr(D[b],A[b]))},ignored:()=>!0};function yr(D,A,b){return Yt[b.paths](D.root,A.root,b.matrixParams)&&lr[b.queryParams](D.queryParams,A.queryParams)&&!("exact"===b.fragment&&D.fragment!==A.fragment)}function Wr(D,A,b){return Nn(D,A,A.segments,b)}function Nn(D,A,b,O){if(D.segments.length>b.length){const $=D.segments.slice(0,b.length);return!(!Jn($,b)||A.hasChildren()||!qr($,b,O))}if(D.segments.length===b.length){if(!Jn(D.segments,b)||!qr(D.segments,b,O))return!1;for(const $ in A.children)if(!D.children[$]||!Wr(D.children[$],A.children[$],O))return!1;return!0}{const $=b.slice(0,D.segments.length),J=b.slice(D.segments.length);return!!(Jn(D.segments,$)&&qr(D.segments,$,O)&&D.children[pn])&&Nn(D.children[pn],A,J,O)}}function qr(D,A,b){return A.every((O,$)=>lr[b](D[$].parameters,O.parameters))}class Bn{constructor(A=new jn([],{}),b={},O=null){this.root=A,this.queryParams=b,this.fragment=O}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ui(this.queryParams)),this._queryParamMap}toString(){return gt.serialize(this)}}class jn{constructor(A,b){this.segments=A,this.children=b,this.parent=null,an(b,(O,$)=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ct(this)}}class Hn{constructor(A,b){this.path=A,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=ui(this.parameters)),this._parameterMap}toString(){return Ee(this)}}function Jn(D,A){return D.length===A.length&&D.every((b,O)=>b.path===A[O].path)}let De=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=C.Yz7({token:D,factory:function(){return new Pe},providedIn:"root"}),D})();class Pe{parse(A){const b=new pe(A);return new Bn(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(A){const b=`/${ge(A.root,!0)}`,O=function ke(D){const A=Object.keys(D).map(b=>{const O=D[b];return Array.isArray(O)?O.map($=>`${ee(b)}=${ee($)}`).join("&"):`${ee(b)}=${ee(O)}`}).filter(b=>!!b);return A.length?`?${A.join("&")}`:""}(A.queryParams);return`${b}${O}${"string"==typeof A.fragment?`#${function re(D){return encodeURI(D)}(A.fragment)}`:""}`}}const gt=new Pe;function ct(D){return D.segments.map(A=>Ee(A)).join("/")}function ge(D,A){if(!D.hasChildren())return ct(D);if(A){const b=D.children[pn]?ge(D.children[pn],!1):"",O=[];return an(D.children,($,J)=>{J!==pn&&O.push(`${J}:${ge($,!1)}`)}),O.length>0?`${b}(${O.join("//")})`:b}{const b=function Qe(D,A){let b=[];return an(D.children,(O,$)=>{$===pn&&(b=b.concat(A(O,$)))}),an(D.children,(O,$)=>{$!==pn&&(b=b.concat(A(O,$)))}),b}(D,(O,$)=>$===pn?[ge(D.children[pn],!1)]:[`${$}:${ge(O,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[pn]?`${ct(D)}/${b[0]}`:`${ct(D)}/(${b.join("//")})`}}function _e(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ee(D){return _e(D).replace(/%3B/gi,";")}function Y(D){return _e(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ue(D){return decodeURIComponent(D)}function me(D){return Ue(D.replace(/\+/g,"%20"))}function Ee(D){return`${Y(D.path)}${function ue(D){return Object.keys(D).map(A=>`;${Y(A)}=${Y(D[A])}`).join("")}(D.parameters)}`}const Xe=/^[^\/()?;=#]+/;function Et(D){const A=D.match(Xe);return A?A[0]:""}const tn=/^[^=?&#]+/,Pt=/^[^&#]+/;class pe{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jn([],{}):new jn([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(A.length>0||Object.keys(b).length>0)&&(O[pn]=new jn(A,b)),O}parseSegment(){const A=Et(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new C.vHH(4009,hn);return this.capture(A),new Hn(Ue(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const b=Et(this.remaining);if(!b)return;this.capture(b);let O="";if(this.consumeOptional("=")){const $=Et(this.remaining);$&&(O=$,this.capture(O))}A[Ue(b)]=Ue(O)}parseQueryParam(A){const b=function mt(D){const A=D.match(tn);return A?A[0]:""}(this.remaining);if(!b)return;this.capture(b);let O="";if(this.consumeOptional("=")){const le=function wn(D){const A=D.match(Pt);return A?A[0]:""}(this.remaining);le&&(O=le,this.capture(O))}const $=me(b),J=me(O);if(A.hasOwnProperty($)){let le=A[$];Array.isArray(le)||(le=[le],A[$]=le),le.push(J)}else A[$]=J}parseParens(A){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=Et(this.remaining),$=this.remaining[O.length];if("/"!==$&&")"!==$&&";"!==$)throw new C.vHH(4010,hn);let J;O.indexOf(":")>-1?(J=O.slice(0,O.indexOf(":")),this.capture(J),this.capture(":")):A&&(J=pn);const le=this.parseChildren();b[J]=1===Object.keys(le).length?le[pn]:new jn([],le),this.consumeOptional("//")}return b}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new C.vHH(4011,hn)}}function V(D){return D.segments.length>0?new jn([],{[pn]:D}):D}function ne(D){const A={};for(const O of Object.keys(D.children)){const J=ne(D.children[O]);(J.segments.length>0||J.hasChildren())&&(A[O]=J)}return function Fe(D){if(1===D.numberOfChildren&&D.children[pn]){const A=D.children[pn];return new jn(D.segments.concat(A.segments),A.children)}return D}(new jn(D.segments,A))}function it(D){return D instanceof Bn}const Wt=!1;function Ar(D,A,b,O,$){if(0===b.length)return Hi(A.root,A.root,A.root,O,$);const J=function Zt(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new Lr(!0,0,D);let A=0,b=!1;const O=D.reduce(($,J,le)=>{if("object"==typeof J&&null!=J){if(J.outlets){const ze={};return an(J.outlets,(At,Cn)=>{ze[Cn]="string"==typeof At?At.split("/"):At}),[...$,{outlets:ze}]}if(J.segmentPath)return[...$,J.segmentPath]}return"string"!=typeof J?[...$,J]:0===le?(J.split("/").forEach((ze,At)=>{0==At&&"."===ze||(0==At&&""===ze?b=!0:".."===ze?A++:""!=ze&&$.push(ze))}),$):[...$,J]},[]);return new Lr(b,A,O)}(b);return J.toRoot()?Hi(A.root,A.root,new jn([],{}),O,$):function le(At){const Cn=function In(D,A,b,O){if(D.isAbsolute)return new zn(A.root,!0,0);if(-1===O)return new zn(b,b===A.root,0);return function Dn(D,A,b){let O=D,$=A,J=b;for(;J>$;){if(J-=$,O=O.parent,!O)throw new C.vHH(4005,Wt&&"Invalid number of '../'");$=O.segments.length}return new zn(O,!1,$-J)}(b,O+(Mr(D.commands[0])?0:1),D.numberOfDoubleDots)}(J,A,D.snapshot?._urlSegment,At),En=Cn.processChildren?fe(Cn.segmentGroup,Cn.index,J.commands):Zn(Cn.segmentGroup,Cn.index,J.commands);return Hi(A.root,Cn.segmentGroup,En,O,$)}(D.snapshot?._lastPathIndex)}function Mr(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function Pi(D){return"object"==typeof D&&null!=D&&D.outlets}function Hi(D,A,b,O,$){let le,J={};O&&an(O,(At,Cn)=>{J[Cn]=Array.isArray(At)?At.map(En=>`${En}`):`${At}`}),le=D===A?b:ei(D,A,b);const ze=V(ne(le));return new Bn(ze,J,$)}function ei(D,A,b){const O={};return an(D.children,($,J)=>{O[J]=$===A?b:ei($,A,b)}),new jn(D.segments,O)}class Lr{constructor(A,b,O){if(this.isAbsolute=A,this.numberOfDoubleDots=b,this.commands=O,A&&O.length>0&&Mr(O[0]))throw new C.vHH(4003,Wt&&"Root segment cannot have matrix parameters");const $=O.find(Pi);if($&&$!==Fr(O))throw new C.vHH(4004,Wt&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zn{constructor(A,b,O){this.segmentGroup=A,this.processChildren=b,this.index=O}}function Zn(D,A,b){if(D||(D=new jn([],{})),0===D.segments.length&&D.hasChildren())return fe(D,A,b);const O=function te(D,A,b){let O=0,$=A;const J={match:!1,pathIndex:0,commandIndex:0};for(;$<D.segments.length;){if(O>=b.length)return J;const le=D.segments[$],ze=b[O];if(Pi(ze))break;const At=`${ze}`,Cn=O<b.length-1?b[O+1]:null;if($>0&&void 0===At)break;if(At&&Cn&&"object"==typeof Cn&&void 0===Cn.outlets){if(!Z(At,Cn,le))return J;O+=2}else{if(!Z(At,{},le))return J;O++}$++}return{match:!0,pathIndex:$,commandIndex:O}}(D,A,b),$=b.slice(O.commandIndex);if(O.match&&O.pathIndex<D.segments.length){const J=new jn(D.segments.slice(0,O.pathIndex),{});return J.children[pn]=new jn(D.segments.slice(O.pathIndex),D.children),fe(J,0,$)}return O.match&&0===$.length?new jn(D.segments,{}):O.match&&!D.hasChildren()?he(D,A,b):O.match?fe(D,0,$):he(D,A,b)}function fe(D,A,b){if(0===b.length)return new jn(D.segments,{});{const O=function Xn(D){return Pi(D[0])?D[0].outlets:{[pn]:D}}(b),$={};if(!O[pn]&&D.children[pn]&&1===D.numberOfChildren&&0===D.children[pn].segments.length){const J=fe(D.children[pn],A,b);return new jn(D.segments,J.children)}return an(O,(J,le)=>{"string"==typeof J&&(J=[J]),null!==J&&($[le]=Zn(D.children[le],A,J))}),an(D.children,(J,le)=>{void 0===O[le]&&($[le]=J)}),new jn(D.segments,$)}}function he(D,A,b){const O=D.segments.slice(0,A);let $=0;for(;$<b.length;){const J=b[$];if(Pi(J)){const At=Ie(J.outlets);return new jn(O,At)}if(0===$&&Mr(b[0])){O.push(new Hn(D.segments[A].path,He(b[0]))),$++;continue}const le=Pi(J)?J.outlets[pn]:`${J}`,ze=$<b.length-1?b[$+1]:null;le&&ze&&Mr(ze)?(O.push(new Hn(le,He(ze))),$+=2):(O.push(new Hn(le,{})),$++)}return new jn(O,{})}function Ie(D){const A={};return an(D,(b,O)=>{"string"==typeof b&&(b=[b]),null!==b&&(A[O]=he(new jn([],{}),0,b))}),A}function He(D){const A={};return an(D,(b,O)=>A[O]=`${b}`),A}function Z(D,A,b){return D==b.path&&Qn(A,b.parameters)}const ve="imperative";class qe{constructor(A,b){this.id=A,this.url=b}}class _t extends qe{constructor(A,b,O="imperative",$=null){super(A,b),this.type=0,this.navigationTrigger=O,this.restoredState=$}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xt extends qe{constructor(A,b,O){super(A,b),this.urlAfterRedirects=O,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $n extends qe{constructor(A,b,O,$){super(A,b),this.reason=O,this.code=$,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vn extends qe{constructor(A,b,O,$){super(A,b),this.reason=O,this.code=$,this.type=16}}class br extends qe{constructor(A,b,O,$){super(A,b),this.error=O,this.target=$,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ti extends qe{constructor(A,b,O,$){super(A,b),this.urlAfterRedirects=O,this.state=$,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dr extends qe{constructor(A,b,O,$){super(A,b),this.urlAfterRedirects=O,this.state=$,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ni extends qe{constructor(A,b,O,$,J){super(A,b),this.urlAfterRedirects=O,this.state=$,this.shouldActivate=J,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ss extends qe{constructor(A,b,O,$){super(A,b),this.urlAfterRedirects=O,this.state=$,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ia extends qe{constructor(A,b,O,$){super(A,b),this.urlAfterRedirects=O,this.state=$,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Js{constructor(A){this.route=A,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class uo{constructor(A){this.route=A,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ps{constructor(A){this.snapshot=A,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zi{constructor(A){this.snapshot=A,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cl{constructor(A){this.snapshot=A,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gi{constructor(A){this.snapshot=A,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sr{constructor(A,b,O){this.routerEvent=A,this.position=b,this.anchor=O,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let gs=(()=>{class D{createUrlTree(b,O,$,J,le,ze){return Ar(b||O.root,$,J,le,ze)}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac}),D})(),Br=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=C.Yz7({token:D,factory:function(A){return gs.\u0275fac(A)},providedIn:"root"}),D})();class Tr{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const b=this.pathFromRoot(A);return b.length>1?b[b.length-2]:null}children(A){const b=To(A,this._root);return b?b.children.map(O=>O.value):[]}firstChild(A){const b=To(A,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(A){const b=ir(A,this._root);return b.length<2?[]:b[b.length-2].children.map($=>$.value).filter($=>$!==A)}pathFromRoot(A){return ir(A,this._root).map(b=>b.value)}}function To(D,A){if(D===A.value)return A;for(const b of A.children){const O=To(D,b);if(O)return O}return null}function ir(D,A){if(D===A.value)return[A];for(const b of A.children){const O=ir(D,b);if(O.length)return O.unshift(A),O}return[]}class ys{constructor(A,b){this.value=A,this.children=b}toString(){return`TreeNode(${this.value})`}}function cs(D){const A={};return D&&D.children.forEach(b=>A[b.value.outlet]=b),A}class Xs extends Tr{constructor(A,b){super(A),this.snapshot=b,zs(this,A)}toString(){return this.snapshot.toString()}}function Ca(D,A){const b=function Eu(D,A){const le=new ba([],{},{},"",{},pn,A,null,D.root,-1,{});return new ts("",new ys(le,[]))}(D,A),O=new Se([new Hn("",{})]),$=new Se({}),J=new Se({}),le=new Se({}),ze=new Se(""),At=new Do(O,$,le,ze,J,pn,A,b.root);return At.snapshot=b.root,new Xs(new ys(At,[]),b)}class Do{constructor(A,b,O,$,J,le,ze,At){this.url=A,this.params=b,this.queryParams=O,this.fragment=$,this.data=J,this.outlet=le,this.component=ze,this.title=this.data?.pipe((0,Kt.U)(Cn=>Cn[Nr]))??(0,K.of)(void 0),this._futureSnapshot=At}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Kt.U)(A=>ui(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Kt.U)(A=>ui(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fa(D,A="emptyOnly"){const b=D.pathFromRoot;let O=0;if("always"!==A)for(O=b.length-1;O>=1;){const $=b[O],J=b[O-1];if($.routeConfig&&""===$.routeConfig.path)O--;else{if(J.component)break;O--}}return function $o(D){return D.reduce((A,b)=>({params:{...A.params,...b.params},data:{...A.data,...b.data},resolve:{...b.data,...A.resolve,...b.routeConfig?.data,...b._resolvedData}}),{params:{},data:{},resolve:{}})}(b.slice(O))}class ba{get title(){return this.data?.[Nr]}constructor(A,b,O,$,J,le,ze,At,Cn,En,Jr){this.url=A,this.params=b,this.queryParams=O,this.fragment=$,this.data=J,this.outlet=le,this.component=ze,this.routeConfig=At,this._urlSegment=Cn,this._lastPathIndex=En,this._resolve=Jr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ui(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ui(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ts extends Tr{constructor(A,b){super(b),this.url=A,zs(this,b)}toString(){return tu(this._root)}}function zs(D,A){A.value._routerState=D,A.children.forEach(b=>zs(D,b))}function tu(D){const A=D.children.length>0?` { ${D.children.map(tu).join(", ")} } `:"";return`${D.value}${A}`}function lo(D){if(D.snapshot){const A=D.snapshot,b=D._futureSnapshot;D.snapshot=b,Qn(A.queryParams,b.queryParams)||D.queryParams.next(b.queryParams),A.fragment!==b.fragment&&D.fragment.next(b.fragment),Qn(A.params,b.params)||D.params.next(b.params),function cn(D,A){if(D.length!==A.length)return!1;for(let b=0;b<D.length;++b)if(!Qn(D[b],A[b]))return!1;return!0}(A.url,b.url)||D.url.next(b.url),Qn(A.data,b.data)||D.data.next(b.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function Zr(D,A){const b=Qn(D.params,A.params)&&function xr(D,A){return Jn(D,A)&&D.every((b,O)=>Qn(b.parameters,A[O].parameters))}(D.url,A.url);return b&&!(!D.parent!=!A.parent)&&(!D.parent||Zr(D.parent,A.parent))}function Yi(D,A,b){if(b&&D.shouldReuseRoute(A.value,b.value.snapshot)){const O=b.value;O._futureSnapshot=A.value;const $=function jo(D,A,b){return A.children.map(O=>{for(const $ of b.children)if(D.shouldReuseRoute(O.value,$.value.snapshot))return Yi(D,O,$);return Yi(D,O)})}(D,A,b);return new ys(O,$)}{if(D.shouldAttach(A.value)){const J=D.retrieve(A.value);if(null!==J){const le=J.route;return le.value._futureSnapshot=A.value,le.children=A.children.map(ze=>Yi(D,ze)),le}}const O=function ns(D){return new Do(new Se(D.url),new Se(D.params),new Se(D.queryParams),new Se(D.fragment),new Se(D.data),D.outlet,D.component,D)}(A.value),$=A.children.map(J=>Yi(D,J));return new ys(O,$)}}const As="ngNavigationCancelingError";function _i(D,A){const{redirectTo:b,navigationBehaviorOptions:O}=it(A)?{redirectTo:A,navigationBehaviorOptions:void 0}:A,$=So(!1,0,A);return $.url=b,$.navigationBehaviorOptions=O,$}function So(D,A,b){const O=new Error("NavigationCancelingError: "+(D||""));return O[As]=!0,O.cancellationCode=A,b&&(O.url=b),O}function mr(D){return Ce(D)&&it(D.url)}function Ce(D){return D&&D[As]}class we{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Oe,this.attachRef=null}}let Oe=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(b,O){const $=this.getOrCreateContext(b);$.outlet=O,this.contexts.set(b,$)}onChildOutletDestroyed(b){const O=this.getContext(b);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let O=this.getContext(b);return O||(O=new we,this.contexts.set(b,O)),O}getContext(b){return this.contexts.get(b)||null}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const et=!1;let Tt=(()=>{class D{constructor(){this.activated=null,this._activatedRoute=null,this.name=pn,this.activateEvents=new C.vpe,this.deactivateEvents=new C.vpe,this.attachEvents=new C.vpe,this.detachEvents=new C.vpe,this.parentContexts=(0,C.f3M)(Oe),this.location=(0,C.f3M)(C.s_b),this.changeDetector=(0,C.f3M)(C.sBO),this.environmentInjector=(0,C.f3M)(C.lqb)}ngOnChanges(b){if(b.name){const{firstChange:O,previousValue:$}=b.name;if(O)return;this.isTrackedInParentContexts($)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed($)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(b){return this.parentContexts.getContext(b)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const b=this.parentContexts.getContext(this.name);b?.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new C.vHH(4012,et);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new C.vHH(4012,et);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new C.vHH(4012,et);this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,O){this.activated=b,this._activatedRoute=O,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,O){if(this.isActivated)throw new C.vHH(4013,et);this._activatedRoute=b;const $=this.location,le=b.snapshot.component,ze=this.parentContexts.getOrCreateContext(this.name).children,At=new Jt(b,ze,$.injector);if(O&&function en(D){return!!D.resolveComponentFactory}(O)){const Cn=O.resolveComponentFactory(le);this.activated=$.createComponent(Cn,$.length,At)}else this.activated=$.createComponent(le,{index:$.length,injector:At,environmentInjector:O??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275dir=C.lG2({type:D,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[C.TTD]}),D})();class Jt{constructor(A,b,O){this.route=A,this.childContexts=b,this.parent=O}get(A,b){return A===Do?this.route:A===Oe?this.childContexts:this.parent.get(A,b)}}let Kn=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275cmp=C.Xpm({type:D,selectors:[["ng-component"]],standalone:!0,features:[C.jDz],decls:1,vars:0,template:function(b,O){1&b&&C._UZ(0,"router-outlet")},dependencies:[Tt],encapsulation:2}),D})();function Ln(D,A){return D.providers&&!D._injector&&(D._injector=(0,C.MMx)(D.providers,A,`Route: ${D.path}`)),D._injector??A}function rs(D){const A=D.children&&D.children.map(rs),b=A?{...D,children:A}:{...D};return!b.component&&!b.loadComponent&&(A||b.loadChildren)&&b.outlet&&b.outlet!==pn&&(b.component=Kn),b}function yi(D){return D.outlet||pn}function sa(D,A){const b=D.filter(O=>yi(O)===A);return b.push(...D.filter(O=>yi(O)!==A)),b}function xs(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let A=D.parent;A;A=A.parent){const b=A.routeConfig;if(b?._loadedInjector)return b._loadedInjector;if(b?._injector)return b._injector}return null}class Ua{constructor(A,b,O,$){this.routeReuseStrategy=A,this.futureState=b,this.currState=O,this.forwardEvent=$}activate(A){const b=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,O,A),lo(this.futureState.root),this.activateChildRoutes(b,O,A)}deactivateChildRoutes(A,b,O){const $=cs(b);A.children.forEach(J=>{const le=J.value.outlet;this.deactivateRoutes(J,$[le],O),delete $[le]}),an($,(J,le)=>{this.deactivateRouteAndItsChildren(J,O)})}deactivateRoutes(A,b,O){const $=A.value,J=b?b.value:null;if($===J)if($.component){const le=O.getContext($.outlet);le&&this.deactivateChildRoutes(A,b,le.children)}else this.deactivateChildRoutes(A,b,O);else J&&this.deactivateRouteAndItsChildren(b,O)}deactivateRouteAndItsChildren(A,b){A.value.component&&this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,b):this.deactivateRouteAndOutlet(A,b)}detachAndStoreRouteSubtree(A,b){const O=b.getContext(A.value.outlet),$=O&&A.value.component?O.children:b,J=cs(A);for(const le of Object.keys(J))this.deactivateRouteAndItsChildren(J[le],$);if(O&&O.outlet){const le=O.outlet.detach(),ze=O.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:le,route:A,contexts:ze})}}deactivateRouteAndOutlet(A,b){const O=b.getContext(A.value.outlet),$=O&&A.value.component?O.children:b,J=cs(A);for(const le of Object.keys(J))this.deactivateRouteAndItsChildren(J[le],$);O&&(O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated()),O.attachRef=null,O.resolver=null,O.route=null)}activateChildRoutes(A,b,O){const $=cs(b);A.children.forEach(J=>{this.activateRoutes(J,$[J.value.outlet],O),this.forwardEvent(new Gi(J.value.snapshot))}),A.children.length&&this.forwardEvent(new zi(A.value.snapshot))}activateRoutes(A,b,O){const $=A.value,J=b?b.value:null;if(lo($),$===J)if($.component){const le=O.getOrCreateContext($.outlet);this.activateChildRoutes(A,b,le.children)}else this.activateChildRoutes(A,b,O);else if($.component){const le=O.getOrCreateContext($.outlet);if(this.routeReuseStrategy.shouldAttach($.snapshot)){const ze=this.routeReuseStrategy.retrieve($.snapshot);this.routeReuseStrategy.store($.snapshot,null),le.children.onOutletReAttached(ze.contexts),le.attachRef=ze.componentRef,le.route=ze.route.value,le.outlet&&le.outlet.attach(ze.componentRef,ze.route.value),lo(ze.route.value),this.activateChildRoutes(A,null,le.children)}else{const ze=xs($.snapshot),At=ze?.get(C._Vd)??null;le.attachRef=null,le.route=$,le.resolver=At,le.injector=ze,le.outlet&&le.outlet.activateWith($,le.injector),this.activateChildRoutes(A,null,le.children)}}else this.activateChildRoutes(A,null,O)}}class Wn{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class ho{constructor(A,b){this.component=A,this.route=b}}function Ao(D,A,b){const O=D._root;return Gs(O,A?A._root:null,b,[O.value])}function aa(D,A){const b=Symbol(),O=A.get(D,b);return O===b?"function"!=typeof D||(0,C.Z0I)(D)?A.get(D):D:O}function Gs(D,A,b,O,$={canDeactivateChecks:[],canActivateChecks:[]}){const J=cs(A);return D.children.forEach(le=>{(function eo(D,A,b,O,$={canDeactivateChecks:[],canActivateChecks:[]}){const J=D.value,le=A?A.value:null,ze=b?b.getContext(D.value.outlet):null;if(le&&J.routeConfig===le.routeConfig){const At=function nu(D,A,b){if("function"==typeof b)return b(D,A);switch(b){case"pathParamsChange":return!Jn(D.url,A.url);case"pathParamsOrQueryParamsChange":return!Jn(D.url,A.url)||!Qn(D.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zr(D,A)||!Qn(D.queryParams,A.queryParams);default:return!Zr(D,A)}}(le,J,J.routeConfig.runGuardsAndResolvers);At?$.canActivateChecks.push(new Wn(O)):(J.data=le.data,J._resolvedData=le._resolvedData),Gs(D,A,J.component?ze?ze.children:null:b,O,$),At&&ze&&ze.outlet&&ze.outlet.isActivated&&$.canDeactivateChecks.push(new ho(ze.outlet.component,le))}else le&&zo(A,ze,$),$.canActivateChecks.push(new Wn(O)),Gs(D,null,J.component?ze?ze.children:null:b,O,$)})(le,J[le.value.outlet],b,O.concat([le.value]),$),delete J[le.value.outlet]}),an(J,(le,ze)=>zo(le,b.getContext(ze),$)),$}function zo(D,A,b){const O=cs(D),$=D.value;an(O,(J,le)=>{zo(J,$.component?A?A.children.getContext(le):null:A,b)}),b.canDeactivateChecks.push(new ho($.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,$))}function Dt(D){return"function"==typeof D}function ua(D){return D instanceof Ne.K||"EmptyError"===D?.name}const Ws=Symbol("INITIAL_VALUE");function Ms(){return(0,qt.w)(D=>Nt(D.map(A=>A.pipe((0,rt.q)(1),(0,at.O)(Ws)))).pipe((0,Kt.U)(A=>{for(const b of A)if(!0!==b){if(b===Ws)return Ws;if(!1===b||b instanceof Bn)return b}return!0}),(0,lt.h)(A=>A!==Ws),(0,rt.q)(1)))}function vs(D){return(0,Te.z)((0,Gt.b)(A=>{if(it(A))throw _i(0,A)}),(0,Kt.U)(A=>!0===A))}const Ps={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Mo(D,A,b,O,$){const J=Wi(D,A,b);return J.matched?function xo(D,A,b,O){const $=A.canMatch;if(!$||0===$.length)return(0,K.of)(!0);const J=$.map(le=>{const ze=aa(le,D);return dn(function is(D){return D&&Dt(D.canMatch)}(ze)?ze.canMatch(A,b):D.runInContext(()=>ze(A,b)))});return(0,K.of)(J).pipe(Ms(),vs())}(O=Ln(A,O),A,b).pipe((0,Kt.U)(le=>!0===le?J:{...Ps})):(0,K.of)(J)}function Wi(D,A,b){if(""===A.path)return"full"===A.pathMatch&&(D.hasChildren()||b.length>0)?{...Ps}:{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const $=(A.matcher||gr)(b,D,A);if(!$)return{...Ps};const J={};an($.posParams,(ze,At)=>{J[At]=ze.path});const le=$.consumed.length>0?{...J,...$.consumed[$.consumed.length-1].parameters}:J;return{matched:!0,consumedSegments:$.consumed,remainingSegments:b.slice($.consumed.length),parameters:le,positionalParamSegments:$.posParams??{}}}function go(D,A,b,O){if(b.length>0&&function ca(D,A,b){return b.some(O=>Ba(D,A,O)&&yi(O)!==pn)}(D,b,O)){const J=new jn(A,function Ns(D,A,b,O){const $={};$[pn]=O,O._sourceSegment=D,O._segmentIndexShift=A.length;for(const J of b)if(""===J.path&&yi(J)!==pn){const le=new jn([],{});le._sourceSegment=D,le._segmentIndexShift=A.length,$[yi(J)]=le}return $}(D,A,O,new jn(b,D.children)));return J._sourceSegment=D,J._segmentIndexShift=A.length,{segmentGroup:J,slicedSegments:[]}}if(0===b.length&&function Os(D,A,b){return b.some(O=>Ba(D,A,O))}(D,b,O)){const J=new jn(D.segments,function rr(D,A,b,O,$){const J={};for(const le of O)if(Ba(D,b,le)&&!$[yi(le)]){const ze=new jn([],{});ze._sourceSegment=D,ze._segmentIndexShift=A.length,J[yi(le)]=ze}return{...$,...J}}(D,A,b,O,D.children));return J._sourceSegment=D,J._segmentIndexShift=A.length,{segmentGroup:J,slicedSegments:b}}const $=new jn(D.segments,D.children);return $._sourceSegment=D,$._segmentIndexShift=A.length,{segmentGroup:$,slicedSegments:b}}function Ba(D,A,b){return(!(D.hasChildren()||A.length>0)||"full"!==b.pathMatch)&&""===b.path}function da(D,A,b,O){return!!(yi(D)===O||O!==pn&&Ba(A,b,D))&&("**"===D.path||Wi(A,D,b).matched)}function ks(D,A,b){return 0===A.length&&!D.children[b]}const Ro=!1;class to{constructor(A){this.segmentGroup=A||null}}class gi{constructor(A){this.urlTree=A}}function hi(D){return vt(new to(D))}function Rr(D){return vt(new gi(D))}class dl{constructor(A,b,O,$,J){this.injector=A,this.configLoader=b,this.urlSerializer=O,this.urlTree=$,this.config=J,this.allowRedirects=!0}apply(){const A=go(this.urlTree.root,[],[],this.config).segmentGroup,b=new jn(A.segments,A.children);return this.expandSegmentGroup(this.injector,this.config,b,pn).pipe((0,Kt.U)(J=>this.createUrlTree(ne(J),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ct(J=>{if(J instanceof gi)return this.allowRedirects=!1,this.match(J.urlTree);throw J instanceof to?this.noMatchError(J):J}))}match(A){return this.expandSegmentGroup(this.injector,this.config,A.root,pn).pipe((0,Kt.U)($=>this.createUrlTree(ne($),A.queryParams,A.fragment))).pipe(Ct($=>{throw $ instanceof to?this.noMatchError($):$}))}noMatchError(A){return new C.vHH(4002,Ro)}createUrlTree(A,b,O){const $=V(A);return new Bn($,b,O)}expandSegmentGroup(A,b,O,$){return 0===O.segments.length&&O.hasChildren()?this.expandChildren(A,b,O).pipe((0,Kt.U)(J=>new jn([],J))):this.expandSegment(A,O,b,O.segments,$,!0)}expandChildren(A,b,O){const $=[];for(const J of Object.keys(O.children))"primary"===J?$.unshift(J):$.push(J);return(0,p.D)($).pipe((0,It.b)(J=>{const le=O.children[J],ze=sa(b,J);return this.expandSegmentGroup(A,ze,le,J).pipe((0,Kt.U)(At=>({segment:At,outlet:J})))}),(0,rn.R)((J,le)=>(J[le.outlet]=le.segment,J),{}),xn())}expandSegment(A,b,O,$,J,le){return(0,p.D)(O).pipe((0,It.b)(ze=>this.expandSegmentAgainstRoute(A,b,O,ze,$,J,le).pipe(Ct(Cn=>{if(Cn instanceof to)return(0,K.of)(null);throw Cn}))),(0,Ht.P)(ze=>!!ze),Ct((ze,At)=>{if(ua(ze))return ks(b,$,J)?(0,K.of)(new jn([],{})):hi(b);throw ze}))}expandSegmentAgainstRoute(A,b,O,$,J,le,ze){return da($,b,J,le)?void 0===$.redirectTo?this.matchSegmentAgainstRoute(A,b,$,J,le):ze&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,b,O,$,J,le):hi(b):hi(b)}expandSegmentAgainstRouteUsingRedirect(A,b,O,$,J,le){return"**"===$.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,O,$,le):this.expandRegularSegmentAgainstRouteUsingRedirect(A,b,O,$,J,le)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,b,O,$){const J=this.applyRedirectCommands([],O.redirectTo,{});return O.redirectTo.startsWith("/")?Rr(J):this.lineralizeSegments(O,J).pipe((0,bt.z)(le=>{const ze=new jn(le,{});return this.expandSegment(A,ze,b,le,$,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,b,O,$,J,le){const{matched:ze,consumedSegments:At,remainingSegments:Cn,positionalParamSegments:En}=Wi(b,$,J);if(!ze)return hi(b);const Jr=this.applyRedirectCommands(At,$.redirectTo,En);return $.redirectTo.startsWith("/")?Rr(Jr):this.lineralizeSegments($,Jr).pipe((0,bt.z)(Si=>this.expandSegment(A,b,O,Si.concat(Cn),le,!1)))}matchSegmentAgainstRoute(A,b,O,$,J){return"**"===O.path?(A=Ln(O,A),O.loadChildren?(O._loadedRoutes?(0,K.of)({routes:O._loadedRoutes,injector:O._loadedInjector}):this.configLoader.loadChildren(A,O)).pipe((0,Kt.U)(ze=>(O._loadedRoutes=ze.routes,O._loadedInjector=ze.injector,new jn($,{})))):(0,K.of)(new jn($,{}))):Mo(b,O,$,A).pipe((0,qt.w)(({matched:le,consumedSegments:ze,remainingSegments:At})=>le?this.getChildConfig(A=O._injector??A,O,$).pipe((0,bt.z)(En=>{const Jr=En.injector??A,Si=En.routes,{segmentGroup:Fo,slicedSegments:Ii}=go(b,ze,At,Si),Lo=new jn(Fo.segments,Fo.children);if(0===Ii.length&&Lo.hasChildren())return this.expandChildren(Jr,Si,Lo).pipe((0,Kt.U)(Yo=>new jn(ze,Yo)));if(0===Si.length&&0===Ii.length)return(0,K.of)(new jn(ze,{}));const as=yi(O)===J;return this.expandSegment(Jr,Lo,Si,Ii,as?pn:J,!0).pipe((0,Kt.U)($r=>new jn(ze.concat($r.segments),$r.children)))})):hi(b)))}getChildConfig(A,b,O){return b.children?(0,K.of)({routes:b.children,injector:A}):b.loadChildren?void 0!==b._loadedRoutes?(0,K.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):function Mi(D,A,b,O){const $=A.canLoad;if(void 0===$||0===$.length)return(0,K.of)(!0);const J=$.map(le=>{const ze=aa(le,D);return dn(function Go(D){return D&&Dt(D.canLoad)}(ze)?ze.canLoad(A,b):D.runInContext(()=>ze(A,b)))});return(0,K.of)(J).pipe(Ms(),vs())}(A,b,O).pipe((0,bt.z)($=>$?this.configLoader.loadChildren(A,b).pipe((0,Gt.b)(J=>{b._loadedRoutes=J.routes,b._loadedInjector=J.injector})):function Zo(D){return vt(So(Ro,3))}())):(0,K.of)({routes:[],injector:A})}lineralizeSegments(A,b){let O=[],$=b.root;for(;;){if(O=O.concat($.segments),0===$.numberOfChildren)return(0,K.of)(O);if($.numberOfChildren>1||!$.children[pn])return A.redirectTo,vt(new C.vHH(4e3,Ro));$=$.children[pn]}}applyRedirectCommands(A,b,O){return this.applyRedirectCreateUrlTree(b,this.urlSerializer.parse(b),A,O)}applyRedirectCreateUrlTree(A,b,O,$){const J=this.createSegmentGroup(A,b.root,O,$);return new Bn(J,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(A,b){const O={};return an(A,($,J)=>{if("string"==typeof $&&$.startsWith(":")){const ze=$.substring(1);O[J]=b[ze]}else O[J]=$}),O}createSegmentGroup(A,b,O,$){const J=this.createSegments(A,b.segments,O,$);let le={};return an(b.children,(ze,At)=>{le[At]=this.createSegmentGroup(A,ze,O,$)}),new jn(J,le)}createSegments(A,b,O,$){return b.map(J=>J.path.startsWith(":")?this.findPosParam(A,J,$):this.findOrReturn(J,O))}findPosParam(A,b,O){const $=O[b.path.substring(1)];if(!$)throw new C.vHH(4001,Ro);return $}findOrReturn(A,b){let O=0;for(const $ of b){if($.path===A.path)return b.splice(O),$;O++}return A}}class Vu{}class k{constructor(A,b,O,$,J,le,ze){this.injector=A,this.rootComponentType=b,this.config=O,this.urlTree=$,this.url=J,this.paramsInheritanceStrategy=le,this.urlSerializer=ze}recognize(){const A=go(this.urlTree.root,[],[],this.config.filter(b=>void 0===b.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,A,pn).pipe((0,Kt.U)(b=>{if(null===b)return null;const O=new ba([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pn,this.rootComponentType,null,this.urlTree.root,-1,{}),$=new ys(O,b),J=new ts(this.url,$);return this.inheritParamsAndData(J._root),J}))}inheritParamsAndData(A){const b=A.value,O=Fa(b,this.paramsInheritanceStrategy);b.params=Object.freeze(O.params),b.data=Object.freeze(O.data),A.children.forEach($=>this.inheritParamsAndData($))}processSegmentGroup(A,b,O,$){return 0===O.segments.length&&O.hasChildren()?this.processChildren(A,b,O):this.processSegment(A,b,O,O.segments,$)}processChildren(A,b,O){return(0,p.D)(Object.keys(O.children)).pipe((0,It.b)($=>{const J=O.children[$],le=sa(b,$);return this.processSegmentGroup(A,le,J,$)}),(0,rn.R)(($,J)=>$&&J?($.push(...J),$):null),function nr(D,A=!1){return(0,je.e)((b,O)=>{let $=0;b.subscribe((0,tt.x)(O,J=>{const le=D(J,$++);(le||A)&&O.next(J),!le&&O.complete()}))})}($=>null!==$),(0,_n.d)(null),xn(),(0,Kt.U)($=>{if(null===$)return null;const J=xe($);return function G(D){D.sort((A,b)=>A.value.outlet===pn?-1:b.value.outlet===pn?1:A.value.outlet.localeCompare(b.value.outlet))}(J),J}))}processSegment(A,b,O,$,J){return(0,p.D)(b).pipe((0,It.b)(le=>this.processSegmentAgainstRoute(le._injector??A,le,O,$,J)),(0,Ht.P)(le=>!!le),Ct(le=>{if(ua(le))return ks(O,$,J)?(0,K.of)([]):(0,K.of)(null);throw le}))}processSegmentAgainstRoute(A,b,O,$,J){if(b.redirectTo||!da(b,O,$,J))return(0,K.of)(null);let le;if("**"===b.path){const ze=$.length>0?Fr($).parameters:{},At=Rn(O)+$.length,Cn=new ba($,ze,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ar(b),yi(b),b.component??b._loadedComponent??null,b,Ft(O),At,Or(b));le=(0,K.of)({snapshot:Cn,consumedSegments:[],remainingSegments:[]})}else le=Mo(O,b,$,A).pipe((0,Kt.U)(({matched:ze,consumedSegments:At,remainingSegments:Cn,parameters:En})=>{if(!ze)return null;const Jr=Rn(O)+At.length;return{snapshot:new ba(At,En,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ar(b),yi(b),b.component??b._loadedComponent??null,b,Ft(O),Jr,Or(b)),consumedSegments:At,remainingSegments:Cn}}));return le.pipe((0,qt.w)(ze=>{if(null===ze)return(0,K.of)(null);const{snapshot:At,consumedSegments:Cn,remainingSegments:En}=ze;A=b._injector??A;const Jr=b._loadedInjector??A,Si=function L(D){return D.children?D.children:D.loadChildren?D._loadedRoutes:[]}(b),{segmentGroup:Fo,slicedSegments:Ii}=go(O,Cn,En,Si.filter(as=>void 0===as.redirectTo));if(0===Ii.length&&Fo.hasChildren())return this.processChildren(Jr,Si,Fo).pipe((0,Kt.U)(as=>null===as?null:[new ys(At,as)]));if(0===Si.length&&0===Ii.length)return(0,K.of)([new ys(At,[])]);const Lo=yi(b)===J;return this.processSegment(Jr,Si,Fo,Ii,Lo?pn:J).pipe((0,Kt.U)(as=>null===as?null:[new ys(At,as)]))}))}}function ie(D){const A=D.value.routeConfig;return A&&""===A.path&&void 0===A.redirectTo}function xe(D){const A=[],b=new Set;for(const O of D){if(!ie(O)){A.push(O);continue}const $=A.find(J=>O.value.routeConfig===J.value.routeConfig);void 0!==$?($.children.push(...O.children),b.add($)):A.push(O)}for(const O of b){const $=xe(O.children);A.push(new ys(O.value,$))}return A.filter(O=>!b.has(O))}function Ft(D){let A=D;for(;A._sourceSegment;)A=A._sourceSegment;return A}function Rn(D){let A=D,b=A._segmentIndexShift??0;for(;A._sourceSegment;)A=A._sourceSegment,b+=A._segmentIndexShift??0;return b-1}function ar(D){return D.data||{}}function Or(D){return D.resolve||{}}function Ls(D){return"string"==typeof D.title||null===D.title}function un(D){return(0,qt.w)(A=>{const b=D(A);return b?(0,p.D)(b).pipe((0,Kt.U)(()=>A)):(0,K.of)(A)})}const Es=new C.OlP("ROUTES");let sn=(()=>{class D{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,C.f3M)(C.Sil)}loadComponent(b){if(this.componentLoaders.get(b))return this.componentLoaders.get(b);if(b._loadedComponent)return(0,K.of)(b._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(b);const O=dn(b.loadComponent()).pipe((0,Kt.U)(zt),(0,Gt.b)(J=>{this.onLoadEndListener&&this.onLoadEndListener(b),b._loadedComponent=J}),zr(()=>{this.componentLoaders.delete(b)})),$=new ln(O,()=>new X.x).pipe(xt());return this.componentLoaders.set(b,$),$}loadChildren(b,O){if(this.childrenLoaders.get(O))return this.childrenLoaders.get(O);if(O._loadedRoutes)return(0,K.of)({routes:O._loadedRoutes,injector:O._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(O);const J=this.loadModuleFactoryOrRoutes(O.loadChildren).pipe((0,Kt.U)(ze=>{this.onLoadEndListener&&this.onLoadEndListener(O);let At,Cn,En=!1;Array.isArray(ze)?Cn=ze:(At=ze.create(b).injector,Cn=ur(At.get(Es,[],C.XFs.Self|C.XFs.Optional)));return{routes:Cn.map(rs),injector:At}}),zr(()=>{this.childrenLoaders.delete(O)})),le=new ln(J,()=>new X.x).pipe(xt());return this.childrenLoaders.set(O,le),le}loadModuleFactoryOrRoutes(b){return dn(b()).pipe((0,Kt.U)(zt),(0,bt.z)(O=>O instanceof C.YKP||Array.isArray(O)?(0,K.of)(O):(0,p.D)(this.compiler.compileModuleAsync(O))))}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function zt(D){return function ht(D){return D&&"object"==typeof D&&"default"in D}(D)?D.default:D}let Ha=(()=>{class D{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new X.x,this.configLoader=(0,C.f3M)(sn),this.environmentInjector=(0,C.f3M)(C.lqb),this.urlSerializer=(0,C.f3M)(De),this.rootContexts=(0,C.f3M)(Oe),this.navigationId=0,this.afterPreactivation=()=>(0,K.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=$=>this.events.next(new uo($)),this.configLoader.onLoadStartListener=$=>this.events.next(new Js($))}complete(){this.transitions?.complete()}handleNavigationRequest(b){const O=++this.navigationId;this.transitions?.next({...this.transitions.value,...b,id:O})}setupNavigations(b){return this.transitions=new Se({id:0,targetPageId:0,currentUrlTree:b.currentUrlTree,currentRawUrl:b.currentUrlTree,extractedUrl:b.urlHandlingStrategy.extract(b.currentUrlTree),urlAfterRedirects:b.urlHandlingStrategy.extract(b.currentUrlTree),rawUrl:b.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ve,restoredState:null,currentSnapshot:b.routerState.snapshot,targetSnapshot:null,currentRouterState:b.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,lt.h)(O=>0!==O.id),(0,Kt.U)(O=>({...O,extractedUrl:b.urlHandlingStrategy.extract(O.rawUrl)})),(0,qt.w)(O=>{let $=!1,J=!1;return(0,K.of)(O).pipe((0,Gt.b)(le=>{this.currentNavigation={id:le.id,initialUrl:le.rawUrl,extractedUrl:le.extractedUrl,trigger:le.source,extras:le.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,qt.w)(le=>{const ze=b.browserUrlTree.toString(),At=!b.navigated||le.extractedUrl.toString()!==ze||ze!==b.currentUrlTree.toString();if(!At&&"reload"!==(le.extras.onSameUrlNavigation??b.onSameUrlNavigation)){const En="";return this.events.next(new vn(le.id,b.serializeUrl(O.rawUrl),En,0)),b.rawUrlTree=le.rawUrl,le.resolve(null),$t.E}if(b.urlHandlingStrategy.shouldProcessUrl(le.rawUrl))return Bu(le.source)&&(b.browserUrlTree=le.extractedUrl),(0,K.of)(le).pipe((0,qt.w)(En=>{const Jr=this.transitions?.getValue();return this.events.next(new _t(En.id,this.urlSerializer.serialize(En.extractedUrl),En.source,En.restoredState)),Jr!==this.transitions?.getValue()?$t.E:Promise.resolve(En)}),function Fs(D,A,b,O){return(0,qt.w)($=>function ru(D,A,b,O,$){return new dl(D,A,b,O,$).apply()}(D,A,b,$.extractedUrl,O).pipe((0,Kt.U)(J=>({...$,urlAfterRedirects:J}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,b.config),(0,Gt.b)(En=>{this.currentNavigation={...this.currentNavigation,finalUrl:En.urlAfterRedirects},O.urlAfterRedirects=En.urlAfterRedirects}),function Dr(D,A,b,O,$){return(0,bt.z)(J=>function ja(D,A,b,O,$,J,le="emptyOnly"){return new k(D,A,b,O,$,le,J).recognize().pipe((0,qt.w)(ze=>null===ze?function fa(D){return new $e.y(A=>A.error(D))}(new Vu):(0,K.of)(ze)))}(D,A,b,J.urlAfterRedirects,O.serialize(J.urlAfterRedirects),O,$).pipe((0,Kt.U)(le=>({...J,targetSnapshot:le}))))}(this.environmentInjector,this.rootComponentType,b.config,this.urlSerializer,b.paramsInheritanceStrategy),(0,Gt.b)(En=>{if(O.targetSnapshot=En.targetSnapshot,"eager"===b.urlUpdateStrategy){if(!En.extras.skipLocationChange){const Si=b.urlHandlingStrategy.merge(En.urlAfterRedirects,En.rawUrl);b.setBrowserUrl(Si,En)}b.browserUrlTree=En.urlAfterRedirects}const Jr=new Ti(En.id,this.urlSerializer.serialize(En.extractedUrl),this.urlSerializer.serialize(En.urlAfterRedirects),En.targetSnapshot);this.events.next(Jr)}));if(At&&b.urlHandlingStrategy.shouldProcessUrl(b.rawUrlTree)){const{id:En,extractedUrl:Jr,source:Si,restoredState:Fo,extras:Ii}=le,Lo=new _t(En,this.urlSerializer.serialize(Jr),Si,Fo);this.events.next(Lo);const as=Ca(Jr,this.rootComponentType).snapshot;return O={...le,targetSnapshot:as,urlAfterRedirects:Jr,extras:{...Ii,skipLocationChange:!1,replaceUrl:!1}},(0,K.of)(O)}{const En="";return this.events.next(new vn(le.id,b.serializeUrl(O.extractedUrl),En,1)),b.rawUrlTree=le.rawUrl,le.resolve(null),$t.E}}),(0,Gt.b)(le=>{const ze=new dr(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(le.urlAfterRedirects),le.targetSnapshot);this.events.next(ze)}),(0,Kt.U)(le=>O={...le,guards:Ao(le.targetSnapshot,le.currentSnapshot,this.rootContexts)}),function po(D,A){return(0,bt.z)(b=>{const{targetSnapshot:O,currentSnapshot:$,guards:{canActivateChecks:J,canDeactivateChecks:le}}=b;return 0===le.length&&0===J.length?(0,K.of)({...b,guardsResult:!0}):function Vi(D,A,b,O){return(0,p.D)(D).pipe((0,bt.z)($=>function la(D,A,b,O,$){const J=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!J||0===J.length)return(0,K.of)(!0);const le=J.map(ze=>{const At=xs(A)??$,Cn=aa(ze,At);return dn(function Va(D){return D&&Dt(D.canDeactivate)}(Cn)?Cn.canDeactivate(D,A,b,O):At.runInContext(()=>Cn(D,A,b,O))).pipe((0,Ht.P)())});return(0,K.of)(le).pipe(Ms())}($.component,$.route,b,A,O)),(0,Ht.P)($=>!0!==$,!0))}(le,O,$,D).pipe((0,bt.z)(ze=>ze&&function wr(D){return"boolean"==typeof D}(ze)?function Ei(D,A,b,O){return(0,p.D)(A).pipe((0,It.b)($=>(0,yt.z)(function qo(D,A){return null!==D&&A&&A(new ps(D)),(0,K.of)(!0)}($.route.parent,O),function Wo(D,A){return null!==D&&A&&A(new cl(D)),(0,K.of)(!0)}($.route,O),function Uu(D,A,b){const O=A[A.length-1],J=A.slice(0,A.length-1).reverse().map(le=>function oa(D){const A=D.routeConfig?D.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:D,guards:A}:null}(le)).filter(le=>null!==le).map(le=>Rt(()=>{const ze=le.guards.map(At=>{const Cn=xs(le.node)??b,En=aa(At,Cn);return dn(function Ui(D){return D&&Dt(D.canActivateChild)}(En)?En.canActivateChild(O,D):Cn.runInContext(()=>En(O,D))).pipe((0,Ht.P)())});return(0,K.of)(ze).pipe(Ms())}));return(0,K.of)(J).pipe(Ms())}(D,$.path,b),function Rs(D,A,b){const O=A.routeConfig?A.routeConfig.canActivate:null;if(!O||0===O.length)return(0,K.of)(!0);const $=O.map(J=>Rt(()=>{const le=xs(A)??b,ze=aa(J,le);return dn(function Lu(D){return D&&Dt(D.canActivate)}(ze)?ze.canActivate(A,D):le.runInContext(()=>ze(A,D))).pipe((0,Ht.P)())}));return(0,K.of)($).pipe(Ms())}(D,$.route,b))),(0,Ht.P)($=>!0!==$,!0))}(O,J,D,A):(0,K.of)(ze)),(0,Kt.U)(ze=>({...b,guardsResult:ze})))})}(this.environmentInjector,le=>this.events.next(le)),(0,Gt.b)(le=>{if(O.guardsResult=le.guardsResult,it(le.guardsResult))throw _i(0,le.guardsResult);const ze=new Ni(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(le.urlAfterRedirects),le.targetSnapshot,!!le.guardsResult);this.events.next(ze)}),(0,lt.h)(le=>!!le.guardsResult||(b.restoreHistory(le),this.cancelNavigationTransition(le,"",3),!1)),un(le=>{if(le.guards.canActivateChecks.length)return(0,K.of)(le).pipe((0,Gt.b)(ze=>{const At=new Ss(ze.id,this.urlSerializer.serialize(ze.extractedUrl),this.urlSerializer.serialize(ze.urlAfterRedirects),ze.targetSnapshot);this.events.next(At)}),(0,qt.w)(ze=>{let At=!1;return(0,K.of)(ze).pipe(function Ri(D,A){return(0,bt.z)(b=>{const{targetSnapshot:O,guards:{canActivateChecks:$}}=b;if(!$.length)return(0,K.of)(b);let J=0;return(0,p.D)($).pipe((0,It.b)(le=>function mi(D,A,b,O){const $=D.routeConfig,J=D._resolve;return void 0!==$?.title&&!Ls($)&&(J[Nr]=$.title),function Lt(D,A,b,O){const $=function fi(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===$.length)return(0,K.of)({});const J={};return(0,p.D)($).pipe((0,bt.z)(le=>function wi(D,A,b,O){const $=xs(A)??O,J=aa(D,$);return dn(J.resolve?J.resolve(A,b):$.runInContext(()=>J(A,b)))}(D[le],A,b,O).pipe((0,Ht.P)(),(0,Gt.b)(ze=>{J[le]=ze}))),Sn(1),function pr(D){return(0,Kt.U)(()=>D)}(J),Ct(le=>ua(le)?$t.E:vt(le)))}(J,D,A,O).pipe((0,Kt.U)(le=>(D._resolvedData=le,D.data=Fa(D,b).resolve,$&&Ls($)&&(D.data[Nr]=$.title),null)))}(le.route,O,D,A)),(0,Gt.b)(()=>J++),Sn(1),(0,bt.z)(le=>J===$.length?(0,K.of)(b):$t.E))})}(b.paramsInheritanceStrategy,this.environmentInjector),(0,Gt.b)({next:()=>At=!0,complete:()=>{At||(b.restoreHistory(ze),this.cancelNavigationTransition(ze,"",2))}}))}),(0,Gt.b)(ze=>{const At=new Ia(ze.id,this.urlSerializer.serialize(ze.extractedUrl),this.urlSerializer.serialize(ze.urlAfterRedirects),ze.targetSnapshot);this.events.next(At)}))}),un(le=>{const ze=At=>{const Cn=[];At.routeConfig?.loadComponent&&!At.routeConfig._loadedComponent&&Cn.push(this.configLoader.loadComponent(At.routeConfig).pipe((0,Gt.b)(En=>{At.component=En}),(0,Kt.U)(()=>{})));for(const En of At.children)Cn.push(...ze(En));return Cn};return Nt(ze(le.targetSnapshot.root)).pipe((0,_n.d)(),(0,rt.q)(1))}),un(()=>this.afterPreactivation()),(0,Kt.U)(le=>{const ze=function co(D,A,b){const O=Yi(D,A._root,b?b._root:void 0);return new Xs(O,A)}(b.routeReuseStrategy,le.targetSnapshot,le.currentRouterState);return O={...le,targetRouterState:ze}}),(0,Gt.b)(le=>{b.currentUrlTree=le.urlAfterRedirects,b.rawUrlTree=b.urlHandlingStrategy.merge(le.urlAfterRedirects,le.rawUrl),b.routerState=le.targetRouterState,"deferred"===b.urlUpdateStrategy&&(le.extras.skipLocationChange||b.setBrowserUrl(b.rawUrlTree,le),b.browserUrlTree=le.urlAfterRedirects)}),((D,A,b)=>(0,Kt.U)(O=>(new Ua(A,O.targetRouterState,O.currentRouterState,b).activate(D),O)))(this.rootContexts,b.routeReuseStrategy,le=>this.events.next(le)),(0,rt.q)(1),(0,Gt.b)({next:le=>{$=!0,this.lastSuccessfulNavigation=this.currentNavigation,b.navigated=!0,this.events.next(new Xt(le.id,this.urlSerializer.serialize(le.extractedUrl),this.urlSerializer.serialize(b.currentUrlTree))),b.titleStrategy?.updateTitle(le.targetRouterState.snapshot),le.resolve(!0)},complete:()=>{$=!0}}),zr(()=>{$||J||this.cancelNavigationTransition(O,"",1),this.currentNavigation?.id===O.id&&(this.currentNavigation=null)}),Ct(le=>{if(J=!0,Ce(le)){mr(le)||(b.navigated=!0,b.restoreHistory(O,!0));const ze=new $n(O.id,this.urlSerializer.serialize(O.extractedUrl),le.message,le.cancellationCode);if(this.events.next(ze),mr(le)){const At=b.urlHandlingStrategy.merge(le.url,b.rawUrlTree),Cn={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===b.urlUpdateStrategy||Bu(O.source)};b.scheduleNavigation(At,ve,null,Cn,{resolve:O.resolve,reject:O.reject,promise:O.promise})}else O.resolve(!1)}else{b.restoreHistory(O,!0);const ze=new br(O.id,this.urlSerializer.serialize(O.extractedUrl),le,O.targetSnapshot??void 0);this.events.next(ze);try{O.resolve(b.errorHandler(le))}catch(At){O.reject(At)}}return $t.E}))}))}cancelNavigationTransition(b,O,$){const J=new $n(b.id,this.urlSerializer.serialize(b.extractedUrl),O,$);this.events.next(J),b.resolve(!1)}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Bu(D){return D!==ve}let Kl=(()=>{class D{buildTitle(b){let O,$=b.root;for(;void 0!==$;)O=this.getResolvedTitleForRoute($)??O,$=$.children.find(J=>J.outlet===pn);return O}getResolvedTitleForRoute(b){return b.data[Nr]}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=C.Yz7({token:D,factory:function(){return(0,C.f3M)(mo)},providedIn:"root"}),D})(),mo=(()=>{class D extends Kl{constructor(b){super(),this.title=b}updateTitle(b){const O=this.buildTitle(b);void 0!==O&&this.title.setTitle(O)}}return D.\u0275fac=function(b){return new(b||D)(C.LFG(Ur.Dx))},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})(),$u=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=C.Yz7({token:D,factory:function(){return(0,C.f3M)(Ta)},providedIn:"root"}),D})();class ju{shouldDetach(A){return!1}store(A,b){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,b){return A.routeConfig===b.routeConfig}}let Ta=(()=>{class D extends ju{}return D.\u0275fac=function(){let A;return function(O){return(A||(A=C.n5z(D)))(O||D)}}(),D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const qi=new C.OlP("",{providedIn:"root",factory:()=>({})});let Yl=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=C.Yz7({token:D,factory:function(){return(0,C.f3M)(Rl)},providedIn:"root"}),D})(),Rl=(()=>{class D{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,O){return b}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Da(D){throw D}function Ql(D,A,b){return A.parse("/")}const Fi={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Yn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ss=(()=>{class D{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,C.f3M)(C.c2e),this.isNgZoneEnabled=!1,this.options=(0,C.f3M)(qi,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Da,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ql,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,C.f3M)(Yl),this.routeReuseStrategy=(0,C.f3M)($u),this.urlCreationStrategy=(0,C.f3M)(Br),this.titleStrategy=(0,C.f3M)(Kl),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ur((0,C.f3M)(Es,{optional:!0})??[]),this.navigationTransitions=(0,C.f3M)(Ha),this.urlSerializer=(0,C.f3M)(De),this.location=(0,C.f3M)(jt.Ye),this.isNgZoneEnabled=(0,C.f3M)(C.R0b)instanceof C.R0b&&C.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Bn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ca(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(b=>{this.lastSuccessfulId=b.id,this.currentPageId=this.browserPageId??0},b=>{this.console.warn(`Unhandled Navigation Error: ${b}`)})}resetRootComponentType(b){this.routerState.root.component=b,this.navigationTransitions.rootComponentType=b}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const b=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ve,b)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const O="popstate"===b.type?"popstate":"hashchange";"popstate"===O&&setTimeout(()=>{this.navigateToSyncWithBrowser(b.url,O,b.state)},0)}))}navigateToSyncWithBrowser(b,O,$){const J={replaceUrl:!0},le=$?.navigationId?$:null;if($){const At={...$};delete At.navigationId,delete At.\u0275routerPageId,0!==Object.keys(At).length&&(J.state=At)}const ze=this.parseUrl(b);this.scheduleNavigation(ze,O,le,J)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(b){this.config=b.map(rs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,O={}){const{relativeTo:$,queryParams:J,fragment:le,queryParamsHandling:ze,preserveFragment:At}=O,Cn=At?this.currentUrlTree.fragment:le;let En=null;switch(ze){case"merge":En={...this.currentUrlTree.queryParams,...J};break;case"preserve":En=this.currentUrlTree.queryParams;break;default:En=J||null}return null!==En&&(En=this.removeEmptyProps(En)),this.urlCreationStrategy.createUrlTree($,this.routerState,this.currentUrlTree,b,En,Cn??null)}navigateByUrl(b,O={skipLocationChange:!1}){const $=it(b)?b:this.parseUrl(b),J=this.urlHandlingStrategy.merge($,this.rawUrlTree);return this.scheduleNavigation(J,ve,null,O)}navigate(b,O={skipLocationChange:!1}){return function kr(D){for(let A=0;A<D.length;A++){const b=D[A];if(null==b)throw new C.vHH(4008,false)}}(b),this.navigateByUrl(this.createUrlTree(b,O),O)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let O;try{O=this.urlSerializer.parse(b)}catch($){O=this.malformedUriErrorHandler($,this.urlSerializer,b)}return O}isActive(b,O){let $;if($=!0===O?{...Fi}:!1===O?{...Yn}:O,it(b))return yr(this.currentUrlTree,b,$);const J=this.parseUrl(b);return yr(this.currentUrlTree,J,$)}removeEmptyProps(b){return Object.keys(b).reduce((O,$)=>{const J=b[$];return null!=J&&(O[$]=J),O},{})}scheduleNavigation(b,O,$,J,le){if(this.disposed)return Promise.resolve(!1);let ze,At,Cn,En;return le?(ze=le.resolve,At=le.reject,Cn=le.promise):Cn=new Promise((Jr,Si)=>{ze=Jr,At=Si}),En="computed"===this.canceledNavigationResolution?$&&$.\u0275routerPageId?$.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:En,source:O,restoredState:$,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:b,extras:J,resolve:ze,reject:At,promise:Cn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Cn.catch(Jr=>Promise.reject(Jr))}setBrowserUrl(b,O){const $=this.urlSerializer.serialize(b);if(this.location.isCurrentPathEqualTo($)||O.extras.replaceUrl){const le={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId)};this.location.replaceState($,"",le)}else{const J={...O.extras.state,...this.generateNgRouterState(O.id,O.targetPageId)};this.location.go($,"",J)}}restoreHistory(b,O=!1){if("computed"===this.canceledNavigationResolution){const J=this.currentPageId-(this.browserPageId??this.currentPageId);0!==J?this.location.historyGo(J):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===J&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(b,O){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:O}:{navigationId:b}}}return D.\u0275fac=function(b){return new(b||D)},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})(),iu=(()=>{class D{constructor(b,O,$,J,le,ze){this.router=b,this.route=O,this.tabIndexAttribute=$,this.renderer=J,this.el=le,this.locationStrategy=ze,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new X.x;const At=le.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===At||"area"===At,this.isAnchorElement?this.subscription=b.events.subscribe(Cn=>{Cn instanceof Xt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(b){this._preserveFragment=(0,C.D6c)(b)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(b){this._skipLocationChange=(0,C.D6c)(b)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(b){this._replaceUrl=(0,C.D6c)(b)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(b){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",b)}ngOnChanges(b){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(b){null!=b?(this.commands=Array.isArray(b)?b:[b],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(b,O,$,J,le){return!!(null===this.urlTree||this.isAnchorElement&&(0!==b||O||$||J||le||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const b=null===this.href?null:(0,C.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",b)}applyAttributeValue(b,O){const $=this.renderer,J=this.el.nativeElement;null!==O?$.setAttribute(J,b,O):$.removeAttribute(J,b)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(b){return new(b||D)(C.Y36(ss),C.Y36(Do),C.$8M("tabindex"),C.Y36(C.Qsj),C.Y36(C.SBq),C.Y36(jt.S$))},D.\u0275dir=C.lG2({type:D,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(b,O){1&b&&C.NdJ("click",function(J){return O.onClick(J.button,J.ctrlKey,J.shiftKey,J.altKey,J.metaKey)}),2&b&&C.uIk("target",O.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[C.TTD]}),D})();class pa{}let wu=(()=>{class D{constructor(b,O,$,J,le){this.router=b,this.injector=$,this.preloadingStrategy=J,this.loader=le}setUpPreloading(){this.subscription=this.router.events.pipe((0,lt.h)(b=>b instanceof Xt),(0,It.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,O){const $=[];for(const J of O){J.providers&&!J._injector&&(J._injector=(0,C.MMx)(J.providers,b,`Route: ${J.path}`));const le=J._injector??b,ze=J._loadedInjector??le;(J.loadChildren&&!J._loadedRoutes&&void 0===J.canLoad||J.loadComponent&&!J._loadedComponent)&&$.push(this.preloadConfig(le,J)),(J.children||J._loadedRoutes)&&$.push(this.processRoutes(ze,J.children??J._loadedRoutes))}return(0,p.D)($).pipe((0,hr.J)())}preloadConfig(b,O){return this.preloadingStrategy.preload(O,()=>{let $;$=O.loadChildren&&void 0===O.canLoad?this.loader.loadChildren(b,O):(0,K.of)(null);const J=$.pipe((0,bt.z)(le=>null===le?(0,K.of)(void 0):(O._loadedRoutes=le.routes,O._loadedInjector=le.injector,this.processRoutes(le.injector??b,le.routes))));if(O.loadComponent&&!O._loadedComponent){const le=this.loader.loadComponent(O);return(0,p.D)([J,le]).pipe((0,hr.J)())}return J})}}return D.\u0275fac=function(b){return new(b||D)(C.LFG(ss),C.LFG(C.Sil),C.LFG(C.lqb),C.LFG(pa),C.LFG(sn))},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const Iu=new C.OlP("");let su=(()=>{class D{constructor(b,O,$,J,le={}){this.urlSerializer=b,this.transitions=O,this.viewportScroller=$,this.zone=J,this.options=le,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},le.scrollPositionRestoration=le.scrollPositionRestoration||"disabled",le.anchorScrolling=le.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof _t?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof Xt&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.urlSerializer.parse(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof sr&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,O){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new sr(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,O))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return D.\u0275fac=function(b){C.$Z()},D.\u0275prov=C.Yz7({token:D,factory:D.\u0275fac}),D})();var Qi=(()=>((Qi=Qi||{})[Qi.COMPLETE=0]="COMPLETE",Qi[Qi.FAILED=1]="FAILED",Qi[Qi.REDIRECTING=2]="REDIRECTING",Qi))();const Po=!1;function ro(D,A){return{\u0275kind:D,\u0275providers:A}}const No=new C.OlP("",{providedIn:"root",factory:()=>!1});function au(){const D=(0,C.f3M)(C.zs3);return A=>{const b=D.get(C.z2F);if(A!==b.components[0])return;const O=D.get(ss),$=D.get(Oo);1===D.get(hc)&&O.initialNavigation(),D.get(Cu,null,C.XFs.Optional)?.setUpPreloading(),D.get(Iu,null,C.XFs.Optional)?.init(),O.resetRootComponentType(b.componentTypes[0]),$.closed||($.next(),$.complete(),$.unsubscribe())}}const Oo=new C.OlP(Po?"bootstrap done indicator":"",{factory:()=>new X.x}),hc=new C.OlP(Po?"initial navigation":"",{providedIn:"root",factory:()=>1});function fd(){let D=[];return D=Po?[{provide:C.Xts,multi:!0,useFactory:()=>{const A=(0,C.f3M)(ss);return()=>A.events.subscribe(b=>{console.group?.(`Router Event: ${b.constructor.name}`),console.log(function Hs(D){if(!("type"in D))return`Unknown Router Event: ${D.constructor.name}`;switch(D.type){case 14:return`ActivationEnd(path: '${D.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${D.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${D.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${D.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state}, shouldActivate: ${D.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 2:return`NavigationCancel(id: ${D.id}, url: '${D.url}')`;case 16:return`NavigationSkipped(id: ${D.id}, url: '${D.url}')`;case 1:return`NavigationEnd(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${D.id}, url: '${D.url}', error: ${D.error})`;case 0:return`NavigationStart(id: ${D.id}, url: '${D.url}')`;case 6:return`ResolveEnd(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 5:return`ResolveStart(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 10:return`RouteConfigLoadEnd(path: ${D.route.path})`;case 9:return`RouteConfigLoadStart(path: ${D.route.path})`;case 4:return`RoutesRecognized(id: ${D.id}, url: '${D.url}', urlAfterRedirects: '${D.urlAfterRedirects}', state: ${D.state})`;case 15:return`Scroll(anchor: '${D.anchor}', position: '${D.position?`${D.position[0]}, ${D.position[1]}`:null}')`}}(b)),console.log(b),console.groupEnd?.()})}}]:[],ro(1,D)}const Cu=new C.OlP(Po?"router preloader":"");function Hu(D){return ro(0,[{provide:Cu,useExisting:wu},{provide:pa,useExisting:D}])}const os=!1,zu=new C.OlP(os?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),hs=[jt.Ye,{provide:De,useClass:Pe},ss,Oe,{provide:Do,useFactory:function _o(D){return D.routerState.root},deps:[ss]},sn,os?{provide:No,useValue:!0}:[]];function Ji(){return new C.PXZ("Router",ss)}let fl=(()=>{class D{constructor(b){}static forRoot(b,O){return{ngModule:D,providers:[hs,os&&O?.enableTracing?fd().\u0275providers:[],{provide:Es,multi:!0,useValue:b},{provide:zu,useFactory:za,deps:[[ss,new C.FiY,new C.tp0]]},{provide:qi,useValue:O||{}},O?.useHash?{provide:jt.S$,useClass:jt.Do}:{provide:jt.S$,useClass:jt.b0},{provide:Iu,useFactory:()=>{const D=(0,C.f3M)(jt.EM),A=(0,C.f3M)(C.R0b),b=(0,C.f3M)(qi),O=(0,C.f3M)(Ha),$=(0,C.f3M)(De);return b.scrollOffset&&D.setOffset(b.scrollOffset),new su($,O,D,A,b)}},O?.preloadingStrategy?Hu(O.preloadingStrategy).\u0275providers:[],{provide:C.PXZ,multi:!0,useFactory:Ji},O?.initialNavigation?lu(O):[],[{provide:Gu,useFactory:au},{provide:C.tb,multi:!0,useExisting:Gu}]]}}static forChild(b){return{ngModule:D,providers:[{provide:Es,multi:!0,useValue:b}]}}}return D.\u0275fac=function(b){return new(b||D)(C.LFG(zu,8))},D.\u0275mod=C.oAB({type:D}),D.\u0275inj=C.cJS({imports:[Kn]}),D})();function za(D){if(os&&D)throw new C.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function lu(D){return["disabled"===D.initialNavigation?ro(3,[{provide:C.ip1,multi:!0,useFactory:()=>{const A=(0,C.f3M)(ss);return()=>{A.setUpLocationChangeListener()}}},{provide:hc,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?ro(2,[{provide:hc,useValue:0},{provide:C.ip1,multi:!0,deps:[C.zs3],useFactory:A=>{const b=A.get(jt.V_,Promise.resolve());return()=>b.then(()=>new Promise(O=>{const $=A.get(ss),J=A.get(Oo);(function no(D,A){D.events.pipe((0,lt.h)(b=>b instanceof Xt||b instanceof $n||b instanceof br||b instanceof vn),(0,Kt.U)(b=>b instanceof Xt||b instanceof vn?Qi.COMPLETE:b instanceof $n&&(0===b.code||1===b.code)?Qi.REDIRECTING:Qi.FAILED),(0,lt.h)(b=>b!==Qi.REDIRECTING),(0,rt.q)(1)).subscribe(()=>{A()})})($,()=>{O(!0)}),A.get(Ha).afterPreactivation=()=>(O(!0),J.closed?(0,K.of)(void 0):J),$.initialNavigation()}))}}]).\u0275providers:[]]}const Gu=new C.OlP(os?"Router Initializer":"")},3942:(mn,ot,j)=>{j.d(ot,{Z:()=>Nt});var C=j(2090),p=j(4859),K=j(6881),X=j(1877);class Se{constructor(nt,yt){this._delegate=nt,this.firebase=yt,(0,K._addComponent)(nt,new p.wA("app-compat",()=>this,"PUBLIC")),this.container=nt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(nt){this._delegate.automaticDataCollectionEnabled=nt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(nt=>{this._delegate.checkDestroyed(),nt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,K.deleteApp)(this._delegate)))}_getService(nt,yt=K._DEFAULT_ENTRY_NAME){var ft;this._delegate.checkDestroyed();const Rt=this._delegate.container.getProvider(nt);return!Rt.isInitialized()&&"EXPLICIT"===(null===(ft=Rt.getComponent())||void 0===ft?void 0:ft.instantiationMode)&&Rt.initialize(),Rt.getImmediate({identifier:yt})}_removeServiceInstance(nt,yt=K._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(nt).clearInstance(yt)}_addComponent(nt){(0,K._addComponent)(this._delegate,nt)}_addOrOverwriteComponent(nt){(0,K._addOrOverwriteComponent)(this._delegate,nt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const $e=new C.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),de=function Ze(){const Qt=function be(Qt){const nt={},yt={__esModule:!0,initializeApp:function Te(wt,je={}){const xt=K.initializeApp(wt,je);if((0,C.r3)(nt,xt.name))return nt[xt.name];const ln=new Qt(xt,yt);return nt[xt.name]=ln,ln},app:Rt,registerVersion:K.registerVersion,setLogLevel:K.setLogLevel,onLog:K.onLog,apps:null,SDK_VERSION:K.SDK_VERSION,INTERNAL:{registerComponent:function vt(wt){const je=wt.name,xt=je.replace("-compat","");if(K._registerComponent(wt)&&"PUBLIC"===wt.type){const ln=(jt=Rt())=>{if("function"!=typeof jt[xt])throw $e.create("invalid-app-argument",{appName:je});return jt[xt]()};void 0!==wt.serviceProps&&(0,C.ZB)(ln,wt.serviceProps),yt[xt]=ln,Qt.prototype[xt]=function(...jt){return this._getService.bind(this,je).apply(this,wt.multipleInstances?jt:[])}}return"PUBLIC"===wt.type?yt[xt]:null},removeApp:function ft(wt){delete nt[wt]},useAsService:function $t(wt,je){return"serverAuth"===je?null:je},modularAPIs:K}};function Rt(wt){if(!(0,C.r3)(nt,wt=wt||K._DEFAULT_ENTRY_NAME))throw $e.create("no-app",{appName:wt});return nt[wt]}return yt.default=yt,Object.defineProperty(yt,"apps",{get:function Je(){return Object.keys(nt).map(wt=>nt[wt])}}),Rt.App=Qt,yt}(Se);return Qt.INTERNAL=Object.assign(Object.assign({},Qt.INTERNAL),{createFirebaseNamespace:Ze,extendNamespace:function nt(yt){(0,C.ZB)(Qt,yt)},createSubscribe:C.ne,ErrorFactory:C.LL,deepExtend:C.ZB}),Qt}(),ye=new X.Yd("@firebase/app-compat");if((0,C.jU)()&&void 0!==self.firebase){ye.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Qt=self.firebase.SDK_VERSION;Qt&&Qt.indexOf("LITE")>=0&&ye.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Nt=de;!function Ye(Qt){(0,K.registerVersion)("@firebase/app-compat","0.2.9",Qt)}()},6881:(mn,ot,j)=>{j.r(ot),j.d(ot,{FirebaseError:()=>X.ZR,SDK_VERSION:()=>qr,_DEFAULT_ENTRY_NAME:()=>Fr,_addComponent:()=>hn,_addOrOverwriteComponent:()=>Yt,_apps:()=>an,_clearComponents:()=>Vr,_components:()=>dn,_getProvider:()=>yr,_registerComponent:()=>lr,_removeServiceInstance:()=>Er,deleteApp:()=>xr,getApp:()=>jn,getApps:()=>Hn,initializeApp:()=>Bn,onLog:()=>De,registerVersion:()=>Qe,setLogLevel:()=>Pe});var C=j(5861),p=j(4859),K=j(1877),X=j(2090);const Se=(pe,V)=>V.some(ne=>pe instanceof ne);let Ne,$e;const de=new WeakMap,ye=new WeakMap,Me=new WeakMap,tt=new WeakMap,Ye=new WeakMap;let nt={get(pe,V,ne){if(pe instanceof IDBTransaction){if("done"===V)return ye.get(pe);if("objectStoreNames"===V)return pe.objectStoreNames||Me.get(pe);if("store"===V)return ne.objectStoreNames[1]?void 0:ne.objectStore(ne.objectStoreNames[0])}return Te(pe[V])},set:(pe,V,ne)=>(pe[V]=ne,!0),has:(pe,V)=>pe instanceof IDBTransaction&&("done"===V||"store"===V)||V in pe};function Rt(pe){return"function"==typeof pe?function ft(pe){return pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ze(){return $e||($e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(pe)?function(...V){return pe.apply(Je(this),V),Te(de.get(this))}:function(...V){return Te(pe.apply(Je(this),V))}:function(V,...ne){const Fe=pe.call(Je(this),V,...ne);return Me.set(Fe,V.sort?V.sort():[V]),Te(Fe)}}(pe):(pe instanceof IDBTransaction&&function Qt(pe){if(ye.has(pe))return;const V=new Promise((ne,Fe)=>{const it=()=>{pe.removeEventListener("complete",Wt),pe.removeEventListener("error",Ut),pe.removeEventListener("abort",Ut)},Wt=()=>{ne(),it()},Ut=()=>{Fe(pe.error||new DOMException("AbortError","AbortError")),it()};pe.addEventListener("complete",Wt),pe.addEventListener("error",Ut),pe.addEventListener("abort",Ut)});ye.set(pe,V)}(pe),Se(pe,function be(){return Ne||(Ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(pe,nt):pe)}function Te(pe){if(pe instanceof IDBRequest)return function Nt(pe){const V=new Promise((ne,Fe)=>{const it=()=>{pe.removeEventListener("success",Wt),pe.removeEventListener("error",Ut)},Wt=()=>{ne(Te(pe.result)),it()},Ut=()=>{Fe(pe.error),it()};pe.addEventListener("success",Wt),pe.addEventListener("error",Ut)});return V.then(ne=>{ne instanceof IDBCursor&&de.set(ne,pe)}).catch(()=>{}),Ye.set(V,pe),V}(pe);if(tt.has(pe))return tt.get(pe);const V=Rt(pe);return V!==pe&&(tt.set(pe,V),Ye.set(V,pe)),V}const Je=pe=>Ye.get(pe),wt=["get","getKey","getAll","getAllKeys","count"],je=["put","add","delete","clear"],xt=new Map;function ln(pe,V){if(!(pe instanceof IDBDatabase)||V in pe||"string"!=typeof V)return;if(xt.get(V))return xt.get(V);const ne=V.replace(/FromIndex$/,""),Fe=V!==ne,it=je.includes(ne);if(!(ne in(Fe?IDBIndex:IDBObjectStore).prototype)||!it&&!wt.includes(ne))return;const Wt=function(){var Ut=(0,C.Z)(function*(Mn,...Fn){const Ar=this.transaction(Mn,it?"readwrite":"readonly");let Mr=Ar.store;return Fe&&(Mr=Mr.index(Fn.shift())),(yield Promise.all([Mr[ne](...Fn),it&&Ar.done]))[0]});return function(Fn){return Ut.apply(this,arguments)}}();return xt.set(V,Wt),Wt}!function yt(pe){nt=pe(nt)}(pe=>({...pe,get:(V,ne,Fe)=>ln(V,ne)||pe.get(V,ne,Fe),has:(V,ne)=>!!ln(V,ne)||pe.has(V,ne)}));class jt{constructor(V){this.container=V}getPlatformInfoString(){return this.container.getProviders().map(ne=>{if(function Kt(pe){return"VERSION"===pe.getComponent()?.type}(ne)){const Fe=ne.getImmediate();return`${Fe.library}/${Fe.version}`}return null}).filter(ne=>ne).join(" ")}}const qt="@firebase/app",at=new K.Yd("@firebase/app"),Fr="[DEFAULT]",Gr={[qt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},an=new Map,dn=new Map;function hn(pe,V){try{pe.container.addComponent(V)}catch(ne){at.debug(`Component ${V.name} failed to register with FirebaseApp ${pe.name}`,ne)}}function Yt(pe,V){pe.container.addOrOverwriteComponent(V)}function lr(pe){const V=pe.name;if(dn.has(V))return at.debug(`There were multiple attempts to register component ${V}.`),!1;dn.set(V,pe);for(const ne of an.values())hn(ne,pe);return!0}function yr(pe,V){const ne=pe.container.getProvider("heartbeat").getImmediate({optional:!0});return ne&&ne.triggerHeartbeat(),pe.container.getProvider(V)}function Er(pe,V,ne=Fr){yr(pe,V).clearInstance(ne)}function Vr(){dn.clear()}const Wr=new X.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Nn{constructor(V,ne,Fe){this._isDeleted=!1,this._options=Object.assign({},V),this._config=Object.assign({},ne),this._name=ne.name,this._automaticDataCollectionEnabled=ne.automaticDataCollectionEnabled,this._container=Fe,this.container.addComponent(new p.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(V){this.checkDestroyed(),this._automaticDataCollectionEnabled=V}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(V){this._isDeleted=V}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}const qr="9.21.0";function Bn(pe,V={}){let ne=pe;"object"!=typeof V&&(V={name:V});const Fe=Object.assign({name:Fr,automaticDataCollectionEnabled:!1},V),it=Fe.name;if("string"!=typeof it||!it)throw Wr.create("bad-app-name",{appName:String(it)});if(ne||(ne=(0,X.aH)()),!ne)throw Wr.create("no-options");const Wt=an.get(it);if(Wt){if((0,X.vZ)(ne,Wt.options)&&(0,X.vZ)(Fe,Wt.config))return Wt;throw Wr.create("duplicate-app",{appName:it})}const Ut=new p.H0(it);for(const Fn of dn.values())Ut.addComponent(Fn);const Mn=new Nn(ne,Fe,Ut);return an.set(it,Mn),Mn}function jn(pe=Fr){const V=an.get(pe);if(!V&&pe===Fr)return Bn();if(!V)throw Wr.create("no-app",{appName:pe});return V}function Hn(){return Array.from(an.values())}function xr(pe){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,C.Z)(function*(pe){const V=pe.name;an.has(V)&&(an.delete(V),yield Promise.all(pe.container.getProviders().map(ne=>ne.delete())),pe.isDeleted=!0)})).apply(this,arguments)}function Qe(pe,V,ne){var Fe;let it=null!==(Fe=Gr[pe])&&void 0!==Fe?Fe:pe;ne&&(it+=`-${ne}`);const Wt=it.match(/\s|\//),Ut=V.match(/\s|\//);if(Wt||Ut){const Mn=[`Unable to register library "${it}" with version "${V}":`];return Wt&&Mn.push(`library name "${it}" contains illegal characters (whitespace or "/")`),Wt&&Ut&&Mn.push("and"),Ut&&Mn.push(`version name "${V}" contains illegal characters (whitespace or "/")`),void at.warn(Mn.join(" "))}lr(new p.wA(`${it}-version`,()=>({library:it,version:V}),"VERSION"))}function De(pe,V){if(null!==pe&&"function"!=typeof pe)throw Wr.create("invalid-log-argument");(0,K.Am)(pe,V)}function Pe(pe){(0,K.Ub)(pe)}const gt="firebase-heartbeat-database",ct=1,ge="firebase-heartbeat-store";let _e=null;function ee(){return _e||(_e=function vt(pe,V,{blocked:ne,upgrade:Fe,blocking:it,terminated:Wt}={}){const Ut=indexedDB.open(pe,V),Mn=Te(Ut);return Fe&&Ut.addEventListener("upgradeneeded",Fn=>{Fe(Te(Ut.result),Fn.oldVersion,Fn.newVersion,Te(Ut.transaction),Fn)}),ne&&Ut.addEventListener("blocked",Fn=>ne(Fn.oldVersion,Fn.newVersion,Fn)),Mn.then(Fn=>{Wt&&Fn.addEventListener("close",()=>Wt()),it&&Fn.addEventListener("versionchange",Ar=>it(Ar.oldVersion,Ar.newVersion,Ar))}).catch(()=>{}),Mn}(gt,ct,{upgrade:(pe,V)=>{0===V&&pe.createObjectStore(ge)}}).catch(pe=>{throw Wr.create("idb-open",{originalErrorMessage:pe.message})})),_e}function Y(){return(Y=(0,C.Z)(function*(pe){try{return(yield ee()).transaction(ge).objectStore(ge).get(Ee(pe))}catch(V){if(V instanceof X.ZR)at.warn(V.message);else{const ne=Wr.create("idb-get",{originalErrorMessage:V?.message});at.warn(ne.message)}}})).apply(this,arguments)}function Ue(pe,V){return me.apply(this,arguments)}function me(){return(me=(0,C.Z)(function*(pe,V){try{const Fe=(yield ee()).transaction(ge,"readwrite");return yield Fe.objectStore(ge).put(V,Ee(pe)),Fe.done}catch(ne){if(ne instanceof X.ZR)at.warn(ne.message);else{const Fe=Wr.create("idb-set",{originalErrorMessage:ne?.message});at.warn(Fe.message)}}})).apply(this,arguments)}function Ee(pe){return`${pe.name}!${pe.options.appId}`}class Xe{constructor(V){this.container=V,this._heartbeatsCache=null;const ne=this.container.getProvider("app").getImmediate();this._storage=new mt(ne),this._heartbeatsCachePromise=this._storage.read().then(Fe=>(this._heartbeatsCache=Fe,Fe))}triggerHeartbeat(){var V=this;return(0,C.Z)(function*(){const Fe=V.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),it=Et();if(null===V._heartbeatsCache&&(V._heartbeatsCache=yield V._heartbeatsCachePromise),V._heartbeatsCache.lastSentHeartbeatDate!==it&&!V._heartbeatsCache.heartbeats.some(Wt=>Wt.date===it))return V._heartbeatsCache.heartbeats.push({date:it,agent:Fe}),V._heartbeatsCache.heartbeats=V._heartbeatsCache.heartbeats.filter(Wt=>{const Ut=new Date(Wt.date).valueOf();return Date.now()-Ut<=2592e6}),V._storage.overwrite(V._heartbeatsCache)})()}getHeartbeatsHeader(){var V=this;return(0,C.Z)(function*(){if(null===V._heartbeatsCache&&(yield V._heartbeatsCachePromise),null===V._heartbeatsCache||0===V._heartbeatsCache.heartbeats.length)return"";const ne=Et(),{heartbeatsToSend:Fe,unsentEntries:it}=function tn(pe,V=1024){const ne=[];let Fe=pe.slice();for(const it of pe){const Wt=ne.find(Ut=>Ut.agent===it.agent);if(Wt){if(Wt.dates.push(it.date),Pt(ne)>V){Wt.dates.pop();break}}else if(ne.push({agent:it.agent,dates:[it.date]}),Pt(ne)>V){ne.pop();break}Fe=Fe.slice(1)}return{heartbeatsToSend:ne,unsentEntries:Fe}}(V._heartbeatsCache.heartbeats),Wt=(0,X.L)(JSON.stringify({version:2,heartbeats:Fe}));return V._heartbeatsCache.lastSentHeartbeatDate=ne,it.length>0?(V._heartbeatsCache.heartbeats=it,yield V._storage.overwrite(V._heartbeatsCache)):(V._heartbeatsCache.heartbeats=[],V._storage.overwrite(V._heartbeatsCache)),Wt})()}}function Et(){return(new Date).toISOString().substring(0,10)}class mt{constructor(V){this.app=V,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.Z)(function*(){return!!(0,X.hl)()&&(0,X.eu)().then(()=>!0).catch(()=>!1)})()}read(){var V=this;return(0,C.Z)(function*(){return(yield V._canUseIndexedDBPromise)&&(yield function re(pe){return Y.apply(this,arguments)}(V.app))||{heartbeats:[]}})()}overwrite(V){var ne=this;return(0,C.Z)(function*(){var Fe;if(yield ne._canUseIndexedDBPromise){const Wt=yield ne.read();return Ue(ne.app,{lastSentHeartbeatDate:null!==(Fe=V.lastSentHeartbeatDate)&&void 0!==Fe?Fe:Wt.lastSentHeartbeatDate,heartbeats:V.heartbeats})}})()}add(V){var ne=this;return(0,C.Z)(function*(){var Fe;if(yield ne._canUseIndexedDBPromise){const Wt=yield ne.read();return Ue(ne.app,{lastSentHeartbeatDate:null!==(Fe=V.lastSentHeartbeatDate)&&void 0!==Fe?Fe:Wt.lastSentHeartbeatDate,heartbeats:[...Wt.heartbeats,...V.heartbeats]})}})()}}function Pt(pe){return(0,X.L)(JSON.stringify({version:2,heartbeats:pe})).length}!function wn(pe){lr(new p.wA("platform-logger",V=>new jt(V),"PRIVATE")),lr(new p.wA("heartbeat",V=>new Xe(V),"PRIVATE")),Qe(qt,"0.9.9",pe),Qe(qt,"0.9.9","esm2017"),Qe("fire-js","")}("")},4859:(mn,ot,j)=>{j.d(ot,{H0:()=>be,wA:()=>K});var C=j(5861),p=j(2090);class K{constructor(de,ye,Me){this.name=de,this.instanceFactory=ye,this.type=Me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(de){return this.instantiationMode=de,this}setMultipleInstances(de){return this.multipleInstances=de,this}setServiceProps(de){return this.serviceProps=de,this}setInstanceCreatedCallback(de){return this.onInstanceCreated=de,this}}const X="[DEFAULT]";class Se{constructor(de,ye){this.name=de,this.container=ye,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(de){const ye=this.normalizeInstanceIdentifier(de);if(!this.instancesDeferred.has(ye)){const Me=new p.BH;if(this.instancesDeferred.set(ye,Me),this.isInitialized(ye)||this.shouldAutoInitialize())try{const tt=this.getOrInitializeService({instanceIdentifier:ye});tt&&Me.resolve(tt)}catch{}}return this.instancesDeferred.get(ye).promise}getImmediate(de){var ye;const Me=this.normalizeInstanceIdentifier(de?.identifier),tt=null!==(ye=de?.optional)&&void 0!==ye&&ye;if(!this.isInitialized(Me)&&!this.shouldAutoInitialize()){if(tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Me})}catch(Ye){if(tt)return null;throw Ye}}getComponent(){return this.component}setComponent(de){if(de.name!==this.name)throw Error(`Mismatching Component ${de.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=de,this.shouldAutoInitialize()){if(function $e(Ze){return"EAGER"===Ze.instantiationMode}(de))try{this.getOrInitializeService({instanceIdentifier:X})}catch{}for(const[ye,Me]of this.instancesDeferred.entries()){const tt=this.normalizeInstanceIdentifier(ye);try{const Ye=this.getOrInitializeService({instanceIdentifier:tt});Me.resolve(Ye)}catch{}}}}clearInstance(de=X){this.instancesDeferred.delete(de),this.instancesOptions.delete(de),this.instances.delete(de)}delete(){var de=this;return(0,C.Z)(function*(){const ye=Array.from(de.instances.values());yield Promise.all([...ye.filter(Me=>"INTERNAL"in Me).map(Me=>Me.INTERNAL.delete()),...ye.filter(Me=>"_delete"in Me).map(Me=>Me._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(de=X){return this.instances.has(de)}getOptions(de=X){return this.instancesOptions.get(de)||{}}initialize(de={}){const{options:ye={}}=de,Me=this.normalizeInstanceIdentifier(de.instanceIdentifier);if(this.isInitialized(Me))throw Error(`${this.name}(${Me}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const tt=this.getOrInitializeService({instanceIdentifier:Me,options:ye});for(const[Ye,Nt]of this.instancesDeferred.entries())Me===this.normalizeInstanceIdentifier(Ye)&&Nt.resolve(tt);return tt}onInit(de,ye){var Me;const tt=this.normalizeInstanceIdentifier(ye),Ye=null!==(Me=this.onInitCallbacks.get(tt))&&void 0!==Me?Me:new Set;Ye.add(de),this.onInitCallbacks.set(tt,Ye);const Nt=this.instances.get(tt);return Nt&&de(Nt,tt),()=>{Ye.delete(de)}}invokeOnInitCallbacks(de,ye){const Me=this.onInitCallbacks.get(ye);if(Me)for(const tt of Me)try{tt(de,ye)}catch{}}getOrInitializeService({instanceIdentifier:de,options:ye={}}){let Me=this.instances.get(de);if(!Me&&this.component&&(Me=this.component.instanceFactory(this.container,{instanceIdentifier:(Ze=de,Ze===X?void 0:Ze),options:ye}),this.instances.set(de,Me),this.instancesOptions.set(de,ye),this.invokeOnInitCallbacks(Me,de),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,de,Me)}catch{}var Ze;return Me||null}normalizeInstanceIdentifier(de=X){return this.component?this.component.multipleInstances?de:X:de}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class be{constructor(de){this.name=de,this.providers=new Map}addComponent(de){const ye=this.getProvider(de.name);if(ye.isComponentSet())throw new Error(`Component ${de.name} has already been registered with ${this.name}`);ye.setComponent(de)}addOrOverwriteComponent(de){this.getProvider(de.name).isComponentSet()&&this.providers.delete(de.name),this.addComponent(de)}getProvider(de){if(this.providers.has(de))return this.providers.get(de);const ye=new Se(de,this);return this.providers.set(de,ye),ye}getProviders(){return Array.from(this.providers.values())}}},4727:(mn,ot,j)=>{var C=j(5861),p=j(6881),K=j(4859),X=j(2090);const Se=(Z,ve)=>ve.some(qe=>Z instanceof qe);let Ne,$e;const de=new WeakMap,ye=new WeakMap,Me=new WeakMap,tt=new WeakMap,Ye=new WeakMap;let nt={get(Z,ve,qe){if(Z instanceof IDBTransaction){if("done"===ve)return ye.get(Z);if("objectStoreNames"===ve)return Z.objectStoreNames||Me.get(Z);if("store"===ve)return qe.objectStoreNames[1]?void 0:qe.objectStore(qe.objectStoreNames[0])}return Te(Z[ve])},set:(Z,ve,qe)=>(Z[ve]=qe,!0),has:(Z,ve)=>Z instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in Z};function Rt(Z){return"function"==typeof Z?function ft(Z){return Z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ze(){return $e||($e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Z)?function(...ve){return Z.apply(Je(this),ve),Te(de.get(this))}:function(...ve){return Te(Z.apply(Je(this),ve))}:function(ve,...qe){const _t=Z.call(Je(this),ve,...qe);return Me.set(_t,ve.sort?ve.sort():[ve]),Te(_t)}}(Z):(Z instanceof IDBTransaction&&function Qt(Z){if(ye.has(Z))return;const ve=new Promise((qe,_t)=>{const Xt=()=>{Z.removeEventListener("complete",$n),Z.removeEventListener("error",vn),Z.removeEventListener("abort",vn)},$n=()=>{qe(),Xt()},vn=()=>{_t(Z.error||new DOMException("AbortError","AbortError")),Xt()};Z.addEventListener("complete",$n),Z.addEventListener("error",vn),Z.addEventListener("abort",vn)});ye.set(Z,ve)}(Z),Se(Z,function be(){return Ne||(Ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Z,nt):Z)}function Te(Z){if(Z instanceof IDBRequest)return function Nt(Z){const ve=new Promise((qe,_t)=>{const Xt=()=>{Z.removeEventListener("success",$n),Z.removeEventListener("error",vn)},$n=()=>{qe(Te(Z.result)),Xt()},vn=()=>{_t(Z.error),Xt()};Z.addEventListener("success",$n),Z.addEventListener("error",vn)});return ve.then(qe=>{qe instanceof IDBCursor&&de.set(qe,Z)}).catch(()=>{}),Ye.set(ve,Z),ve}(Z);if(tt.has(Z))return tt.get(Z);const ve=Rt(Z);return ve!==Z&&(tt.set(Z,ve),Ye.set(ve,Z)),ve}const Je=Z=>Ye.get(Z),wt=["get","getKey","getAll","getAllKeys","count"],je=["put","add","delete","clear"],xt=new Map;function ln(Z,ve){if(!(Z instanceof IDBDatabase)||ve in Z||"string"!=typeof ve)return;if(xt.get(ve))return xt.get(ve);const qe=ve.replace(/FromIndex$/,""),_t=ve!==qe,Xt=je.includes(qe);if(!(qe in(_t?IDBIndex:IDBObjectStore).prototype)||!Xt&&!wt.includes(qe))return;const $n=function(){var vn=(0,C.Z)(function*(br,...Ti){const dr=this.transaction(br,Xt?"readwrite":"readonly");let Ni=dr.store;return _t&&(Ni=Ni.index(Ti.shift())),(yield Promise.all([Ni[qe](...Ti),Xt&&dr.done]))[0]});return function(Ti){return vn.apply(this,arguments)}}();return xt.set(ve,$n),$n}!function yt(Z){nt=Z(nt)}(Z=>({...Z,get:(ve,qe,_t)=>ln(ve,qe)||Z.get(ve,qe,_t),has:(ve,qe)=>!!ln(ve,qe)||Z.has(ve,qe)}));const jt="@firebase/installations",Kt="0.6.4",qt=1e4,rt=`w:${Kt}`,at="FIS_v2",lt="https://firebaseinstallations.googleapis.com/v1",bt=36e5,Ct=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rn(Z){return Z instanceof X.ZR&&Z.code.includes("request-failed")}function Sn({projectId:Z}){return`${lt}/projects/${Z}/installations`}function tr(Z){return{token:Z.token,requestStatus:2,expiresIn:Ur(Z.expiresIn),creationTime:Date.now()}}function _n(Z,ve){return xn.apply(this,arguments)}function xn(){return(xn=(0,C.Z)(function*(Z,ve){const _t=(yield ve.json()).error;return Ct.create("request-failed",{requestName:Z,serverCode:_t.code,serverMessage:_t.message,serverStatus:_t.status})})).apply(this,arguments)}function nr({apiKey:Z}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Z})}function zr(Z){return hr.apply(this,arguments)}function hr(){return(hr=(0,C.Z)(function*(Z){const ve=yield Z();return ve.status>=500&&ve.status<600?Z():ve})).apply(this,arguments)}function Ur(Z){return Number(Z.replace("s","000"))}function Sr(){return(Sr=(0,C.Z)(function*({appConfig:Z,heartbeatServiceProvider:ve},{fid:qe}){const _t=Sn(Z),Xt=nr(Z),$n=ve.getImmediate({optional:!0});if($n){const dr=yield $n.getHeartbeatsHeader();dr&&Xt.append("x-firebase-client",dr)}const br={method:"POST",headers:Xt,body:JSON.stringify({fid:qe,authVersion:at,appId:Z.appId,sdkVersion:rt})},Ti=yield zr(()=>fetch(_t,br));if(Ti.ok){const dr=yield Ti.json();return{fid:dr.fid||qe,registrationStatus:2,refreshToken:dr.refreshToken,authToken:tr(dr.authToken)}}throw yield _n("Create Installation",Ti)})).apply(this,arguments)}function ui(Z){return new Promise(ve=>{setTimeout(ve,Z)})}const cn=/^[cdef][\w-]{21}$/,Qn="";function Kr(){try{const Z=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(Z),Z[0]=112+Z[0]%16;const qe=function ur(Z){return function gr(Z){return btoa(String.fromCharCode(...Z)).replace(/\+/g,"-").replace(/\//g,"_")}(Z).substr(0,22)}(Z);return cn.test(qe)?qe:Qn}catch{return Qn}}function Fr(Z){return`${Z.appName}!${Z.appId}`}const Gr=new Map;function an(Z,ve){const qe=Fr(Z);Yt(qe,ve),function lr(Z,ve){const qe=function Er(){return!yr&&"BroadcastChannel"in self&&(yr=new BroadcastChannel("[Firebase] FID Change"),yr.onmessage=Z=>{Yt(Z.data.key,Z.data.fid)}),yr}();qe&&qe.postMessage({key:Z,fid:ve}),function Vr(){0===Gr.size&&yr&&(yr.close(),yr=null)}()}(qe,ve)}function Yt(Z,ve){const qe=Gr.get(Z);if(qe)for(const _t of qe)_t(ve)}let yr=null;const ri="firebase-installations-database",Wr=1,Nn="firebase-installations-store";let qr=null;function Bn(){return qr||(qr=function vt(Z,ve,{blocked:qe,upgrade:_t,blocking:Xt,terminated:$n}={}){const vn=indexedDB.open(Z,ve),br=Te(vn);return _t&&vn.addEventListener("upgradeneeded",Ti=>{_t(Te(vn.result),Ti.oldVersion,Ti.newVersion,Te(vn.transaction))}),qe&&vn.addEventListener("blocked",()=>qe()),br.then(Ti=>{$n&&Ti.addEventListener("close",()=>$n()),Xt&&Ti.addEventListener("versionchange",()=>Xt())}).catch(()=>{}),br}(ri,Wr,{upgrade:(Z,ve)=>{0===ve&&Z.createObjectStore(Nn)}})),qr}function jn(Z,ve){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,C.Z)(function*(Z,ve){const qe=Fr(Z),Xt=(yield Bn()).transaction(Nn,"readwrite"),$n=Xt.objectStore(Nn),vn=yield $n.get(qe);return yield $n.put(ve,qe),yield Xt.done,(!vn||vn.fid!==ve.fid)&&an(Z,ve.fid),ve})).apply(this,arguments)}function xr(Z){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,C.Z)(function*(Z){const ve=Fr(Z),_t=(yield Bn()).transaction(Nn,"readwrite");yield _t.objectStore(Nn).delete(ve),yield _t.done})).apply(this,arguments)}function Qe(Z,ve){return De.apply(this,arguments)}function De(){return(De=(0,C.Z)(function*(Z,ve){const qe=Fr(Z),Xt=(yield Bn()).transaction(Nn,"readwrite"),$n=Xt.objectStore(Nn),vn=yield $n.get(qe),br=ve(vn);return void 0===br?yield $n.delete(qe):yield $n.put(br,qe),yield Xt.done,br&&(!vn||vn.fid!==br.fid)&&an(Z,br.fid),br})).apply(this,arguments)}function Pe(Z){return gt.apply(this,arguments)}function gt(){return gt=(0,C.Z)(function*(Z){let ve;const qe=yield Qe(Z.appConfig,_t=>{const Xt=function ct(Z){return me(Z||{fid:Kr(),registrationStatus:0})}(_t),$n=function ge(Z,ve){if(0===ve.registrationStatus){if(!navigator.onLine)return{installationEntry:ve,registrationPromise:Promise.reject(Ct.create("app-offline"))};const qe={fid:ve.fid,registrationStatus:1,registrationTime:Date.now()},_t=function _e(Z,ve){return ee.apply(this,arguments)}(Z,qe);return{installationEntry:qe,registrationPromise:_t}}return 1===ve.registrationStatus?{installationEntry:ve,registrationPromise:re(Z)}:{installationEntry:ve}}(Z,Xt);return ve=$n.registrationPromise,$n.installationEntry});return qe.fid===Qn?{installationEntry:yield ve}:{installationEntry:qe,registrationPromise:ve}}),gt.apply(this,arguments)}function ee(){return ee=(0,C.Z)(function*(Z,ve){try{const qe=yield function Nr(Z,ve){return Sr.apply(this,arguments)}(Z,ve);return jn(Z.appConfig,qe)}catch(qe){throw rn(qe)&&409===qe.customData.serverCode?yield xr(Z.appConfig):yield jn(Z.appConfig,{fid:ve.fid,registrationStatus:0}),qe}}),ee.apply(this,arguments)}function re(Z){return Y.apply(this,arguments)}function Y(){return(Y=(0,C.Z)(function*(Z){let ve=yield Ue(Z.appConfig);for(;1===ve.registrationStatus;)yield ui(100),ve=yield Ue(Z.appConfig);if(0===ve.registrationStatus){const{installationEntry:qe,registrationPromise:_t}=yield Pe(Z);return _t||qe}return ve})).apply(this,arguments)}function Ue(Z){return Qe(Z,ve=>{if(!ve)throw Ct.create("installation-not-found");return me(ve)})}function me(Z){return function Ee(Z){return 1===Z.registrationStatus&&Z.registrationTime+qt<Date.now()}(Z)?{fid:Z.fid,registrationStatus:0}:Z}function ke(){return(ke=(0,C.Z)(function*({appConfig:Z,heartbeatServiceProvider:ve},qe){const _t=function Xe(Z,{fid:ve}){return`${Sn(Z)}/${ve}/authTokens:generate`}(Z,qe),Xt=function pr(Z,{refreshToken:ve}){const qe=nr(Z);return qe.append("Authorization",function pn(Z){return`${at} ${Z}`}(ve)),qe}(Z,qe),$n=ve.getImmediate({optional:!0});if($n){const dr=yield $n.getHeartbeatsHeader();dr&&Xt.append("x-firebase-client",dr)}const br={method:"POST",headers:Xt,body:JSON.stringify({installation:{sdkVersion:rt,appId:Z.appId}})},Ti=yield zr(()=>fetch(_t,br));if(Ti.ok)return tr(yield Ti.json());throw yield _n("Generate Auth Token",Ti)})).apply(this,arguments)}function Et(Z){return tn.apply(this,arguments)}function tn(){return tn=(0,C.Z)(function*(Z,ve=!1){let qe;const _t=yield Qe(Z.appConfig,$n=>{if(!ne($n))throw Ct.create("not-registered");const vn=$n.authToken;if(!ve&&function Fe(Z){return 2===Z.requestStatus&&!function it(Z){const ve=Date.now();return ve<Z.creationTime||Z.creationTime+Z.expiresIn<ve+bt}(Z)}(vn))return $n;if(1===vn.requestStatus)return qe=function mt(Z,ve){return Pt.apply(this,arguments)}(Z,ve),$n;{if(!navigator.onLine)throw Ct.create("app-offline");const br=function Wt(Z){const ve={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},Z),{authToken:ve})}($n);return qe=function pe(Z,ve){return V.apply(this,arguments)}(Z,br),br}});return qe?yield qe:_t.authToken}),tn.apply(this,arguments)}function Pt(){return(Pt=(0,C.Z)(function*(Z,ve){let qe=yield wn(Z.appConfig);for(;1===qe.authToken.requestStatus;)yield ui(100),qe=yield wn(Z.appConfig);const _t=qe.authToken;return 0===_t.requestStatus?Et(Z,ve):_t})).apply(this,arguments)}function wn(Z){return Qe(Z,ve=>{if(!ne(ve))throw Ct.create("not-registered");return function Ut(Z){return 1===Z.requestStatus&&Z.requestTime+qt<Date.now()}(ve.authToken)?Object.assign(Object.assign({},ve),{authToken:{requestStatus:0}}):ve})}function V(){return V=(0,C.Z)(function*(Z,ve){try{const qe=yield function ue(Z,ve){return ke.apply(this,arguments)}(Z,ve),_t=Object.assign(Object.assign({},ve),{authToken:qe});return yield jn(Z.appConfig,_t),qe}catch(qe){if(!rn(qe)||401!==qe.customData.serverCode&&404!==qe.customData.serverCode){const _t=Object.assign(Object.assign({},ve),{authToken:{requestStatus:0}});yield jn(Z.appConfig,_t)}else yield xr(Z.appConfig);throw qe}}),V.apply(this,arguments)}function ne(Z){return void 0!==Z&&2===Z.registrationStatus}function Fn(){return(Fn=(0,C.Z)(function*(Z){const ve=Z,{installationEntry:qe,registrationPromise:_t}=yield Pe(ve);return _t?_t.catch(console.error):Et(ve).catch(console.error),qe.fid})).apply(this,arguments)}function Mr(){return Mr=(0,C.Z)(function*(Z,ve=!1){const qe=Z;return yield function Pi(Z){return Hi.apply(this,arguments)}(qe),(yield Et(qe,ve)).token}),Mr.apply(this,arguments)}function Hi(){return(Hi=(0,C.Z)(function*(Z){const{registrationPromise:ve}=yield Pe(Z);ve&&(yield ve)})).apply(this,arguments)}function Zn(Z){return Ct.create("missing-app-config-values",{valueName:Z})}const fe="installations",he=Z=>{const ve=Z.getProvider("app").getImmediate(),qe=function Xn(Z){if(!Z||!Z.options)throw Zn("App Configuration");if(!Z.name)throw Zn("App Name");const ve=["projectId","apiKey","appId"];for(const qe of ve)if(!Z.options[qe])throw Zn(qe);return{appName:Z.name,projectId:Z.options.projectId,apiKey:Z.options.apiKey,appId:Z.options.appId}}(ve);return{app:ve,appConfig:qe,heartbeatServiceProvider:(0,p._getProvider)(ve,"heartbeat"),_delete:()=>Promise.resolve()}},Ie=Z=>{const ve=Z.getProvider("app").getImmediate(),qe=(0,p._getProvider)(ve,fe).getImmediate();return{getId:()=>function Mn(Z){return Fn.apply(this,arguments)}(qe),getToken:Xt=>function Ar(Z){return Mr.apply(this,arguments)}(qe,Xt)}};(function He(){(0,p._registerComponent)(new K.wA(fe,he,"PUBLIC")),(0,p._registerComponent)(new K.wA("installations-internal",Ie,"PRIVATE"))})(),(0,p.registerVersion)(jt,Kt),(0,p.registerVersion)(jt,Kt,"esm2017")},1877:(mn,ot,j)=>{j.d(ot,{Am:()=>Ze,Ub:()=>be,Yd:()=>$e,in:()=>p});const C=[];var p=(()=>{return(de=p||(p={}))[de.DEBUG=0]="DEBUG",de[de.VERBOSE=1]="VERBOSE",de[de.INFO=2]="INFO",de[de.WARN=3]="WARN",de[de.ERROR=4]="ERROR",de[de.SILENT=5]="SILENT",p;var de})();const K={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},X=p.INFO,Se={[p.DEBUG]:"log",[p.VERBOSE]:"log",[p.INFO]:"info",[p.WARN]:"warn",[p.ERROR]:"error"},Ne=(de,ye,...Me)=>{if(ye<de.logLevel)return;const tt=(new Date).toISOString(),Ye=Se[ye];if(!Ye)throw new Error(`Attempted to log a message with an invalid logType (value: ${ye})`);console[Ye](`[${tt}]  ${de.name}:`,...Me)};class $e{constructor(ye){this.name=ye,this._logLevel=X,this._logHandler=Ne,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(ye){if(!(ye in p))throw new TypeError(`Invalid value "${ye}" assigned to \`logLevel\``);this._logLevel=ye}setLogLevel(ye){this._logLevel="string"==typeof ye?K[ye]:ye}get logHandler(){return this._logHandler}set logHandler(ye){if("function"!=typeof ye)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ye}get userLogHandler(){return this._userLogHandler}set userLogHandler(ye){this._userLogHandler=ye}debug(...ye){this._userLogHandler&&this._userLogHandler(this,p.DEBUG,...ye),this._logHandler(this,p.DEBUG,...ye)}log(...ye){this._userLogHandler&&this._userLogHandler(this,p.VERBOSE,...ye),this._logHandler(this,p.VERBOSE,...ye)}info(...ye){this._userLogHandler&&this._userLogHandler(this,p.INFO,...ye),this._logHandler(this,p.INFO,...ye)}warn(...ye){this._userLogHandler&&this._userLogHandler(this,p.WARN,...ye),this._logHandler(this,p.WARN,...ye)}error(...ye){this._userLogHandler&&this._userLogHandler(this,p.ERROR,...ye),this._logHandler(this,p.ERROR,...ye)}}function be(de){C.forEach(ye=>{ye.setLogLevel(de)})}function Ze(de,ye){for(const Me of C){let tt=null;ye&&ye.level&&(tt=K[ye.level]),Me.userLogHandler=null===de?null:(Ye,Nt,...Qt)=>{const nt=Qt.map(yt=>{if(null==yt)return null;if("string"==typeof yt)return yt;if("number"==typeof yt||"boolean"==typeof yt)return yt.toString();if(yt instanceof Error)return yt.message;try{return JSON.stringify(yt)}catch{return null}}).filter(yt=>yt).join(" ");Nt>=(tt??Ye.logLevel)&&de({level:p[Nt].toLowerCase(),message:nt,args:Qt,type:Ye.name})}}}},259:(mn,ot,j)=>{j.d(ot,{C6:()=>C.getApps,KN:()=>C.registerVersion,Mq:()=>C.getApp,ZF:()=>C.initializeApp});var C=j(6881);(0,C.registerVersion)("firebase","9.21.0","app")},9260:(mn,ot,j)=>{j.d(ot,{Z:()=>C.Z});var C=j(3942);C.Z.registerVersion("firebase","9.21.0","app-compat")},9568:(mn,ot,j)=>{j.r(ot);var C=j(5861),p=j(3942),K=j(8502),X=j(2090),$e=(j(6881),j(1877),j(4859));function be(){return window}const Ze=2e3;function ye(){return ye=(0,C.Z)(function*(ee,re,Y){var Ue;const{BuildInfo:me}=be();(0,K.as)(re.sessionId,"AuthEvent did not contain a session ID");const Ee=yield function yt(ee){return ft.apply(this,arguments)}(re.sessionId),ue={};return(0,K.at)()?ue.ibi=me.packageName:(0,K.au)()?ue.apn=me.packageName:(0,K.av)(ee,"operation-not-supported-in-this-environment"),me.displayName&&(ue.appDisplayName=me.displayName),ue.sessionId=Ee,(0,K.aw)(ee,Y,re.type,void 0,null!==(Ue=re.eventId)&&void 0!==Ue?Ue:void 0,ue)}),ye.apply(this,arguments)}function tt(){return(tt=(0,C.Z)(function*(ee){const{BuildInfo:re}=be(),Y={};(0,K.at)()?Y.iosBundleId=re.packageName:(0,K.au)()?Y.androidPackageName=re.packageName:(0,K.av)(ee,"operation-not-supported-in-this-environment"),yield(0,K.ax)(ee,Y)})).apply(this,arguments)}function Qt(){return(Qt=(0,C.Z)(function*(ee,re,Y){const{cordova:Ue}=be();let me=()=>{};try{yield new Promise((Ee,ue)=>{let ke=null;function Xe(){var mt;Ee();const Pt=null===(mt=Ue.plugins.browsertab)||void 0===mt?void 0:mt.close;"function"==typeof Pt&&Pt(),"function"==typeof Y?.close&&Y.close()}function Et(){ke||(ke=window.setTimeout(()=>{ue((0,K.az)(ee,"redirect-cancelled-by-user"))},Ze))}function tn(){"visible"===document?.visibilityState&&Et()}re.addPassiveListener(Xe),document.addEventListener("resume",Et,!1),(0,K.au)()&&document.addEventListener("visibilitychange",tn,!1),me=()=>{re.removePassiveListener(Xe),document.removeEventListener("resume",Et,!1),document.removeEventListener("visibilitychange",tn,!1),ke&&window.clearTimeout(ke)}})}finally{me()}})).apply(this,arguments)}function ft(){return(ft=(0,C.Z)(function*(ee){const re=function Rt(ee){if((0,K.as)(/[0-9a-zA-Z]+/.test(ee),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(ee);const re=new ArrayBuffer(ee.length),Y=new Uint8Array(re);for(let Ue=0;Ue<ee.length;Ue++)Y[Ue]=ee.charCodeAt(Ue);return Y}(ee),Y=yield crypto.subtle.digest("SHA-256",re);return Array.from(new Uint8Array(Y)).map(me=>me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Te=20;class Je extends K.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(re=>{this.resolveInialized=re})}addPassiveListener(re){this.passiveListeners.add(re)}removePassiveListener(re){this.passiveListeners.delete(re)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(re){return this.resolveInialized(),this.passiveListeners.forEach(Y=>Y(re)),super.onEvent(re)}initialized(){var re=this;return(0,C.Z)(function*(){yield re.initPromise})()}}function wt(ee){return je.apply(this,arguments)}function je(){return(je=(0,C.Z)(function*(ee){const re=yield jt()._get(Kt(ee));return re&&(yield jt()._remove(Kt(ee))),re})).apply(this,arguments)}function ln(){const ee=[],re="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Y=0;Y<Te;Y++){const Ue=Math.floor(Math.random()*re.length);ee.push(re.charAt(Ue))}return ee.join("")}function jt(){return(0,K.aC)(K.b)}function Kt(ee){return(0,K.aD)("authEvent",ee.config.apiKey,ee.name)}function at(ee){if(!ee?.includes("?"))return{};const[re,...Y]=ee.split("?");return(0,X.zd)(Y.join("?"))}const Ht=class bt{constructor(){this._redirectPersistence=K.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=K.aE,this._overrideRedirectResult=K.aF}_initialize(re){var Y=this;return(0,C.Z)(function*(){const Ue=re._key();let me=Y.eventManagers.get(Ue);return me||(me=new Je(re),Y.eventManagers.set(Ue,me),Y.attachCallbackListeners(re,me)),me})()}_openPopup(re){(0,K.av)(re,"operation-not-supported-in-this-environment")}_openRedirect(re,Y,Ue,me){var Ee=this;return(0,C.Z)(function*(){!function nt(ee){var re,Y,Ue,me,Ee,ue,ke,Xe,Et,tn;const mt=be();(0,K.aA)("function"==typeof(null===(re=mt?.universalLinks)||void 0===re?void 0:re.subscribe),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,K.aA)(typeof(null===(Y=mt?.BuildInfo)||void 0===Y?void 0:Y.packageName)<"u",ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,K.aA)("function"==typeof(null===(Ee=null===(me=null===(Ue=mt?.cordova)||void 0===Ue?void 0:Ue.plugins)||void 0===me?void 0:me.browsertab)||void 0===Ee?void 0:Ee.openUrl),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,K.aA)("function"==typeof(null===(Xe=null===(ke=null===(ue=mt?.cordova)||void 0===ue?void 0:ue.plugins)||void 0===ke?void 0:ke.browsertab)||void 0===Xe?void 0:Xe.isAvailable),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,K.aA)("function"==typeof(null===(tn=null===(Et=mt?.cordova)||void 0===Et?void 0:Et.InAppBrowser)||void 0===tn?void 0:tn.open),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(re);const ue=yield Ee._initialize(re);yield ue.initialized(),ue.resetRedirect(),(0,K.aG)(),yield Ee._originValidation(re);const ke=function vt(ee,re,Y=null){return{type:re,eventId:Y,urlResponse:null,sessionId:ln(),postBody:null,tenantId:ee.tenantId,error:(0,K.az)(ee,"no-auth-event")}}(re,Ue,me);yield function $t(ee,re){return jt()._set(Kt(ee),re)}(re,ke);const Xe=yield function de(ee,re,Y){return ye.apply(this,arguments)}(re,ke,Y),Et=yield function Ye(ee){const{cordova:re}=be();return new Promise(Y=>{re.plugins.browsertab.isAvailable(Ue=>{let me=null;Ue?re.plugins.browsertab.openUrl(ee):me=re.InAppBrowser.open(ee,(0,K.ay)()?"_blank":"_system","location=yes"),Y(me)})})}(Xe);return function Nt(ee,re,Y){return Qt.apply(this,arguments)}(re,ue,Et)})()}_isIframeWebStorageSupported(re,Y){throw new Error("Method not implemented.")}_originValidation(re){const Y=re._key();return this.originValidationPromises[Y]||(this.originValidationPromises[Y]=function Me(ee){return tt.apply(this,arguments)}(re)),this.originValidationPromises[Y]}attachCallbackListeners(re,Y){const{universalLinks:Ue,handleOpenURL:me,BuildInfo:Ee}=be(),ue=setTimeout((0,C.Z)(function*(){yield wt(re),Y.onEvent(It())}),500),ke=function(){var tn=(0,C.Z)(function*(mt){clearTimeout(ue);const Pt=yield wt(re);let wn=null;Pt&&mt?.url&&(wn=function xt(ee,re){var Y,Ue;const me=function rt(ee){const re=at(ee),Y=re.link?decodeURIComponent(re.link):void 0,Ue=at(Y).link,me=re.deep_link_id?decodeURIComponent(re.deep_link_id):void 0;return at(me).link||me||Ue||Y||ee}(re);if(me.includes("/__/auth/callback")){const Ee=at(me),ue=Ee.firebaseError?function qt(ee){try{return JSON.parse(ee)}catch{return null}}(decodeURIComponent(Ee.firebaseError)):null,ke=null===(Ue=null===(Y=ue?.code)||void 0===Y?void 0:Y.split("auth/"))||void 0===Ue?void 0:Ue[1],Xe=ke?(0,K.az)(ke):null;return Xe?{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,error:Xe,urlResponse:null,sessionId:null,postBody:null}:{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,sessionId:ee.sessionId,urlResponse:me,postBody:null}}return null}(Pt,mt.url)),Y.onEvent(wn||It())});return function(Pt){return tn.apply(this,arguments)}}();typeof Ue<"u"&&"function"==typeof Ue.subscribe&&Ue.subscribe(null,ke);const Xe=me,Et=`${Ee.packageName.toLowerCase()}://`;be().handleOpenURL=function(){var tn=(0,C.Z)(function*(mt){if(mt.toLowerCase().startsWith(Et)&&ke({url:mt}),"function"==typeof Xe)try{Xe(mt)}catch(Pt){console.error(Pt)}});return function(mt){return tn.apply(this,arguments)}}()}};function It(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,K.az)("no-auth-event")}}const Sn=1e3;function tr(){var ee;return(null===(ee=self?.location)||void 0===ee?void 0:ee.protocol)||null}function xn(ee=(0,X.z$)()){return!("file:"!==tr()&&"ionic:"!==tr()&&"capacitor:"!==tr()||!ee.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ur(){try{const ee=self.localStorage,re=K.aL();if(ee)return ee.setItem(re,"1"),ee.removeItem(re),!function hr(ee=(0,X.z$)()){return function pr(){return(0,X.w1)()&&11===document?.documentMode}()||function zr(ee=(0,X.z$)()){return/Edge\/\d+/.test(ee)}(ee)}()||(0,X.hl)()}catch{return pn()&&(0,X.hl)()}return!1}function pn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Nr(){return(function _n(){return"http:"===tr()||"https:"===tr()}()||(0,X.ru)()||xn())&&!function nr(){return(0,X.b$)()||(0,X.UG)()}()&&Ur()&&!pn()}function Sr(){return xn()&&typeof document<"u"}function gr(){return(gr=(0,C.Z)(function*(){return!!Sr()&&new Promise(ee=>{const re=setTimeout(()=>{ee(!1)},Sn);document.addEventListener("deviceready",()=>{clearTimeout(re),ee(!0)})})})).apply(this,arguments)}const Qn={LOCAL:"local",NONE:"none",SESSION:"session"},Kr=K.aA,ur="persistence";function Gr(ee){return an.apply(this,arguments)}function an(){return(an=(0,C.Z)(function*(ee){yield ee._initializationPromise;const re=hn(),Y=K.aD(ur,ee.config.apiKey,ee.name);re&&re.setItem(Y,ee._getPersistence())})).apply(this,arguments)}function hn(){var ee;try{return(null===(ee=function cn(){return typeof window<"u"?window:null}())||void 0===ee?void 0:ee.sessionStorage)||null}catch{return null}}const Yt=K.aA;class lr{constructor(){this.browserResolver=K.aC(K.k),this.cordovaResolver=K.aC(Ht),this.underlyingResolver=null,this._redirectPersistence=K.a,this._completeRedirectFn=K.aE,this._overrideRedirectResult=K.aF}_initialize(re){var Y=this;return(0,C.Z)(function*(){return yield Y.selectUnderlyingResolver(),Y.assertedUnderlyingResolver._initialize(re)})()}_openPopup(re,Y,Ue,me){var Ee=this;return(0,C.Z)(function*(){return yield Ee.selectUnderlyingResolver(),Ee.assertedUnderlyingResolver._openPopup(re,Y,Ue,me)})()}_openRedirect(re,Y,Ue,me){var Ee=this;return(0,C.Z)(function*(){return yield Ee.selectUnderlyingResolver(),Ee.assertedUnderlyingResolver._openRedirect(re,Y,Ue,me)})()}_isIframeWebStorageSupported(re,Y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(re,Y)}_originValidation(re){return this.assertedUnderlyingResolver._originValidation(re)}get _shouldInitProactively(){return Sr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var re=this;return(0,C.Z)(function*(){if(re.underlyingResolver)return;const Y=yield function ui(){return gr.apply(this,arguments)}();re.underlyingResolver=Y?re.cordovaResolver:re.browserResolver})()}}function yr(ee){return ee.unwrap()}function Vr(ee){return Wr(ee)}function Wr(ee){const{_tokenResponse:re}=ee instanceof X.ZR?ee.customData:ee;if(!re)return null;if(!(ee instanceof X.ZR)&&"temporaryProof"in re&&"phoneNumber"in re)return K.P.credentialFromResult(ee);const Y=re.providerId;if(!Y||Y===K.p.PASSWORD)return null;let Ue;switch(Y){case K.p.GOOGLE:Ue=K.V;break;case K.p.FACEBOOK:Ue=K.U;break;case K.p.GITHUB:Ue=K.W;break;case K.p.TWITTER:Ue=K.Z;break;default:const{oauthIdToken:me,oauthAccessToken:Ee,oauthTokenSecret:ue,pendingToken:ke,nonce:Xe}=re;return Ee||ue||me||ke?ke?Y.startsWith("saml.")?K.aO._create(Y,ke):K.L._fromParams({providerId:Y,signInMethod:Y,pendingToken:ke,idToken:me,accessToken:Ee}):new K.X(Y).credential({idToken:me,accessToken:Ee,rawNonce:Xe}):null}return ee instanceof X.ZR?Ue.credentialFromError(ee):Ue.credentialFromResult(ee)}function Nn(ee,re){return re.catch(Y=>{throw Y instanceof X.ZR&&function ri(ee,re){var Y;const Ue=null===(Y=re.customData)||void 0===Y?void 0:Y._tokenResponse;if("auth/multi-factor-auth-required"===re?.code)re.resolver=new jn(ee,K.aq(ee,re));else if(Ue){const me=Wr(re),Ee=re;me&&(Ee.credential=me,Ee.tenantId=Ue.tenantId||void 0,Ee.email=Ue.email||void 0,Ee.phoneNumber=Ue.phoneNumber||void 0)}}(ee,Y),Y}).then(Y=>{const me=Y.user;return{operationType:Y.operationType,credential:Vr(Y),additionalUserInfo:K.ao(Y),user:Hn.getOrCreate(me)}})}function qr(ee,re){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,C.Z)(function*(ee,re){const Y=yield re;return{verificationId:Y.verificationId,confirm:Ue=>Nn(ee,Y.confirm(Ue))}})).apply(this,arguments)}class jn{constructor(re,Y){this.resolver=Y,this.auth=function Er(ee){return ee.wrapped()}(re)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(re){return Nn(yr(this.auth),this.resolver.resolveSignIn(re))}}class Hn{constructor(re){this._delegate=re,this.multiFactor=K.ar(re)}static getOrCreate(re){return Hn.USER_MAP.has(re)||Hn.USER_MAP.set(re,new Hn(re)),Hn.USER_MAP.get(re)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(re){return this._delegate.getIdTokenResult(re)}getIdToken(re){return this._delegate.getIdToken(re)}linkAndRetrieveDataWithCredential(re){return this.linkWithCredential(re)}linkWithCredential(re){var Y=this;return(0,C.Z)(function*(){return Nn(Y.auth,K.a0(Y._delegate,re))})()}linkWithPhoneNumber(re,Y){var Ue=this;return(0,C.Z)(function*(){return qr(Ue.auth,K.l(Ue._delegate,re,Y))})()}linkWithPopup(re){var Y=this;return(0,C.Z)(function*(){return Nn(Y.auth,K.d(Y._delegate,re,lr))})()}linkWithRedirect(re){var Y=this;return(0,C.Z)(function*(){return yield Gr(K.aH(Y.auth)),K.g(Y._delegate,re,lr)})()}reauthenticateAndRetrieveDataWithCredential(re){return this.reauthenticateWithCredential(re)}reauthenticateWithCredential(re){var Y=this;return(0,C.Z)(function*(){return Nn(Y.auth,K.a1(Y._delegate,re))})()}reauthenticateWithPhoneNumber(re,Y){return qr(this.auth,K.r(this._delegate,re,Y))}reauthenticateWithPopup(re){return Nn(this.auth,K.e(this._delegate,re,lr))}reauthenticateWithRedirect(re){var Y=this;return(0,C.Z)(function*(){return yield Gr(K.aH(Y.auth)),K.h(Y._delegate,re,lr)})()}sendEmailVerification(re){return K.ae(this._delegate,re)}unlink(re){var Y=this;return(0,C.Z)(function*(){return yield K.an(Y._delegate,re),Y})()}updateEmail(re){return K.aj(this._delegate,re)}updatePassword(re){return K.ak(this._delegate,re)}updatePhoneNumber(re){return K.u(this._delegate,re)}updateProfile(re){return K.ai(this._delegate,re)}verifyBeforeUpdateEmail(re,Y){return K.af(this._delegate,re,Y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Hn.USER_MAP=new WeakMap;const xr=K.aA;let Jn=(()=>{class ee{constructor(Y,Ue){if(this.app=Y,Ue.isInitialized())return this._delegate=Ue.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:me}=Y.options;xr(me,"invalid-api-key",{appName:Y.name}),xr(me,"invalid-api-key",{appName:Y.name});const Ee=typeof window<"u"?lr:void 0;this._delegate=Ue.initialize({options:{persistence:De(me,Y.name),popupRedirectResolver:Ee}}),this._delegate._updateErrorMap(K.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Hn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Y){this._delegate.languageCode=Y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Y){this._delegate.tenantId=Y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Y,Ue){K.I(this._delegate,Y,Ue)}applyActionCode(Y){return K.a5(this._delegate,Y)}checkActionCode(Y){return K.a6(this._delegate,Y)}confirmPasswordReset(Y,Ue){return K.a4(this._delegate,Y,Ue)}createUserWithEmailAndPassword(Y,Ue){var me=this;return(0,C.Z)(function*(){return Nn(me._delegate,K.a8(me._delegate,Y,Ue))})()}fetchProvidersForEmail(Y){return this.fetchSignInMethodsForEmail(Y)}fetchSignInMethodsForEmail(Y){return K.ad(this._delegate,Y)}isSignInWithEmailLink(Y){return K.ab(this._delegate,Y)}getRedirectResult(){var Y=this;return(0,C.Z)(function*(){xr(Nr(),Y._delegate,"operation-not-supported-in-this-environment");const Ue=yield K.j(Y._delegate,lr);return Ue?Nn(Y._delegate,Promise.resolve(Ue)):{credential:null,user:null}})()}addFrameworkForLogging(Y){!function Gt(ee,re){(0,K.aH)(ee)._logFramework(re)}(this._delegate,Y)}onAuthStateChanged(Y,Ue,me){const{next:Ee,error:ue,complete:ke}=Qe(Y,Ue,me);return this._delegate.onAuthStateChanged(Ee,ue,ke)}onIdTokenChanged(Y,Ue,me){const{next:Ee,error:ue,complete:ke}=Qe(Y,Ue,me);return this._delegate.onIdTokenChanged(Ee,ue,ke)}sendSignInLinkToEmail(Y,Ue){return K.aa(this._delegate,Y,Ue)}sendPasswordResetEmail(Y,Ue){return K.a3(this._delegate,Y,Ue||void 0)}setPersistence(Y){var Ue=this;return(0,C.Z)(function*(){let me;switch(function Fr(ee,re){Kr(Object.values(Qn).includes(re),ee,"invalid-persistence-type"),(0,X.b$)()?Kr(re!==Qn.SESSION,ee,"unsupported-persistence-type"):(0,X.UG)()?Kr(re===Qn.NONE,ee,"unsupported-persistence-type"):pn()?Kr(re===Qn.NONE||re===Qn.LOCAL&&(0,X.hl)(),ee,"unsupported-persistence-type"):Kr(re===Qn.NONE||Ur(),ee,"unsupported-persistence-type")}(Ue._delegate,Y),Y){case Qn.SESSION:me=K.a;break;case Qn.LOCAL:me=(yield K.aC(K.i)._isAvailable())?K.i:K.b;break;case Qn.NONE:me=K.N;break;default:return K.av("argument-error",{appName:Ue._delegate.name})}return Ue._delegate.setPersistence(me)})()}signInAndRetrieveDataWithCredential(Y){return this.signInWithCredential(Y)}signInAnonymously(){return Nn(this._delegate,K._(this._delegate))}signInWithCredential(Y){return Nn(this._delegate,K.$(this._delegate,Y))}signInWithCustomToken(Y){return Nn(this._delegate,K.a2(this._delegate,Y))}signInWithEmailAndPassword(Y,Ue){return Nn(this._delegate,K.a9(this._delegate,Y,Ue))}signInWithEmailLink(Y,Ue){return Nn(this._delegate,K.ac(this._delegate,Y,Ue))}signInWithPhoneNumber(Y,Ue){return qr(this._delegate,K.s(this._delegate,Y,Ue))}signInWithPopup(Y){var Ue=this;return(0,C.Z)(function*(){return xr(Nr(),Ue._delegate,"operation-not-supported-in-this-environment"),Nn(Ue._delegate,K.c(Ue._delegate,Y,lr))})()}signInWithRedirect(Y){var Ue=this;return(0,C.Z)(function*(){return xr(Nr(),Ue._delegate,"operation-not-supported-in-this-environment"),yield Gr(Ue._delegate),K.f(Ue._delegate,Y,lr)})()}updateCurrentUser(Y){return this._delegate.updateCurrentUser(Y)}verifyPasswordResetCode(Y){return K.a7(this._delegate,Y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ee.Persistence=Qn,ee})();function Qe(ee,re,Y){let Ue=ee;"function"!=typeof ee&&({next:Ue,error:re,complete:Y}=ee);const me=Ue;return{next:ue=>me(ue&&Hn.getOrCreate(ue)),error:re,complete:Y}}function De(ee,re){const Y=function dn(ee,re){const Y=hn();if(!Y)return[];const Ue=K.aD(ur,ee,re);switch(Y.getItem(Ue)){case Qn.NONE:return[K.N];case Qn.LOCAL:return[K.i,K.a];case Qn.SESSION:return[K.a];default:return[]}}(ee,re);if(typeof self<"u"&&!Y.includes(K.i)&&Y.push(K.i),typeof window<"u")for(const Ue of[K.b,K.a])Y.includes(Ue)||Y.push(Ue);return Y.includes(K.N)||Y.push(K.N),Y}class Pe{constructor(){this.providerId="phone",this._delegate=new K.P(yr(p.Z.auth()))}static credential(re,Y){return K.P.credential(re,Y)}verifyPhoneNumber(re,Y){return this._delegate.verifyPhoneNumber(re,Y)}unwrap(){return this._delegate}}Pe.PHONE_SIGN_IN_METHOD=K.P.PHONE_SIGN_IN_METHOD,Pe.PROVIDER_ID=K.P.PROVIDER_ID;const gt=K.aA;class ct{constructor(re,Y,Ue=p.Z.app()){var me;gt(null===(me=Ue.options)||void 0===me?void 0:me.apiKey,"invalid-api-key",{appName:Ue.name}),this._delegate=new K.R(re,Y,Ue.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function _e(ee){ee.INTERNAL.registerComponent(new $e.wA("auth-compat",re=>{const Y=re.getProvider("app-compat").getImmediate(),Ue=re.getProvider("auth");return new Jn(Y,Ue)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:K.A.EMAIL_SIGNIN,PASSWORD_RESET:K.A.PASSWORD_RESET,RECOVER_EMAIL:K.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:K.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:K.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:K.A.VERIFY_EMAIL}},EmailAuthProvider:K.Q,FacebookAuthProvider:K.U,GithubAuthProvider:K.W,GoogleAuthProvider:K.V,OAuthProvider:K.X,SAMLAuthProvider:K.Y,PhoneAuthProvider:Pe,PhoneMultiFactorGenerator:K.m,RecaptchaVerifier:ct,TwitterAuthProvider:K.Z,Auth:Jn,AuthCredential:K.J,Error:X.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ee.registerVersion("@firebase/auth-compat","0.4.1")}(p.Z)},6197:(mn,ot,j)=>{j.d(ot,{N8:()=>ku});var C=j(5861),p=j(6881),K=j(4859),X=j(2090),Se=j(1877);const Ne="@firebase/database";let be="";class de{constructor(l){this.domStorage_=l,this.prefix_="firebase:"}set(l,c){null==c?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,X.Wl)(c))}get(l){const c=this.domStorage_.getItem(this.prefixedName_(l));return null==c?null:(0,X.cI)(c)}remove(l){this.domStorage_.removeItem(this.prefixedName_(l))}prefixedName_(l){return this.prefix_+l}toString(){return this.domStorage_.toString()}}class ye{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(l,c){null==c?delete this.cache_[l]:this.cache_[l]=c}get(l){return(0,X.r3)(this.cache_,l)?this.cache_[l]:null}remove(l){delete this.cache_[l]}}const Me=function(f){try{if(typeof window<"u"&&typeof window[f]<"u"){const l=window[f];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new de(l)}}catch{}return new ye},tt=Me("localStorage"),Ye=Me("sessionStorage"),Nt=new Se.Yd("@firebase/database"),Qt=function(){let f=1;return function(){return f++}}(),nt=function(f){const l=(0,X.dS)(f),c=new X.gQ;c.update(l);const E=c.digest();return X.US.encodeByteArray(E)},yt=function(...f){let l="";for(let c=0;c<f.length;c++){const E=f[c];Array.isArray(E)||E&&"object"==typeof E&&"number"==typeof E.length?l+=yt.apply(null,E):l+="object"==typeof E?(0,X.Wl)(E):E,l+=" "}return l};let ft=null,Rt=!0;const Je=function(...f){if(!0===Rt&&(Rt=!1,null===ft&&!0===Ye.get("logging_enabled")&&function(f,l){(0,X.hu)(!l||!0===f||!1===f,"Can't turn on custom loggers persistently."),!0===f?(Nt.logLevel=Se.in.VERBOSE,ft=Nt.log.bind(Nt),l&&Ye.set("logging_enabled",!0)):"function"==typeof f?ft=f:(ft=null,Ye.remove("logging_enabled"))}(!0)),ft){const l=yt.apply(null,f);ft(l)}},vt=function(f){return function(...l){Je(f,...l)}},$t=function(...f){const l="FIREBASE INTERNAL ERROR: "+yt(...f);Nt.error(l)},wt=function(...f){const l=`FIREBASE FATAL ERROR: ${yt(...f)}`;throw Nt.error(l),new Error(l)},je=function(...f){const l="FIREBASE WARNING: "+yt(...f);Nt.warn(l)},ln=function(f){return"number"==typeof f&&(f!=f||f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY)},Kt="[MIN_NAME]",qt="[MAX_NAME]",rt=function(f,l){if(f===l)return 0;if(f===Kt||l===qt)return-1;if(l===Kt||f===qt)return 1;{const c=nr(f),E=nr(l);return null!==c?null!==E?c-E==0?f.length-l.length:c-E:-1:null!==E?1:f<l?-1:1}},at=function(f,l){return f===l?0:f<l?-1:1},lt=function(f,l){if(l&&f in l)return l[f];throw new Error("Missing required key ("+f+") in object: "+(0,X.Wl)(l))},bt=function(f){if("object"!=typeof f||null===f)return(0,X.Wl)(f);const l=[];for(const E in f)l.push(E);l.sort();let c="{";for(let E=0;E<l.length;E++)0!==E&&(c+=","),c+=(0,X.Wl)(l[E]),c+=":",c+=bt(f[l[E]]);return c+="}",c},Ht=function(f,l){const c=f.length;if(c<=l)return[f];const E=[];for(let x=0;x<c;x+=l)E.push(f.substring(x,x+l>c?c:x+l));return E};function It(f,l){for(const c in f)f.hasOwnProperty(c)&&l(c,f[c])}const Gt=function(f){(0,X.hu)(!ln(f),"Invalid JSON number");const E=1023;let x,U,H,ce,Re;0===f?(U=0,H=0,x=1/f==-1/0?1:0):(x=f<0,(f=Math.abs(f))>=Math.pow(2,1-E)?(ce=Math.min(Math.floor(Math.log(f)/Math.LN2),E),U=ce+E,H=Math.round(f*Math.pow(2,52-ce)-Math.pow(2,52))):(U=0,H=Math.round(f/Math.pow(2,-1074))));const Be=[];for(Re=52;Re;Re-=1)Be.push(H%2?1:0),H=Math.floor(H/2);for(Re=11;Re;Re-=1)Be.push(U%2?1:0),U=Math.floor(U/2);Be.push(x?1:0),Be.reverse();const St=Be.join("");let Mt="";for(Re=0;Re<64;Re+=8){let Vt=parseInt(St.substr(Re,8),2).toString(16);1===Vt.length&&(Vt="0"+Vt),Mt+=Vt}return Mt.toLowerCase()},tr=new RegExp("^-?(0*)\\d{1,10}$"),nr=function(f){if(tr.test(f)){const l=Number(f);if(l>=-2147483648&&l<=2147483647)return l}return null},pr=function(f){try{f()}catch(l){setTimeout(()=>{throw je("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},zr=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},hr=function(f,l){const c=setTimeout(f,l);return"number"==typeof c&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class Ur{constructor(l,c){this.appName_=l,this.appCheckProvider=c,this.appCheck=c?.getImmediate({optional:!0}),this.appCheck||c?.get().then(E=>this.appCheck=E)}getToken(l){return this.appCheck?this.appCheck.getToken(l):new Promise((c,E)=>{setTimeout(()=>{this.appCheck?this.getToken(l).then(c,E):c(null)},0)})}addTokenChangeListener(l){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(E=>E.addTokenListener(l))}notifyForInvalidToken(){je(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class pn{constructor(l,c,E){this.appName_=l,this.firebaseOptions_=c,this.authProvider_=E,this.auth_=null,this.auth_=E.getImmediate({optional:!0}),this.auth_||E.onInit(x=>this.auth_=x)}getToken(l){return this.auth_?this.auth_.getToken(l).catch(c=>c&&"auth/token-not-initialized"===c.code?(Je("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,E)=>{setTimeout(()=>{this.auth_?this.getToken(l).then(c,E):c(null)},0)})}addTokenChangeListener(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(c=>c.addAuthTokenListener(l))}removeTokenChangeListener(l){this.authProvider_.get().then(c=>c.removeAuthTokenListener(l))}notifyForInvalidToken(){let l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',je(l)}}let Nr=(()=>{class f{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return f.OWNER="owner",f})();const Kr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,an="websocket",dn="long_polling";class hn{constructor(l,c,E,x,U=!1,H="",ce=!1,Re=!1){this.secure=c,this.namespace=E,this.webSocketOnly=x,this.nodeAdmin=U,this.persistenceKey=H,this.includeNamespaceInQueryParams=ce,this.isUsingEmulator=Re,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tt.get("host:"+l)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&tt.set("host:"+this._host,this.internalHost))}toString(){let l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function lr(f,l,c){let E;if((0,X.hu)("string"==typeof l,"typeof type must == string"),(0,X.hu)("object"==typeof c,"typeof params must == object"),l===an)E=(f.secure?"wss://":"ws://")+f.internalHost+"/.ws?";else{if(l!==dn)throw new Error("Unknown connection type: "+l);E=(f.secure?"https://":"http://")+f.internalHost+"/.lp?"}(function Yt(f){return f.host!==f.internalHost||f.isCustomHost()||f.includeNamespaceInQueryParams})(f)&&(c.ns=f.namespace);const x=[];return It(c,(U,H)=>{x.push(U+"="+H)}),E+x.join("&")}class yr{constructor(){this.counters_={}}incrementCounter(l,c=1){(0,X.r3)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=c}get(){return(0,X.p$)(this.counters_)}}const Er={},Vr={};function ri(f){const l=f.toString();return Er[l]||(Er[l]=new yr),Er[l]}class Nn{constructor(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(l,c){this.closeAfterResponse=l,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(l,c){for(this.pendingResponses[l]=c;this.pendingResponses[this.currentResponseNum];){const E=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let x=0;x<E.length;++x)E[x]&&pr(()=>{this.onMessage_(E[x])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class me{constructor(l,c,E,x,U,H,ce){this.connId=l,this.repoInfo=c,this.applicationId=E,this.appCheckToken=x,this.authToken=U,this.transportSessionId=H,this.lastSessionId=ce,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vt(l),this.stats_=ri(c),this.urlFn=Re=>(this.appCheckToken&&(Re.ac=this.appCheckToken),lr(c,dn,Re))}open(l,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new Nn(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(f){if((0,X.Yr)()||"complete"===document.readyState)f();else{let l=!1;const c=function(){document.body?l||(l=!0,f()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ee((...U)=>{const[H,ce,Re,Be,St]=U;if(this.incrementIncomingBytes_(U),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===H)this.id=ce,this.password=Re;else{if("close"!==H)throw new Error("Unrecognized command received: "+H);ce?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ce,()=>{this.onClosed_()})):this.onClosed_()}},(...U)=>{const[H,ce]=U;this.incrementIncomingBytes_(U),this.myPacketOrderer.handleResponse(H,ce)},()=>{this.onClosed_()},this.urlFn);const E={start:"t"};E.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(E.cb=this.scriptTagHolder.uniqueCallbackIdentifier),E.v="5",this.transportSessionId&&(E.s=this.transportSessionId),this.lastSessionId&&(E.ls=this.lastSessionId),this.applicationId&&(E.p=this.applicationId),this.appCheckToken&&(E.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Kr.test(location.hostname)&&(E.r="f");const x=this.urlFn(E);this.log_("Connecting via long-poll to "+x),this.scriptTagHolder.addTag(x,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){me.forceAllow_=!0}static forceDisallow(){me.forceDisallow_=!0}static isAvailable(){return!((0,X.Yr)()||!me.forceAllow_&&(me.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(l){const c=(0,X.Wl)(l);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const E=(0,X.h$)(c),x=Ht(E,1840);for(let U=0;U<x.length;U++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,x.length,x[U]),this.curSegmentNum++}addDisconnectPingFrame(l,c){if((0,X.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const E={dframe:"t"};E.id=l,E.pw=c,this.myDisconnFrame.src=this.urlFn(E),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(l){const c=(0,X.Wl)(l).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class Ee{constructor(l,c,E,x){if(this.onDisconnect=E,this.urlFn=x,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,X.Yr)())this.commandCB=l,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=Qt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=Ee.createIFrame_();let U="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(U='<script>document.domain="'+document.domain+'";<\/script>');const H="<html><body>"+U+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(H),this.myIFrame.doc.close()}catch(ce){Je("frame writing exception"),ce.stack&&Je(ce.stack),Je(ce)}}}static createIFrame_(){const l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||Je("No IE domain setting required")}catch{const E=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+E+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const l=this.onDisconnect;l&&(this.onDisconnect=null,l())}startLongPoll(l,c){for(this.myID=l,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;let c=this.urlFn(l),E="",x=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+E.length<=1870;){const H=this.pendingSegs.shift();E=E+"&seg"+x+"="+H.seg+"&ts"+x+"="+H.ts+"&d"+x+"="+H.d,x++}return c+=E,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(l,c,E){this.pendingSegs.push({seg:l,ts:c,d:E}),this.alive&&this.newRequest_()}addLongPollTag_(l,c){this.outstandingRequests.add(c);const E=()=>{this.outstandingRequests.delete(c),this.newRequest_()},x=setTimeout(E,Math.floor(25e3));this.addTag(l,()=>{clearTimeout(x),E()})}addTag(l,c){(0,X.Yr)()?this.doNodeLongPoll(l,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const E=this.myIFrame.doc.createElement("script");E.type="text/javascript",E.async=!0,E.src=l,E.onload=E.onreadystatechange=function(){const x=E.readyState;(!x||"loaded"===x||"complete"===x)&&(E.onload=E.onreadystatechange=null,E.parentNode&&E.parentNode.removeChild(E),c())},E.onerror=()=>{Je("Long-poll script failed to load: "+l),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(E)}catch{}},Math.floor(1))}}let Xe=null;typeof MozWebSocket<"u"?Xe=MozWebSocket:typeof WebSocket<"u"&&(Xe=WebSocket);let Et=(()=>{class f{constructor(c,E,x,U,H,ce,Re){this.connId=c,this.applicationId=x,this.appCheckToken=U,this.authToken=H,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vt(this.connId),this.stats_=ri(E),this.connURL=f.connectionURL_(E,ce,Re,U,x),this.nodeAdmin=E.nodeAdmin}static connectionURL_(c,E,x,U,H){const ce={v:"5"};return!(0,X.Yr)()&&typeof location<"u"&&location.hostname&&Kr.test(location.hostname)&&(ce.r="f"),E&&(ce.s=E),x&&(ce.ls=x),U&&(ce.ac=U),H&&(ce.p=H),lr(c,an,ce)}open(c,E){this.onDisconnect=E,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tt.set("previous_websocket_failure",!0);try{let x;if((0,X.Yr)()){x={headers:{"User-Agent":`Firebase/5/${be}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(x.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(x.headers["X-Firebase-AppCheck"]=this.appCheckToken);const H=process.env,ce=0===this.connURL.indexOf("wss://")?H.HTTPS_PROXY||H.https_proxy:H.HTTP_PROXY||H.http_proxy;ce&&(x.proxy={origin:ce})}this.mySock=new Xe(this.connURL,[],x)}catch(x){this.log_("Error instantiating WebSocket.");const U=x.message||x.data;return U&&this.log_(U),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=x=>{this.handleIncomingFrame(x)},this.mySock.onerror=x=>{this.log_("WebSocket error.  Closing connection.");const U=x.message||x.data;U&&this.log_(U),this.onClosed_()}}start(){}static forceDisallow(){f.forceDisallow_=!0}static isAvailable(){let c=!1;if(typeof navigator<"u"&&navigator.userAgent){const x=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);x&&x.length>1&&parseFloat(x[1])<4.4&&(c=!0)}return!c&&null!==Xe&&!f.forceDisallow_}static previouslyFailed(){return tt.isInMemoryStorage||!0===tt.get("previous_websocket_failure")}markConnectionHealthy(){tt.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const E=this.frames.join("");this.frames=null;const x=(0,X.cI)(E);this.onMessage(x)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,X.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const E=Number(c);if(!isNaN(E))return this.handleNewFrameCount_(E),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const E=c.data;if(this.bytesReceived+=E.length,this.stats_.incrementCounter("bytes_received",E.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(E);else{const x=this.extractFrameCount_(E);null!==x&&this.appendFrame_(x)}}send(c){this.resetKeepAlive();const E=(0,X.Wl)(c);this.bytesSent+=E.length,this.stats_.incrementCounter("bytes_sent",E.length);const x=Ht(E,16384);x.length>1&&this.sendString_(String(x.length));for(let U=0;U<x.length;U++)this.sendString_(x[U])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(E){this.log_("Exception thrown from WebSocket.send():",E.message||E.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return f.responsesRequiredToBeHealthy=2,f.healthyTimeout=3e4,f})(),tn=(()=>{class f{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[me,Et]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const E=Et&&Et.isAvailable();let x=E&&!Et.previouslyFailed();if(c.webSocketOnly&&(E||je("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),x=!0),x)this.transports_=[Et];else{const U=this.transports_=[];for(const H of f.ALL_TRANSPORTS)H&&H.isAvailable()&&U.push(H);f.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return f.globalTransportInitialized_=!1,f})();class Pi{constructor(l,c,E,x,U,H,ce,Re,Be,St){this.id=l,this.repoInfo_=c,this.applicationId_=E,this.appCheckToken_=x,this.authToken_=U,this.onMessage_=H,this.onReady_=ce,this.onDisconnect_=Re,this.onKill_=Be,this.lastSessionId=St,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vt("c:"+this.id+":"),this.transportManager_=new tn(c),this.log_("Connection created"),this.start_()}start_(){const l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),E=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,E)},Math.floor(0));const x=l.healthyTimeout||0;x>0&&(this.healthyTimeout_=hr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(x)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(l){return c=>{l===this.conn_?this.onConnectionLost_(c):l===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(l){return c=>{2!==this.state_&&(l===this.rx_?this.onPrimaryMessageReceived_(c):l===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(l){this.sendData_({t:"d",d:l})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(l){if("t"in l){const c=l.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(l){const c=lt("t",l),E=lt("d",l);if("c"===c)this.onSecondaryControl_(E);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(E)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(l){const c=lt("t",l),E=lt("d",l);"c"===c?this.onControl_(E):"d"===c&&this.onDataMessage_(E)}onDataMessage_(l){this.onPrimaryResponse_(),this.onMessage_(l)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(l){const c=lt("t",l);if("d"in l){const E=l.d;if("h"===c){const x=Object.assign({},E);this.repoInfo_.isUsingEmulator&&(x.h=this.repoInfo_.host),this.onHandshake_(x)}else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let x=0;x<this.pendingDataMessages.length;++x)this.onDataMessage_(this.pendingDataMessages[x]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(E):"r"===c?this.onReset_(E):"e"===c?$t("Server Error: "+E):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$t("Unknown control packet command: "+c)}}onHandshake_(l){const c=l.ts,E=l.v,x=l.h;this.sessionId=l.s,this.repoInfo_.host=x,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==E&&je("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)}startUpgrade_(l){this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),E=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,E),hr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(l,c){this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()}onConnectionLost_(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Hi{put(l,c,E,x){}merge(l,c,E,x){}refreshAuthToken(l){}refreshAppCheckToken(l){}onDisconnectPut(l,c,E){}onDisconnectMerge(l,c,E){}onDisconnectCancel(l,c){}reportStats(l){}}class ei{constructor(l){this.allowedEvents_=l,this.listeners_={},(0,X.hu)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}trigger(l,...c){if(Array.isArray(this.listeners_[l])){const E=[...this.listeners_[l]];for(let x=0;x<E.length;x++)E[x].callback.apply(E[x].context,c)}}on(l,c,E){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:c,context:E});const x=this.getInitialEvent(l);x&&c.apply(E,x)}off(l,c,E){this.validateEventType_(l);const x=this.listeners_[l]||[];for(let U=0;U<x.length;U++)if(x[U].callback===c&&(!E||E===x[U].context))return void x.splice(U,1)}validateEventType_(l){(0,X.hu)(this.allowedEvents_.find(c=>c===l),"Unknown event: "+l)}}class Lr extends ei{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,X.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Lr}getInitialEvent(l){return(0,X.hu)("online"===l,"Unknown event type: "+l),[this.online_]}currentlyOnline(){return this.online_}}const Zt=32,zn=768;class Tn{constructor(l,c){if(void 0===c){this.pieces_=l.split("/");let E=0;for(let x=0;x<this.pieces_.length;x++)this.pieces_[x].length>0&&(this.pieces_[E]=this.pieces_[x],E++);this.pieces_.length=E,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=c}toString(){let l="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(l+="/"+this.pieces_[c]);return l||"/"}}function In(){return new Tn("")}function Dn(f){return f.pieceNum_>=f.pieces_.length?null:f.pieces_[f.pieceNum_]}function Xn(f){return f.pieces_.length-f.pieceNum_}function Zn(f){let l=f.pieceNum_;return l<f.pieces_.length&&l++,new Tn(f.pieces_,l)}function fe(f){return f.pieceNum_<f.pieces_.length?f.pieces_[f.pieces_.length-1]:null}function he(f,l=0){return f.pieces_.slice(f.pieceNum_+l)}function Ie(f){if(f.pieceNum_>=f.pieces_.length)return null;const l=[];for(let c=f.pieceNum_;c<f.pieces_.length-1;c++)l.push(f.pieces_[c]);return new Tn(l,0)}function He(f,l){const c=[];for(let E=f.pieceNum_;E<f.pieces_.length;E++)c.push(f.pieces_[E]);if(l instanceof Tn)for(let E=l.pieceNum_;E<l.pieces_.length;E++)c.push(l.pieces_[E]);else{const E=l.split("/");for(let x=0;x<E.length;x++)E[x].length>0&&c.push(E[x])}return new Tn(c,0)}function Z(f){return f.pieceNum_>=f.pieces_.length}function ve(f,l){const c=Dn(f),E=Dn(l);if(null===c)return l;if(c===E)return ve(Zn(f),Zn(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+f+")")}function _t(f,l){if(Xn(f)!==Xn(l))return!1;for(let c=f.pieceNum_,E=l.pieceNum_;c<=f.pieces_.length;c++,E++)if(f.pieces_[c]!==l.pieces_[E])return!1;return!0}function Xt(f,l){let c=f.pieceNum_,E=l.pieceNum_;if(Xn(f)>Xn(l))return!1;for(;c<f.pieces_.length;){if(f.pieces_[c]!==l.pieces_[E])return!1;++c,++E}return!0}class $n{constructor(l,c){this.errorPrefix_=c,this.parts_=he(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(let E=0;E<this.parts_.length;E++)this.byteLength_+=(0,X.ug)(this.parts_[E]);Ti(this)}}function Ti(f){if(f.byteLength_>zn)throw new Error(f.errorPrefix_+"has a key path longer than "+zn+" bytes ("+f.byteLength_+").");if(f.parts_.length>Zt)throw new Error(f.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Zt+") or object contains a cycle "+dr(f))}function dr(f){return 0===f.parts_.length?"":"in property '"+f.parts_.join(".")+"'"}class Ni extends ei{constructor(){let l,c;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(c="visibilitychange",l="hidden"):typeof document.mozHidden<"u"?(c="mozvisibilitychange",l="mozHidden"):typeof document.msHidden<"u"?(c="msvisibilitychange",l="msHidden"):typeof document.webkitHidden<"u"&&(c="webkitvisibilitychange",l="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const E=!document[l];E!==this.visible_&&(this.visible_=E,this.trigger("visible",E))},!1)}static getInstance(){return new Ni}getInitialEvent(l){return(0,X.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]}}const Ss=1e3;let bo,Gi=(()=>{class f extends Hi{constructor(c,E,x,U,H,ce,Re,Be){if(super(),this.repoInfo_=c,this.applicationId_=E,this.onDataUpdate_=x,this.onConnectStatus_=U,this.onServerInfoUpdate_=H,this.authTokenProvider_=ce,this.appCheckTokenProvider_=Re,this.authOverride_=Be,this.id=f.nextPersistentConnectionId_++,this.log_=vt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ss,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Be&&!(0,X.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ni.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&Lr.getInstance().on("online",this.onOnline_,this)}sendRequest(c,E,x){const U=++this.requestNumber_,H={r:U,a:c,b:E};this.log_((0,X.Wl)(H)),(0,X.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(H),x&&(this.requestCBHash_[U]=x)}get(c){this.initConnection_();const E=new X.BH,U={action:"g",request:{p:c._path.toString(),q:c._queryObject},onComplete:ce=>{const Re=ce.d;"ok"===ce.s?E.resolve(Re):E.reject(Re)}};return this.outstandingGets_.push(U),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),E.promise}listen(c,E,x,U){this.initConnection_();const H=c._queryIdentifier,ce=c._path.toString();this.log_("Listen called for "+ce+" "+H),this.listens.has(ce)||this.listens.set(ce,new Map),(0,X.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,X.hu)(!this.listens.get(ce).has(H),"listen() called twice for same path/queryId.");const Re={onComplete:U,hashFn:E,query:c,tag:x};this.listens.get(ce).set(H,Re),this.connected_&&this.sendListen_(Re)}sendGet_(c){const E=this.outstandingGets_[c];this.sendRequest("g",E.request,x=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),E.onComplete&&E.onComplete(x)})}sendListen_(c){const E=c.query,x=E._path.toString(),U=E._queryIdentifier;this.log_("Listen on "+x+" for "+U);const H={p:x};c.tag&&(H.q=E._queryObject,H.t=c.tag),H.h=c.hashFn(),this.sendRequest("q",H,Re=>{const Be=Re.d,St=Re.s;f.warnOnListenWarnings_(Be,E),(this.listens.get(x)&&this.listens.get(x).get(U))===c&&(this.log_("listen response",Re),"ok"!==St&&this.removeListen_(x,U),c.onComplete&&c.onComplete(St,Be))})}static warnOnListenWarnings_(c,E){if(c&&"object"==typeof c&&(0,X.r3)(c,"w")){const x=(0,X.DV)(c,"w");if(Array.isArray(x)&&~x.indexOf("no_index")){const U='".indexOn": "'+E._queryParams.getIndex().toString()+'"',H=E._path.toString();je(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${U} at ${H} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,X.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,E=(0,X.w9)(c)?"auth":"gauth",x={cred:c};null===this.authOverride_?x.noauth=!0:"object"==typeof this.authOverride_&&(x.authvar=this.authOverride_),this.sendRequest(E,x,U=>{const H=U.s,ce=U.d||"error";this.authToken_===c&&("ok"===H?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(H,ce))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const E=c.s,x=c.d||"error";"ok"===E?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(E,x)})}unlisten(c,E){const x=c._path.toString(),U=c._queryIdentifier;this.log_("Unlisten called for "+x+" "+U),(0,X.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(x,U)&&this.connected_&&this.sendUnlisten_(x,U,c._queryObject,E)}sendUnlisten_(c,E,x,U){this.log_("Unlisten on "+c+" for "+E);const H={p:c};U&&(H.q=x,H.t=U),this.sendRequest("n",H)}onDisconnectPut(c,E,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,E,x):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:E,onComplete:x})}onDisconnectMerge(c,E,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,E,x):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:E,onComplete:x})}onDisconnectCancel(c,E){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,E):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:E})}sendOnDisconnect_(c,E,x,U){const H={p:E,d:x};this.log_("onDisconnect "+c,H),this.sendRequest(c,H,ce=>{U&&setTimeout(()=>{U(ce.s,ce.d)},Math.floor(0))})}put(c,E,x,U){this.putInternal("p",c,E,x,U)}merge(c,E,x,U){this.putInternal("m",c,E,x,U)}putInternal(c,E,x,U,H){this.initConnection_();const ce={p:E,d:x};void 0!==H&&(ce.h=H),this.outstandingPuts_.push({action:c,request:ce,onComplete:U}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+E)}sendPut_(c){const E=this.outstandingPuts_[c].action,x=this.outstandingPuts_[c].request,U=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(E,x,H=>{this.log_(E+" response",H),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),U&&U(H.s,H.d)})}reportStats(c){if(this.connected_){const E={c};this.log_("reportStats",E),this.sendRequest("s",E,x=>{"ok"!==x.s&&this.log_("reportStats","Error sending stats: "+x.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,X.Wl)(c));const E=c.r,x=this.requestCBHash_[E];x&&(delete this.requestCBHash_[E],x(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,E){this.log_("handleServerMessage",c,E),"d"===c?this.onDataUpdate_(E.p,E.d,!1,E.t):"m"===c?this.onDataUpdate_(E.p,E.d,!0,E.t):"c"===c?this.onListenRevoked_(E.p,E.q):"ac"===c?this.onAuthRevoked_(E.s,E.d):"apc"===c?this.onAppCheckRevoked_(E.s,E.d):"sd"===c?this.onSecurityDebugPacket_(E):$t("Unrecognized action received from server: "+(0,X.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,E){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=E,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,X.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ss,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=Ss,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ss),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let E=Math.max(0,this.reconnectDelay_-c);E=Math.random()*E,this.log_("Trying to reconnect in "+E+"ms"),this.scheduleConnect_(E),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,C.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const E=c.onDataMessage_.bind(c),x=c.onReady_.bind(c),U=c.onRealtimeDisconnect_.bind(c),H=c.id+":"+f.nextConnectionId_++,ce=c.lastSessionId;let Re=!1,Be=null;const St=function(){Be?Be.close():(Re=!0,U())};c.realtime_={close:St,sendRequest:function(kn){(0,X.hu)(Be,"sendRequest call when we're not connected not allowed."),Be.sendRequest(kn)}};const Vt=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[kn,fr]=yield Promise.all([c.authTokenProvider_.getToken(Vt),c.appCheckTokenProvider_.getToken(Vt)]);Re?Je("getToken() completed but was canceled"):(Je("getToken() completed. Creating connection."),c.authToken_=kn&&kn.accessToken,c.appCheckToken_=fr&&fr.token,Be=new Pi(H,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,E,x,U,Ci=>{je(Ci+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},ce))}catch(kn){c.log_("Failed to get token: "+kn),Re||(c.repoInfo_.nodeAdmin&&je(kn),St())}}})()}interrupt(c){Je("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){Je("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,X.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ss,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const E=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:E})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const E=this.outstandingPuts_[c];E&&"h"in E.request&&E.queued&&(E.onComplete&&E.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,E){let x;x=E?E.map(H=>bt(H)).join("$"):"default";const U=this.removeListen_(c,x);U&&U.onComplete&&U.onComplete("permission_denied")}removeListen_(c,E){const x=new Tn(c).toString();let U;if(this.listens.has(x)){const H=this.listens.get(x);U=H.get(E),H.delete(E),0===H.size&&this.listens.delete(x)}else U=void 0;return U}onAuthRevoked_(c,E){Je("Auth token revoked: "+c+"/"+E),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,E){Je("App check token revoked: "+c+"/"+E),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const E of c.values())this.sendListen_(E);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let E="js";(0,X.Yr)()&&(E=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+E+"."+be.replace(/\./g,"-")]=1,(0,X.uI)()?c["framework.cordova"]=1:(0,X.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=Lr.getInstance().currentlyOnline();return(0,X.xb)(this.interruptReasons_)&&c}}return f.nextPersistentConnectionId_=0,f.nextConnectionId_=0,f})();class sr{constructor(l,c){this.name=l,this.node=c}static Wrap(l,c){return new sr(l,c)}}class Hs{getCompare(){return this.compare.bind(this)}indexedValueChanged(l,c){const E=new sr(Kt,l),x=new sr(Kt,c);return 0!==this.compare(E,x)}minPost(){return sr.MIN}}class gs extends Hs{static get __EMPTY_NODE(){return bo}static set __EMPTY_NODE(l){bo=l}compare(l,c){return rt(l.name,c.name)}isDefinedOn(l){throw(0,X.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(l,c){return!1}minPost(){return sr.MIN}maxPost(){return new sr(qt,bo)}makePost(l,c){return(0,X.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new sr(l,bo)}toString(){return".key"}}const Yr=new gs;class Br{constructor(l,c,E,x,U=null){this.isReverse_=x,this.resultGenerator_=U,this.nodeStack_=[];let H=1;for(;!l.isEmpty();)if(H=c?E(l.key,c):1,x&&(H*=-1),H<0)l=this.isReverse_?l.left:l.right;else{if(0===H){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,l=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}}}let Xs,Tr=(()=>{class f{constructor(c,E,x,U,H){this.key=c,this.value=E,this.color=x??f.RED,this.left=U??ir.EMPTY_NODE,this.right=H??ir.EMPTY_NODE}copy(c,E,x,U,H){return new f(c??this.key,E??this.value,x??this.color,U??this.left,H??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,E,x){let U=this;const H=x(c,U.key);return U=H<0?U.copy(null,null,null,U.left.insert(c,E,x),null):0===H?U.copy(null,E,null,null,null):U.copy(null,null,null,null,U.right.insert(c,E,x)),U.fixUp_()}removeMin_(){if(this.left.isEmpty())return ir.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,E){let x,U;if(x=this,E(c,x.key)<0)!x.left.isEmpty()&&!x.left.isRed_()&&!x.left.left.isRed_()&&(x=x.moveRedLeft_()),x=x.copy(null,null,null,x.left.remove(c,E),null);else{if(x.left.isRed_()&&(x=x.rotateRight_()),!x.right.isEmpty()&&!x.right.isRed_()&&!x.right.left.isRed_()&&(x=x.moveRedRight_()),0===E(c,x.key)){if(x.right.isEmpty())return ir.EMPTY_NODE;U=x.right.min_(),x=x.copy(U.key,U.value,null,null,x.right.removeMin_())}x=x.copy(null,null,null,null,x.right.remove(c,E))}return x.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,f.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,f.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),E=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,E)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return f.RED=!0,f.BLACK=!1,f})();class ir{constructor(l,c=ir.EMPTY_NODE){this.comparator_=l,this.root_=c}insert(l,c){return new ir(this.comparator_,this.root_.insert(l,c,this.comparator_).copy(null,null,Tr.BLACK,null,null))}remove(l){return new ir(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,Tr.BLACK,null,null))}get(l){let c,E=this.root_;for(;!E.isEmpty();){if(c=this.comparator_(l,E.key),0===c)return E.value;c<0?E=E.left:c>0&&(E=E.right)}return null}getPredecessorKey(l){let c,E=this.root_,x=null;for(;!E.isEmpty();){if(c=this.comparator_(l,E.key),0===c){if(E.left.isEmpty())return x?x.key:null;for(E=E.left;!E.right.isEmpty();)E=E.right;return E.key}c<0?E=E.left:c>0&&(x=E,E=E.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(l){return this.root_.inorderTraversal(l)}reverseTraversal(l){return this.root_.reverseTraversal(l)}getIterator(l){return new Br(this.root_,null,this.comparator_,!1,l)}getIteratorFrom(l,c){return new Br(this.root_,l,this.comparator_,!1,c)}getReverseIteratorFrom(l,c){return new Br(this.root_,l,this.comparator_,!0,c)}getReverseIterator(l){return new Br(this.root_,null,this.comparator_,!0,l)}}function ys(f,l){return rt(f.name,l.name)}function cs(f,l){return rt(f,l)}ir.EMPTY_NODE=new class To{copy(l,c,E,x,U){return this}insert(l,c,E){return new Tr(l,c,null)}remove(l,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Eu=function(f){return"number"==typeof f?"number:"+Gt(f):"string:"+f},Do=function(f){if(f.isLeafNode()){const l=f.val();(0,X.hu)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,X.r3)(l,".sv"),"Priority must be a string or number.")}else(0,X.hu)(f===Xs||f.isEmpty(),"priority of unexpected type.");(0,X.hu)(f===Xs||f.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Fa,ba,ts,$o=(()=>{class f{constructor(c,E=f.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=E,this.lazyHash_=null,(0,X.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Do(this.priorityNode_)}static set __childrenNodeConstructor(c){Fa=c}static get __childrenNodeConstructor(){return Fa}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new f(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return Z(c)?this:".priority"===Dn(c)?this.priorityNode_:f.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,E){return null}updateImmediateChild(c,E){return".priority"===c?this.updatePriority(E):E.isEmpty()&&".priority"!==c?this:f.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,E).updatePriority(this.priorityNode_)}updateChild(c,E){const x=Dn(c);return null===x?E:E.isEmpty()&&".priority"!==x?this:((0,X.hu)(".priority"!==x||1===Xn(c),".priority must be the last token in a path"),this.updateImmediateChild(x,f.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zn(c),E)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,E){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+Eu(this.priorityNode_.val())+":");const E=typeof this.value_;c+=E+":",c+="number"===E?Gt(this.value_):this.value_,this.lazyHash_=nt(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===f.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof f.__childrenNodeConstructor?-1:((0,X.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const E=typeof c.value_,x=typeof this.value_,U=f.VALUE_TYPE_ORDER.indexOf(E),H=f.VALUE_TYPE_ORDER.indexOf(x);return(0,X.hu)(U>=0,"Unknown leaf type: "+E),(0,X.hu)(H>=0,"Unknown leaf type: "+x),U===H?"object"===x?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:H-U}withIndex(){return this}isIndexed(){return!0}equals(c){return c===this||!!c.isLeafNode()&&(this.value_===c.value_&&this.priorityNode_.equals(c.priorityNode_))}}return f.VALUE_TYPE_ORDER=["object","boolean","number","string"],f})();const Zr=new class lo extends Hs{compare(l,c){const E=l.node.getPriority(),x=c.node.getPriority(),U=E.compareTo(x);return 0===U?rt(l.name,c.name):U}isDefinedOn(l){return!l.getPriority().isEmpty()}indexedValueChanged(l,c){return!l.getPriority().equals(c.getPriority())}minPost(){return sr.MIN}maxPost(){return new sr(qt,new $o("[PRIORITY-POST]",ts))}makePost(l,c){const E=ba(l);return new sr(c,new $o("[PRIORITY-POST]",E))}toString(){return".priority"}},co=Math.log(2);class Yi{constructor(l){this.count=parseInt(Math.log(l+1)/co,10),this.current_=this.count-1;const x=(U=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=l+1&x}nextBitIsOne(){const l=!(this.bits_&1<<this.current_);return this.current_--,l}}const jo=function(f,l,c,E){f.sort(l);const x=function(Re,Be){const St=Be-Re;let Mt,Vt;if(0===St)return null;if(1===St)return Mt=f[Re],Vt=c?c(Mt):Mt,new Tr(Vt,Mt.node,Tr.BLACK,null,null);{const kn=parseInt(St/2,10)+Re,fr=x(Re,kn),Ci=x(kn+1,Be);return Mt=f[kn],Vt=c?c(Mt):Mt,new Tr(Vt,Mt.node,Tr.BLACK,fr,Ci)}},ce=function(Re){let Be=null,St=null,Mt=f.length;const Vt=function(fr,Ci){const Ks=Mt-fr,Bl=Mt;Mt-=fr;const Lc=x(Ks+1,Bl),Cd=f[Ks],Af=c?c(Cd):Cd;kn(new Tr(Af,Cd.node,Ci,null,Lc))},kn=function(fr){Be?(Be.left=fr,Be=fr):(St=fr,Be=fr)};for(let fr=0;fr<Re.count;++fr){const Ci=Re.nextBitIsOne(),Ks=Math.pow(2,Re.count-(fr+1));Ci?Vt(Ks,Tr.BLACK):(Vt(Ks,Tr.BLACK),Vt(Ks,Tr.RED))}return St}(new Yi(f.length));return new ir(E||l,ce)};let ns;const As={};class _i{constructor(l,c){this.indexes_=l,this.indexSet_=c}static get Default(){return(0,X.hu)(As&&Zr,"ChildrenNode.ts has not been loaded"),ns=ns||new _i({".priority":As},{".priority":Zr}),ns}get(l){const c=(0,X.DV)(this.indexes_,l);if(!c)throw new Error("No index defined for "+l);return c instanceof ir?c:null}hasIndex(l){return(0,X.r3)(this.indexSet_,l.toString())}addIndex(l,c){(0,X.hu)(l!==Yr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const E=[];let x=!1;const U=c.getIterator(sr.Wrap);let ce,H=U.getNext();for(;H;)x=x||l.isDefinedOn(H.node),E.push(H),H=U.getNext();ce=x?jo(E,l.getCompare()):As;const Re=l.toString(),Be=Object.assign({},this.indexSet_);Be[Re]=l;const St=Object.assign({},this.indexes_);return St[Re]=ce,new _i(St,Be)}addToIndexes(l,c){const E=(0,X.UI)(this.indexes_,(x,U)=>{const H=(0,X.DV)(this.indexSet_,U);if((0,X.hu)(H,"Missing index implementation for "+U),x===As){if(H.isDefinedOn(l.node)){const ce=[],Re=c.getIterator(sr.Wrap);let Be=Re.getNext();for(;Be;)Be.name!==l.name&&ce.push(Be),Be=Re.getNext();return ce.push(l),jo(ce,H.getCompare())}return As}{const ce=c.get(l.name);let Re=x;return ce&&(Re=Re.remove(new sr(l.name,ce))),Re.insert(l,l.node)}});return new _i(E,this.indexSet_)}removeFromIndexes(l,c){const E=(0,X.UI)(this.indexes_,x=>{if(x===As)return x;{const U=c.get(l.name);return U?x.remove(new sr(l.name,U)):x}});return new _i(E,this.indexSet_)}}let So,mr=(()=>{class f{constructor(c,E,x){this.children_=c,this.priorityNode_=E,this.indexMap_=x,this.lazyHash_=null,this.priorityNode_&&Do(this.priorityNode_),this.children_.isEmpty()&&(0,X.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return So||(So=new f(new ir(cs),null,_i.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||So}updatePriority(c){return this.children_.isEmpty()?this:new f(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const E=this.children_.get(c);return null===E?So:E}}getChild(c){const E=Dn(c);return null===E?this:this.getImmediateChild(E).getChild(Zn(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,E){if((0,X.hu)(E,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(E);{const x=new sr(c,E);let U,H;E.isEmpty()?(U=this.children_.remove(c),H=this.indexMap_.removeFromIndexes(x,this.children_)):(U=this.children_.insert(c,E),H=this.indexMap_.addToIndexes(x,this.children_));const ce=U.isEmpty()?So:this.priorityNode_;return new f(U,ce,H)}}updateChild(c,E){const x=Dn(c);if(null===x)return E;{(0,X.hu)(".priority"!==Dn(c)||1===Xn(c),".priority must be the last token in a path");const U=this.getImmediateChild(x).updateChild(Zn(c),E);return this.updateImmediateChild(x,U)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const E={};let x=0,U=0,H=!0;if(this.forEachChild(Zr,(ce,Re)=>{E[ce]=Re.val(c),x++,H&&f.INTEGER_REGEXP_.test(ce)?U=Math.max(U,Number(ce)):H=!1}),!c&&H&&U<2*x){const ce=[];for(const Re in E)ce[Re]=E[Re];return ce}return c&&!this.getPriority().isEmpty()&&(E[".priority"]=this.getPriority().val()),E}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+Eu(this.getPriority().val())+":"),this.forEachChild(Zr,(E,x)=>{const U=x.hash();""!==U&&(c+=":"+E+":"+U)}),this.lazyHash_=""===c?"":nt(c)}return this.lazyHash_}getPredecessorChildName(c,E,x){const U=this.resolveIndex_(x);if(U){const H=U.getPredecessorKey(new sr(c,E));return H?H.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const E=this.resolveIndex_(c);if(E){const x=E.minKey();return x&&x.name}return this.children_.minKey()}getFirstChild(c){const E=this.getFirstChildName(c);return E?new sr(E,this.children_.get(E)):null}getLastChildName(c){const E=this.resolveIndex_(c);if(E){const x=E.maxKey();return x&&x.name}return this.children_.maxKey()}getLastChild(c){const E=this.getLastChildName(c);return E?new sr(E,this.children_.get(E)):null}forEachChild(c,E){const x=this.resolveIndex_(c);return x?x.inorderTraversal(U=>E(U.name,U.node)):this.children_.inorderTraversal(E)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,E){const x=this.resolveIndex_(E);if(x)return x.getIteratorFrom(c,U=>U);{const U=this.children_.getIteratorFrom(c.name,sr.Wrap);let H=U.peek();for(;null!=H&&E.compare(H,c)<0;)U.getNext(),H=U.peek();return U}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,E){const x=this.resolveIndex_(E);if(x)return x.getReverseIteratorFrom(c,U=>U);{const U=this.children_.getReverseIteratorFrom(c.name,sr.Wrap);let H=U.peek();for(;null!=H&&E.compare(H,c)>0;)U.getNext(),H=U.peek();return U}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===we?-1:0}withIndex(c){if(c===Yr||this.indexMap_.hasIndex(c))return this;{const E=this.indexMap_.addIndex(c,this.children_);return new f(this.children_,this.priorityNode_,E)}}isIndexed(c){return c===Yr||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const E=c;if(this.getPriority().equals(E.getPriority())){if(this.children_.count()===E.children_.count()){const x=this.getIterator(Zr),U=E.getIterator(Zr);let H=x.getNext(),ce=U.getNext();for(;H&&ce;){if(H.name!==ce.name||!H.node.equals(ce.node))return!1;H=x.getNext(),ce=U.getNext()}return null===H&&null===ce}return!1}return!1}}resolveIndex_(c){return c===Yr?null:this.indexMap_.get(c.toString())}}return f.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,f})();const we=new class Ce extends mr{constructor(){super(new ir(cs),mr.EMPTY_NODE,_i.Default)}compareTo(l){return l===this?0:1}equals(l){return l===this}getPriority(){return this}getImmediateChild(l){return mr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(sr,{MIN:{value:new sr(Kt,mr.EMPTY_NODE)},MAX:{value:new sr(qt,we)}}),gs.__EMPTY_NODE=mr.EMPTY_NODE,$o.__childrenNodeConstructor=mr,function Ca(f){Xs=f}(we),function tu(f){ts=f}(we);const Oe=!0;function et(f,l=null){if(null===f)return mr.EMPTY_NODE;if("object"==typeof f&&".priority"in f&&(l=f[".priority"]),(0,X.hu)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof f&&".value"in f&&null!==f[".value"]&&(f=f[".value"]),"object"!=typeof f||".sv"in f)return new $o(f,et(l));if(f instanceof Array||!Oe){let c=mr.EMPTY_NODE;return It(f,(E,x)=>{if((0,X.r3)(f,E)&&"."!==E.substring(0,1)){const U=et(x);(U.isLeafNode()||!U.isEmpty())&&(c=c.updateImmediateChild(E,U))}}),c.updatePriority(et(l))}{const c=[];let E=!1;if(It(f,(H,ce)=>{if("."!==H.substring(0,1)){const Re=et(ce);Re.isEmpty()||(E=E||!Re.getPriority().isEmpty(),c.push(new sr(H,Re)))}}),0===c.length)return mr.EMPTY_NODE;const U=jo(c,ys,H=>H.name,cs);if(E){const H=jo(c,Zr.getCompare());return new mr(U,et(l),new _i({".priority":H},{".priority":Zr}))}return new mr(U,et(l),_i.Default)}}!function zs(f){ba=f}(et);class Tt extends Hs{constructor(l){super(),this.indexPath_=l,(0,X.hu)(!Z(l)&&".priority"!==Dn(l),"Can't create PathIndex with empty path or .priority key")}extractChild(l){return l.getChild(this.indexPath_)}isDefinedOn(l){return!l.getChild(this.indexPath_).isEmpty()}compare(l,c){const E=this.extractChild(l.node),x=this.extractChild(c.node),U=E.compareTo(x);return 0===U?rt(l.name,c.name):U}makePost(l,c){const E=et(l),x=mr.EMPTY_NODE.updateChild(this.indexPath_,E);return new sr(c,x)}maxPost(){const l=mr.EMPTY_NODE.updateChild(this.indexPath_,we);return new sr(qt,l)}toString(){return he(this.indexPath_,0).join("/")}}const en=new class Jt extends Hs{compare(l,c){const E=l.node.compareTo(c.node);return 0===E?rt(l.name,c.name):E}isDefinedOn(l){return!0}indexedValueChanged(l,c){return!l.equals(c)}minPost(){return sr.MIN}maxPost(){return sr.MAX}makePost(l,c){const E=et(l);return new sr(c,E)}toString(){return".value"}};function cr(f,l,c){return{type:"child_changed",snapshotNode:l,childName:f,oldSnap:c}}class ii{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Kt}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:qt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,X.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Zr}copy(){const l=new ii;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.startAfterSet_=this.startAfterSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.endBeforeSet_=this.endBeforeSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l}}function ho(f){const l={};if(f.isDefault())return l;let c;if(f.index_===Zr?c="$priority":f.index_===en?c="$value":f.index_===Yr?c="$key":((0,X.hu)(f.index_ instanceof Tt,"Unrecognized index type!"),c=f.index_.toString()),l.orderBy=(0,X.Wl)(c),f.startSet_){const E=f.startAfterSet_?"startAfter":"startAt";l[E]=(0,X.Wl)(f.indexStartValue_),f.startNameSet_&&(l[E]+=","+(0,X.Wl)(f.indexStartName_))}if(f.endSet_){const E=f.endBeforeSet_?"endBefore":"endAt";l[E]=(0,X.Wl)(f.indexEndValue_),f.endNameSet_&&(l[E]+=","+(0,X.Wl)(f.indexEndName_))}return f.limitSet_&&(f.isViewFromLeft()?l.limitToFirst=f.limit_:l.limitToLast=f.limit_),l}function Ao(f){const l={};if(f.startSet_&&(l.sp=f.indexStartValue_,f.startNameSet_&&(l.sn=f.indexStartName_),l.sin=!f.startAfterSet_),f.endSet_&&(l.ep=f.indexEndValue_,f.endNameSet_&&(l.en=f.indexEndName_),l.ein=!f.endBeforeSet_),f.limitSet_){l.l=f.limit_;let c=f.viewFrom_;""===c&&(c=f.isViewFromLeft()?"l":"r"),l.vf=c}return f.index_!==Zr&&(l.i=f.index_.toString()),l}class oa extends Hi{constructor(l,c,E,x){super(),this.repoInfo_=l,this.onDataUpdate_=c,this.authTokenProvider_=E,this.appCheckTokenProvider_=x,this.log_=vt("p:rest:"),this.listens_={}}reportStats(l){throw new Error("Method not implemented.")}static getListenId_(l,c){return void 0!==c?"tag$"+c:((0,X.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())}listen(l,c,E,x){const U=l._path.toString();this.log_("Listen called for "+U+" "+l._queryIdentifier);const H=oa.getListenId_(l,E),ce={};this.listens_[H]=ce;const Re=ho(l._queryParams);this.restRequest_(U+".json",Re,(Be,St)=>{let Mt=St;if(404===Be&&(Mt=null,Be=null),null===Be&&this.onDataUpdate_(U,Mt,!1,E),(0,X.DV)(this.listens_,H)===ce){let Vt;Vt=Be?401===Be?"permission_denied":"rest_error:"+Be:"ok",x(Vt,null)}})}unlisten(l,c){const E=oa.getListenId_(l,c);delete this.listens_[E]}get(l){const c=ho(l._queryParams),E=l._path.toString(),x=new X.BH;return this.restRequest_(E+".json",c,(U,H)=>{let ce=H;404===U&&(ce=null,U=null),null===U?(this.onDataUpdate_(E,ce,!1,null),x.resolve(ce)):x.reject(new Error(ce))}),x.promise}refreshAuthToken(l){}restRequest_(l,c={},E){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([x,U])=>{x&&x.accessToken&&(c.auth=x.accessToken),U&&U.token&&(c.ac=U.token);const H=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+l+"?ns="+this.repoInfo_.namespace+(0,X.xO)(c);this.log_("Sending REST request for "+H);const ce=new XMLHttpRequest;ce.onreadystatechange=()=>{if(E&&4===ce.readyState){this.log_("REST Response for "+H+" received. status:",ce.status,"response:",ce.responseText);let Re=null;if(ce.status>=200&&ce.status<300){try{Re=(0,X.cI)(ce.responseText)}catch{je("Failed to parse JSON response for "+H+": "+ce.responseText)}E(null,Re)}else 401!==ce.status&&404!==ce.status&&je("Got unsuccessful REST response for "+H+" Status: "+ce.status),E(ce.status);E=null}},ce.open("GET",H,!0),ce.send()})}}class aa{constructor(){this.rootNode_=mr.EMPTY_NODE}getNode(l){return this.rootNode_.getChild(l)}updateSnapshot(l,c){this.rootNode_=this.rootNode_.updateChild(l,c)}}function Gs(){return{value:null,children:new Map}}function eo(f,l,c){if(Z(l))f.value=c,f.children.clear();else if(null!==f.value)f.value=f.value.updateChild(l,c);else{const E=Dn(l);f.children.has(E)||f.children.set(E,Gs()),eo(f.children.get(E),l=Zn(l),c)}}function zo(f,l,c){null!==f.value?c(l,f.value):function Dt(f,l){f.children.forEach((c,E)=>{l(E,c)})}(f,(E,x)=>{zo(x,new Tn(l.toString()+"/"+E),c)})}class wr{constructor(l){this.collection_=l,this.last_=null}get(){const l=this.collection_.get(),c=Object.assign({},l);return this.last_&&It(this.last_,(E,x)=>{c[E]=c[E]-x}),this.last_=l,c}}class Va{constructor(l,c){this.server_=c,this.statsToReport_={},this.statsListener_=new wr(l);const E=1e4+2e4*Math.random();hr(this.reportStats_.bind(this),Math.floor(E))}reportStats_(){const l=this.statsListener_.get(),c={};let E=!1;It(l,(x,U)=>{U>0&&(0,X.r3)(this.statsToReport_,x)&&(c[x]=U,E=!0)}),E&&this.server_.reportStats(c),hr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var is=(()=>{return(f=is||(is={}))[f.OVERWRITE=0]="OVERWRITE",f[f.MERGE=1]="MERGE",f[f.ACK_USER_WRITE=2]="ACK_USER_WRITE",f[f.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",is;var f})();function ua(f){return{fromUser:!1,fromServer:!0,queryId:f,tagged:!0}}class Ws{constructor(l,c,E){this.path=l,this.affectedTree=c,this.revert=E,this.type=is.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(l){if(Z(this.path)){if(null!=this.affectedTree.value)return(0,X.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Tn(l));return new Ws(In(),c,this.revert)}}return(0,X.hu)(Dn(this.path)===l,"operationForChild called for unrelated child."),new Ws(Zn(this.path),this.affectedTree,this.revert)}}class po{constructor(l,c,E){this.source=l,this.path=c,this.snap=E,this.type=is.OVERWRITE}operationForChild(l){return Z(this.path)?new po(this.source,In(),this.snap.getImmediateChild(l)):new po(this.source,Zn(this.path),this.snap)}}class Vi{constructor(l,c,E){this.source=l,this.path=c,this.children=E,this.type=is.MERGE}operationForChild(l){if(Z(this.path)){const c=this.children.subtree(new Tn(l));return c.isEmpty()?null:c.value?new po(this.source,In(),c.value):new Vi(this.source,In(),c)}return(0,X.hu)(Dn(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new Vi(this.source,Zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ei{constructor(l,c,E){this.node_=l,this.fullyInitialized_=c,this.filtered_=E}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(l){if(Z(l))return this.isFullyInitialized()&&!this.filtered_;const c=Dn(l);return this.isCompleteForChild(c)}isCompleteForChild(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)}getNode(){return this.node_}}function Rs(f,l,c,E,x,U){const H=E.filter(ce=>ce.type===c);H.sort((ce,Re)=>function la(f,l,c){if(null==l.childName||null==c.childName)throw(0,X.g5)("Should only compare child_ events.");const E=new sr(l.childName,l.snapshotNode),x=new sr(c.childName,c.snapshotNode);return f.index_.compare(E,x)}(f,ce,Re)),H.forEach(ce=>{const Re=function Uu(f,l,c){return"value"===l.type||"child_removed"===l.type||(l.prevName=c.getPredecessorChildName(l.childName,l.snapshotNode,f.index_)),l}(f,ce,U);x.forEach(Be=>{Be.respondsTo(ce.type)&&l.push(Be.createEvent(Re,f.query_))})})}function Mi(f,l){return{eventCache:f,serverCache:l}}function vs(f,l,c,E){return Mi(new Ei(l,c,E),f.serverCache)}function xo(f,l,c,E){return Mi(f.eventCache,new Ei(l,c,E))}function Ps(f){return f.eventCache.isFullyInitialized()?f.eventCache.getNode():null}function Mo(f){return f.serverCache.isFullyInitialized()?f.serverCache.getNode():null}let Wi;class rr{constructor(l,c=(()=>(Wi||(Wi=new ir(at)),Wi))()){this.value=l,this.children=c}static fromObject(l){let c=new rr(null);return It(l,(E,x)=>{c=c.set(new Tn(E),x)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(l,c){if(null!=this.value&&c(this.value))return{path:In(),value:this.value};if(Z(l))return null;{const E=Dn(l),x=this.children.get(E);if(null!==x){const U=x.findRootMostMatchingPathAndValue(Zn(l),c);return null!=U?{path:He(new Tn(E),U.path),value:U.value}:null}return null}}findRootMostValueAndPath(l){return this.findRootMostMatchingPathAndValue(l,()=>!0)}subtree(l){if(Z(l))return this;{const c=Dn(l),E=this.children.get(c);return null!==E?E.subtree(Zn(l)):new rr(null)}}set(l,c){if(Z(l))return new rr(c,this.children);{const E=Dn(l),U=(this.children.get(E)||new rr(null)).set(Zn(l),c),H=this.children.insert(E,U);return new rr(this.value,H)}}remove(l){if(Z(l))return this.children.isEmpty()?new rr(null):new rr(null,this.children);{const c=Dn(l),E=this.children.get(c);if(E){const x=E.remove(Zn(l));let U;return U=x.isEmpty()?this.children.remove(c):this.children.insert(c,x),null===this.value&&U.isEmpty()?new rr(null):new rr(this.value,U)}return this}}get(l){if(Z(l))return this.value;{const c=Dn(l),E=this.children.get(c);return E?E.get(Zn(l)):null}}setTree(l,c){if(Z(l))return c;{const E=Dn(l),U=(this.children.get(E)||new rr(null)).setTree(Zn(l),c);let H;return H=U.isEmpty()?this.children.remove(E):this.children.insert(E,U),new rr(this.value,H)}}fold(l){return this.fold_(In(),l)}fold_(l,c){const E={};return this.children.inorderTraversal((x,U)=>{E[x]=U.fold_(He(l,x),c)}),c(l,this.value,E)}findOnPath(l,c){return this.findOnPath_(l,In(),c)}findOnPath_(l,c,E){const x=!!this.value&&E(c,this.value);if(x)return x;if(Z(l))return null;{const U=Dn(l),H=this.children.get(U);return H?H.findOnPath_(Zn(l),He(c,U),E):null}}foreachOnPath(l,c){return this.foreachOnPath_(l,In(),c)}foreachOnPath_(l,c,E){if(Z(l))return this;{this.value&&E(c,this.value);const x=Dn(l),U=this.children.get(x);return U?U.foreachOnPath_(Zn(l),He(c,x),E):new rr(null)}}foreach(l){this.foreach_(In(),l)}foreach_(l,c){this.children.inorderTraversal((E,x)=>{x.foreach_(He(l,E),c)}),this.value&&c(l,this.value)}foreachChild(l){this.children.inorderTraversal((c,E)=>{E.value&&l(c,E.value)})}}class Ns{constructor(l){this.writeTree_=l}static empty(){return new Ns(new rr(null))}}function ca(f,l,c){if(Z(l))return new Ns(new rr(c));{const E=f.writeTree_.findRootMostValueAndPath(l);if(null!=E){const x=E.path;let U=E.value;const H=ve(x,l);return U=U.updateChild(H,c),new Ns(f.writeTree_.set(x,U))}{const x=new rr(c),U=f.writeTree_.setTree(l,x);return new Ns(U)}}}function Os(f,l,c){let E=f;return It(c,(x,U)=>{E=ca(E,He(l,x),U)}),E}function Ba(f,l){if(Z(l))return Ns.empty();{const c=f.writeTree_.setTree(l,new rr(null));return new Ns(c)}}function da(f,l){return null!=ks(f,l)}function ks(f,l){const c=f.writeTree_.findRootMostValueAndPath(l);return null!=c?f.writeTree_.get(c.path).getChild(ve(c.path,l)):null}function Ro(f){const l=[],c=f.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(Zr,(E,x)=>{l.push(new sr(E,x))}):f.writeTree_.children.inorderTraversal((E,x)=>{null!=x.value&&l.push(new sr(E,x.value))}),l}function to(f,l){if(Z(l))return f;{const c=ks(f,l);return new Ns(null!=c?new rr(c):f.writeTree_.subtree(l))}}function gi(f){return f.writeTree_.isEmpty()}function hi(f,l){return Rr(In(),f.writeTree_,l)}function Rr(f,l,c){if(null!=l.value)return c.updateChild(f,l.value);{let E=null;return l.children.inorderTraversal((x,U)=>{".priority"===x?((0,X.hu)(null!==U.value,"Priority writes must always be leaf nodes"),E=U.value):c=Rr(He(f,x),U,c)}),!c.getChild(f).isEmpty()&&null!==E&&(c=c.updateChild(He(f,".priority"),E)),c}}function $a(f,l){return Lt(l,f)}function ha(f,l){if(f.snap)return Xt(f.path,l);for(const c in f.children)if(f.children.hasOwnProperty(c)&&Xt(He(f.path,c),l))return!0;return!1}function fa(f){return f.visible}function ja(f,l,c){let E=Ns.empty();for(let x=0;x<f.length;++x){const U=f[x];if(l(U)){const H=U.path;let ce;if(U.snap)Xt(c,H)?(ce=ve(c,H),E=ca(E,ce,U.snap)):Xt(H,c)&&(ce=ve(H,c),E=ca(E,In(),U.snap.getChild(ce)));else{if(!U.children)throw(0,X.g5)("WriteRecord should have .snap or .children");if(Xt(c,H))ce=ve(c,H),E=Os(E,ce,U.children);else if(Xt(H,c))if(ce=ve(H,c),Z(ce))E=Os(E,In(),U.children);else{const Re=(0,X.DV)(U.children,Dn(ce));if(Re){const Be=Re.getChild(Zn(ce));E=ca(E,In(),Be)}}}}}return E}function k(f,l,c,E,x){if(E||x){const U=to(f.visibleWrites,l);return!x&&gi(U)?c:x||null!=c||da(U,In())?hi(ja(f.allWrites,function(Be){return(Be.visible||x)&&(!E||!~E.indexOf(Be.writeId))&&(Xt(Be.path,l)||Xt(l,Be.path))},l),c||mr.EMPTY_NODE):null}{const U=ks(f.visibleWrites,l);if(null!=U)return U;{const H=to(f.visibleWrites,l);return gi(H)?c:null!=c||da(H,In())?hi(H,c||mr.EMPTY_NODE):null}}}function Rn(f,l,c,E){return k(f.writeTree,f.treePath,l,c,E)}function Qr(f,l){return function G(f,l,c){let E=mr.EMPTY_NODE;const x=ks(f.visibleWrites,l);if(x)return x.isLeafNode()||x.forEachChild(Zr,(U,H)=>{E=E.updateImmediateChild(U,H)}),E;if(c){const U=to(f.visibleWrites,l);return c.forEachChild(Zr,(H,ce)=>{const Re=hi(to(U,new Tn(H)),ce);E=E.updateImmediateChild(H,Re)}),Ro(U).forEach(H=>{E=E.updateImmediateChild(H.name,H.node)}),E}return Ro(to(f.visibleWrites,l)).forEach(H=>{E=E.updateImmediateChild(H.name,H.node)}),E}(f.writeTree,f.treePath,l)}function ar(f,l,c,E){return function L(f,l,c,E,x){(0,X.hu)(E||x,"Either existingEventSnap or existingServerSnap must exist");const U=He(l,c);if(da(f.visibleWrites,U))return null;{const H=to(f.visibleWrites,U);return gi(H)?x.getChild(c):hi(H,x.getChild(c))}}(f.writeTree,f.treePath,l,c,E)}function Or(f,l){return function xe(f,l){return ks(f.visibleWrites,l)}(f.writeTree,He(f.treePath,l))}function Ri(f,l,c){return function ie(f,l,c,E){const x=He(l,c),U=ks(f.visibleWrites,x);return null!=U?U:E.isCompleteForChild(c)?hi(to(f.visibleWrites,x),E.getNode().getImmediateChild(c)):null}(f.writeTree,f.treePath,l,c)}function mi(f,l){return Lt(He(f.treePath,l),f.writeTree)}function Lt(f,l){return{treePath:f,writeTree:l}}class fi{constructor(){this.changeMap=new Map}trackChildChange(l){const c=l.type,E=l.childName;(0,X.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,X.hu)(".priority"!==E,"Only non-priority child changes can be tracked.");const x=this.changeMap.get(E);if(x){const U=x.type;if("child_added"===c&&"child_removed"===U)this.changeMap.set(E,cr(E,l.snapshotNode,x.snapshotNode));else if("child_removed"===c&&"child_added"===U)this.changeMap.delete(E);else if("child_removed"===c&&"child_changed"===U)this.changeMap.set(E,function Un(f,l){return{type:"child_removed",snapshotNode:l,childName:f}}(E,x.oldSnap));else if("child_changed"===c&&"child_added"===U)this.changeMap.set(E,function Ln(f,l){return{type:"child_added",snapshotNode:l,childName:f}}(E,l.snapshotNode));else{if("child_changed"!==c||"child_changed"!==U)throw(0,X.g5)("Illegal combination of changes: "+l+" occurred after "+x);this.changeMap.set(E,cr(E,l.snapshotNode,x.oldSnap))}}else this.changeMap.set(E,l)}getChanges(){return Array.from(this.changeMap.values())}}const Ls=new class wi{getCompleteChild(l){return null}getChildAfterChild(l,c,E){return null}};class un{constructor(l,c,E=null){this.writes_=l,this.viewCache_=c,this.optCompleteServerCache_=E}getCompleteChild(l){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(l))return c.getNode().getImmediateChild(l);{const E=null!=this.optCompleteServerCache_?new Ei(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ri(this.writes_,l,E)}}getChildAfterChild(l,c,E){const x=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Mo(this.viewCache_),U=function Dr(f,l,c,E,x,U){return function pt(f,l,c,E,x,U,H){let ce;const Re=to(f.visibleWrites,l),Be=ks(Re,In());if(null!=Be)ce=Be;else{if(null==c)return[];ce=hi(Re,c)}if(ce=ce.withIndex(H),ce.isEmpty()||ce.isLeafNode())return[];{const St=[],Mt=H.getCompare(),Vt=U?ce.getReverseIteratorFrom(E,H):ce.getIteratorFrom(E,H);let kn=Vt.getNext();for(;kn&&St.length<x;)0!==Mt(kn,E)&&St.push(kn),kn=Vt.getNext();return St}}(f.writeTree,f.treePath,l,c,E,x,U)}(this.writes_,x,c,1,E,l);return 0===U.length?null:U[0]}}function zt(f,l,c,E,x,U){const H=l.eventCache;if(null!=Or(E,c))return l;{let ce,Re;if(Z(c))if((0,X.hu)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){const Be=Mo(l),Mt=Qr(E,Be instanceof mr?Be:mr.EMPTY_NODE);ce=f.filter.updateFullNode(l.eventCache.getNode(),Mt,U)}else{const Be=Rn(E,Mo(l));ce=f.filter.updateFullNode(l.eventCache.getNode(),Be,U)}else{const Be=Dn(c);if(".priority"===Be){(0,X.hu)(1===Xn(c),"Can't have a priority with additional path components");const St=H.getNode();Re=l.serverCache.getNode();const Mt=ar(E,c,St,Re);ce=null!=Mt?f.filter.updatePriority(St,Mt):H.getNode()}else{const St=Zn(c);let Mt;if(H.isCompleteForChild(Be)){Re=l.serverCache.getNode();const Vt=ar(E,c,H.getNode(),Re);Mt=null!=Vt?H.getNode().getImmediateChild(Be).updateChild(St,Vt):H.getNode().getImmediateChild(Be)}else Mt=Ri(E,Be,l.serverCache);ce=null!=Mt?f.filter.updateChild(H.getNode(),Be,Mt,St,x,U):H.getNode()}}return vs(l,ce,H.isFullyInitialized()||Z(c),f.filter.filtersNodes())}}function Bi(f,l,c,E,x,U,H,ce){const Re=l.serverCache;let Be;const St=H?f.filter:f.filter.getIndexedFilter();if(Z(c))Be=St.updateFullNode(Re.getNode(),E,null);else if(St.filtersNodes()&&!Re.isFiltered()){const kn=Re.getNode().updateChild(c,E);Be=St.updateFullNode(Re.getNode(),kn,null)}else{const kn=Dn(c);if(!Re.isCompleteForPath(c)&&Xn(c)>1)return l;const fr=Zn(c),Ks=Re.getNode().getImmediateChild(kn).updateChild(fr,E);Be=".priority"===kn?St.updatePriority(Re.getNode(),Ks):St.updateChild(Re.getNode(),kn,Ks,fr,Ls,null)}const Mt=xo(l,Be,Re.isFullyInitialized()||Z(c),St.filtersNodes());return zt(f,Mt,c,x,new un(x,Mt,U),ce)}function Ha(f,l,c,E,x,U,H){const ce=l.eventCache;let Re,Be;const St=new un(x,l,U);if(Z(c))Be=f.filter.updateFullNode(l.eventCache.getNode(),E,H),Re=vs(l,Be,!0,f.filter.filtersNodes());else{const Mt=Dn(c);if(".priority"===Mt)Be=f.filter.updatePriority(l.eventCache.getNode(),E),Re=vs(l,Be,ce.isFullyInitialized(),ce.isFiltered());else{const Vt=Zn(c),kn=ce.getNode().getImmediateChild(Mt);let fr;if(Z(Vt))fr=E;else{const Ci=St.getCompleteChild(Mt);fr=null!=Ci?".priority"===fe(Vt)&&Ci.getChild(Ie(Vt)).isEmpty()?Ci:Ci.updateChild(Vt,E):mr.EMPTY_NODE}Re=kn.equals(fr)?l:vs(l,f.filter.updateChild(ce.getNode(),Mt,fr,Vt,St,H),ce.isFullyInitialized(),f.filter.filtersNodes())}}return Re}function Bu(f,l){return f.eventCache.isCompleteForChild(l)}function mo(f,l,c){return c.foreach((E,x)=>{l=l.updateChild(E,x)}),l}function $u(f,l,c,E,x,U,H,ce){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;let Be,Re=l;Be=Z(c)?E:new rr(null).setTree(c,E);const St=l.serverCache.getNode();return Be.children.inorderTraversal((Mt,Vt)=>{if(St.hasChild(Mt)){const fr=mo(0,l.serverCache.getNode().getImmediateChild(Mt),Vt);Re=Bi(f,Re,new Tn(Mt),fr,x,U,H,ce)}}),Be.children.inorderTraversal((Mt,Vt)=>{const kn=!l.serverCache.isCompleteForChild(Mt)&&null===Vt.value;if(!St.hasChild(Mt)&&!kn){const Ci=mo(0,l.serverCache.getNode().getImmediateChild(Mt),Vt);Re=Bi(f,Re,new Tn(Mt),Ci,x,U,H,ce)}}),Re}function Ir(f,l){const c=Mo(f.viewCache_);return c&&(f.query._queryParams.loadsAllData()||!Z(l)&&!c.getImmediateChild(Dn(l)).isEmpty())?c.getChild(l):null}function Yn(f,l,c,E){l.type===is.MERGE&&null!==l.source.queryId&&((0,X.hu)(Mo(f.viewCache_),"We should always have a full cache before handling merges"),(0,X.hu)(Ps(f.viewCache_),"Missing event cache, even though we have a server cache"));const x=f.viewCache_,U=function sn(f,l,c,E,x){const U=new fi;let H,ce;if(c.type===is.OVERWRITE){const Be=c;Be.source.fromUser?H=Ha(f,l,Be.path,Be.snap,E,x,U):((0,X.hu)(Be.source.fromServer,"Unknown source."),ce=Be.source.tagged||l.serverCache.isFiltered()&&!Z(Be.path),H=Bi(f,l,Be.path,Be.snap,E,x,ce,U))}else if(c.type===is.MERGE){const Be=c;Be.source.fromUser?H=function Kl(f,l,c,E,x,U,H){let ce=l;return E.foreach((Re,Be)=>{const St=He(c,Re);Bu(l,Dn(St))&&(ce=Ha(f,ce,St,Be,x,U,H))}),E.foreach((Re,Be)=>{const St=He(c,Re);Bu(l,Dn(St))||(ce=Ha(f,ce,St,Be,x,U,H))}),ce}(f,l,Be.path,Be.children,E,x,U):((0,X.hu)(Be.source.fromServer,"Unknown source."),ce=Be.source.tagged||l.serverCache.isFiltered(),H=$u(f,l,Be.path,Be.children,E,x,ce,U))}else if(c.type===is.ACK_USER_WRITE){const Be=c;H=Be.revert?function Ml(f,l,c,E,x,U){let H;if(null!=Or(E,c))return l;{const ce=new un(E,l,x),Re=l.eventCache.getNode();let Be;if(Z(c)||".priority"===Dn(c)){let St;if(l.serverCache.isFullyInitialized())St=Rn(E,Mo(l));else{const Mt=l.serverCache.getNode();(0,X.hu)(Mt instanceof mr,"serverChildren would be complete if leaf node"),St=Qr(E,Mt)}Be=f.filter.updateFullNode(Re,St,U)}else{const St=Dn(c);let Mt=Ri(E,St,l.serverCache);null==Mt&&l.serverCache.isCompleteForChild(St)&&(Mt=Re.getImmediateChild(St)),Be=null!=Mt?f.filter.updateChild(Re,St,Mt,Zn(c),ce,U):l.eventCache.getNode().hasChild(St)?f.filter.updateChild(Re,St,mr.EMPTY_NODE,Zn(c),ce,U):Re,Be.isEmpty()&&l.serverCache.isFullyInitialized()&&(H=Rn(E,Mo(l)),H.isLeafNode()&&(Be=f.filter.updateFullNode(Be,H,U)))}return H=l.serverCache.isFullyInitialized()||null!=Or(E,In()),vs(l,Be,H,f.filter.filtersNodes())}}(f,l,Be.path,E,x,U):function ju(f,l,c,E,x,U,H){if(null!=Or(x,c))return l;const ce=l.serverCache.isFiltered(),Re=l.serverCache;if(null!=E.value){if(Z(c)&&Re.isFullyInitialized()||Re.isCompleteForPath(c))return Bi(f,l,c,Re.getNode().getChild(c),x,U,ce,H);if(Z(c)){let Be=new rr(null);return Re.getNode().forEachChild(Yr,(St,Mt)=>{Be=Be.set(new Tn(St),Mt)}),$u(f,l,c,Be,x,U,ce,H)}return l}{let Be=new rr(null);return E.foreach((St,Mt)=>{const Vt=He(c,St);Re.isCompleteForPath(Vt)&&(Be=Be.set(St,Re.getNode().getChild(Vt)))}),$u(f,l,c,Be,x,U,ce,H)}}(f,l,Be.path,Be.affectedTree,E,x,U)}else{if(c.type!==is.LISTEN_COMPLETE)throw(0,X.g5)("Unknown operation type: "+c.type);H=function Ta(f,l,c,E,x){const U=l.serverCache;return zt(f,xo(l,U.getNode(),U.isFullyInitialized()||Z(c),U.isFiltered()),c,E,Ls,x)}(f,l,c.path,E,U)}const Re=U.getChanges();return function ht(f,l,c){const E=l.eventCache;if(E.isFullyInitialized()){const x=E.getNode().isLeafNode()||E.getNode().isEmpty(),U=Ps(f);(c.length>0||!f.eventCache.isFullyInitialized()||x&&!E.getNode().equals(U)||!E.getNode().getPriority().equals(U.getPriority()))&&c.push(function Kn(f){return{type:"value",snapshotNode:f}}(Ps(l)))}}(l,H,Re),{viewCache:H,changes:Re}}(f.processor_,x,l,c,E);return function Es(f,l){(0,X.hu)(l.eventCache.getNode().isIndexed(f.filter.getIndex()),"Event snap not indexed"),(0,X.hu)(l.serverCache.getNode().isIndexed(f.filter.getIndex()),"Server snap not indexed")}(f.processor_,U.viewCache),(0,X.hu)(U.viewCache.serverCache.isFullyInitialized()||!x.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),f.viewCache_=U.viewCache,function kr(f,l,c,E){return function qo(f,l,c,E){const x=[],U=[];return l.forEach(H=>{"child_changed"===H.type&&f.index_.indexedValueChanged(H.oldSnap,H.snapshotNode)&&U.push(function Oi(f,l){return{type:"child_moved",snapshotNode:l,childName:f}}(H.childName,H.snapshotNode))}),Rs(f,x,"child_removed",l,E,c),Rs(f,x,"child_added",l,E,c),Rs(f,x,"child_moved",U,E,c),Rs(f,x,"child_changed",l,E,c),Rs(f,x,"value",l,E,c),x}(f.eventGenerator_,l,c,E?[E]:f.eventRegistrations_)}(f,U.changes,U.viewCache.eventCache.getNode(),null)}let iu,No;function Sa(f,l,c,E){const x=l.source.queryId;if(null!==x){const U=f.views.get(x);return(0,X.hu)(null!=U,"SyncTree gave us an op for an invalid query."),Yn(U,l,c,E)}{let U=[];for(const H of f.views.values())U=U.concat(Yn(H,l,c,E));return U}}function no(f,l){let c=null;for(const E of f.views.values())c=c||Ir(E,l);return c}class au{constructor(l){this.listenProvider_=l,this.syncPointTree_=new rr(null),this.pendingWriteTree_=function Ft(){return{visibleWrites:Ns.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Oo(f,l,c,E,x){return function Zo(f,l,c,E,x){(0,X.hu)(E>f.lastWriteId,"Stacking an older write on top of newer ones"),void 0===x&&(x=!0),f.allWrites.push({path:l,snap:c,writeId:E,visible:x}),x&&(f.visibleWrites=ca(f.visibleWrites,l,c)),f.lastWriteId=E}(f.pendingWriteTree_,l,c,E,x),x?hs(f,new po({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,c)):[]}function ga(f,l,c=!1){const E=function dl(f,l){for(let c=0;c<f.allWrites.length;c++){const E=f.allWrites[c];if(E.writeId===l)return E}return null}(f.pendingWriteTree_,l);if(function Fs(f,l){const c=f.allWrites.findIndex(ce=>ce.writeId===l);(0,X.hu)(c>=0,"removeWrite called with nonexistent writeId.");const E=f.allWrites[c];f.allWrites.splice(c,1);let x=E.visible,U=!1,H=f.allWrites.length-1;for(;x&&H>=0;){const ce=f.allWrites[H];ce.visible&&(H>=c&&ha(ce,E.path)?x=!1:Xt(E.path,ce.path)&&(U=!0)),H--}return!!x&&(U?(function Vu(f){f.visibleWrites=ja(f.allWrites,fa,In()),f.lastWriteId=f.allWrites.length>0?f.allWrites[f.allWrites.length-1].writeId:-1}(f),!0):(E.snap?f.visibleWrites=Ba(f.visibleWrites,E.path):It(E.children,Re=>{f.visibleWrites=Ba(f.visibleWrites,He(E.path,Re))}),!0))}(f.pendingWriteTree_,l)){let U=new rr(null);return null!=E.snap?U=U.set(In(),!0):It(E.children,H=>{U=U.set(new Tn(H),!0)}),hs(f,new Ws(E.path,U,c))}return[]}function ko(f,l,c){return hs(f,new po({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,c))}function ma(f,l,c){const x=f.pendingWriteTree_,U=f.syncPointTree_.findOnPath(l,(H,ce)=>{const Be=no(ce,ve(H,l));if(Be)return Be});return k(x,l,U,c,!0)}function hs(f,l){return Ji(l,f.syncPointTree_,null,$a(f.pendingWriteTree_,In()))}function Ji(f,l,c,E){if(Z(f.path))return fl(f,l,c,E);{const x=l.get(In());null==c&&null!=x&&(c=no(x,In()));let U=[];const H=Dn(f.path),ce=f.operationForChild(H),Re=l.children.get(H);if(Re&&ce){const Be=c?c.getImmediateChild(H):null,St=mi(E,H);U=U.concat(Ji(ce,Re,Be,St))}return x&&(U=U.concat(Sa(x,f,E,c))),U}}function fl(f,l,c,E){const x=l.get(In());null==c&&null!=x&&(c=no(x,In()));let U=[];return l.children.inorderTraversal((H,ce)=>{const Re=c?c.getImmediateChild(H):null,Be=mi(E,H),St=f.operationForChild(H);St&&(U=U.concat(fl(St,ce,Re,Be)))}),x&&(U=U.concat(Sa(x,f,E,c))),U}function za(f,l){return f.tagToQueryMap.get(l)}function lu(f){const l=f.indexOf("$");return(0,X.hu)(-1!==l&&l<f.length-1,"Bad queryKey."),{queryId:f.substr(l+1),path:new Tn(f.substr(0,l))}}function Gu(f,l,c){const E=f.syncPointTree_.get(l);return(0,X.hu)(E,"Missing sync point for query tag that we're tracking"),Sa(E,c,$a(f.pendingWriteTree_,l),null)}class O{constructor(l){this.node_=l}getImmediateChild(l){const c=this.node_.getImmediateChild(l);return new O(c)}node(){return this.node_}}class ${constructor(l,c){this.syncTree_=l,this.path_=c}getImmediateChild(l){const c=He(this.path_,l);return new $(this.syncTree_,c)}node(){return ma(this.syncTree_,this.path_)}}const J=function(f){return(f=f||{}).timestamp=f.timestamp||(new Date).getTime(),f},le=function(f,l,c){return f&&"object"==typeof f?((0,X.hu)(".sv"in f,"Unexpected leaf node or priority contents"),"string"==typeof f[".sv"]?ze(f[".sv"],l,c):"object"==typeof f[".sv"]?At(f[".sv"],l):void(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2))):f},ze=function(f,l,c){if("timestamp"===f)return c.timestamp;(0,X.hu)(!1,"Unexpected server value: "+f)},At=function(f,l,c){f.hasOwnProperty("increment")||(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(f,null,2));const E=f.increment;"number"!=typeof E&&(0,X.hu)(!1,"Unexpected increment value: "+E);const x=l.node();if((0,X.hu)(null!==x&&typeof x<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!x.isLeafNode())return E;const H=x.getValue();return"number"!=typeof H?E:H+E},Cn=function(f,l,c,E){return Jr(l,new $(c,f),E)},En=function(f,l,c){return Jr(f,new O(l),c)};function Jr(f,l,c){const E=f.getPriority().val(),x=le(E,l.getImmediateChild(".priority"),c);let U;if(f.isLeafNode()){const H=f,ce=le(H.getValue(),l,c);return ce!==H.getValue()||x!==H.getPriority().val()?new $o(ce,et(x)):f}{const H=f;return U=H,x!==H.getPriority().val()&&(U=U.updatePriority(new $o(x))),H.forEachChild(Zr,(ce,Re)=>{const Be=Jr(Re,l.getImmediateChild(ce),c);Be!==Re&&(U=U.updateImmediateChild(ce,Be))}),U}}class Si{constructor(l="",c=null,E={children:{},childCount:0}){this.name=l,this.parent=c,this.node=E}}function Fo(f,l){let c=l instanceof Tn?l:new Tn(l),E=f,x=Dn(c);for(;null!==x;){const U=(0,X.DV)(E.node.children,x)||{children:{},childCount:0};E=new Si(x,E,U),c=Zn(c),x=Dn(c)}return E}function Ii(f){return f.node.value}function Lo(f,l){f.node.value=l,ci(f)}function as(f){return f.node.childCount>0}function $r(f,l){It(f.node.children,(c,E)=>{l(new Si(c,f,E))})}function Yo(f,l,c,E){c&&!E&&l(f),$r(f,x=>{Yo(x,l,!0,E)}),c&&E&&l(f)}function pi(f){return new Tn(null===f.parent?f.name:pi(f.parent)+"/"+f.name)}function ci(f){null!==f.parent&&function cu(f,l,c){const E=function Ko(f){return void 0===Ii(f)&&!as(f)}(c),x=(0,X.r3)(f.node.children,l);E&&x?(delete f.node.children[l],f.node.childCount--,ci(f)):!E&&!x&&(f.node.children[l]=c.node,f.node.childCount++,ci(f))}(f.parent,f.name,f)}const ws=/[\[\].#$\/\u0000-\u001F\u007F]/,$i=/[\[\].#$\u0000-\u001F\u007F]/,Wu=10485760,qa=function(f){return"string"==typeof f&&0!==f.length&&!ws.test(f)},Aa=function(f,l,c){const E=c instanceof Tn?new $n(c,f):c;if(void 0===l)throw new Error(f+"contains undefined "+dr(E));if("function"==typeof l)throw new Error(f+"contains a function "+dr(E)+" with contents = "+l.toString());if(ln(l))throw new Error(f+"contains "+l.toString()+" "+dr(E));if("string"==typeof l&&l.length>Wu/3&&(0,X.ug)(l)>Wu)throw new Error(f+"contains a string greater than "+Wu+" utf8 bytes "+dr(E)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){let x=!1,U=!1;if(It(l,(H,ce)=>{if(".value"===H)x=!0;else if(".priority"!==H&&".sv"!==H&&(U=!0,!qa(H)))throw new Error(f+" contains an invalid key ("+H+") "+dr(E)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function vn(f,l){f.parts_.length>0&&(f.byteLength_+=1),f.parts_.push(l),f.byteLength_+=(0,X.ug)(l),Ti(f)})(E,H),Aa(f,ce,E),function br(f){const l=f.parts_.pop();f.byteLength_-=(0,X.ug)(l),f.parts_.length>0&&(f.byteLength_-=1)}(E)}),x&&U)throw new Error(f+' contains ".value" child '+dr(E)+" in addition to actual children.")}},_a=function(f,l){const c=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!qa(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==c.length&&!function(f){return f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),function(f){return"string"==typeof f&&0!==f.length&&!$i.test(f)}(f)}(c))throw new Error((0,X.gK)(f,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Jo{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Li(f,l,c){(function qu(f,l){let c=null;for(let E=0;E<l.length;E++){const x=l[E],U=x.getPath();null!==c&&!_t(U,c.path)&&(f.eventLists_.push(c),c=null),null===c&&(c={events:[],path:U}),c.events.push(x)}c&&f.eventLists_.push(c)})(f,c),function du(f,l){f.recursionDepth_++;let c=!0;for(let E=0;E<f.eventLists_.length;E++){const x=f.eventLists_[E];x&&(l(x.path)?(Au(f.eventLists_[E]),f.eventLists_[E]=null):c=!1)}c&&(f.eventLists_=[]),f.recursionDepth_--}(f,E=>Xt(E,l)||Xt(l,E))}function Au(f){for(let l=0;l<f.events.length;l++){const c=f.events[l];if(null!==c){f.events[l]=null;const E=c.getEventRunner();ft&&Je("event: "+c.toString()),pr(E)}}}const Xl="repo_interrupt",xu=25;class io{constructor(l,c,E,x){this.repoInfo_=l,this.forceRestClient_=c,this.authTokenProvider_=E,this.appCheckProvider_=x,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Jo,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gs(),this.transactionQueueTree_=new Si,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Qa(f){const c=f.infoData_.getNode(new Tn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function Ja(f){return J({timestamp:Qa(f)})}function pl(f,l,c,E,x){f.dataUpdateCount++;const U=new Tn(l);c=f.interceptServerDataCallback_?f.interceptServerDataCallback_(l,c):c;let H=[];if(x)if(E){const Re=(0,X.UI)(c,Be=>et(Be));H=function ms(f,l,c,E){const x=za(f,E);if(x){const U=lu(x),H=U.path,ce=U.queryId,Re=ve(H,l),Be=rr.fromObject(c);return Gu(f,H,new Vi(ua(ce),Re,Be))}return[]}(f.serverSyncTree_,U,Re,x)}else{const Re=et(c);H=function pd(f,l,c,E){const x=za(f,E);if(null!=x){const U=lu(x),H=U.path,ce=U.queryId,Re=ve(H,l);return Gu(f,H,new po(ua(ce),Re,c))}return[]}(f.serverSyncTree_,U,Re,x)}else if(E){const Re=(0,X.UI)(c,Be=>et(Be));H=function fd(f,l,c){const E=rr.fromObject(c);return hs(f,new Vi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,E))}(f.serverSyncTree_,U,Re)}else{const Re=et(c);H=ko(f.serverSyncTree_,U,Re)}let ce=U;H.length>0&&(ce=Xo(f,U)),Li(f.eventQueue_,ce,H)}function Mu(f,l){qs(f,"connected",l),!1===l&&function fc(f){Ku(f,"onDisconnectEvents");const l=Ja(f),c=Gs();zo(f.onDisconnect_,In(),(x,U)=>{const H=Cn(x,U,f.serverSyncTree_,l);eo(c,x,H)});let E=[];zo(c,In(),(x,U)=>{E=E.concat(ko(f.serverSyncTree_,x,U));const H=function ml(f,l){const c=pi(Ru(f,l)),E=Fo(f.transactionQueueTree_,l);return function Wa(f,l,c){let E=c?f:f.parent;for(;null!==E;){if(l(E))return!0;E=E.parent}}(E,x=>{Fl(f,x)}),Fl(f,E),Yo(E,x=>{Fl(f,x)}),c}(f,x);Xo(f,H)}),f.onDisconnect_=Gs(),Li(f.eventQueue_,In(),E)}(f)}function qs(f,l,c){const E=new Tn("/.info/"+l),x=et(c);f.infoData_.updateSnapshot(E,x);const U=ko(f.infoSyncTree_,E,x);Li(f.eventQueue_,E,U)}function Vo(f){return f.nextWriteId_++}function Ku(f,...l){let c="";f.persistentConnection_&&(c=f.persistentConnection_.id+":"),Je(c,...l)}function oi(f,l,c){return ma(f.serverSyncTree_,l,c)||mr.EMPTY_NODE}function Bo(f,l=f.transactionQueueTree_){if(l||Pu(f,l),Ii(l)){const c=gl(f,l);(0,X.hu)(c.length>0,"Sending zero length transaction queue"),c.every(x=>0===x.status)&&function Yu(f,l,c){const E=c.map(Be=>Be.currentWriteId),x=oi(f,l,E);let U=x;const H=x.hash();for(let Be=0;Be<c.length;Be++){const St=c[Be];(0,X.hu)(0===St.status,"tryToSendTransactionQueue_: items in queue should all be run."),St.status=1,St.retryCount++;const Mt=ve(l,St.path);U=U.updateChild(Mt,St.currentOutputSnapshotRaw)}const ce=U.val(!0),Re=l;f.server_.put(Re.toString(),ce,Be=>{Ku(f,"transaction put response",{path:Re.toString(),status:Be});let St=[];if("ok"===Be){const Mt=[];for(let Vt=0;Vt<c.length;Vt++)c[Vt].status=2,St=St.concat(ga(f.serverSyncTree_,c[Vt].currentWriteId)),c[Vt].onComplete&&Mt.push(()=>c[Vt].onComplete(null,!0,c[Vt].currentOutputSnapshotResolved)),c[Vt].unwatcher();Pu(f,Fo(f.transactionQueueTree_,l)),Bo(f,f.transactionQueueTree_),Li(f.eventQueue_,l,St);for(let Vt=0;Vt<Mt.length;Vt++)pr(Mt[Vt])}else{if("datastale"===Be)for(let Mt=0;Mt<c.length;Mt++)c[Mt].status=3===c[Mt].status?4:0;else{je("transaction at "+Re.toString()+" failed: "+Be);for(let Mt=0;Mt<c.length;Mt++)c[Mt].status=4,c[Mt].abortReason=Be}Xo(f,l)}},H)}(f,pi(l),c)}else as(l)&&$r(l,c=>{Bo(f,c)})}function Xo(f,l){const c=Ru(f,l),E=pi(c);return function Qu(f,l,c){if(0===l.length)return;const E=[];let x=[];const H=l.filter(ce=>0===ce.status).map(ce=>ce.currentWriteId);for(let ce=0;ce<l.length;ce++){const Re=l[ce],Be=ve(c,Re.path);let Mt,St=!1;if((0,X.hu)(null!==Be,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Re.status)St=!0,Mt=Re.abortReason,x=x.concat(ga(f.serverSyncTree_,Re.currentWriteId,!0));else if(0===Re.status)if(Re.retryCount>=xu)St=!0,Mt="maxretry",x=x.concat(ga(f.serverSyncTree_,Re.currentWriteId,!0));else{const Vt=oi(f,Re.path,H);Re.currentInputSnapshot=Vt;const kn=l[ce].update(Vt.val());if(void 0!==kn){Aa("transaction failed: Data returned ",kn,Re.path);let fr=et(kn);"object"==typeof kn&&null!=kn&&(0,X.r3)(kn,".priority")||(fr=fr.updatePriority(Vt.getPriority()));const Ks=Re.currentWriteId,Bl=Ja(f),Lc=En(fr,Vt,Bl);Re.currentOutputSnapshotRaw=fr,Re.currentOutputSnapshotResolved=Lc,Re.currentWriteId=Vo(f),H.splice(H.indexOf(Ks),1),x=x.concat(Oo(f.serverSyncTree_,Re.path,Lc,Re.currentWriteId,Re.applyLocally)),x=x.concat(ga(f.serverSyncTree_,Ks,!0))}else St=!0,Mt="nodata",x=x.concat(ga(f.serverSyncTree_,Re.currentWriteId,!0))}Li(f.eventQueue_,c,x),x=[],St&&(l[ce].status=2,setTimeout(l[ce].unwatcher,Math.floor(0)),l[ce].onComplete&&E.push("nodata"===Mt?()=>l[ce].onComplete(null,!1,l[ce].currentInputSnapshot):()=>l[ce].onComplete(new Error(Mt),!1,null)))}Pu(f,f.transactionQueueTree_);for(let ce=0;ce<E.length;ce++)pr(E[ce]);Bo(f,f.transactionQueueTree_)}(f,gl(f,c),E),E}function Ru(f,l){let c,E=f.transactionQueueTree_;for(c=Dn(l);null!==c&&void 0===Ii(E);)E=Fo(E,c),c=Dn(l=Zn(l));return E}function gl(f,l){const c=[];return kl(f,l,c),c.sort((E,x)=>E.order-x.order),c}function kl(f,l,c){const E=Ii(l);if(E)for(let x=0;x<E.length;x++)c.push(E[x]);$r(l,x=>{kl(f,x,c)})}function Pu(f,l){const c=Ii(l);if(c){let E=0;for(let x=0;x<c.length;x++)2!==c[x].status&&(c[E]=c[x],E++);c.length=E,Lo(l,c.length>0?c:void 0)}$r(l,E=>{Pu(f,E)})}function Fl(f,l){const c=Ii(l);if(c){const E=[];let x=[],U=-1;for(let H=0;H<c.length;H++)3===c[H].status||(1===c[H].status?((0,X.hu)(U===H-1,"All SENT items should be at beginning of queue."),U=H,c[H].status=3,c[H].abortReason="set"):((0,X.hu)(0===c[H].status,"Unexpected transaction status in abort"),c[H].unwatcher(),x=x.concat(ga(f.serverSyncTree_,c[H].currentWriteId,!0)),c[H].onComplete&&E.push(c[H].onComplete.bind(null,new Error("set"),!1,null))));-1===U?Lo(l,void 0):c.length=U+1,Li(f.eventQueue_,pi(l),x);for(let H=0;H<E.length;H++)pr(E[H])}}const Ju=function(f,l){const c=tc(f),E=c.namespace;return"firebase.com"===c.domain&&wt(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!E||"undefined"===E)&&"localhost"!==c.domain&&wt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&je("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new hn(c.host,c.secure,E,"ws"===c.scheme||"wss"===c.scheme,l,"",E!==c.subdomain),path:new Tn(c.pathString)}},tc=function(f){let l="",c="",E="",x="",U="",H=!0,ce="https",Re=443;if("string"==typeof f){let Be=f.indexOf("//");Be>=0&&(ce=f.substring(0,Be-1),f=f.substring(Be+2));let St=f.indexOf("/");-1===St&&(St=f.length);let Mt=f.indexOf("?");-1===Mt&&(Mt=f.length),l=f.substring(0,Math.min(St,Mt)),St<Mt&&(x=function ec(f){let l="";const c=f.split("/");for(let E=0;E<c.length;E++)if(c[E].length>0){let x=c[E];try{x=decodeURIComponent(x.replace(/\+/g," "))}catch{}l+="/"+x}return l}(f.substring(St,Mt)));const Vt=function pu(f){const l={};"?"===f.charAt(0)&&(f=f.substring(1));for(const c of f.split("&")){if(0===c.length)continue;const E=c.split("=");2===E.length?l[decodeURIComponent(E[0])]=decodeURIComponent(E[1]):je(`Invalid query segment '${c}' in query '${f}'`)}return l}(f.substring(Math.min(f.length,Mt)));Be=l.indexOf(":"),Be>=0?(H="https"===ce||"wss"===ce,Re=parseInt(l.substring(Be+1),10)):Be=l.length;const kn=l.slice(0,Be);if("localhost"===kn.toLowerCase())c="localhost";else if(kn.split(".").length<=2)c=kn;else{const fr=l.indexOf(".");E=l.substring(0,fr).toLowerCase(),c=l.substring(fr+1),U=E}"ns"in Vt&&(U=Vt.ns)}return{host:l,port:Re,domain:c,subdomain:E,secure:H,scheme:ce,pathString:x,namespace:U}};class us{constructor(l,c,E,x){this._repo=l,this._path=c,this._queryParams=E,this._orderByCalled=x}get key(){return Z(this._path)?null:fe(this._path)}get ref(){return new ls(this._repo,this._path)}get _queryIdentifier(){const l=Ao(this._queryParams),c=bt(l);return"{}"===c?"default":c}get _queryObject(){return Ao(this._queryParams)}isEqual(l){if(!((l=(0,X.m9)(l))instanceof us))return!1;const c=this._repo===l._repo,E=_t(this._path,l._path);return c&&E&&this._queryIdentifier===l._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function te(f){let l="";for(let c=f.pieceNum_;c<f.pieces_.length;c++)""!==f.pieces_[c]&&(l+="/"+encodeURIComponent(String(f.pieces_[c])));return l||"/"}(this._path)}}class ls extends us{constructor(l,c){super(l,c,new ii,!1)}get parent(){const l=Ie(this._path);return null===l?null:new ls(this._repo,l)}get root(){let l=this;for(;null!==l.parent;)l=l.parent;return l}}(function gn(f){(0,X.hu)(!iu,"__referenceConstructor has already been defined"),iu=f})(ls),function ou(f){(0,X.hu)(!No,"__referenceConstructor has already been defined"),No=f}(ls);const Ed="FIREBASE_DATABASE_EMULATOR_HOST",gu={};let Gd=!1;class Wd{constructor(l,c){this._repoInternal=l,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function xa(f,l,c){if(f.stats_=ri(f.repoInfo_),f.forceRestClient_||zr())f.server_=new oa(f.repoInfo_,(E,x,U,H)=>{pl(f,E,x,U,H)},f.authTokenProvider_,f.appCheckProvider_),setTimeout(()=>Mu(f,!0),0);else{if(typeof c<"u"&&null!==c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,X.Wl)(c)}catch(E){throw new Error("Invalid authOverride provided: "+E)}}f.persistentConnection_=new Gi(f.repoInfo_,l,(E,x,U,H)=>{pl(f,E,x,U,H)},E=>{Mu(f,E)},E=>{!function Zu(f,l){It(l,(c,E)=>{qs(f,c,E)})}(f,E)},f.authTokenProvider_,f.appCheckProvider_,c),f.server_=f.persistentConnection_}f.authTokenProvider_.addTokenChangeListener(E=>{f.server_.refreshAuthToken(E)}),f.appCheckProvider_.addTokenChangeListener(E=>{f.server_.refreshAppCheckToken(E.token)}),f.statsReporter_=function Wr(f,l){const c=f.toString();return Vr[c]||(Vr[c]=l()),Vr[c]}(f.repoInfo_,()=>new Va(f.stats_,f.server_)),f.infoData_=new aa,f.infoSyncTree_=new au({startListening:(E,x,U,H)=>{let ce=[];const Re=f.infoData_.getNode(E._path);return Re.isEmpty()||(ce=ko(f.infoSyncTree_,E._path,Re),setTimeout(()=>{H("ok")},0)),ce},stopListening:()=>{}}),qs(f,"connected",!1),f.serverSyncTree_=new au({startListening:(E,x,U,H)=>(f.server_.listen(E,U,x,(ce,Re)=>{const Be=H(ce,Re);Li(f.eventQueue_,E._path,Be)}),[]),stopListening:(E,x)=>{f.server_.unlisten(E,x)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ls(this._repo,In())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function mu(f,l){const c=gu[l];(!c||c[f.key]!==f)&&wt(`Database ${l}(${f.repoInfo_}) has already been deleted.`),function so(f){f.persistentConnection_&&f.persistentConnection_.interrupt(Xl)}(f),delete c[f.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(l){null===this._rootInternal&&wt("Cannot call "+l+" on a deleted database.")}}function ku(f=(0,p.getApp)(),l){const c=(0,p._getProvider)(f,"database").getImmediate({identifier:l});if(!c._instanceStarted){const E=(0,X.P0)("database");E&&function rl(f,l,c,E={}){(f=(0,X.m9)(f))._checkNotDeleted("useEmulator"),f._instanceStarted&&wt("Cannot call useEmulator() after instance has already been initialized.");const x=f._repoInternal;let U;if(x.repoInfo_.nodeAdmin)E.mockUserToken&&wt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),U=new Nr(Nr.OWNER);else if(E.mockUserToken){const H="string"==typeof E.mockUserToken?E.mockUserToken:(0,X.Sg)(E.mockUserToken,f.app.options.projectId);U=new Nr(H)}!function wd(f,l,c,E){f.repoInfo_=new hn(`${l}:${c}`,!1,f.repoInfo_.namespace,f.repoInfo_.webSocketOnly,f.repoInfo_.nodeAdmin,f.repoInfo_.persistenceKey,f.repoInfo_.includeNamespaceInQueryParams,!0),E&&(f.authTokenProvider_=E)}(x,l,c,U)}(c,...E)}return c}Gi.prototype.simpleListen=function(f,l){this.sendRequest("q",{p:f},l)},Gi.prototype.echo=function(f,l){this.sendRequest("echo",{d:f},l)},function Cl(f){(function Ze(f){be=f})(p.SDK_VERSION),(0,p._registerComponent)(new K.wA("database",(l,{instanceIdentifier:c})=>function Ki(f,l,c,E,x){let U=E||f.options.databaseURL;void 0===U&&(f.options.projectId||wt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Je("Using default host for project ",f.options.projectId),U=`${f.options.projectId}-default-rtdb.firebaseio.com`);let Re,Be,H=Ju(U,x),ce=H.repoInfo;typeof process<"u"&&process.env&&(Be=process.env[Ed]),Be?(Re=!0,U=`http://${Be}?ns=${ce.namespace}`,H=Ju(U,x),ce=H.repoInfo):Re=!H.repoInfo.secure;const St=x&&Re?new Nr(Nr.OWNER):new pn(f.name,f.options,l);_a("Invalid Firebase Database URL",H),Z(H.path)||wt("Database URL must point to the root of a Firebase Database (not including a child path).");const Mt=function Ec(f,l,c,E){let x=gu[l.name];x||(x={},gu[l.name]=x);let U=x[f.toURLString()];return U&&wt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),U=new io(f,Gd,c,E),x[f.toURLString()]=U,U}(ce,f,St,new Ur(f.name,c));return new Wd(Mt,f)}(l.getProvider("app").getImmediate(),l.getProvider("auth-internal"),l.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,p.registerVersion)(Ne,"0.14.4",f),(0,p.registerVersion)(Ne,"0.14.4","esm2017")}()},2138:(mn,ot,j)=>{j.d(ot,{KL:()=>Tn,Gb:()=>Hi});var C=j(5861),K=(j(4727),j(4859));const X=(fe,te)=>te.some(he=>fe instanceof he);let Se,Ne;const Ze=new WeakMap,de=new WeakMap,ye=new WeakMap,Me=new WeakMap,tt=new WeakMap;let Qt={get(fe,te,he){if(fe instanceof IDBTransaction){if("done"===te)return de.get(fe);if("objectStoreNames"===te)return fe.objectStoreNames||ye.get(fe);if("store"===te)return he.objectStoreNames[1]?void 0:he.objectStore(he.objectStoreNames[0])}return Rt(fe[te])},set:(fe,te,he)=>(fe[te]=he,!0),has:(fe,te)=>fe instanceof IDBTransaction&&("done"===te||"store"===te)||te in fe};function ft(fe){return"function"==typeof fe?function yt(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function be(){return Ne||(Ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...te){return fe.apply(Te(this),te),Rt(Ze.get(this))}:function(...te){return Rt(fe.apply(Te(this),te))}:function(te,...he){const Ie=fe.call(Te(this),te,...he);return ye.set(Ie,te.sort?te.sort():[te]),Rt(Ie)}}(fe):(fe instanceof IDBTransaction&&function Nt(fe){if(de.has(fe))return;const te=new Promise((he,Ie)=>{const He=()=>{fe.removeEventListener("complete",Z),fe.removeEventListener("error",ve),fe.removeEventListener("abort",ve)},Z=()=>{he(),He()},ve=()=>{Ie(fe.error||new DOMException("AbortError","AbortError")),He()};fe.addEventListener("complete",Z),fe.addEventListener("error",ve),fe.addEventListener("abort",ve)});de.set(fe,te)}(fe),X(fe,function $e(){return Se||(Se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,Qt):fe)}function Rt(fe){if(fe instanceof IDBRequest)return function Ye(fe){const te=new Promise((he,Ie)=>{const He=()=>{fe.removeEventListener("success",Z),fe.removeEventListener("error",ve)},Z=()=>{he(Rt(fe.result)),He()},ve=()=>{Ie(fe.error),He()};fe.addEventListener("success",Z),fe.addEventListener("error",ve)});return te.then(he=>{he instanceof IDBCursor&&Ze.set(he,fe)}).catch(()=>{}),tt.set(te,fe),te}(fe);if(Me.has(fe))return Me.get(fe);const te=ft(fe);return te!==fe&&(Me.set(fe,te),tt.set(te,fe)),te}const Te=fe=>tt.get(fe);function Je(fe,te,{blocked:he,upgrade:Ie,blocking:He,terminated:Z}={}){const ve=indexedDB.open(fe,te),qe=Rt(ve);return Ie&&ve.addEventListener("upgradeneeded",_t=>{Ie(Rt(ve.result),_t.oldVersion,_t.newVersion,Rt(ve.transaction))}),he&&ve.addEventListener("blocked",()=>he()),qe.then(_t=>{Z&&_t.addEventListener("close",()=>Z()),He&&_t.addEventListener("versionchange",()=>He())}).catch(()=>{}),qe}function vt(fe,{blocked:te}={}){const he=indexedDB.deleteDatabase(fe);return te&&he.addEventListener("blocked",()=>te()),Rt(he).then(()=>{})}const $t=["get","getKey","getAll","getAllKeys","count"],wt=["put","add","delete","clear"],je=new Map;function xt(fe,te){if(!(fe instanceof IDBDatabase)||te in fe||"string"!=typeof te)return;if(je.get(te))return je.get(te);const he=te.replace(/FromIndex$/,""),Ie=te!==he,He=wt.includes(he);if(!(he in(Ie?IDBIndex:IDBObjectStore).prototype)||!He&&!$t.includes(he))return;const Z=function(){var ve=(0,C.Z)(function*(qe,..._t){const Xt=this.transaction(qe,He?"readwrite":"readonly");let $n=Xt.store;return Ie&&($n=$n.index(_t.shift())),(yield Promise.all([$n[he](..._t),He&&Xt.done]))[0]});return function(_t){return ve.apply(this,arguments)}}();return je.set(te,Z),Z}!function nt(fe){Qt=fe(Qt)}(fe=>({...fe,get:(te,he,Ie)=>xt(te,he)||fe.get(te,he,Ie),has:(te,he)=>!!xt(te,he)||fe.has(te,he)}));var ln=j(2090),jt=j(6881);const Kt="/firebase-messaging-sw.js",qt="/firebase-cloud-messaging-push-scope",rt="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",at="https://fcmregistrations.googleapis.com/v1",lt="google.c.a.c_id",bt="google.c.a.c_l",Ht="google.c.a.ts",It="google.c.a.e";var Ct=(()=>{return(fe=Ct||(Ct={})).PUSH_RECEIVED="push-received",fe.NOTIFICATION_CLICKED="notification-clicked",Ct;var fe})();function rn(fe){const te=new Uint8Array(fe);return btoa(String.fromCharCode(...te)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Sn(fe){const he=(fe+"=".repeat((4-fe.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ie=atob(he),He=new Uint8Array(Ie.length);for(let Z=0;Z<Ie.length;++Z)He[Z]=Ie.charCodeAt(Z);return He}const tr="fcm_token_details_db",_n=5,xn="fcm_token_object_Store";function pr(){return pr=(0,C.Z)(function*(fe){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(tr))return null;let te=null;return(yield Je(tr,_n,{upgrade:(Ie=(0,C.Z)(function*(He,Z,ve,qe){var _t;if(Z<2||!He.objectStoreNames.contains(xn))return;const Xt=qe.objectStore(xn),$n=yield Xt.index("fcmSenderId").get(fe);if(yield Xt.clear(),$n)if(2===Z){const vn=$n;if(!vn.auth||!vn.p256dh||!vn.endpoint)return;te={token:vn.fcmToken,createTime:null!==(_t=vn.createTime)&&void 0!==_t?_t:Date.now(),subscriptionOptions:{auth:vn.auth,p256dh:vn.p256dh,endpoint:vn.endpoint,swScope:vn.swScope,vapidKey:"string"==typeof vn.vapidKey?vn.vapidKey:rn(vn.vapidKey)}}}else if(3===Z){const vn=$n;te={token:vn.fcmToken,createTime:vn.createTime,subscriptionOptions:{auth:rn(vn.auth),p256dh:rn(vn.p256dh),endpoint:vn.endpoint,swScope:vn.swScope,vapidKey:rn(vn.vapidKey)}}}else if(4===Z){const vn=$n;te={token:vn.fcmToken,createTime:vn.createTime,subscriptionOptions:{auth:rn(vn.auth),p256dh:rn(vn.p256dh),endpoint:vn.endpoint,swScope:vn.swScope,vapidKey:rn(vn.vapidKey)}}}}),function(Z,ve,qe,_t){return Ie.apply(this,arguments)})})).close(),yield vt(tr),yield vt("fcm_vapid_details_db"),yield vt("undefined"),function zr(fe){if(!fe||!fe.subscriptionOptions)return!1;const{subscriptionOptions:te}=fe;return"number"==typeof fe.createTime&&fe.createTime>0&&"string"==typeof fe.token&&fe.token.length>0&&"string"==typeof te.auth&&te.auth.length>0&&"string"==typeof te.p256dh&&te.p256dh.length>0&&"string"==typeof te.endpoint&&te.endpoint.length>0&&"string"==typeof te.swScope&&te.swScope.length>0&&"string"==typeof te.vapidKey&&te.vapidKey.length>0}(te)?te:null;var Ie}),pr.apply(this,arguments)}const hr="firebase-messaging-database",Ur=1,pn="firebase-messaging-store";let Nr=null;function Sr(){return Nr||(Nr=Je(hr,Ur,{upgrade:(fe,te)=>{0===te&&fe.createObjectStore(pn)}})),Nr}function ui(fe){return gr.apply(this,arguments)}function gr(){return gr=(0,C.Z)(function*(fe){const te=Fr(fe),Ie=yield(yield Sr()).transaction(pn).objectStore(pn).get(te);if(Ie)return Ie;{const He=yield function nr(fe){return pr.apply(this,arguments)}(fe.appConfig.senderId);if(He)return yield cn(fe,He),He}}),gr.apply(this,arguments)}function cn(fe,te){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,C.Z)(function*(fe,te){const he=Fr(fe),He=(yield Sr()).transaction(pn,"readwrite");return yield He.objectStore(pn).put(te,he),yield He.done,te})).apply(this,arguments)}function ur(){return(ur=(0,C.Z)(function*(fe){const te=Fr(fe),Ie=(yield Sr()).transaction(pn,"readwrite");yield Ie.objectStore(pn).delete(te),yield Ie.done})).apply(this,arguments)}function Fr({appConfig:fe}){return fe.appId}const an=new ln.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function dn(fe,te){return hn.apply(this,arguments)}function hn(){return(hn=(0,C.Z)(function*(fe,te){const he=yield ri(fe),Ie=Nn(te),He={method:"POST",headers:he,body:JSON.stringify(Ie)};let Z;try{Z=yield(yield fetch(Vr(fe.appConfig),He)).json()}catch(ve){throw an.create("token-subscribe-failed",{errorInfo:ve?.toString()})}if(Z.error)throw an.create("token-subscribe-failed",{errorInfo:Z.error.message});if(!Z.token)throw an.create("token-subscribe-no-token");return Z.token})).apply(this,arguments)}function lr(){return(lr=(0,C.Z)(function*(fe,te){const he=yield ri(fe),Ie=Nn(te.subscriptionOptions),He={method:"PATCH",headers:he,body:JSON.stringify(Ie)};let Z;try{Z=yield(yield fetch(`${Vr(fe.appConfig)}/${te.token}`,He)).json()}catch(ve){throw an.create("token-update-failed",{errorInfo:ve?.toString()})}if(Z.error)throw an.create("token-update-failed",{errorInfo:Z.error.message});if(!Z.token)throw an.create("token-update-no-token");return Z.token})).apply(this,arguments)}function yr(fe,te){return Er.apply(this,arguments)}function Er(){return(Er=(0,C.Z)(function*(fe,te){const Ie={method:"DELETE",headers:yield ri(fe)};try{const Z=yield(yield fetch(`${Vr(fe.appConfig)}/${te}`,Ie)).json();if(Z.error)throw an.create("token-unsubscribe-failed",{errorInfo:Z.error.message})}catch(He){throw an.create("token-unsubscribe-failed",{errorInfo:He?.toString()})}})).apply(this,arguments)}function Vr({projectId:fe}){return`${at}/projects/${fe}/registrations`}function ri(fe){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,C.Z)(function*({appConfig:fe,installations:te}){const he=yield te.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":fe.apiKey,"x-goog-firebase-installations-auth":`FIS ${he}`})})).apply(this,arguments)}function Nn({p256dh:fe,auth:te,endpoint:he,vapidKey:Ie}){const He={web:{endpoint:he,auth:te,p256dh:fe}};return Ie!==rt&&(He.web.applicationPubKey=Ie),He}const qr=6048e5;function jn(){return jn=(0,C.Z)(function*(fe){const te=yield function gt(fe,te){return ct.apply(this,arguments)}(fe.swRegistration,fe.vapidKey),he={vapidKey:fe.vapidKey,swScope:fe.swRegistration.scope,endpoint:te.endpoint,auth:rn(te.getKey("auth")),p256dh:rn(te.getKey("p256dh"))},Ie=yield ui(fe.firebaseDependencies);if(Ie){if(function ge(fe,te){return te.vapidKey===fe.vapidKey&&te.endpoint===fe.endpoint&&te.auth===fe.auth&&te.p256dh===fe.p256dh}(Ie.subscriptionOptions,he))return Date.now()>=Ie.createTime+qr?function Jn(fe,te){return Qe.apply(this,arguments)}(fe,{token:Ie.token,createTime:Date.now(),subscriptionOptions:he}):Ie.token;try{yield yr(fe.firebaseDependencies,Ie.token)}catch(He){console.warn(He)}return De(fe.firebaseDependencies,he)}return De(fe.firebaseDependencies,he)}),jn.apply(this,arguments)}function xr(){return xr=(0,C.Z)(function*(fe){const te=yield ui(fe.firebaseDependencies);te&&(yield yr(fe.firebaseDependencies,te.token),yield function Kr(fe){return ur.apply(this,arguments)}(fe.firebaseDependencies));const he=yield fe.swRegistration.pushManager.getSubscription();return!he||he.unsubscribe()}),xr.apply(this,arguments)}function Qe(){return Qe=(0,C.Z)(function*(fe,te){try{const he=yield function Yt(fe,te){return lr.apply(this,arguments)}(fe.firebaseDependencies,te),Ie=Object.assign(Object.assign({},te),{token:he,createTime:Date.now()});return yield cn(fe.firebaseDependencies,Ie),he}catch(he){throw yield function Hn(fe){return xr.apply(this,arguments)}(fe),he}}),Qe.apply(this,arguments)}function De(fe,te){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,C.Z)(function*(fe,te){const Ie={token:yield dn(fe,te),createTime:Date.now(),subscriptionOptions:te};return yield cn(fe,Ie),Ie.token})).apply(this,arguments)}function ct(){return(ct=(0,C.Z)(function*(fe,te){return(yield fe.pushManager.getSubscription())||fe.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Sn(te)})})).apply(this,arguments)}function _e(fe){const te={from:fe.from,collapseKey:fe.collapse_key,messageId:fe.fcmMessageId};return function ee(fe,te){if(!te.notification)return;fe.notification={};const he=te.notification.title;he&&(fe.notification.title=he);const Ie=te.notification.body;Ie&&(fe.notification.body=Ie);const He=te.notification.image;He&&(fe.notification.image=He);const Z=te.notification.icon;Z&&(fe.notification.icon=Z)}(te,fe),function re(fe,te){te.data&&(fe.data=te.data)}(te,fe),function Y(fe,te){var he,Ie,He,Z,ve;if(!(te.fcmOptions||null!==(he=te.notification)&&void 0!==he&&he.click_action))return;fe.fcmOptions={};const qe=null!==(He=null===(Ie=te.fcmOptions)||void 0===Ie?void 0:Ie.link)&&void 0!==He?He:null===(Z=te.notification)||void 0===Z?void 0:Z.click_action;qe&&(fe.fcmOptions.link=qe);const _t=null===(ve=te.fcmOptions)||void 0===ve?void 0:ve.analytics_label;_t&&(fe.fcmOptions.analyticsLabel=_t)}(te,fe),te}function me(fe,te){const he=[];for(let Ie=0;Ie<fe.length;Ie++)he.push(fe.charAt(Ie)),Ie<te.length&&he.push(te.charAt(Ie));return he.join("")}function ue(fe){return an.create("missing-app-config-values",{valueName:fe})}me("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),me("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ke{constructor(te,he,Ie){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const He=function Ee(fe){if(!fe||!fe.options)throw ue("App Configuration Object");if(!fe.name)throw ue("App Name");const te=["projectId","apiKey","appId","messagingSenderId"],{options:he}=fe;for(const Ie of te)if(!he[Ie])throw ue(Ie);return{appName:fe.name,projectId:he.projectId,apiKey:he.apiKey,appId:he.appId,senderId:he.messagingSenderId}}(te);this.firebaseDependencies={app:te,appConfig:He,installations:he,analyticsProvider:Ie}}_delete(){return Promise.resolve()}}function Xe(fe){return Et.apply(this,arguments)}function Et(){return(Et=(0,C.Z)(function*(fe){try{fe.swRegistration=yield navigator.serviceWorker.register(Kt,{scope:qt}),fe.swRegistration.update().catch(()=>{})}catch(te){throw an.create("failed-service-worker-registration",{browserErrorMessage:te?.message})}})).apply(this,arguments)}function mt(){return(mt=(0,C.Z)(function*(fe,te){if(!te&&!fe.swRegistration&&(yield Xe(fe)),te||!fe.swRegistration){if(!(te instanceof ServiceWorkerRegistration))throw an.create("invalid-sw-registration");fe.swRegistration=te}})).apply(this,arguments)}function wn(){return(wn=(0,C.Z)(function*(fe,te){te?fe.vapidKey=te:fe.vapidKey||(fe.vapidKey=rt)})).apply(this,arguments)}function V(){return V=(0,C.Z)(function*(fe,te){if(!navigator)throw an.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw an.create("permission-blocked");return yield function Pt(fe,te){return wn.apply(this,arguments)}(fe,te?.vapidKey),yield function tn(fe,te){return mt.apply(this,arguments)}(fe,te?.serviceWorkerRegistration),function Bn(fe){return jn.apply(this,arguments)}(fe)}),V.apply(this,arguments)}function Fe(){return(Fe=(0,C.Z)(function*(fe,te,he){const Ie=function it(fe){switch(fe){case Ct.NOTIFICATION_CLICKED:return"notification_open";case Ct.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(te);(yield fe.firebaseDependencies.analyticsProvider.get()).logEvent(Ie,{message_id:he[lt],message_name:he[bt],message_time:he[Ht],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ut(){return Ut=(0,C.Z)(function*(fe,te){const he=te.data;if(!he.isFirebaseMessaging)return;fe.onMessageHandler&&he.messageType===Ct.PUSH_RECEIVED&&("function"==typeof fe.onMessageHandler?fe.onMessageHandler(_e(he)):fe.onMessageHandler.next(_e(he)));const Ie=he.data;(function Ue(fe){return"object"==typeof fe&&!!fe&&lt in fe})(Ie)&&"1"===Ie[It]&&(yield function ne(fe,te,he){return Fe.apply(this,arguments)}(fe,he.messageType,Ie))}),Ut.apply(this,arguments)}const Mn="@firebase/messaging",Ar=fe=>{const te=new ke(fe.getProvider("app").getImmediate(),fe.getProvider("installations-internal").getImmediate(),fe.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",he=>function Wt(fe,te){return Ut.apply(this,arguments)}(te,he)),te},Mr=fe=>{const te=fe.getProvider("messaging").getImmediate();return{getToken:Ie=>function pe(fe,te){return V.apply(this,arguments)}(te,Ie)}};function Hi(){return ei.apply(this,arguments)}function ei(){return(ei=(0,C.Z)(function*(){try{yield(0,ln.eu)()}catch{return!1}return typeof window<"u"&&(0,ln.hl)()&&(0,ln.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function Tn(fe=(0,jt.getApp)()){return Hi().then(te=>{if(!te)throw an.create("unsupported-browser")},te=>{throw an.create("indexed-db-unsupported")}),(0,jt._getProvider)((0,ln.m9)(fe),"messaging").getImmediate()}!function Pi(){(0,jt._registerComponent)(new K.wA("messaging",Ar,"PUBLIC")),(0,jt._registerComponent)(new K.wA("messaging-internal",Mr,"PRIVATE")),(0,jt.registerVersion)(Mn,"0.12.4"),(0,jt.registerVersion)(Mn,"0.12.4","esm2017")}()},5861:(mn,ot,j)=>{function C(K,X,Se,Ne,$e,be,Ze){try{var de=K[be](Ze),ye=de.value}catch(Me){return void Se(Me)}de.done?X(ye):Promise.resolve(ye).then(Ne,$e)}function p(K){return function(){var X=this,Se=arguments;return new Promise(function(Ne,$e){var be=K.apply(X,Se);function Ze(ye){C(be,Ne,$e,Ze,de,"next",ye)}function de(ye){C(be,Ne,$e,Ze,de,"throw",ye)}Ze(void 0)})}}j.d(ot,{Z:()=>p})}},mn=>{mn(mn.s=456)}]);