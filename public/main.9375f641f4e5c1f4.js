"use strict";(self.webpackChunksaladejuegos=self.webpackChunksaladejuegos||[]).push([[179],{154:(yt,Te,j)=>{var M=j(481),w=j(256),X=j(872),O=j(861);const ue={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Z=function(n,e){if(!n)throw De(e)},De=function(n){return new Error("Firebase Database ("+ue.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)},Ke=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],l=i+1<n.length,h=l?n[i+1]:0,p=i+2<n.length,_=p?n[i+2]:0;let L=(15&h)<<2|_>>6,$=63&_;p||($=64,l||(L=64)),r.push(t[a>>2],t[(3&a)<<4|h>>4],t[L],t[$])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ke(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const p=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(1023&p))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&l)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;const _=i<n.length?t[n.charAt(i)]:64;++i;const A=i<n.length?t[n.charAt(i)]:64;if(++i,null==a||null==h||null==_||null==A)throw new le;r.push(a<<2|h>>4),64!==_&&(r.push(h<<4&240|_>>2),64!==A&&r.push(_<<6&192|A))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class le extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ae=function(n){const e=Ke(n);return ye.encodeByteArray(e,!0)},mt=function(n){return Ae(n).replace(/\./g,"")},de=function(n){try{return ye.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ye(n){return rt(void 0,n)}function rt(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Nt(t)||(n[t]=rt(n[t],e[t]));return n}function Nt(n){return"__proto__"!==n}const be=()=>{try{return function Pt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&de(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},xe=n=>{var e,t;return null===(t=null===(e=be())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},Je=n=>{const e=xe(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Se=()=>{var n;return null===(n=be())||void 0===n?void 0:n.config},et=n=>{var e;return null===(e=be())||void 0===e?void 0:e[`_${n}`]};class Ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function Xe(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[mt(JSON.stringify({alg:"none",type:"JWT"})),mt(JSON.stringify(l)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ht(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function K(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Be(){return!0===ue.NODE_CLIENT||!0===ue.NODE_ADMIN}function sn(){try{return"object"==typeof indexedDB}catch{return!1}}function lt(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e((null===(a=i.error)||void 0===a?void 0:a.message)||"")}}catch(t){e(t)}})}function Tt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class st extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,st.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jt.prototype.create)}}class Jt{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?function En(n,e){return n.replace(vt,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(a,r):"Error";return new st(i,`${this.serviceName}: ${l} (${i}).`,r)}}const vt=/\{\$([^}]+)}/g;function gr(n){return JSON.parse(n)}function cn(n){return JSON.stringify(n)}const ao=function(n){let e={},t={},r={},i="";try{const a=n.split(".");e=gr(de(a[0])||""),t=gr(de(a[1])||""),i=a[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};function Wn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ci(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function bi(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function uo(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function qi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],l=e[i];if(qn(a)&&qn(l)){if(!qi(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function qn(n){return null!==n&&"object"==typeof n}function en(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _e(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function it(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class Pn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let A=0;A<16;A++)r[A]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let A=0;A<16;A++)r[A]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let A=16;A<80;A++){const L=r[A-3]^r[A-8]^r[A-14]^r[A-16];r[A]=4294967295&(L<<1|L>>>31)}let _,b,i=this.chain_[0],a=this.chain_[1],l=this.chain_[2],h=this.chain_[3],p=this.chain_[4];for(let A=0;A<80;A++){A<40?A<20?(_=h^a&(l^h),b=1518500249):(_=a^l^h,b=1859775393):A<60?(_=a&l|h&(a|l),b=2400959708):(_=a^l^h,b=3395469782);const L=(i<<5|i>>>27)+_+p+b+r[A]&4294967295;p=h,h=l,l=4294967295&(a<<30|a>>>2),a=i,i=L}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const a=this.buf_;let l=this.inbuf_;for(;i<t;){if(0===l)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(a[l]=e.charCodeAt(i),++l,++i,l===this.blockSize){this.compress_(a),l=0;break}}else for(;i<t;)if(a[l]=e[i],++l,++i,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}class nr{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function $t(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=ma),void 0===i.error&&(i.error=ma),void 0===i.complete&&(i.complete=ma);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ma(){}const mr=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e},gs=1e3,ms=2,ur=144e5,ya=.5;function tn(n,e=gs,t=ms){const r=e*Math.pow(t,n),i=Math.round(ya*r*(Math.random()-.5)*2);return Math.min(ur,r+i)}function nn(n){return n&&n._delegate?n._delegate:n}class rn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ur="[DEFAULT]";class J{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Ce;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function U(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ur})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,O.Z)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ur){return this.instances.has(e)}getOptions(e=Ur){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(a)&&l.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Ur?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Ur){return this.component?this.component.multipleInstances?e:Ur:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Y{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new J(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ae=[];var he=(()=>{return(n=he||(he={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",he;var n})();const ft={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},ct=he.INFO,In={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},Ki=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=In[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class Ar{constructor(e){this.name=e,this._logLevel=ct,this._logHandler=Ki,this._userLogHandler=null,ae.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ft[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const Fo=(n,e)=>e.some(t=>n instanceof t);let va,Lo;const Ti=new WeakMap,Yi=new WeakMap,El=new WeakMap,Vo=new WeakMap,Ea=new WeakMap;let mn={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Yi.get(n);if("objectStoreNames"===e)return n.objectStoreNames||El.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fi(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function _r(n){return"function"==typeof n?function Bs(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function nd(){return Lo||(Lo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Zi(this),e),fi(Ti.get(this))}:function(...e){return fi(n.apply(Zi(this),e))}:function(e,...t){const r=n.call(Zi(this),e,...t);return El.set(r,e.sort?e.sort():[e]),fi(r)}}(n):(n instanceof IDBTransaction&&function xt(n){if(Yi.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Yi.set(n,e)}(n),Fo(n,function wa(){return va||(va=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,mn):n)}function fi(n){if(n instanceof IDBRequest)return function Il(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(fi(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Ti.set(t,n)}).catch(()=>{}),Ea.set(e,n),e}(n);if(Vo.has(n))return Vo.get(n);const e=_r(n);return e!==n&&(Vo.set(n,e),Ea.set(e,n)),e}const Zi=n=>Ea.get(n),$e=["get","getKey","getAll","getAllKeys","count"],wt=["put","add","delete","clear"],on=new Map;function Kn(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(on.get(e))return on.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=wt.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!$e.includes(t))return;const a=function(){var l=(0,O.Z)(function*(h,...p){const _=this.transaction(h,i?"readwrite":"readonly");let b=_.store;return r&&(b=b.index(p.shift())),(yield Promise.all([b[t](...p),i&&_.done]))[0]});return function(p){return l.apply(this,arguments)}}();return on.set(e,a),a}!function On(n){mn=n(mn)}(n=>({...n,get:(e,t,r)=>Kn(e,t)||n.get(e,t,r),has:(e,t)=>!!Kn(e,t)||n.has(e,t)}));class Xi{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Tn(n){return"VERSION"===n.getComponent()?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const ys="@firebase/app",Di=new Ar("@firebase/app"),xi="[DEFAULT]",$r={[ys]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vr=new Map,vs=new Map;function Da(n,e){try{n.container.addComponent(e)}catch(t){Di.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function lr(n){const e=n.name;if(vs.has(e))return Di.debug(`There were multiple attempts to register component ${e}.`),!1;vs.set(e,n);for(const t of vr.values())Da(t,n);return!0}function jr(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const es=new Jt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Tl{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw es.create("app-deleted",{appName:this._name})}}const ws="9.21.0";function Dl(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:xi,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw es.create("bad-app-name",{appName:String(i)});if(t||(t=Se()),!t)throw es.create("no-options");const a=vr.get(i);if(a){if(qi(t,a.options)&&qi(r,a.config))return a;throw es.create("duplicate-app",{appName:i})}const l=new Y(i);for(const p of vs.values())l.addComponent(p);const h=new Tl(t,r,l);return vr.set(i,h),h}function js(n=xi){const e=vr.get(n);if(!e&&n===xi)return Dl();if(!e)throw es.create("no-app",{appName:n});return e}function mf(){return Array.from(vr.values())}function kt(n,e,t){var r;let i=null!==(r=$r[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const h=[`Unable to register library "${i}" with version "${e}":`];return a&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Di.warn(h.join(" "))}lr(new rn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const yf="firebase-heartbeat-database",Es=1,$o="firebase-heartbeat-store";let Hs=null;function po(){return Hs||(Hs=function Uo(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),h=fi(l);return r&&l.addEventListener("upgradeneeded",p=>{r(fi(l.result),p.oldVersion,p.newVersion,fi(l.transaction),p)}),t&&l.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{a&&p.addEventListener("close",()=>a()),i&&p.addEventListener("versionchange",_=>i(_.oldVersion,_.newVersion,_))}).catch(()=>{}),h}(yf,Es,{upgrade:(n,e)=>{0===e&&n.createObjectStore($o)}}).catch(n=>{throw es.create("idb-open",{originalErrorMessage:n.message})})),Hs}function jo(){return(jo=(0,O.Z)(function*(n){try{return(yield po()).transaction($o).objectStore($o).get(xa(n))}catch(e){if(e instanceof st)Di.warn(e.message);else{const t=es.create("idb-get",{originalErrorMessage:e?.message});Di.warn(t.message)}}})).apply(this,arguments)}function Iu(n,e){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,O.Z)(function*(n,e){try{const r=(yield po()).transaction($o,"readwrite");return yield r.objectStore($o).put(e,xa(n)),r.done}catch(t){if(t instanceof st)Di.warn(t.message);else{const r=es.create("idb-set",{originalErrorMessage:t?.message});Di.warn(r.message)}}})).apply(this,arguments)}function xa(n){return`${n.name}!${n.options.appId}`}class gi{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ln(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,O.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rd();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(a=>a.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,O.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=rd(),{heartbeatsToSend:r,unsentEntries:i}=function id(n,e=1024){const t=[];let r=n.slice();for(const i of n){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),xl(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),xl(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),a=mt(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),a})()}}function rd(){return(new Date).toISOString().substring(0,10)}class Ln{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,O.Z)(function*(){return!!sn()&&lt().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,O.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Aa(n){return jo.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,O.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return Iu(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,O.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const a=yield t.read();return Iu(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}})()}}function xl(n){return mt(JSON.stringify({version:2,heartbeats:n})).length}!function Ma(n){lr(new rn("platform-logger",e=>new Xi(e),"PRIVATE")),lr(new rn("heartbeat",e=>new gi(e),"PRIVATE")),kt(ys,"0.9.9",n),kt(ys,"0.9.9","esm2017"),kt("fire-js","")}(""),kt("firebase","9.21.0","app");const Hr=(n,e)=>e.some(t=>n instanceof t);let Is,Vn;const bu=new WeakMap,Gr=new WeakMap,Tu=new WeakMap,Na=new WeakMap,dt=new WeakMap;let Ml={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Gr.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Tu.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ws(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function sd(n){return"function"==typeof n?function ka(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ra(){return Vn||(Vn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Du(this),e),Ws(bu.get(this))}:function(...e){return Ws(n.apply(Du(this),e))}:function(e,...t){const r=n.call(Du(this),e,...t);return Tu.set(r,e.sort?e.sort():[e]),Ws(r)}}(n):(n instanceof IDBTransaction&&function Gm(n){if(Gr.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Gr.set(n,e)}(n),Hr(n,function wf(){return Is||(Is=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Ml):n)}function Ws(n){if(n instanceof IDBRequest)return function an(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Ws(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&bu.set(t,n)}).catch(()=>{}),dt.set(e,n),e}(n);if(Na.has(n))return Na.get(n);const e=sd(n);return e!==n&&(Na.set(n,e),dt.set(e,n)),e}const Du=n=>dt.get(n),od=["get","getKey","getAll","getAllKeys","count"],Rl=["put","add","delete","clear"],Un=new Map;function Ho(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Un.get(e))return Un.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Rl.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!od.includes(t))return;const a=function(){var l=(0,O.Z)(function*(h,...p){const _=this.transaction(h,i?"readwrite":"readonly");let b=_.store;return r&&(b=b.index(p.shift())),(yield Promise.all([b[t](...p),i&&_.done]))[0]});return function(p){return l.apply(this,arguments)}}();return Un.set(e,a),a}!function Pa(n){Ml=n(Ml)}(n=>({...n,get:(e,t,r)=>Ho(e,t)||n.get(e,t,r),has:(e,t)=>!!Ho(e,t)||n.has(e,t)}));const mi="@firebase/installations",Cn="0.6.4",Su=1e4,Au=`w:${Cn}`,xu="FIS_v2",ad="https://firebaseinstallations.googleapis.com/v1",ud=36e5,zr=new Jt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Mi(n){return n instanceof st&&n.code.includes("request-failed")}function Nl({projectId:n}){return`${ad}/projects/${n}/installations`}function Oa(n){return{token:n.token,requestStatus:2,expiresIn:ld(n.expiresIn),creationTime:Date.now()}}function Ru(n,e){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,O.Z)(function*(n,e){const r=(yield e.json()).error;return zr.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function go({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Pu(n){return La.apply(this,arguments)}function La(){return(La=(0,O.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function ld(n){return Number(n.replace("s","000"))}function Go(){return(Go=(0,O.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Nl(n),i=go(n),a=e.getImmediate({optional:!0});if(a){const _=yield a.getHeartbeatsHeader();_&&i.append("x-firebase-client",_)}const h={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:xu,appId:n.appId,sdkVersion:Au})},p=yield Pu(()=>fetch(r,h));if(p.ok){const _=yield p.json();return{fid:_.fid||t,registrationStatus:2,refreshToken:_.refreshToken,authToken:Oa(_.authToken)}}throw yield Ru("Create Installation",p)})).apply(this,arguments)}function zo(n){return new Promise(e=>{setTimeout(e,n)})}const Pl=/^[cdef][\w-]{21}$/,Cs="";function cd(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Ef(n){return function Ba(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Pl.test(t)?t:Cs}catch{return Cs}}function Bn(n){return`${n.appName}!${n.appId}`}const _i=new Map;function yn(n,e){const t=Bn(n);R(t,e),function D(n,e){const t=function B(){return!P&&"BroadcastChannel"in self&&(P=new BroadcastChannel("[Firebase] FID Change"),P.onmessage=n=>{R(n.data.key,n.data.fid)}),P}();t&&t.postMessage({key:n,fid:e}),function ee(){0===_i.size&&P&&(P.close(),P=null)}()}(t,e)}function R(n,e){const t=_i.get(n);if(t)for(const r of t)r(e)}let P=null;const se="firebase-installations-database",We=1,Mt="firebase-installations-store";let zt=null;function Ot(){return zt||(zt=function pe(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),h=Ws(l);return r&&l.addEventListener("upgradeneeded",p=>{r(Ws(l.result),p.oldVersion,p.newVersion,Ws(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),h.then(p=>{a&&p.addEventListener("close",()=>a()),i&&p.addEventListener("versionchange",()=>i())}).catch(()=>{}),h}(se,We,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Mt)}})),zt}function gt(n,e){return un.apply(this,arguments)}function un(){return(un=(0,O.Z)(function*(n,e){const t=Bn(n),i=(yield Ot()).transaction(Mt,"readwrite"),a=i.objectStore(Mt),l=yield a.get(t);return yield a.put(e,t),yield i.done,(!l||l.fid!==e.fid)&&yn(n,e.fid),e})).apply(this,arguments)}function Kt(n){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,O.Z)(function*(n){const e=Bn(n),r=(yield Ot()).transaction(Mt,"readwrite");yield r.objectStore(Mt).delete(e),yield r.done})).apply(this,arguments)}function Mr(n,e){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,O.Z)(function*(n,e){const t=Bn(n),i=(yield Ot()).transaction(Mt,"readwrite"),a=i.objectStore(Mt),l=yield a.get(t),h=e(l);return void 0===h?yield a.delete(t):yield a.put(h,t),yield i.done,h&&(!l||l.fid!==h.fid)&&yn(n,h.fid),h})).apply(this,arguments)}function bs(n){return Wr.apply(this,arguments)}function Wr(){return Wr=(0,O.Z)(function*(n){let e;const t=yield Mr(n.appConfig,r=>{const i=function mo(n){return hd(n||{fid:cd(),registrationStatus:0})}(r),a=function _o(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(zr.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function ns(n,e){return $a.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:dd(n)}:{installationEntry:e}}(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===Cs?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),Wr.apply(this,arguments)}function $a(){return $a=(0,O.Z)(function*(n,e){try{const t=yield function Ua(n,e){return Go.apply(this,arguments)}(n,e);return gt(n.appConfig,t)}catch(t){throw Mi(t)&&409===t.customData.serverCode?yield Kt(n.appConfig):yield gt(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),$a.apply(this,arguments)}function dd(n){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,O.Z)(function*(n){let e=yield ku(n.appConfig);for(;1===e.registrationStatus;)yield zo(100),e=yield ku(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield bs(n);return r||t}return e})).apply(this,arguments)}function ku(n){return Mr(n,e=>{if(!e)throw zr.create("installation-not-found");return hd(e)})}function hd(n){return function Ou(n){return 1===n.registrationStatus&&n.registrationTime+Su<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function qs(){return(qs=(0,O.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function Ol(n,{fid:e}){return`${Nl(n)}/${e}/authTokens:generate`}(n,t),i=function Nu(n,{refreshToken:e}){const t=go(n);return t.append("Authorization",function Va(n){return`${xu} ${n}`}(e)),t}(n,t),a=e.getImmediate({optional:!0});if(a){const _=yield a.getHeartbeatsHeader();_&&i.append("x-firebase-client",_)}const h={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Au,appId:n.appId}})},p=yield Pu(()=>fetch(r,h));if(p.ok)return Oa(yield p.json());throw yield Ru("Generate Auth Token",p)})).apply(this,arguments)}function Wo(n){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,O.Z)(function*(n,e=!1){let t;const r=yield Mr(n.appConfig,a=>{if(!Fu(a))throw zr.create("not-registered");const l=a.authToken;if(!e&&function fd(n){return 2===n.requestStatus&&!function Ll(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+ud}(n)}(l))return a;if(1===l.requestStatus)return t=function bf(n,e){return Fl.apply(this,arguments)}(n,e),a;{if(!navigator.onLine)throw zr.create("app-offline");const h=function pd(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(a);return t=function Ts(n,e){return ja.apply(this,arguments)}(n,h),h}});return t?yield t:r.authToken}),Cf.apply(this,arguments)}function Fl(){return(Fl=(0,O.Z)(function*(n,e){let t=yield Tf(n.appConfig);for(;1===t.authToken.requestStatus;)yield zo(100),t=yield Tf(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Wo(n,e):r})).apply(this,arguments)}function Tf(n){return Mr(n,e=>{if(!Fu(e))throw zr.create("not-registered");return function gd(n){return 1===n.requestStatus&&n.requestTime+Su<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function ja(){return ja=(0,O.Z)(function*(n,e){try{const t=yield function kl(n,e){return qs.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield gt(n.appConfig,r),t}catch(t){if(!Mi(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield gt(n.appConfig,r)}else yield Kt(n.appConfig);throw t}}),ja.apply(this,arguments)}function Fu(n){return void 0!==n&&2===n.registrationStatus}function Vl(){return(Vl=(0,O.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield bs(e);return r?r.catch(console.error):Wo(e).catch(console.error),t.fid})).apply(this,arguments)}function Ul(){return Ul=(0,O.Z)(function*(n,e=!1){const t=n;return yield function Lu(n){return md.apply(this,arguments)}(t),(yield Wo(t,e)).token}),Ul.apply(this,arguments)}function md(){return(md=(0,O.Z)(function*(n){const{registrationPromise:e}=yield bs(n);e&&(yield e)})).apply(this,arguments)}function Vu(n){return zr.create("missing-app-config-values",{valueName:n})}const Ko="installations",jl=n=>{const e=n.getProvider("app").getImmediate(),t=function ni(n){if(!n||!n.options)throw Vu("App Configuration");if(!n.name)throw Vu("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Vu(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:jr(e,"heartbeat"),_delete:()=>Promise.resolve()}},yi=n=>{const t=jr(n.getProvider("app").getImmediate(),Ko).getImmediate();return{getId:()=>function zm(n){return Vl.apply(this,arguments)}(t),getToken:i=>function qr(n){return Ul.apply(this,arguments)}(t,i)}};(function yo(){lr(new rn(Ko,jl,"PUBLIC")),lr(new rn("installations-internal",yi,"PRIVATE"))})(),kt(mi,Cn),kt(mi,Cn,"esm2017");const vo="@firebase/remote-config",Rr=new Jt("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ha{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,O.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const a=yield t.client.fetch(e),l=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===a.status&&l.push(t.storage.setLastSuccessfulFetchResponse(a)),yield Promise.all(l),a})()}}function Xm(n=navigator){return n.languages&&n.languages[0]||n.language}class wD{constructor(e,t,r,i,a,l){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=l}fetch(e){var t=this;return(0,O.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),l=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,h={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},p={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:Xm()},_={method:"POST",headers:h,body:JSON.stringify(p)},b=fetch(l,_),A=new Promise((He,ut)=>{e.signal.addEventListener(()=>{const qe=new Error("The operation was aborted.");qe.name="AbortError",ut(qe)})});let L;try{yield Promise.race([b,A]),L=yield b}catch(He){let ut="fetch-client-network";throw"AbortError"===He?.name&&(ut="fetch-timeout"),Rr.create(ut,{originalErrorMessage:He?.message})}let $=L.status;const W=L.headers.get("ETag")||void 0;let re,fe;if(200===L.status){let He;try{He=yield L.json()}catch(ut){throw Rr.create("fetch-client-parse",{originalErrorMessage:ut?.message})}re=He.entries,fe=He.state}if("INSTANCE_STATE_UNSPECIFIED"===fe?$=500:"NO_CHANGE"===fe?$=304:("NO_TEMPLATE"===fe||"EMPTY_CONFIG"===fe)&&(re={}),304!==$&&200!==$)throw Rr.create("fetch-status",{httpStatus:$});return{status:$,eTag:W,config:re}})()}}class g{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,O.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,O.Z)(function*(){yield function y(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Rr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const a=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),a}catch(a){if(!function v(n){if(!(n instanceof st&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(a))throw a;const l={throttleEndTimeMillis:Date.now()+tn(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(l),i.attemptFetch(e,l)}})()}}class N{constructor(e,t,r,i,a){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function F(n,e){const t=n.target.error||void 0;return Rr.create(e,{originalErrorMessage:t&&t?.message})}const G="app_namespace_store";class Dt{constructor(e,t,r,i=function Oe(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(F(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(G,{keyPath:"compositeKey"})}}catch(t){e(Rr.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,O.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{const h=r.transaction([G],"readonly").objectStore(G),p=t.createCompositeKey(e);try{const _=h.get(p);_.onerror=b=>{a(F(b,"storage-get"))},_.onsuccess=b=>{const A=b.target.result;i(A?A.value:void 0)}}catch(_){a(Rr.create("storage-get",{originalErrorMessage:_?.message}))}})})()}set(e,t){var r=this;return(0,O.Z)(function*(){const i=yield r.openDbPromise;return new Promise((a,l)=>{const p=i.transaction([G],"readwrite").objectStore(G),_=r.createCompositeKey(e);try{const b=p.put({compositeKey:_,value:t});b.onerror=A=>{l(F(A,"storage-set"))},b.onsuccess=()=>{a()}}catch(b){l(Rr.create("storage-set",{originalErrorMessage:b?.message}))}})})()}delete(e){var t=this;return(0,O.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{const h=r.transaction([G],"readwrite").objectStore(G),p=t.createCompositeKey(e);try{const _=h.delete(p);_.onerror=b=>{a(F(b,"storage-delete"))},_.onsuccess=()=>{i()}}catch(_){a(Rr.create("storage-delete",{originalErrorMessage:_?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class cr{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,O.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),a=yield t;a&&(e.lastFetchStatus=a);const l=yield r;l&&(e.lastSuccessfulFetchTimestampMillis=l);const h=yield i;h&&(e.activeConfig=h)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Kr(){return _d.apply(this,arguments)}function _d(){return(_d=(0,O.Z)(function*(){if(!sn())return!1;try{return yield lt()}catch{return!1}})).apply(this,arguments)}!function As(){lr(new rn("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Rr.create("registration-window");if(!sn())throw Rr.create("indexed-db-unavailable");const{projectId:a,apiKey:l,appId:h}=r.options;if(!a)throw Rr.create("registration-project-id");if(!l)throw Rr.create("registration-api-key");if(!h)throw Rr.create("registration-app-id");const p=new Dt(h,r.name,t=t||"firebase"),_=new cr(p),b=new Ar(vo);b.logLevel=he.ERROR;const A=new wD(i,ws,t,a,l,h),L=new g(A,p),$=new Ha(L,p,_,b),W=new N(r,$,_,p,b);return function vD(n){const e=nn(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(W),W},"PUBLIC").setMultipleInstances(!0)),kt(vo,"0.4.4"),kt(vo,"0.4.4","esm2017")}();const Yo=(n,e)=>e.some(t=>n instanceof t);let Mf,Jm;const e_=new WeakMap,t_=new WeakMap,w0=new WeakMap,Ga=new WeakMap,Uu=new WeakMap;let Nf={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return t_.get(n);if("objectStoreNames"===e)return n.objectStoreNames||w0.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zo(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function CD(n){return"function"==typeof n?function S1(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Rf(){return Jm||(Jm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(n_(this),e),Zo(e_.get(this))}:function(...e){return Zo(n.apply(n_(this),e))}:function(e,...t){const r=n.call(n_(this),e,...t);return w0.set(r,e.sort?e.sort():[e]),Zo(r)}}(n):(n instanceof IDBTransaction&&function D1(n){if(t_.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});t_.set(n,e)}(n),Yo(n,function yd(){return Mf||(Mf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Nf):n)}function Zo(n){if(n instanceof IDBRequest)return function ED(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Zo(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&e_.set(t,n)}).catch(()=>{}),Uu.set(e,n),e}(n);if(Ga.has(n))return Ga.get(n);const e=CD(n);return e!==n&&(Ga.set(n,e),Uu.set(e,n)),e}const n_=n=>Uu.get(n);function vd(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),h=Zo(l);return r&&l.addEventListener("upgradeneeded",p=>{r(Zo(l.result),p.oldVersion,p.newVersion,Zo(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),h.then(p=>{a&&p.addEventListener("close",()=>a()),i&&p.addEventListener("versionchange",()=>i())}).catch(()=>{}),h}function Pf(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),Zo(t).then(()=>{})}const bD=["get","getKey","getAll","getAllKeys","count"],E0=["put","add","delete","clear"],I0=new Map;function r_(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(I0.get(e))return I0.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=E0.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!bD.includes(t))return;const a=function(){var l=(0,O.Z)(function*(h,...p){const _=this.transaction(h,i?"readwrite":"readonly");let b=_.store;return r&&(b=b.index(p.shift())),(yield Promise.all([b[t](...p),i&&_.done]))[0]});return function(p){return l.apply(this,arguments)}}();return I0.set(e,a),a}!function ID(n){Nf=n(Nf)}(n=>({...n,get:(e,t,r)=>r_(e,t)||n.get(e,t,r),has:(e,t)=>!!r_(e,t)||n.has(e,t)}));const A1="/firebase-messaging-sw.js",TD="/firebase-cloud-messaging-push-scope",C0="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",i_="https://fcmregistrations.googleapis.com/v1",DD="google.c.a.c_id",x1="google.c.a.c_l",s_="google.c.a.ts",M1="google.c.a.e";var wd=(()=>{return(n=wd||(wd={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",wd;var n})();function za(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function R1(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}const o_="fcm_token_details_db",b0=5,kf="fcm_token_object_Store";function Of(){return Of=(0,O.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(a=>a.name).includes(o_))return null;let e=null;return(yield vd(o_,b0,{upgrade:(r=(0,O.Z)(function*(i,a,l,h){var p;if(a<2||!i.objectStoreNames.contains(kf))return;const _=h.objectStore(kf),b=yield _.index("fcmSenderId").get(n);if(yield _.clear(),b)if(2===a){const A=b;if(!A.auth||!A.p256dh||!A.endpoint)return;e={token:A.fcmToken,createTime:null!==(p=A.createTime)&&void 0!==p?p:Date.now(),subscriptionOptions:{auth:A.auth,p256dh:A.p256dh,endpoint:A.endpoint,swScope:A.swScope,vapidKey:"string"==typeof A.vapidKey?A.vapidKey:za(A.vapidKey)}}}else if(3===a){const A=b;e={token:A.fcmToken,createTime:A.createTime,subscriptionOptions:{auth:za(A.auth),p256dh:za(A.p256dh),endpoint:A.endpoint,swScope:A.swScope,vapidKey:za(A.vapidKey)}}}else if(4===a){const A=b;e={token:A.fcmToken,createTime:A.createTime,subscriptionOptions:{auth:za(A.auth),p256dh:za(A.p256dh),endpoint:A.endpoint,swScope:A.swScope,vapidKey:za(A.vapidKey)}}}}),function(a,l,h,p){return r.apply(this,arguments)})})).close(),yield Pf(o_),yield Pf("fcm_vapid_details_db"),yield Pf("undefined"),function D0(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),Of.apply(this,arguments)}const Eo="firebase-messaging-database",SD=1,Bu="firebase-messaging-store";let a_=null;function Ff(){return a_||(a_=vd(Eo,SD,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Bu)}})),a_}function Lf(n){return u_.apply(this,arguments)}function u_(){return u_=(0,O.Z)(function*(n){const e=h_(n),r=yield(yield Ff()).transaction(Bu).objectStore(Bu).get(e);if(r)return r;{const i=yield function T0(n){return Of.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield l_(n,i),i}}),u_.apply(this,arguments)}function l_(n,e){return c_.apply(this,arguments)}function c_(){return(c_=(0,O.Z)(function*(n,e){const t=h_(n),i=(yield Ff()).transaction(Bu,"readwrite");return yield i.objectStore(Bu).put(e,t),yield i.done,e})).apply(this,arguments)}function d_(){return(d_=(0,O.Z)(function*(n){const e=h_(n),r=(yield Ff()).transaction(Bu,"readwrite");yield r.objectStore(Bu).delete(e),yield r.done})).apply(this,arguments)}function h_({appConfig:n}){return n.appId}const wr=new Jt("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function A0(n,e){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,O.Z)(function*(n,e){const t=yield Uf(n),r=m_(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch(p_(n.appConfig),i)).json()}catch(l){throw wr.create("token-subscribe-failed",{errorInfo:l?.toString()})}if(a.error)throw wr.create("token-subscribe-failed",{errorInfo:a.error.message});if(!a.token)throw wr.create("token-subscribe-no-token");return a.token})).apply(this,arguments)}function $u(){return($u=(0,O.Z)(function*(n,e){const t=yield Uf(n),r=m_(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let a;try{a=yield(yield fetch(`${p_(n.appConfig)}/${e.token}`,i)).json()}catch(l){throw wr.create("token-update-failed",{errorInfo:l?.toString()})}if(a.error)throw wr.create("token-update-failed",{errorInfo:a.error.message});if(!a.token)throw wr.create("token-update-no-token");return a.token})).apply(this,arguments)}function f_(n,e){return Vf.apply(this,arguments)}function Vf(){return(Vf=(0,O.Z)(function*(n,e){const r={method:"DELETE",headers:yield Uf(n)};try{const a=yield(yield fetch(`${p_(n.appConfig)}/${e}`,r)).json();if(a.error)throw wr.create("token-unsubscribe-failed",{errorInfo:a.error.message})}catch(i){throw wr.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function p_({projectId:n}){return`${i_}/projects/${n}/registrations`}function Uf(n){return g_.apply(this,arguments)}function g_(){return(g_=(0,O.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function m_({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==C0&&(i.web.applicationPubKey=r),i}const AD=6048e5;function __(){return __=(0,O.Z)(function*(n){const e=yield function xD(n,e){return Cd.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:za(e.getKey("auth")),p256dh:za(e.getKey("p256dh"))},r=yield Lf(n.firebaseDependencies);if(r){if(function E_(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+AD?function y_(n,e){return v_.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield f_(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return zl(n.firebaseDependencies,t)}return zl(n.firebaseDependencies,t)}),__.apply(this,arguments)}function Id(){return Id=(0,O.Z)(function*(n){const e=yield Lf(n.firebaseDependencies);e&&(yield f_(n.firebaseDependencies,e.token),yield function S0(n){return d_.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),Id.apply(this,arguments)}function v_(){return v_=(0,O.Z)(function*(n,e){try{const t=yield function ri(n,e){return $u.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield l_(n.firebaseDependencies,r),t}catch(t){throw yield function M0(n){return Id.apply(this,arguments)}(n),t}}),v_.apply(this,arguments)}function zl(n,e){return w_.apply(this,arguments)}function w_(){return(w_=(0,O.Z)(function*(n,e){const r={token:yield A0(n,e),createTime:Date.now(),subscriptionOptions:e};return yield l_(n,r),r.token})).apply(this,arguments)}function Cd(){return(Cd=(0,O.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:R1(e)})})).apply(this,arguments)}function I_(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function Wl(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const a=e.notification.icon;a&&(n.notification.icon=a)}(e,n),function C_(n,e){e.data&&(n.data=e.data)}(e,n),function R0(n,e){var t,r,i,a,l;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const h=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(a=e.notification)||void 0===a?void 0:a.click_action;h&&(n.fcmOptions.link=h);const p=null===(l=e.fcmOptions)||void 0===l?void 0:l.analytics_label;p&&(n.fcmOptions.analyticsLabel=p)}(e,n),e}function Bf(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function b_(n){return wr.create("missing-app-config-values",{valueName:n})}Bf("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Bf("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ND{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function RD(n){if(!n||!n.options)throw b_("App Configuration Object");if(!n.name)throw b_("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw b_(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function N0(n){return T_.apply(this,arguments)}function T_(){return(T_=(0,O.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(A1,{scope:TD}),n.swRegistration.update().catch(()=>{})}catch(e){throw wr.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function $f(){return($f=(0,O.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield N0(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw wr.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function jf(){return(jf=(0,O.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=C0)})).apply(this,arguments)}function S_(){return S_=(0,O.Z)(function*(n,e){if(!navigator)throw wr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw wr.create("permission-blocked");return yield function D_(n,e){return jf.apply(this,arguments)}(n,e?.vapidKey),yield function PD(n,e){return $f.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function x0(n){return __.apply(this,arguments)}(n)}),S_.apply(this,arguments)}function Gf(){return(Gf=(0,O.Z)(function*(n,e,t){const r=function P0(n){switch(n){case wd.NOTIFICATION_CLICKED:return"notification_open";case wd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[DD],message_name:t[x1],message_time:t[s_],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function zf(){return zf=(0,O.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===wd.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(I_(t)):n.onMessageHandler.next(I_(t)));const r=t.data;(function MD(n){return"object"==typeof n&&!!n&&DD in n})(r)&&"1"===r[M1]&&(yield function kD(n,e,t){return Gf.apply(this,arguments)}(n,t.messageType,r))}),zf.apply(this,arguments)}const A_="@firebase/messaging",N1=n=>{const e=new ND(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function ju(n,e){return zf.apply(this,arguments)}(e,t)),e},Wf=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function Hf(n,e){return S_.apply(this,arguments)}(e,r)}};function x_(){return qf.apply(this,arguments)}function qf(){return(qf=(0,O.Z)(function*(){try{yield lt()}catch{return!1}return typeof window<"u"&&sn()&&Tt()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function Kf(n=js()){return x_().then(e=>{if(!e)throw wr.create("unsupported-browser")},e=>{throw wr.create("indexed-db-unsupported")}),jr(nn(n),"messaging").getImmediate()}!function OD(){lr(new rn("messaging",N1,"PUBLIC")),lr(new rn("messaging-internal",Wf,"PRIVATE")),kt(A_,"0.12.4"),kt(A_,"0.12.4","esm2017")}();const ql="analytics",Td="firebase_id",FD="origin",U0=6e4,LD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",R_="https://www.googletagmanager.com/gtag/js",Nr=new Ar("@firebase/analytics"),ii=new Jt("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Zf(n){if(!n.startsWith(R_)){const e=ii.create("invalid-gtag-resource",{gtagURL:n});return Nr.warn(e.message),""}return n}function Qf(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function N_(){return(N_=(0,O.Z)(function*(n,e,t,r,i,a){const l=r[i];try{if(l)yield e[l];else{const p=(yield Qf(t)).find(_=>_.measurementId===i);p&&(yield e[p.appId])}}catch(h){Nr.error(h)}n("config",i,a)})).apply(this,arguments)}function k_(){return(k_=(0,O.Z)(function*(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const h=yield Qf(t);for(const p of l){const _=h.find(A=>A.measurementId===p),b=_&&e[_.appId];if(!b){a=[];break}a.push(b)}}0===a.length&&(a=Object.values(e)),yield Promise.all(a),n("event",r,i||{})}catch(a){Nr.error(a)}})).apply(this,arguments)}const j0=30,F_=new class G0{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function BD(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function L_(){return(L_=(0,O.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:BD(r)},a=LD.replace("{app-id}",t),l=yield fetch(a,i);if(200!==l.status&&304!==l.status){let h="";try{const p=yield l.json();null!==(e=p.error)&&void 0!==e&&e.message&&(h=p.error.message)}catch{}throw ii.create("config-fetch-failed",{httpStatus:l.status,responseMessage:h})}return l.json()})).apply(this,arguments)}function V_(){return(V_=(0,O.Z)(function*(n,e=F_,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw ii.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw ii.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new O1;return setTimeout((0,O.Z)(function*(){h.abort()}),void 0!==t?t:U0),Qo({appId:r,apiKey:i,measurementId:a},l,h,e)})).apply(this,arguments)}function Qo(n,e,t){return Hu.apply(this,arguments)}function Hu(){return Hu=(0,O.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=F_){var a;const{appId:l,measurementId:h}=n;try{yield function HD(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(ii.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(p){if(h)return Nr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:h};throw p}try{const p=yield function $D(n){return L_.apply(this,arguments)}(n);return i.deleteThrottleMetadata(l),p}catch(p){const _=p;if(!function k1(n){if(!(n instanceof st&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(_)){if(i.deleteThrottleMetadata(l),h)return Nr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${_?.message}]`),{appId:l,measurementId:h};throw p}const b=503===Number(null===(a=_?.customData)||void 0===a?void 0:a.httpStatus)?tn(t,i.intervalMillis,j0):tn(t,i.intervalMillis),A={throttleEndTimeMillis:Date.now()+b,backoffCount:t+1};return i.setThrottleMetadata(l,A),Nr.debug(`Calling attemptFetch again in ${b} millis`),Qo(n,A,r,i)}}),Hu.apply(this,arguments)}class O1{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let z0,ep;function W0(){return(W0=(0,O.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const a=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:a}))}})).apply(this,arguments)}function Sd(){return(Sd=(0,O.Z)(function*(){if(!sn())return Nr.warn(ii.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield lt()}catch(n){return Nr.warn(ii.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function Y0(){return Y0=(0,O.Z)(function*(n,e,t,r,i,a,l){var h;const p=function jD(n){return V_.apply(this,arguments)}(n);p.then($=>{t[$.measurementId]=$.appId,n.options.measurementId&&$.measurementId!==n.options.measurementId&&Nr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${$.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($=>Nr.error($)),e.push(p);const _=function L1(){return Sd.apply(this,arguments)}().then($=>{if($)return r.getId()}),[b,A]=yield Promise.all([p,_]);(function O_(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(R_)&&t.src.includes(n))return t;return null})(a)||function VD(n,e){const t=function Kl(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:Zf}),r=document.createElement("script"),i=`${R_}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(a,b.measurementId),ep&&(i("consent","default",ep),function WD(n){ep=n}(void 0)),i("js",new Date);const L=null!==(h=l?.config)&&void 0!==h?h:{};return L[FD]="firebase",L.update=!0,null!=A&&(L[Td]=A),i("config",b.measurementId,L),z0&&(i("set",z0),function qD(n){z0=n}(void 0)),b.measurementId}),Y0.apply(this,arguments)}class V1{constructor(e){this.app=e}_delete(){return delete Ks[this.app.options.appId],Promise.resolve()}}let Ks={},Z0=[];const Q0={};let j_,as,tp="dataLayer",X0="gtag",H_=!1;function dr(n,e,t){!function KD(){const n=[];if(K()&&n.push("This is a browser extension environment."),Tt()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ii.create("invalid-analytics-context",{errorInfo:e});Nr.warn(t.message)}}();const r=n.options.appId;if(!r)throw ii.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw ii.create("no-api-key");Nr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ks[r])throw ii.create("already-exists",{id:r});if(!H_){!function UD(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(tp);const{wrappedGtag:a,gtagCore:l}=function Xf(n,e,t,r,i){let a=function(...l){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(a=window[i]),window[i]=function $0(n,e,t,r){function a(){return a=(0,O.Z)(function*(l,...h){try{if("event"===l){const[p,_]=h;yield function P_(n,e,t,r,i){return k_.apply(this,arguments)}(n,e,t,p,_)}else if("config"===l){const[p,_]=h;yield function P1(n,e,t,r,i,a){return N_.apply(this,arguments)}(n,e,t,r,p,_)}else if("consent"===l){const[p]=h;n("consent","update",p)}else if("get"===l){const[p,_,b]=h;n("get",p,_,b)}else if("set"===l){const[p]=h;n("set",p)}else n(l,...h)}catch(p){Nr.error(p)}}),a.apply(this,arguments)}return function i(l){return a.apply(this,arguments)}}(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}(Ks,Z0,Q0,tp,X0);as=a,j_=l,H_=!0}return Ks[r]=function $_(n,e,t,r,i,a,l){return Y0.apply(this,arguments)}(n,Z0,Q0,e,j_,tp,t),new V1(n)}function G_(){return np.apply(this,arguments)}function np(){return(np=(0,O.Z)(function*(){if(K()||!Tt()||!sn())return!1;try{return yield lt()}catch{return!1}})).apply(this,arguments)}const W_="@firebase/analytics";!function tI(){lr(new rn(ql,(e,{options:t})=>dr(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),lr(new rn("analytics-internal",function n(e){try{const t=e.getProvider(ql).getImmediate();return{logEvent:(r,i,a)=>function Ad(n,e,t,r){n=nn(n),function F1(n,e,t,r,i){return W0.apply(this,arguments)}(as,Ks[n.app.options.appId],e,t,r).catch(i=>Nr.error(i))}(t,r,i,a)}}catch(t){throw ii.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),kt(W_,"0.10.0"),kt(W_,"0.10.0","esm2017")}();var H1=j(727);class QD extends H1.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const xd={setInterval(n,e,...t){const{delegate:r}=xd;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=xd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var nI=j(737);class rp extends QD{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,a=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(a,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(a,this.id,t),this}requestAsyncId(e,t,r=0){return xd.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&xd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(a){r=!0,i=a||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,nI.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const ip={now:()=>(ip.delegate||Date).now(),delegate:void 0};class Md{constructor(e,t=Md.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Md.now=ip.now;class sp extends Md{constructor(e,t=Md.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const iI=new class rI extends sp{}(class G1 extends rp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),XD=new sp(rp);var Wa=j(751),JD=j(505),op=j(468),Rd=j(363);const ki=new w.GfV("7.5.0"),ap="__angularfire_symbol__analyticsIsSupportedValue",Nd="__angularfire_symbol__analyticsIsSupported",K_="__angularfire_symbol__remoteConfigIsSupportedValue",Y_="__angularfire_symbol__remoteConfigIsSupported",up="__angularfire_symbol__messagingIsSupportedValue",qa="__angularfire_symbol__messagingIsSupported";globalThis[Nd]||(globalThis[Nd]=G_().then(n=>globalThis[ap]=n).catch(()=>globalThis[ap]=!1)),globalThis[qa]||(globalThis[qa]=x_().then(n=>globalThis[up]=n).catch(()=>globalThis[up]=!1)),globalThis[Y_]||(globalThis[Y_]=Kr().then(n=>globalThis[K_]=n).catch(()=>globalThis[K_]=!1));const lp={async:()=>globalThis[qa],sync:()=>{const n=globalThis[up];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Messaging"));return n}};function zu(n,e,t){if(e){if(1===e.length)return e[0];const a=e.filter(l=>l.app===t);if(1===a.length)return a[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Ka=(n,e)=>{const t=e?[e]:mf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(l=>{r.includes(l)||r.push(l)})}),r};function Zl(){}class Q_{constructor(e,t=iI){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(l){i.runGuarded(()=>{e.apply(this,[l])})},t,r)}}class W1{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zl,{},Zl,Zl)),t.pipe((0,JD.b)({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Wu=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Q_(Zone.current)),this.insideAngular=t.run(()=>new Q_(Zone.current,XD)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(w.LFG(w.R0b))},n.\u0275prov=w.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ys(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function xs(n){return Ys().ngZone.run(()=>n())}function aI(n){return Ys(),function tS(n){return function(t){return(t=t.lift(new W1(n.ngZone))).pipe((0,op.R)(n.outsideAngular),(0,Rd.Q)(n.insideAngular))}}(Ys())(n)}const nS=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),xs(()=>n.apply(void 0,r))},Oi=(n,e)=>function(){let t;const r=arguments;for(let a=0;a<arguments.length;a++)"function"==typeof r[a]&&(e&&(t||(t=xs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zl,{},Zl,Zl)))),r[a]=nS(r[a],t));const i=function eS(n){return Ys().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof Wa.y){const a=Ys();return i.pipe((0,op.R)(a.outsideAngular),(0,Rd.Q)(a.insideAngular))}return xs(()=>i)}return i instanceof Wa.y?i.pipe(aI):i instanceof Promise?xs(()=>new Promise((a,l)=>i.then(h=>xs(()=>a(h)),h=>xs(()=>l(h))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:xs(()=>i)};class Zs{constructor(e){return e}}class Ya{constructor(){return mf()}}const J_=new w.OlP("angularfire2._apps"),ey={provide:Zs,useFactory:function X_(n){return n&&1===n.length?n[0]:new Zs(js())},deps:[[new w.FiY,J_]]},Pd={provide:Ya,deps:[[new w.FiY,J_]]};function rS(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Zs(r)}}let iS=(()=>{class n{constructor(t){kt("angularfire",ki.full,"core"),kt("angularfire",ki.full,"app"),kt("angular",w.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(w.LFG(w.Lbi))},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({providers:[ey,Pd]}),n})();function sS(n,...e){return{ngModule:iS,providers:[{provide:J_,useFactory:rS(n),multi:!0,deps:[w.R0b,w.zs3,Wu,...e]}]}}const oS=Oi(Dl,!0),ty=new Map,aS={activated:!1,tokenObservers:[]},X1={initialized:!1,enabled:!1};function jn(n){return ty.get(n)||Object.assign({},aS)}function Od(){return X1}const dp="https://content-firebaseappcheck.googleapis.com/v1",lS="exchangeDebugToken",cI={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class cS{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,O.Z)(function*(){t.stop();try{t.pending=new Ce,yield function dI(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ce,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Yr=new Jt("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gp(n,e){return ry.apply(this,arguments)}function ry(){return(ry=(0,O.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(A){throw Yr.create("fetch-network-error",{originalErrorMessage:A?.message})}if(200!==l.status)throw Yr.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(A){throw Yr.create("fetch-parse-error",{originalErrorMessage:A?.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Yr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const _=1e3*Number(p[1]),b=Date.now();return{token:h.token,expireTimeMillis:b+_,issuedAtTimeMillis:b}})).apply(this,arguments)}const fI="firebase-app-check-database",hS=1,Fd="firebase-app-check-store";let mp=null;function ay(n,e){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,O.Z)(function*(n,e){const r=(yield function oy(){return mp||(mp=new Promise((n,e)=>{try{const t=indexedDB.open(fI,hS);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Yr.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Fd,{keyPath:"compositeKey"})}}catch(t){e(Yr.create("storage-open",{originalErrorMessage:t?.message}))}}),mp)}()).transaction(Fd,"readwrite"),a=r.objectStore(Fd).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=p=>{l()},r.onerror=p=>{var _;h(Yr.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const Vd=new Ar("@firebase/app-check");function _I(n,e){return sn()?function pS(n,e){return ay(function _p(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Vd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function uy(){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,O.Z)(function*(){const n=Od();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const vI={error:"UNKNOWN_ERROR"};function vp(n){return ye.encodeString(JSON.stringify(n),!1)}function wp(n){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,O.Z)(function*(n,e=!1){const t=n.app;!function ny(n){if(!jn(n).activated)throw Yr.create("use-before-activation",{appName:n.name})}(t);const r=jn(t);let a,i=r.token;if(i&&!qu(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(qu(p)?i=p:yield _I(t,void 0))}if(!e&&i&&qu(i))return{token:i.token};let h,l=!1;if(function yI(){return Od().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gp(function iy(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${dp}/projects/${t}/apps/${r}:${lS}?key=${i}`,body:{debug_token:e}}}(t,yield uy()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const p=yield r.exchangeTokenPromise;return yield _I(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield jn(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Vd.warn(p.message):Vd.error(p),a=p}return i?a?h=qu(i)?{token:i.token,internalError:a}:hy(a):(h={token:i.token},r.token=i,yield _I(t,i)):h=hy(a),l&&function II(n,e){const t=jn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function dy(n,e){const t=jn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function wI(n){const{app:e}=n,t=jn(e);let r=t.tokenRefresher;r||(r=function EI(n){const{app:e}=n;return new cS((0,O.Z)(function*(){let r;if(r=jn(e).token?yield wp(n,!0):yield wp(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=jn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},cI.RETRIAL_MIN_WAIT,cI.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qu(n){return n.expireTimeMillis-Date.now()>0}function hy(n){return{token:vp(vI),error:n}}class fy{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=jn(this.app);for(const t of e)dy(this.app,t.next);return Promise.resolve()}}const SI="app-check-internal";!function IS(){lr(new rn("app-check",n=>function nk(n,e){return new fy(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(SI).initialize()})),lr(new rn(SI,n=>function py(n){return{getToken:e=>wp(n,e),addTokenListener:e=>function cy(n,e,t,r){const{app:i}=n,a=jn(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&qu(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),wI(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>wI(n))}(n,"INTERNAL",e),removeTokenListener:e=>dy(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),kt("@firebase/app-check","0.7.0")}();class Xl{constructor(){return Ka("app-check")}}typeof window<"u"&&window;var Xs=j(655);const SS=function MI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},NI=new Jt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ku=new Ar("@firebase/auth");function Iy(n,...e){Ku.logLevel<=he.ERROR&&Ku.error(`Auth (${ws}): ${n}`,...e)}function si(n,...e){throw Ap(n,...e)}function ea(n,...e){return Ap(n,...e)}function Ap(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return NI.create(n,...e)}function Me(n,e,...t){if(!n)throw Ap(e,...t)}function Ms(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Iy(e),new Error(e)}function oi(n,e){n||Ms(e)}function Ja(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function ec(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class tc{constructor(e,t){this.shortDelay=e,this.longDelay=t,oi(t>e,"Short delay should be less than long delay!"),this.isMobile=Ht()||ce()}get(){return function AS(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Jl(){return"http:"===ec()||"https:"===ec()}()||K()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function by(n,e){oi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class kI{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hd={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},xS=new tc(3e4,6e4);function Zn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Qn(n,e,t,r){return Ty.apply(this,arguments)}function Ty(){return(Ty=(0,O.Z)(function*(n,e,t,r,i={}){return OI(n,i,(0,O.Z)(function*(){let a={},l={};r&&("GET"===e?l=r:a={body:JSON.stringify(r)});const h=en(Object.assign({key:n.config.apiKey},l)).slice(1),p=yield n._getAdditionalHeaders();return p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode),kI.fetch()(FI(n,n.config.apiHost,t,h),Object.assign({method:e,headers:p,referrerPolicy:"no-referrer"},a))}))})).apply(this,arguments)}function OI(n,e,t){return Dy.apply(this,arguments)}function Dy(){return(Dy=(0,O.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hd),e);try{const i=new LI(n),a=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=yield a.json();if("needConfirmation"in l)throw Zu(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[p,_]=h.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===p)throw Zu(n,"credential-already-in-use",l);if("EMAIL_EXISTS"===p)throw Zu(n,"email-already-in-use",l);if("USER_DISABLED"===p)throw Zu(n,"user-disabled",l);const b=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw function Cy(n,e,t){const r=Object.assign(Object.assign({},SS()),{[e]:t});return new Jt("auth","Firebase",r).create(e,{appName:n.name})}(n,b,_);si(n,b)}}catch(i){if(i instanceof st)throw i;si(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function ta(n,e,t,r){return Sy.apply(this,arguments)}function Sy(){return(Sy=(0,O.Z)(function*(n,e,t,r,i={}){const a=yield Qn(n,e,t,r,i);return"mfaPendingCredential"in a&&si(n,"multi-factor-auth-required",{_serverResponse:a}),a})).apply(this,arguments)}function FI(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?by(n.config,i):`${n.config.apiScheme}://${i}`}class LI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ea(this.auth,"network-request-failed")),xS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ea(n,e,r);return i.customData._tokenResponse=t,i}function Gd(){return(Gd=(0,O.Z)(function*(n,e){return Qn(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function xy(){return(xy=(0,O.Z)(function*(n,e){return Qn(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function zd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function xp(){return(xp=(0,O.Z)(function*(n,e=!1){const t=nn(n),r=yield t.getIdToken(e),i=Rp(r);Me(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a="object"==typeof i.firebase?i.firebase:void 0,l=a?.sign_in_provider;return{claims:i,token:r,authTime:zd(Mp(i.auth_time)),issuedAtTime:zd(Mp(i.iat)),expirationTime:zd(Mp(i.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}})).apply(this,arguments)}function Mp(n){return 1e3*Number(n)}function Rp(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return Iy("JWT malformed, contained fewer than 3 sections"),null;try{const i=de(t);return i?JSON.parse(i):(Iy("Failed to decode base64 JWT payload"),null)}catch(i){return Iy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Io(n,e){return VI.apply(this,arguments)}function VI(){return(VI=(0,O.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof st&&function Np({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class kS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,O.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,O.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class UI{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zd(this.lastLoginAt),this.creationTime=zd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qu(n){return My.apply(this,arguments)}function My(){return My=(0,O.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Io(n,function NS(n,e){return xy.apply(this,arguments)}(t,{idToken:r}));Me(i?.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=null!==(e=a.providerUserInfo)&&void 0!==e&&e.length?function Ju(n){return n.map(e=>{var{providerId:t}=e,r=(0,Xs._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(a.providerUserInfo):[],h=function ai(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,l),b=!!n.isAnonymous&&!(n.email&&a.passwordHash||h?.length),A={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new UI(a.createdAt,a.lastLoginAt),isAnonymous:b};Object.assign(n,A)}),My.apply(this,arguments)}function Xu(){return(Xu=(0,O.Z)(function*(n){const e=nn(n);yield Qu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function Li(){return(Li=(0,O.Z)(function*(n,e){const t=yield OI(n,{},(0,O.Z)(function*(){const r=en({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,l=FI(n,i,"/v1/token",`key=${a}`),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",kI.fetch()(l,{method:"POST",headers:h,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class el{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function wk(n){const e=Rp(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,O.Z)(function*(){return Me(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,O.Z)(function*(){const{accessToken:i,refreshToken:a,expiresIn:l}=yield function Pp(n,e){return Li.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,a,Number(l))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,l=new el;return r&&(Me("string"==typeof r,"internal-error",{appName:e}),l.refreshToken=r),i&&(Me("string"==typeof i,"internal-error",{appName:e}),l.accessToken=i),a&&(Me("number"==typeof a,"internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new el,this.toJSON())}_performRefresh(){return Ms("not implemented")}}function us(n,e){Me("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Rs{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=(0,Xs._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new UI(a.createdAt||void 0,a.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,O.Z)(function*(){const r=yield Io(t,t.stsTokenManager.getToken(t.auth,e));return Me(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function PS(n){return xp.apply(this,arguments)}(this,e)}reload(){return function Co(n){return Xu.apply(this,arguments)}(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,O.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Qu(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,O.Z)(function*(){const t=yield e.getIdToken();return yield Io(e,function MS(n,e){return Gd.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,l,h,p,_,b;const A=null!==(r=t.displayName)&&void 0!==r?r:void 0,L=null!==(i=t.email)&&void 0!==i?i:void 0,$=null!==(a=t.phoneNumber)&&void 0!==a?a:void 0,W=null!==(l=t.photoURL)&&void 0!==l?l:void 0,re=null!==(h=t.tenantId)&&void 0!==h?h:void 0,fe=null!==(p=t._redirectEventId)&&void 0!==p?p:void 0,He=null!==(_=t.createdAt)&&void 0!==_?_:void 0,ut=null!==(b=t.lastLoginAt)&&void 0!==b?b:void 0,{uid:qe,emailVerified:jt,isAnonymous:hn,providerData:Zt,stsTokenManager:Vr}=t;Me(qe&&Vr,e,"internal-error");const Wi=el.fromJSON(this.name,Vr);Me("string"==typeof qe,e,"internal-error"),us(A,e.name),us(L,e.name),Me("boolean"==typeof jt,e,"internal-error"),Me("boolean"==typeof hn,e,"internal-error"),us($,e.name),us(W,e.name),us(re,e.name),us(fe,e.name),us(He,e.name),us(ut,e.name);const df=new Rs({uid:qe,auth:e,email:L,emailVerified:jt,displayName:A,isAnonymous:hn,photoURL:W,phoneNumber:$,tenantId:re,stsTokenManager:Wi,createdAt:He,lastLoginAt:ut});return Zt&&Array.isArray(Zt)&&(df.providerData=Zt.map(_8=>Object.assign({},_8))),fe&&(df._redirectEventId=fe),df}static _fromIdTokenResponse(e,t,r=!1){return(0,O.Z)(function*(){const i=new el;i.updateFromServerResponse(t);const a=new Rs({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Qu(a),a})()}}const tl=new Map;function Vi(n){oi(n instanceof Function,"Expected a class definition");let e=tl.get(n);return e?(oi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tl.set(n,e),e)}const nl=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,O.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,O.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,O.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,O.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function na(n,e,t){return`firebase:${n}:${e}:${t}`}class Js{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=na(this.userKey,i.apiKey,a),this.fullPersistenceKey=na("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,O.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Rs._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,O.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,O.Z)(function*(){if(!t.length)return new Js(Vi(nl),e,r);const i=(yield Promise.all(t.map(function(){var _=(0,O.Z)(function*(b){if(yield b._isAvailable())return b});return function(b){return _.apply(this,arguments)}}()))).filter(_=>_);let a=i[0]||Vi(nl);const l=na(r,e.config.apiKey,e.name);let h=null;for(const _ of t)try{const b=yield _._get(l);if(b){const A=Rs._fromJSON(e,b);_!==a&&(h=A),a=_;break}}catch{}const p=i.filter(_=>_._shouldAllowMigration);return a._shouldAllowMigration&&p.length?(a=p[0],h&&(yield a._set(l,h.toJSON())),yield Promise.all(t.map(function(){var _=(0,O.Z)(function*(b){if(b!==a)try{yield b._remove(l)}catch{}});return function(b){return _.apply(this,arguments)}}())),new Js(a,e,r)):new Js(a,e,r)})()}}function rl(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Py(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ry(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Oy(e))return"Blackberry";if(Fy(e))return"Webos";if(kp(e))return"Safari";if((e.includes("chrome/")||Ny(e))&&!e.includes("edge/"))return"Chrome";if(ky(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function Ry(n=Fe()){return/firefox\//i.test(n)}function kp(n=Fe()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ny(n=Fe()){return/crios\//i.test(n)}function Py(n=Fe()){return/iemobile/i.test(n)}function ky(n=Fe()){return/android/i.test(n)}function Oy(n=Fe()){return/blackberry/i.test(n)}function Fy(n=Fe()){return/webos/i.test(n)}function qd(n=Fe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Ly(n=Fe()){return qd(n)||ky(n)||Fy(n)||Oy(n)||/windows phone/i.test(n)||Py(n)}function Vy(n,e=[]){let t;switch(n){case"Browser":t=rl(Fe());break;case"Worker":t=`${rl(Fe())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ws}/${r}`}function BI(n,e){return nc.apply(this,arguments)}function nc(){return(nc=(0,O.Z)(function*(n,e){return Qn(n,"GET","/v2/recaptchaConfig",Zn(n,e))})).apply(this,arguments)}function Op(n){return void 0!==n&&void 0!==n.enterprise}class $I{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState)}}function Zd(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=ea("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",function By(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}function $y(n){return`__${n}${Math.floor(1e6*Math.random())}`}const HI="NO_RECAPTCHA";class Hy{constructor(e){this.type="recaptcha-enterprise",this.auth=Er(e)}verify(e="verify",t=!1){var r=this;return(0,O.Z)(function*(){function a(){return a=(0,O.Z)(function*(h){if(!t){if(null==h.tenantId&&null!=h._agentRecaptchaConfig)return h._agentRecaptchaConfig.siteKey;if(null!=h.tenantId&&void 0!==h._tenantRecaptchaConfigs[h.tenantId])return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(function(){var p=(0,O.Z)(function*(_,b){BI(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(A=>{if(void 0!==A.recaptchaKey){const L=new $I(A);return null==h.tenantId?h._agentRecaptchaConfig=L:h._tenantRecaptchaConfigs[h.tenantId]=L,_(L.siteKey)}b(new Error("recaptcha Enterprise site key undefined"))}).catch(A=>{b(A)})});return function(_,b){return p.apply(this,arguments)}}())}),a.apply(this,arguments)}function l(h,p,_){const b=window.grecaptcha;Op(b)?b.enterprise.ready(()=>{b.enterprise.execute(h,{action:e}).then(A=>{p(A)}).catch(()=>{p(HI)})}):_(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((h,p)=>{(function i(h){return a.apply(this,arguments)})(r.auth).then(_=>{if(!t&&Op(window.grecaptcha))l(_,h,p);else{if(typeof window>"u")return void p(new Error("RecaptchaVerifier is only supported in browser"));Zd("https://www.google.com/recaptcha/enterprise.js?render="+_).then(()=>{l(_,h,p)}).catch(b=>{p(b)})}}).catch(_=>{p(_)})})})()}}function bo(n,e,t){return Fp.apply(this,arguments)}function Fp(){return(Fp=(0,O.Z)(function*(n,e,t,r=!1){const i=new Hy(n);let a;try{a=yield i.verify(t)}catch{a=yield i.verify(t,!0)}const l=Object.assign({},e);return Object.assign(l,r?{captchaResp:a}:{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l})).apply(this,arguments)}class US{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,h)=>{try{l(e(a))}catch(p){h(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,O.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const a of r)try{a()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class GI{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gy(this),this.idTokenSubscription=new Gy(this),this.beforeStateQueue=new US(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Vi(t)),this._initializationPromise=this.queue((0,O.Z)(function*(){var i,a;if(!r._deleted&&(r.persistenceManager=yield Js.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(a=r.currentUser)||void 0===a?void 0:a.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,O.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,O.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const h=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,p=a?._redirectEventId,_=yield t.tryRedirectSignIn(e);(!h||h===p)&&_?.user&&(a=_.user,l=!0)}if(!a)return t.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{yield t.beforeStateQueue.runMiddleware(a)}catch(h){a=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(h))}return a?t.reloadAndSetCurrentUserOrClear(a):t.directlySetCurrentUser(null)}return Me(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===a._redirectEventId?t.directlySetCurrentUser(a):t.reloadAndSetCurrentUserOrClear(a)})()}tryRedirectSignIn(e){var t=this;return(0,O.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,O.Z)(function*(){try{yield Qu(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function PI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,O.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,O.Z)(function*(){const r=e?nn(e):null;return r&&Me(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,O.Z)(function*(){if(!r._deleted)return e&&Me(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,O.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,O.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,O.Z)(function*(){yield t.assertedPersistence.setPersistence(Vi(e))}))}initializeRecaptchaConfig(){var e=this;return(0,O.Z)(function*(){const t=yield BI(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new $I(t);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new Hy(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,O.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,O.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&Vi(e)||t._popupRedirectResolver;Me(r,t,"argument-error"),t.redirectPersistenceManager=yield Js.create(t,[Vi(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,O.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,O.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,O.Z)(function*(){if(e===t.currentUser)return t.queue((0,O.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a="function"==typeof t?t:t.next.bind(t),l=this._isInitialized?Promise.resolve():this._initializationPromise;return Me(l,this,"internal-error"),l.then(()=>a(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,O.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,O.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const a=yield e._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r})()}_getAppCheckToken(){var e=this;return(0,O.Z)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function Sp(n,...e){Ku.logLevel<=he.WARN&&Ku.warn(`Auth (${ws}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Er(n){return nn(n)}class Gy{constructor(e){this.auth=e,this.observer=null,this.addObserver=function fn(n,e){const t=new nr(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function WI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Lp(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class Wy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ms("not implemented")}_getIdTokenResponse(e){return Ms("not implemented")}_linkToIdToken(e,t){return Ms("not implemented")}_getReauthenticationResolver(e){return Ms("not implemented")}}function Ky(n,e){return Up.apply(this,arguments)}function Up(){return(Up=(0,O.Z)(function*(n,e){return Qn(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function rc(n,e){return To.apply(this,arguments)}function To(){return(To=(0,O.Z)(function*(n,e){return ta(n,"POST","/v1/accounts:signInWithPassword",Zn(n,e))})).apply(this,arguments)}function jp(){return(jp=(0,O.Z)(function*(n,e){return ta(n,"POST","/v1/accounts:signInWithEmailLink",Zn(n,e))})).apply(this,arguments)}function rr(){return(rr=(0,O.Z)(function*(n,e){return ta(n,"POST","/v1/accounts:signInWithEmailLink",Zn(n,e))})).apply(this,arguments)}class ic extends Wy{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ic(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ic(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,O.Z)(function*(){var r;switch(t.signInMethod){case"password":const i={returnSecureToken:!0,email:t._email,password:t._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(r=e._getRecaptchaConfig())&&void 0!==r&&r.emailPasswordEnabled){const a=yield bo(e,i,"signInWithPassword");return rc(e,a)}return rc(e,i).catch(function(){var a=(0,O.Z)(function*(l){if("auth/missing-recaptcha-token"===l.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const h=yield bo(e,i,"signInWithPassword");return rc(e,h)}return Promise.reject(l)});return function(l){return a.apply(this,arguments)}}());case"emailLink":return function jS(n,e){return jp.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:si(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return(0,O.Z)(function*(){switch(r.signInMethod){case"password":return Ky(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function HS(n,e){return rr.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:si(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function ia(n,e){return Jy.apply(this,arguments)}function Jy(){return(Jy=(0,O.Z)(function*(n,e){return ta(n,"POST","/v1/accounts:signInWithIdp",Zn(n,e))})).apply(this,arguments)}class eh{constructor(e){var t,r,i,a,l,h;const p=_e(it(e)),_=null!==(t=p.apiKey)&&void 0!==t?t:null,b=null!==(r=p.oobCode)&&void 0!==r?r:null,A=function tv(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=p.mode)&&void 0!==i?i:null);Me(_&&b&&A,"argument-error"),this.apiKey=_,this.operation=A,this.code=b,this.continueUrl=null!==(a=p.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(l=p.languageCode)&&void 0!==l?l:null,this.tenantId=null!==(h=p.tenantId)&&void 0!==h?h:null}static parseLink(e){const t=function Do(n){const e=_e(it(n)).link,t=e?_e(it(e)).deep_link_id:null,r=_e(it(n)).deep_link_id;return(r?_e(it(r)).link:null)||r||t||e||n}(e);try{return new eh(t)}catch{return null}}}let eo=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return ic._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=eh.parseLink(r);return Me(i,"argument-error"),ic._fromEmailAndCode(t,i.code,i.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class Pr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class to extends Pr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function rh(n,e){return rv.apply(this,arguments)}function rv(){return(rv=(0,O.Z)(function*(n,e){return ta(n,"POST","/v1/accounts:signUp",Zn(n,e))})).apply(this,arguments)}class Ns{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,O.Z)(function*(){const a=yield Rs._fromIdTokenResponse(e,r,i),l=iv(r);return new Ns({user:a,providerId:l,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,O.Z)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=iv(r);return new Ns({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function iv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class zp extends st{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,zp.prototype),this.customData={appName:e.name,tenantId:null!==(a=e.tenantId)&&void 0!==a?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new zp(e,t,r,i)}}function sv(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw"auth/multi-factor-auth-required"===a.code?zp._fromErrorAndOperation(n,a,e,r):a})}function ih(n,e){return Wp.apply(this,arguments)}function Wp(){return(Wp=(0,O.Z)(function*(n,e,t=!1){const r=yield Io(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ns._forOperation(n,"link",r)})).apply(this,arguments)}function av(n,e){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,O.Z)(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const a=yield Io(n,sv(r,i,e,n),t);Me(a.idToken,r,"internal-error");const l=Rp(a.idToken);Me(l,r,"internal-error");const{sub:h}=l;return Me(n.uid===h,r,"user-mismatch"),Ns._forOperation(n,i,a)}catch(a){throw"auth/user-not-found"===a?.code&&si(r,"user-mismatch"),a}})).apply(this,arguments)}function uv(n,e){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,O.Z)(function*(n,e,t=!1){const r="signIn",i=yield sv(n,r,e),a=yield Ns._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(a.user)),a})).apply(this,arguments)}function Zp(n,e){return lv.apply(this,arguments)}function lv(){return(lv=(0,O.Z)(function*(n,e){return uv(Er(n),e)})).apply(this,arguments)}function nC(n,e,t){return eg.apply(this,arguments)}function eg(){return eg=(0,O.Z)(function*(n,e,t){var r;const i=Er(n),a={returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"};let l;if(null!==(r=i._getRecaptchaConfig())&&void 0!==r&&r.emailPasswordEnabled){const _=yield bo(i,a,"signUpPassword");l=rh(i,_)}else l=rh(i,a).catch(function(){var _=(0,O.Z)(function*(b){if("auth/missing-recaptcha-token"===b.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const A=yield bo(i,a,"signUpPassword");return rh(i,A)}return Promise.reject(b)});return function(b){return _.apply(this,arguments)}}());const h=yield l.catch(_=>Promise.reject(_)),p=yield Ns._fromIdTokenResponse(i,"signIn",h);return yield i._updateCurrentUser(p.user),p}),eg.apply(this,arguments)}function rC(n,e,t){return Zp(nn(n),eo.credential(e,t))}function ig(n){return nn(n).signOut()}const lh="__sak";class dC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lh,"1"),this.storage.removeItem(lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const $k=(()=>{class n extends dC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function dA(){const n=Fe();return kp(n)||qd(n)}()&&function VS(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ly(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),a=this.localCache[r];i!==a&&t(r,a,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((h,p,_)=>{this.notifyListeners(h,_)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const h=this.storage.getItem(i);if(t.newValue!==h)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const a=()=>{const h=this.storage.getItem(i);!r&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);!function LS(){return function Ne(){const n=Fe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||l===t.newValue||t.newValue===t.oldValue?a():setTimeout(a,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,a=this;return(0,O.Z)(function*(){yield i().call(a,t,r),a.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,O.Z)(function*(){const a=yield r().call(i,t);return i.localCache[t]=JSON.stringify(a),a})()}_remove(t){var r=()=>super._remove,i=this;return(0,O.Z)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),ch=(()=>{class n extends dC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let pA=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,O.Z)(function*(){const i=t,{eventId:a,eventType:l,data:h}=i.data,p=r.handlersMap[l];if(!p?.size)return;i.ports[0].postMessage({status:"ack",eventId:a,eventType:l});const _=Array.from(p).map(function(){var A=(0,O.Z)(function*(L){return L(i.origin,h)});return function(L){return A.apply(this,arguments)}}()),b=yield function fA(n){return Promise.all(n.map(function(){var e=(0,O.Z)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(_);i.ports[0].postMessage({status:"done",eventId:a,eventType:l,response:b})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function lg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class dh{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,O.Z)(function*(){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,h;return new Promise((p,_)=>{const b=lg("",20);a.port1.start();const A=setTimeout(()=>{_(new Error("unsupported_event"))},r);h={messageChannel:a,onMessage(L){const $=L;if($.data.eventId===b)switch($.data.status){case"ack":clearTimeout(A),l=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p($.data.response);break;default:clearTimeout(A),clearTimeout(l),_(new Error("invalid_response"))}}},i.handlers.add(h),a.port1.addEventListener("message",h.onMessage),i.target.postMessage({eventType:e,eventId:b,data:t},[a.port2])}).finally(()=>{h&&i.removeMessageHandler(h)})})()}}function hr(){return window}function Cv(){return typeof hr().WorkerGlobalScope<"u"&&"function"==typeof hr().importScripts}function hC(){return(hC=(0,O.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const pC="firebaseLocalStorageDb",yA=1,nu="firebaseLocalStorage",gC="fbase_key";class hc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function cg(n,e){return n.transaction([nu],e?"readwrite":"readonly").objectStore(nu)}function bv(){const n=indexedDB.open(pC,yA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(nu,{keyPath:gC})}catch(i){t(i)}}),n.addEventListener("success",(0,O.Z)(function*(){const r=n.result;r.objectStoreNames.contains(nu)?e(r):(r.close(),yield function mC(){const n=indexedDB.deleteDatabase(pC);return new hc(n).toPromise()}(),e(yield bv()))}))})}function Tv(n,e,t){return Dv.apply(this,arguments)}function Dv(){return(Dv=(0,O.Z)(function*(n,e,t){const r=cg(n,!0).put({[gC]:e,value:t});return new hc(r).toPromise()})).apply(this,arguments)}function Av(){return(Av=(0,O.Z)(function*(n,e){const t=cg(n,!1).get(e),r=yield new hc(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function xv(n,e){const t=cg(n,!0).delete(e);return new hc(t).toPromise()}const wA=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,O.Z)(function*(){return t.db||(t.db=yield bv()),t.db})()}_withRetries(t){var r=this;return(0,O.Z)(function*(){let i=0;for(;;)try{const a=yield r._openDb();return yield t(a)}catch(a){if(i++>3)throw a;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,O.Z)(function*(){return Cv()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,O.Z)(function*(){t.receiver=pA._getInstance(function fC(){return Cv()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,O.Z)(function*(i,a){return{keyProcessed:(yield t._poll()).includes(a.key)}});return function(i,a){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,O.Z)(function*(i,a){return["keyChanged"]});return function(i,a){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,O.Z)(function*(){var r,i;if(t.activeServiceWorker=yield function mA(){return hC.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new dh(t.activeServiceWorker);const a=yield t.sender._send("ping",{},800);a&&null!==(r=a[0])&&void 0!==r&&r.fulfilled&&null!==(i=a[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,O.Z)(function*(){if(r.sender&&r.activeServiceWorker&&function _A(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,O.Z)(function*(){try{if(!indexedDB)return!1;const t=yield bv();return yield Tv(t,lh,"1"),yield xv(t,lh),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,O.Z)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,O.Z)(function*(){return i._withPendingWrite((0,O.Z)(function*(){return yield i._withRetries(a=>Tv(a,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,O.Z)(function*(){const i=yield r._withRetries(a=>function Sv(n,e){return Av.apply(this,arguments)}(a,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,O.Z)(function*(){return r._withPendingWrite((0,O.Z)(function*(){return yield r._withRetries(i=>xv(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,O.Z)(function*(){const r=yield t._withRetries(l=>{const h=cg(l,!1).getAll();return new hc(h).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],a=new Set;for(const{fbase_key:l,value:h}of r)a.add(l),JSON.stringify(t.localCache[l])!==JSON.stringify(h)&&(t.notifyListeners(l,h),i.push(l));for(const l of Object.keys(t.localCache))t.localCache[l]&&!a.has(l)&&(t.notifyListeners(l,null),i.push(l));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,O.Z)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();$y("rcb"),new tc(3e4,6e4);class gg extends Wy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ia(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ia(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ia(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ov(n){return uv(n.auth,new gg(n),n.bypassAuthState)}function NA(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),av(t,new gg(n),n.bypassAuthState)}function Fv(n){return Lv.apply(this,arguments)}function Lv(){return(Lv=(0,O.Z)(function*(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),ih(t,new gg(n),n.bypassAuthState)})).apply(this,arguments)}class CC{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,O.Z)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(a){e.reject(a)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,O.Z)(function*(){const{urlResponse:r,sessionId:i,postBody:a,tenantId:l,error:h,type:p}=e;if(h)return void t.reject(h);const _={auth:t.auth,requestUri:r,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(p)(_))}catch(b){t.reject(b)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ov;case"linkViaPopup":case"linkViaRedirect":return Fv;case"reauthViaPopup":case"reauthViaRedirect":return NA;default:si(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new tc(2e3,1e4);const OA="pendingRedirect",pc=new Map;class qk extends CC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,O.Z)(function*(){let r=pc.get(t.auth._key());if(!r){try{const a=(yield function TC(n,e){return Bv.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(a)}catch(i){r=()=>Promise.reject(i)}pc.set(t.auth._key(),r)}return t.bypassAuthState||pc.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,O.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,O.Z)(function*(){})()}cleanUp(){}}function Bv(){return(Bv=(0,O.Z)(function*(n,e){const t=function AC(n){return na(OA,n.config.apiKey,n.name)}(e),r=function SC(n){return Vi(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function FA(n,e){pc.set(n._key(),e)}function Gv(n,e){return vg.apply(this,arguments)}function vg(){return(vg=(0,O.Z)(function*(n,e,t=!1){const r=Er(n),i=function fc(n,e){return e?Vi(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(r,e),l=yield new qk(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,yield r._persistUserIfCurrent(l.user),yield r._setRedirectUser(null,e)),l})).apply(this,arguments)}class Xk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function jA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xC(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!xC(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(ea(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wv(e))}saveEventToCache(e){this.cachedEventUids.add(Wv(e)),this.lastProcessedEventTime=Date.now()}}function Wv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function xC({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function qv(){return(qv=(0,O.Z)(function*(n,e={}){return Qn(n,"GET","/v1/projects",e)})).apply(this,arguments)}const gh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GA=/^https?/;function Ps(){return Ps=(0,O.Z)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function HA(n){return qv.apply(this,arguments)}(n);for(const t of e)try{if(zA(t))return}catch{}si(n,"unauthorized-domain")}),Ps.apply(this,arguments)}function zA(n){const e=Ja(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return""===l.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&l.hostname===r}if(!GA.test(t))return!1;if(gh.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Yv=new tc(3e4,6e4);function gc(){const n=hr().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let Eg=null;const Ig=new tc(5e3,15e3),Cg="__/auth/iframe",KA="emulator/auth/iframe",YA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RC(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?by(e,KA):`https://${n.config.authDomain}/${Cg}`,r={apiKey:e.apiKey,appName:n.name,v:ws},i=MC.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${en(r).slice(1)}`}function bg(){return bg=(0,O.Z)(function*(n){const e=yield function qA(n){return Eg=Eg||function WA(n){return new Promise((e,t)=>{var r,i,a;function l(){gc(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gc(),t(ea(n,"network-request-failed"))},timeout:Yv.get()})}if(null!==(i=null===(r=hr().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(a=hr().gapi)||void 0===a||!a.load){const h=$y("iframefcb");return hr()[h]=()=>{gapi.load?l():t(ea(n,"network-request-failed"))},Zd(`https://apis.google.com/js/api.js?onload=${h}`).catch(p=>t(p))}l()}}).catch(e=>{throw Eg=null,e})}(n),Eg}(n),t=hr().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:RC(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YA,dontclear:!0},r=>new Promise(function(){var i=(0,O.Z)(function*(a,l){yield r.restyle({setHideOnLeave:!1});const h=ea(n,"network-request-failed"),p=hr().setTimeout(()=>{l(h)},Ig.get());function _(){hr().clearTimeout(p),a(r)}r.ping(_).then(_,()=>{l(h)})});return function(a,l){return i.apply(this,arguments)}}()))}),bg.apply(this,arguments)}const Qv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xv=500,NC=600,Jv="_blank",ew="http://localhost";class PC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const XA="__/auth/handler",kC="emulator/auth/handler",tw=encodeURIComponent("fac");function nw(n,e,t,r,i,a){return rw.apply(this,arguments)}function rw(){return(rw=(0,O.Z)(function*(n,e,t,r,i,a){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ws,eventId:i};if(e instanceof Pr){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",bi(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,A]of Object.entries(a||{}))l[b]=A}if(e instanceof to){const b=e.getScopes().filter(A=>""!==A);b.length>0&&(l.scopes=b.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const b of Object.keys(h))void 0===h[b]&&delete h[b];const p=yield n._getAppCheckToken(),_=p?`#${tw}=${encodeURIComponent(p)}`:"";return`${function OC({config:n}){return n.emulator?by(n,kC):`https://${n.authDomain}/${XA}`}(n)}?${en(h).slice(1)}${_}`})).apply(this,arguments)}const Tg="webStorageSupport",FC=class JA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ch,this._completeRedirectFn=Gv,this._overrideRedirectResult=FA}_openPopup(e,t,r,i){var a=this;return(0,O.Z)(function*(){var l;oi(null===(l=a.eventManagers[e._key()])||void 0===l?void 0:l.manager,"_initialize() not called before _openPopup()");const h=yield nw(e,t,r,Ja(),i);return function ZA(n,e,t,r=Xv,i=NC){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const p=Object.assign(Object.assign({},Qv),{width:r.toString(),height:i.toString(),top:a,left:l}),_=Fe().toLowerCase();t&&(h=Ny(_)?Jv:t),Ry(_)&&(e=e||ew,p.scrollbars="yes");const b=Object.entries(p).reduce((L,[$,W])=>`${L}${$}=${W},`,"");if(function FS(n=Fe()){var e;return qd(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(_)&&"_self"!==h)return function QA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",h),new PC(null);const A=window.open(e||"",h,b);Me(A,n,"popup-blocked");try{A.focus()}catch{}return new PC(A)}(e,h,lg())})()}_openRedirect(e,t,r,i){var a=this;return(0,O.Z)(function*(){return yield a._originValidation(e),function gA(n){hr().location.href=n}(yield nw(e,t,r,Ja(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(oi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,O.Z)(function*(){const r=yield function Zv(n){return bg.apply(this,arguments)}(e),i=new Xk(e);return r.register("authEvent",a=>(Me(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tg,{type:Tg},i=>{var a;const l=null===(a=i?.[0])||void 0===a?void 0:a[Tg];void 0!==l&&t(!!l),si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function Kv(n){return Ps.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ly()||kp()||qd()}};var VC="@firebase/auth";class Jk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,O.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ix=et("authIdTokenMaxAge")||300;let Sg=null;const sx=n=>function(){var e=(0,O.Z)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>ix)return;const a=r?.token;Sg!==a&&(Sg=a,yield fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function BC(n=js()){const e=jr(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function zI(n,e){const t=jr(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(qi(t.getOptions(),e??{}))return i;si(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:FC,persistence:[wA,$k,ch]}),r=et("authTokenSyncURL");if(r){const a=sx(r);(function ah(n,e,t){nn(n).beforeAuthStateChanged(e,t)})(t,a,()=>a(t.currentUser)),function oA(n,e,t,r){nn(n).onIdTokenChanged(e,t,r)}(t,l=>a(l))}const i=xe("auth");return i&&function $S(n,e,t){const r=Er(n);Me(r._canInitEmulator,r,"emulator-config-failed"),Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,a=WI(e),{host:l,port:h}=function zy(n){const e=WI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Lp(r.substr(a.length+1))}}{const[a,l]=r.split(":");return{host:a,port:Lp(l)}}}(e);r.config.emulator={url:`${a}//${l}${null===h?"":`:${h}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function qI(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}function ox(n){return new Wa.y(function(e){var t=function aA(n,e,t,r){return nn(n).onAuthStateChanged(e,t,r)}(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}!function iw(n){lr(new rn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;Me(l&&!l.includes(":"),"invalid-api-key",{appName:r.name}),Me(!h?.includes(":"),"argument-error",{appName:r.name});const p={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vy(n)},_=new GI(r,i,a,p);return function BS(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Vi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),lr(new rn("auth-internal",e=>{const t=Er(e.getProvider("auth").getImmediate());return new Jk(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),kt(VC,"0.23.1",function UC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),kt(VC,"0.23.1","esm2017")}("Browser");class _h{constructor(e){return e}}class mc{constructor(){return Ka("auth")}}const yh=new w.OlP("angularfire2.auth-instances");function $C(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new _h(r)}}const ux={provide:mc,deps:[[new w.FiY,yh]]},jC={provide:_h,useFactory:function tO(n,e){const t=zu("auth",n,e);return t&&new _h(t)},deps:[[new w.FiY,yh],Zs]};let _c=(()=>{class n{constructor(){kt("angularfire",ki.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({providers:[jC,ux]}),n})();function lx(n,...e){return{ngModule:_c,providers:[{provide:yh,useFactory:$C(n),multi:!0,deps:[w.R0b,w.zs3,Wu,Ya,[new w.FiY,Xl],...e]}]}}const ow=Oi(ox,!0),GC=Oi(nC,!0),zC=Oi(BC,!0),hO=Oi(rC,!0),pO=Oi(ig,!0);var Ge,Ix=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},So={},xg=xg||{},Et=Ix||self;function cw(){}function Ui(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function vh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var hw="closure_uid_"+(1e9*Math.random()>>>0),wO=0;function ks(n,e,t){return n.call.apply(n.bind,arguments)}function Cx(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function kr(n,e,t){return(kr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ks:Cx).apply(null,arguments)}function Mg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Or(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Ao(){this.s=this.s,this.o=this.o}Ao.prototype.s=!1,Ao.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function dw(n){Object.prototype.hasOwnProperty.call(n,hw)&&n[hw]||(n[hw]=++wO)}(this)},Ao.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function pw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function gw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ui(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Qr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Qr.prototype.h=function(){this.defaultPrevented=!0};var bx=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Et.addEventListener("test",cw,e),Et.removeEventListener("test",cw,e)}catch{}return n}();function wh(n){return/^[\s\xa0]*$/.test(n)}var KC=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Eh(n,e){return n<e?-1:n>e?1:0}function Os(){var n=Et.navigator;return n&&(n=n.userAgent)?n:""}function Xr(n){return-1!=Os().indexOf(n)}function Rg(n){return Rg[" "](n),n}function Ng(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}Rg[" "]=cw;var Ih,n,YC=Xr("Opera"),yc=Xr("Trident")||Xr("MSIE"),Tx=Xr("Edge"),mw=Tx||yc,ZC=Xr("Gecko")&&!(-1!=Os().toLowerCase().indexOf("webkit")&&!Xr("Edge"))&&!(Xr("Trident")||Xr("MSIE"))&&!Xr("Edge"),Dx=-1!=Os().toLowerCase().indexOf("webkit")&&!Xr("Edge");function QC(){var n=Et.document;return n?n.documentMode:void 0}e:{var XC="",Pg=(n=Os(),ZC?/rv:([^\);]+)(\)|;)/.exec(n):Tx?/Edge\/([\d\.]+)/.exec(n):yc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Dx?/WebKit\/(\S+)/.exec(n):YC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Pg&&(XC=Pg?Pg[1]:""),yc){var _w=QC();if(null!=_w&&_w>parseFloat(XC)){Ih=String(_w);break e}}Ih=XC}var JC={},eb=Et.document&&yc&&(QC()||parseInt(Ih,10))||void 0;function vc(n,e){if(Qr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ZC){e:{try{Rg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:tb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&vc.$.h.call(this)}}Or(vc,Qr);var tb={2:"touch",3:"pen",4:"mouse"};vc.prototype.h=function(){vc.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var wc="closure_listenable_"+(1e6*Math.random()|0),kg=0;function Og(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++kg,this.fa=this.ia=!1}function bh(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function vw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Sx(n){const e={};for(const t in n)e[t]=n[t];return e}const Ax="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xx(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Ax.length;a++)t=Ax[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ww(n){this.src=n,this.g={},this.h=0}function Fg(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=fw(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(bh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ew(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}ww.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Ew(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new Og(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var Iw="closure_lm_"+(1e6*Math.random()|0),Cw={};function Mx(n,e,t,r,i){if(r&&r.once)return Nx(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Mx(n,e[a],t,r,i);return null}return t=sa(t),n&&n[wc]?n.O(e,t,vh(r)?!!r.capture:!!r,i):Rx(n,e,t,!1,r,i)}function Rx(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=vh(i)?!!i.capture:!!i,h=Tw(n);if(h||(n[Iw]=h=new ww(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function IO(){const e=kx;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)bx||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Th(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Nx(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Nx(n,e[a],t,r,i);return null}return t=sa(t),n&&n[wc]?n.P(e,t,vh(r)?!!r.capture:!!r,i):Rx(n,e,t,!0,r,i)}function Px(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Px(n,e[a],t,r,i);else r=vh(r)?!!r.capture:!!r,t=sa(t),n&&n[wc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ew(a=n.g[e],t,r,i))&&(bh(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Tw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ew(e,t,r,i)),(t=-1<n?e[n]:null)&&bw(t))}function bw(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[wc])Fg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Th(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Tw(e))?(Fg(t,n),0==t.h&&(t.src=null,e[Iw]=null)):bh(n)}}}function Th(n){return n in Cw?Cw[n]:Cw[n]="on"+n}function kx(n,e){if(n.fa)n=!0;else{e=new vc(e,this);var t=n.listener,r=n.la||n.src;n.ia&&bw(n),n=t.call(r,e)}return n}function Tw(n){return(n=n[Iw])instanceof ww?n:null}var Lg="__closure_events_fn_"+(1e9*Math.random()>>>0);function sa(n){return"function"==typeof n?n:(n[Lg]||(n[Lg]=function(e){return n.handleEvent(e)}),n[Lg])}function Ir(){Ao.call(this),this.i=new ww(this),this.S=this,this.J=null}function Cr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Qr(e,n);else if(e instanceof Qr)e.target=e.target||n;else{var i=e;xx(e=new Qr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Ec(l,r,!0,e)&&i}if(i=Ec(l=e.g=n,r,!0,e)&&i,i=Ec(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Ec(l=e.g=t[a],r,!1,e)&&i}function Ec(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.fa&&l.capture==t){var h=l.listener,p=l.la||l.src;l.ia&&Fg(n.i,l),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}Or(Ir,Ao),Ir.prototype[wc]=!0,Ir.prototype.removeEventListener=function(n,e,t,r){Px(this,n,e,t,r)},Ir.prototype.N=function(){if(Ir.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)bh(t[r]);delete n.g[e],n.h--}}this.J=null},Ir.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ir.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Dw=Et.JSON.stringify;function Sw(){var n=ib;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var nb,Dh=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new CO,n=>n.reset());class CO{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function bO(n){Et.setTimeout(()=>{throw n},0)}function Ox(n,e){nb||function rb(){var n=Et.Promise.resolve(void 0);nb=function(){n.then(Fx)}}(),xw||(nb(),xw=!0),ib.add(n,e)}var xw=!1,ib=new class Aw{constructor(){this.h=this.g=null}add(e,t){const r=Dh.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Fx(){for(var n;n=Sw();){try{n.h.call(n.g)}catch(t){bO(t)}var e=Dh;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}xw=!1}function Vg(n,e){Ir.call(this),this.h=n||1,this.g=e||Et,this.j=kr(this.qb,this),this.l=Date.now()}function Ug(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Bg(n,e,t){if("function"==typeof n)t&&(n=kr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=kr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function Mw(n){n.g=Bg(()=>{n.g=null,n.i&&(n.i=!1,Mw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Or(Vg,Ir),(Ge=Vg.prototype).ga=!1,Ge.T=null,Ge.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Cr(this,"tick"),this.ga&&(Ug(this),this.start()))}},Ge.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ge.N=function(){Vg.$.N.call(this),Ug(this),delete this.g};class Lx extends Ao{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Mw(this)}N(){super.N(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sh(n){Ao.call(this),this.h=n,this.g={}}Or(Sh,Ao);var Rw=[];function $g(n,e,t,r){Array.isArray(t)||(t&&(Rw[0]=t.toString()),t=Rw);for(var i=0;i<t.length;i++){var a=Mx(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Vx(n){vw(n.g,function(e,t){this.g.hasOwnProperty(t)&&bw(e)},n),n.g={}}function Ah(){this.g=!0}function Ic(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function DO(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Dw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Sh.prototype.N=function(){Sh.$.N.call(this),Vx(this)},Sh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ah.prototype.Ea=function(){this.g=!1},Ah.prototype.info=function(){};var al={},sb=null;function jg(){return sb=sb||new Ir}function Bx(n){Qr.call(this,al.Ta,n)}function Hg(n){const e=jg();Cr(e,new Bx(e))}function $x(n,e){Qr.call(this,al.STAT_EVENT,n),this.stat=e}function Bi(n){const e=jg();Cr(e,new $x(e,n))}function ob(n,e){Qr.call(this,al.Ua,n),this.size=e}function Gg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}al.Ta="serverreachability",Or(Bx,Qr),al.STAT_EVENT="statevent",Or($x,Qr),al.Ua="timingevent",Or(ob,Qr);var Pw={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},jx={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ab(){}function Gx(){}ab.prototype.h=null;var c,s={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function o(){Qr.call(this,"d")}function u(){Qr.call(this,"c")}function d(){}function f(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Sh(this),this.P=E,this.V=new Vg(n=mw?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new m}function m(){this.i=null,this.g="",this.h=!1}Or(o,Qr),Or(u,Qr),Or(d,ab),d.prototype.g=function(){return new XMLHttpRequest},d.prototype.i=function(){return{}},c=new d;var E=45e3,T={},x={};function k(n,e,t){n.L=1,n.v=cb(ul(e)),n.s=t,n.S=!0,V(n,null)}function V(n,e){n.G=Date.now(),we(n),n.A=ul(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),NO(t.i,"t",r),n.C=0,t=n.l.I,n.h=new m,n.g=nF(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Lx(kr(n.Pa,n,n.g),n.O)),$g(n.U,n.g,"readystatechange",n.nb),e=n.I?Sx(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Hg(),function Nw(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),p=0;p<h.length;p++){var _=h[p].split("=");if(1<_.length){var b=_[0];_=_[1];var A=b.split("_");l=2<=A.length&&"type"==A[1]?l+(b+"=")+_+"&":l+(b+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function H(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function q(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=oe(n,t),i==x){4==e&&(n.o=4,Bi(14),r=!1),Ic(n.j,n.m,null,"[Incomplete Response]");break}if(i==T){n.o=4,Bi(15),Ic(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ic(n.j,n.m,i,null),_t(n,i)}H(n)&&i!=x&&i!=T&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Bi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Jx(e),e.L=!0,Bi(11))):(Ic(n.j,n.m,t,"[Invalid Chunked Response]"),ge(n),nt(n))}function oe(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?x:(t=Number(e.substring(t,r)),isNaN(t)?T:(r+=1)+t>e.length?x:(e=e.substr(r,t),n.C=r+t,e))}function we(n){n.Y=Date.now()+n.P,ke(n,n.P)}function ke(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Gg(kr(n.lb,n),e)}function je(n){n.B&&(Et.clearTimeout(n.B),n.B=null)}function nt(n){0==n.l.H||n.J||XO(n.l,n)}function ge(n){je(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,Ug(n.V),Vx(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function _t(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Wx(t.h,n)))if(!n.K&&Wx(t.h,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;mb(t),pb(t)}Xx(t),Bi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.M&&0==t.A&&!t.v&&(t.v=Gg(kr(t.ib,t),6e3));if(1>=OO(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Mh(t,11)}else if((n.K||t.g==n)&&mb(t),!wh(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.V=_[0],_=_[1],2==t.H)if("c"==_[0]){t.J=_[1],t.oa=_[2];const b=_[3];null!=b&&(t.qa=b,t.j.info("VER="+t.qa));const A=_[4];null!=A&&(t.Ga=A,t.j.info("SVER="+t.Ga));const L=_[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const W=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var a=r.h;a.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(qx(a,a.h),a.h=null))}if(r.F){const re=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;re&&(r.Da=re,Xn(r.G,r.F,re))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=tF(r,r.I?r.oa:null,r.Y),l.K){FO(r.h,l);var h=l,p=r.K;p&&h.setTimeout(p),h.B&&(je(h),we(h)),r.g=l}else ZO(r);0<t.i.length&&gb(t)}else"stop"!=_[0]&&"close"!=_[0]||Mh(t,7);else 3==t.H&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Mh(t,7):Qx(t):"noop"!=_[0]&&t.l&&t.l.Aa(_),t.A=0)}Hg()}catch{}}function zx(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ui(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ir(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ui(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function An(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ui(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Ge=f.prototype).setTimeout=function(n){this.P=n},Ge.nb=function(n){n=n.target;const e=this.M;e&&3==ll(n)?e.l():this.Pa(n)},Ge.Pa=function(n){try{if(n==this.g)e:{const b=ll(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||mw||this.g&&(this.h.h||this.g.ja()||GO(this.g)))){this.J||4!=b||7==e||Hg(),je(this);var t=this.g.da();this.aa=t;t:if(H(this)){var r=GO(this.g);n="";var i=r.length,a=4==ll(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ge(this),nt(this);var l="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function Ux(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wh(h)){var _=h;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,Bi(12),ge(this),nt(this);break e}Ic(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_t(this,t)}this.S?(q(this,b,l),mw&&this.i&&3==b&&($g(this.U,this.V,"tick",this.mb),this.V.start())):(Ic(this.j,this.m,l,null),_t(this,l)),4==b&&ge(this),this.i&&!this.J&&(4==b?XO(this.l,this):(this.i=!1,we(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Bi(12)):(this.o=0,Bi(13)),ge(this),nt(this)}}}catch{}},Ge.mb=function(){if(this.g){var n=ll(this.g),e=this.g.ja();this.C<e.length&&(je(this),q(this,n,e),this.i&&4!=n&&we(this))}},Ge.cancel=function(){this.J=!0,ge(this)},Ge.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function TO(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Hg(),Bi(17)),ge(this),this.o=2,nt(this)):ke(this,this.Y-n)};var SO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xh(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof xh){this.h=void 0!==e?e:n.h,ub(this,n.j),this.s=n.s,this.g=n.g,lb(this,n.m),this.l=n.l,e=n.i;var t=new Fw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),AO(this,t),this.o=n.o}else n&&(t=String(n).match(SO))?(this.h=!!e,ub(this,t[1]||"",!0),this.s=kw(t[2]||""),this.g=kw(t[3]||"",!0),lb(this,t[4]),this.l=kw(t[5]||"",!0),AO(this,t[6]||"",!0),this.o=kw(t[7]||"")):(this.h=!!e,this.i=new Fw(null,this.h))}function ul(n){return new xh(n)}function ub(n,e,t){n.j=t?kw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function lb(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function AO(n,e,t){e instanceof Fw?(n.i=e,function qj(n,e){e&&!n.j&&(Cc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(MO(this,r),NO(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ow(e,zj)),n.i=new Fw(e,n.h))}function Xn(n,e,t){n.i.set(e,t)}function cb(n){return Xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function kw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ow(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,jj),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function jj(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}xh.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ow(e,xO,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ow(e,xO,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ow(t,"/"==t.charAt(0)?Gj:Hj,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ow(t,Wj)),n.join("")};var xO=/[#\/\?@]/g,Hj=/[#\?:]/g,Gj=/[#\?]/g,zj=/[#\?@]/g,Wj=/#/g;function Fw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Cc(n){n.g||(n.g=new Map,n.h=0,n.i&&function $j(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function MO(n,e){Cc(n),e=zg(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function RO(n,e){return Cc(n),e=zg(n,e),n.g.has(e)}function NO(n,e,t){MO(n,e),0<t.length&&(n.i=null,n.g.set(zg(n,e),pw(t)),n.h+=t.length)}function zg(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function PO(n){this.l=n||Yj,n=Et.PerformanceNavigationTiming?0<(n=Et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Et.g&&Et.g.Ka&&Et.g.Ka()&&Et.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ge=Fw.prototype).add=function(n,e){Cc(this),this.i=null,n=zg(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ge.forEach=function(n,e){Cc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ge.sa=function(){Cc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Ge.Z=function(n){Cc(this);let e=[];if("string"==typeof n)RO(this,n)&&(e=e.concat(this.g.get(zg(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ge.set=function(n,e){return Cc(this),this.i=null,RO(this,n=zg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ge.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ge.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var Yj=10;function kO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function OO(n){return n.h?1:n.g?n.g.size:0}function Wx(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function qx(n,e){n.g?n.g.add(e):n.h=e}function FO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function LO(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return pw(n.i)}function Kx(){}function Zj(){this.g=new Kx}function Qj(n,e,t){const r=t||"";try{zx(n,function(i,a){let l=i;vh(i)&&(l=Dw(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function db(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Lw(n){this.l=n.fc||null,this.j=n.ob||!1}function hb(n,e){Ir.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Yx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}PO.prototype.cancel=function(){if(this.i=LO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Kx.prototype.stringify=function(n){return Et.JSON.stringify(n,void 0)},Kx.prototype.parse=function(n){return Et.JSON.parse(n,void 0)},Or(Lw,ab),Lw.prototype.g=function(){return new hb(this.l,this.j)},Lw.prototype.i=function(n){return function(){return n}}({}),Or(hb,Ir);var Yx=0;function VO(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Vw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Uw(n)}function Uw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ge=hb.prototype).open=function(n,e){if(this.readyState!=Yx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Uw(this)},Ge.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Et).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ge.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vw(this)),this.readyState=Yx},Ge.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Uw(this)),this.g&&(this.readyState=3,Uw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Et.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;VO(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ge.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Vw(this):Uw(this),3==this.readyState&&VO(this)}},Ge.Za=function(n){this.g&&(this.response=this.responseText=n,Vw(this))},Ge.Ya=function(n){this.g&&(this.response=n,Vw(this))},Ge.ka=function(){this.g&&Vw(this)},Ge.setRequestHeader=function(n,e){this.v.append(n,e)},Ge.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ge.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(hb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Jj=Et.JSON.parse;function fr(n){Ir.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=UO,this.L=this.M=!1}Or(fr,Ir);var UO="",eH=/^https?$/i,tH=["POST","PUT"];function BO(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,$O(n),fb(n)}function $O(n){n.F||(n.F=!0,Cr(n,"complete"),Cr(n,"error"))}function jO(n){if(n.h&&typeof xg<"u"&&(!n.C[1]||4!=ll(n)||2!=n.da()))if(n.v&&4==ll(n))Bg(n.La,0,n);else if(Cr(n,"readystatechange"),4==ll(n)){n.h=!1;try{const h=n.da();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.I).match(SO)[1]||null;if(!i&&Et.self&&Et.self.location){var a=Et.self.location.protocol;i=a.substr(0,a.length-1)}r=!eH.test(i?i.toLowerCase():"")}t=r}if(t)Cr(n,"complete"),Cr(n,"success");else{n.m=6;try{var l=2<ll(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.da()+"]",$O(n)}}finally{fb(n)}}}function fb(n,e){if(n.g){HO(n);const t=n.g,r=n.C[0]?cw:null;n.g=null,n.C=null,e||Cr(n,"ready");try{t.onreadystatechange=r}catch{}}}function HO(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}function ll(n){return n.g?n.g.readyState:0}function GO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case UO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function zO(n){let e="";return vw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Zx(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=zO(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Xn(n,e,t))}function Bw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function WO(n){this.Ga=0,this.i=[],this.j=new Ah,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Bw("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Bw("baseRetryDelayMs",5e3,n),this.hb=Bw("retryDelaySeedMs",1e4,n),this.eb=Bw("forwardChannelMaxRetries",2,n),this.xa=Bw("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new PO(n&&n.concurrentRequestLimit),this.Ja=new Zj,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Qx(n){if(qO(n),3==n.H){var e=n.W++,t=ul(n.G);Xn(t,"SID",n.J),Xn(t,"RID",e),Xn(t,"TYPE","terminate"),$w(n,t),(e=new f(n,n.j,e,void 0)).L=2,e.v=cb(ul(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon&&(t=Et.navigator.sendBeacon(e.v.toString(),"")),!t&&Et.Image&&((new Image).src=e.v,t=!0),t||(e.g=nF(e.l,null),e.g.ha(e.v)),e.G=Date.now(),we(e)}eF(n)}function pb(n){n.g&&(Jx(n),n.g.cancel(),n.g=null)}function qO(n){pb(n),n.u&&(Et.clearTimeout(n.u),n.u=null),mb(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Et.clearTimeout(n.m),n.m=null)}function gb(n){kO(n.h)||n.m||(n.m=!0,Ox(n.Na,n),n.C=0)}function KO(n,e){var t;t=e?e.m:n.W++;const r=ul(n.G);Xn(r,"SID",n.J),Xn(r,"RID",t),Xn(r,"AID",n.V),$w(n,r),n.o&&n.s&&Zx(r,n.o,n.s),t=new f(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=YO(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),qx(n.h,t),k(t,r,e)}function $w(n,e){n.ma&&vw(n.ma,function(t,r){Xn(e,r,t)}),n.l&&zx({},function(t,r){Xn(e,r,t)})}function YO(n,e,t){t=Math.min(n.i.length,t);var r=n.l?kr(n.l.Va,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let p=0;p<t;p++){let _=i[p].h;const b=i[p].g;if(_-=a,0>_)a=Math.max(0,i[p].h-100),h=!1;else try{Qj(b,l,"req"+_+"_")}catch{r&&r(b)}}if(h){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,r}function ZO(n){n.g||n.u||(n.ba=1,Ox(n.Ma,n),n.A=0)}function Xx(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Gg(kr(n.Ma,n),JO(n,n.A)),n.A++,0))}function Jx(n){null!=n.B&&(Et.clearTimeout(n.B),n.B=null)}function QO(n){n.g=new f(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=ul(n.wa);Xn(e,"RID","rpc"),Xn(e,"SID",n.J),Xn(e,"CI",n.M?"0":"1"),Xn(e,"AID",n.V),Xn(e,"TYPE","xmlhttp"),$w(n,e),n.o&&n.s&&Zx(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=cb(ul(e)),t.s=null,t.S=!0,V(t,n)}function mb(n){null!=n.v&&(Et.clearTimeout(n.v),n.v=null)}function XO(n,e){var t=null;if(n.g==e){mb(n),Jx(n),n.g=null;var r=2}else{if(!Wx(n.h,e))return;t=e.F,FO(n.h,e),r=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Cr(r=jg(),new ob(r,t)),gb(n)}else ZO(n);else if(3==(i=e.o)||0==i&&0<n.ta||!(1==r&&function rH(n,e){return!(OO(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Gg(kr(n.Na,n,e),JO(n,n.C)),n.C++,0)))}(n,e)||2==r&&Xx(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Mh(n,5);break;case 4:Mh(n,10);break;case 3:Mh(n,6);break;default:Mh(n,2)}}function JO(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function Mh(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=kr(n.pb,n);t||(t=new xh("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||ub(t,"https"),cb(t)),function Xj(n,e){const t=new Ah;if(Et.Image){const r=new Image;r.onload=Mg(db,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Mg(db,t,r,"TestLoadImage: error",!1,e),r.onabort=Mg(db,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Mg(db,t,r,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Bi(2);n.H=0,n.l&&n.l.za(e),eF(n),qO(n)}function eF(n){if(n.H=0,n.pa=[],n.l){const e=LO(n.h);(0!=e.length||0!=n.i.length)&&(gw(n.pa,e),gw(n.pa,n.i),n.h.i.length=0,pw(n.i),n.i.length=0),n.l.ya()}}function tF(n,e,t){var r=t instanceof xh?ul(t):new xh(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),lb(r,r.m);else{var i=Et.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new xh(null,void 0);r&&ub(a,r),e&&(a.g=e),i&&lb(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&Xn(r,t,e),Xn(r,"VER",n.qa),$w(n,r),r}function nF(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fr(t&&n.Ha&&!n.va?new Lw({ob:!0}):n.va)).Oa(n.I),e}function rF(){}function _b(){if(yc&&!(10<=Number(eb)))throw Error("Environmental error: no available transport.")}function no(n,e){Ir.call(this),this.g=new WO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!wh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wh(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Wg(this)}function iF(n){o.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function sF(){u.call(this),this.status=1}function Wg(n){this.g=n}function oa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function eM(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],l=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;l=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(l<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((a=(e=t+((l=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=a+((l=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function vn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(Ge=fr.prototype).Oa=function(n){this.M=n},Ge.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():c.g(),this.C=function Hx(n){return n.h||(n.h=n.i())}(this.u?this.u:c),this.g.onreadystatechange=kr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void BO(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Et.FormData&&n instanceof Et.FormData,!(0<=fw(tH,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{HO(this),0<this.B&&((this.L=function nH(n){return yc&&function EO(){return Ng(JC,9,function(){let n=0;const e=KC(String(Ih)).split("."),t=KC("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Eh(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Eh(0==i[2].length,0==a[2].length)||Eh(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=kr(this.ua,this)):this.A=Bg(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){BO(this,a)}},Ge.ua=function(){typeof xg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Cr(this,"timeout"),this.abort(8))},Ge.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Cr(this,"complete"),Cr(this,"abort"),fb(this))},Ge.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fb(this,!0)),fr.$.N.call(this)},Ge.La=function(){this.s||(this.G||this.v||this.l?jO(this):this.kb())},Ge.kb=function(){jO(this)},Ge.da=function(){try{return 2<ll(this)?this.g.status:-1}catch{return-1}},Ge.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ge.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Jj(e)}},Ge.Ia=function(){return this.m},Ge.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ge=WO.prototype).qa=8,Ge.H=1,Ge.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new f(this,this.j,n,void 0);let a=this.s;if(this.U&&(a?(a=Sx(a),xx(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=YO(this,i,e),Xn(t=ul(this.G),"RID",n),Xn(t,"CVER",22),this.F&&Xn(t,"X-HTTP-Session-Id",this.F),$w(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(zO(a)))+"&"+e:this.o&&Zx(t,this.o,a)),qx(this.h,i),this.bb&&Xn(t,"TYPE","init"),this.P?(Xn(t,"$req",e),Xn(t,"SID","null"),i.ba=!0,k(i,t,null)):k(i,t,e),this.H=2}}else 3==this.H&&(n?KO(this,n):0==this.i.length||kO(this.h)||KO(this))},Ge.Ma=function(){if(this.u=null,QO(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=Gg(kr(this.jb,this),n)}},Ge.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Bi(10),pb(this),QO(this))},Ge.ib=function(){null!=this.v&&(this.v=null,pb(this),Xx(this),Bi(19))},Ge.pb=function(n){n?(this.j.info("Successfully pinged google.com"),Bi(2)):(this.j.info("Failed to ping google.com"),Bi(1))},(Ge=rF.prototype).Ba=function(){},Ge.Aa=function(){},Ge.za=function(){},Ge.ya=function(){},Ge.Va=function(){},_b.prototype.g=function(n,e){return new no(n,e)},Or(no,Ir),no.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;Bi(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=tF(n,null,n.Y),gb(n)},no.prototype.close=function(){Qx(this.g)},no.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Dw(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&gb(e)},no.prototype.N=function(){this.g.l=null,delete this.j,Qx(this.g),delete this.g,no.$.N.call(this)},Or(iF,o),Or(sF,u),Or(Wg,rF),Wg.prototype.Ba=function(){Cr(this.g,"a")},Wg.prototype.Aa=function(n){Cr(this.g,new iF(n))},Wg.prototype.za=function(n){Cr(this.g,new sF)},Wg.prototype.ya=function(){Cr(this.g,"b")},Or(oa,function iH(){this.blockSize=-1}),oa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},oa.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)eM(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){eM(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){eM(this,r),i=0;break}}this.h=i,this.i+=e},oa.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var sH={};function tM(n){return-128<=n&&128>n?Ng(sH,n,function(e){return new vn([0|e],0>e?-1:0)}):new vn([0|n],0>n?-1:0)}function ru(n){if(isNaN(n)||!isFinite(n))return qg;if(0>n)return vi(ru(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=nM;return new vn(e,0)}var nM=4294967296,qg=tM(0),rM=tM(1),aF=tM(16777216);function cl(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function xo(n){return-1==n.h}function vi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new vn(t,~n.h).add(rM)}function yb(n,e){return n.add(vi(e))}function vb(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function jw(n,e){this.g=n,this.h=e}function wb(n,e){if(cl(e))throw Error("division by zero");if(cl(n))return new jw(qg,qg);if(xo(n))return e=wb(vi(n),e),new jw(vi(e.g),vi(e.h));if(xo(e))return e=wb(n,vi(e)),new jw(vi(e.g),e.h);if(30<n.g.length){if(xo(n)||xo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=rM,r=e;0>=r.X(n);)t=uF(t),r=uF(r);var i=Kg(t,1),a=Kg(r,1);for(r=Kg(r,2),t=Kg(t,2);!cl(r);){var l=a.add(r);0>=l.X(n)&&(i=i.add(t),a=l),r=Kg(r,1),t=Kg(t,1)}return e=yb(n,i.R(e)),new jw(i,e)}for(i=qg;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(a=ru(t)).R(e);xo(l)||0<l.X(n);)l=(a=ru(t-=r)).R(e);cl(a)&&(a=rM),i=i.add(a),n=yb(n,l)}return new jw(i,n)}function uF(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new vn(t,n.h)}function Kg(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new vn(i,n.h)}(Ge=vn.prototype).ea=function(){if(xo(this))return-vi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:nM+r)*e,e*=nM}return n},Ge.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(cl(this))return"0";if(xo(this))return"-"+vi(this).toString(n);for(var e=ru(Math.pow(n,6)),t=this,r="";;){var i=wb(t,e).g,a=((0<(t=yb(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(cl(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Ge.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ge.X=function(n){return xo(n=yb(this,n))?-1:cl(n)?0:1},Ge.abs=function(){return xo(this)?vi(this):this},Ge.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),l=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(a&=65535)}return new vn(t,-2147483648&t[t.length-1]?-1:0)},Ge.R=function(n){if(cl(this)||cl(n))return qg;if(xo(this))return xo(n)?vi(this).R(vi(n)):vi(vi(this).R(n));if(xo(n))return vi(this.R(vi(n)));if(0>this.X(aF)&&0>n.X(aF))return ru(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,l=65535&this.D(r),h=n.D(i)>>>16,p=65535&n.D(i);t[2*r+2*i]+=l*p,vb(t,2*r+2*i),t[2*r+2*i+1]+=a*p,vb(t,2*r+2*i+1),t[2*r+2*i+1]+=l*h,vb(t,2*r+2*i+1),t[2*r+2*i+2]+=a*h,vb(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new vn(t,0)},Ge.gb=function(n){return wb(this,n).h},Ge.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new vn(t,this.h&n.h)},Ge.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new vn(t,this.h|n.h)},Ge.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new vn(t,this.h^n.h)},_b.prototype.createWebChannel=_b.prototype.g,no.prototype.send=no.prototype.u,no.prototype.open=no.prototype.m,no.prototype.close=no.prototype.close,Pw.NO_ERROR=0,Pw.TIMEOUT=8,Pw.HTTP_ERROR=6,jx.COMPLETE="complete",Gx.EventType=s,s.OPEN="a",s.CLOSE="b",s.ERROR="c",s.MESSAGE="d",Ir.prototype.listen=Ir.prototype.O,fr.prototype.listenOnce=fr.prototype.P,fr.prototype.getLastError=fr.prototype.Sa,fr.prototype.getLastErrorCode=fr.prototype.Ia,fr.prototype.getStatus=fr.prototype.da,fr.prototype.getResponseJson=fr.prototype.Wa,fr.prototype.getResponseText=fr.prototype.ja,fr.prototype.send=fr.prototype.ha,fr.prototype.setWithCredentials=fr.prototype.Oa,oa.prototype.digest=oa.prototype.l,oa.prototype.reset=oa.prototype.reset,oa.prototype.update=oa.prototype.j,vn.prototype.add=vn.prototype.add,vn.prototype.multiply=vn.prototype.R,vn.prototype.modulo=vn.prototype.gb,vn.prototype.compare=vn.prototype.X,vn.prototype.toNumber=vn.prototype.ea,vn.prototype.toString=vn.prototype.toString,vn.prototype.getBits=vn.prototype.D,vn.fromNumber=ru,vn.fromString=function oF(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return vi(oF(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ru(Math.pow(e,8)),r=qg,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+a),e);8>a?(a=ru(Math.pow(e,a)),r=r.R(a).add(ru(l))):r=(r=r.R(t)).add(ru(l))}return r};var oH=So.createWebChannelTransport=function(){return new _b},aH=So.getStatEventTarget=function(){return jg()},iM=So.ErrorCode=Pw,uH=So.EventType=jx,lH=So.Event=al,lF=So.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},cH=So.FetchXmlHttpFactory=Lw,Eb=So.WebChannel=Gx,dH=So.XhrIo=fr,hH=So.Md5=oa,Yg=So.Integer=vn;const cF="@firebase/firestore";class ui{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ui.UNAUTHENTICATED=new ui(null),ui.GOOGLE_CREDENTIALS=new ui("google-credentials-uid"),ui.FIRST_PARTY=new ui("first-party-uid"),ui.MOCK_USER=new ui("mock-user");let Zg="9.21.0";const bc=new Ar("@firebase/firestore");function sM(){return bc.logLevel}function Ie(n,...e){if(bc.logLevel<=he.DEBUG){const t=e.map(oM);bc.debug(`Firestore (${Zg}): ${n}`,...t)}}function br(n,...e){if(bc.logLevel<=he.ERROR){const t=e.map(oM);bc.error(`Firestore (${Zg}): ${n}`,...t)}}function aa(n,...e){if(bc.logLevel<=he.WARN){const t=e.map(oM);bc.warn(`Firestore (${Zg}): ${n}`,...t)}}function oM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ze(n="Unexpected state"){const e=`FIRESTORE (${Zg}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function ot(n,e){n||Ze()}function Ve(n,e){return n}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends st{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class dF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ui.UNAUTHENTICATED))}shutdown(){}}class pH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gH{constructor(e){this.t=e,this.currentUser=ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let l=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Jr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const _=l;e.enqueueRetryable((0,O.Z)(function*(){yield _.promise,yield a(r.currentUser)}))},p=_=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Jr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot("string"==typeof r.accessToken),new dF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ot(null===e||"string"==typeof e),new ui(e)}}class mH{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ui.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class _H{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new mH(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ui.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yH{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,Ie("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ot("string"==typeof t.token),this.T=t.token,new hF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vH(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class fF{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=vH(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function bt(n,e){return n<e?-1:n>e?1:0}function Qg(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class sr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ee(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return sr.fromMillis(Date.now())}static fromDate(e){return sr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new sr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class at{constructor(e){this.timestamp=e}static fromTimestamp(e){return new at(e)}static min(){return new at(new sr(0,0))}static max(){return new at(new sr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Hw{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ze(),void 0===r?r=e.length-t:r>e.length-t&&Ze(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Hw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends Hw{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const wH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tr extends Hw{construct(e,t,r){return new Tr(e,t,r)}static isValidIdentifier(e){return wH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ee(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ee(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ee(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Ee(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tr(t)}static emptyPath(){return new Tr([])}}class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Qt.fromString(e))}static fromName(e){return new Le(Qt.fromString(e).popFirst(5))}static empty(){return new Le(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Qt(e.slice()))}}function mF(n){return new ro(n.readTime,n.key,-1)}class ro{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ro(at.min(),Le.empty(),-1)}static max(){return new ro(at.max(),Le.empty(),-1)}}function uM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Le.comparator(n.documentKey,e.documentKey),0!==t?t:bt(n.largestBatchId,e.largestBatchId))}const _F="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Tc(n){return lM.apply(this,arguments)}function lM(){return lM=(0,O.Z)(function*(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==_F)throw n;Ie("LocalStore","Unexpectedly lost primary lease")}),lM.apply(this,arguments)}class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.reject(t)}static resolve(e){return new Q((t,r)=>{t(e)})}static reject(e){return new Q((t,r)=>{r(e)})}static waitFor(e){return new Q((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},p=>r(p))}),l=!0,a===i&&t()})}static or(e){let t=Q.resolve(!1);for(const r of e)t=t.next(i=>i?Q.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new Q((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let p=0;p<a;p++){const _=p;t(e[_]).next(b=>{l[_]=b,++h,h===a&&r(l)},b=>i(b))}})}static doWhile(e,t){return new Q((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}function Dc(n){return"IndexedDbTransactionError"===n.name}let io=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Ww(n){return null==n}function qw(n){return 0===n&&1/n==-1/0}function DF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}class xn{constructor(e,t){this.comparator=e,this.root=t||wi.EMPTY}insert(e,t){return new xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wi.BLACK,null,null))}remove(e){return new xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Db(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Db(this.root,e,this.comparator,!1)}getReverseIterator(){return new Db(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Db(this.root,e,this.comparator,!0)}}class Db{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??wi.RED,this.left=i??wi.EMPTY,this.right=a??wi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new wi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return wi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ze();const e=this.left.check();if(e!==this.right.check())throw Ze();return e+(this.isRed()?0:1)}}wi.EMPTY=null,wi.RED=!0,wi.BLACK=!1,wi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze()}get value(){throw Ze()}get color(){throw Ze()}get left(){throw Ze()}get right(){throw Ze()}copy(n,e,t,r,i){return this}insert(n,e,t){return new wi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new AF(this.data.getIterator())}getIteratorFrom(e){return new AF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hn(this.comparator);return t.data=e,t}}class AF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Fs{constructor(e){this.fields=e,e.sort(Tr.comparator)}static empty(){return new Fs([])}unionWith(e){let t=new Hn(Tr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Fs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qg(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class xF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new xF("Invalid base64 string: "+i):i}}(e);return new ei(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const WH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ac(n){if(ot(!!n),"string"==typeof n){let e=0;const t=WH.exec(n);if(ot(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pr(n.seconds),nanos:pr(n.nanos)}}function pr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function dl(n){return"string"==typeof n?ei.fromBase64String(n):ei.fromUint8Array(n)}function Sb(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ab(n){const e=n.mapValue.fields.__previous_value__;return Sb(e)?Ab(e):e}function Kw(n){const e=Ac(n.mapValue.fields.__local_write_time__.timestampValue);return new sr(e.seconds,e.nanos)}class qH{constructor(e,t,r,i,a,l,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class Ph{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ph("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ph&&e.projectId===this.projectId&&e.database===this.database}}const xc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Mc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sb(n)?4:PF(n)?9007199254740991:10:Ze()}function su(n,e){if(n===e)return!0;const t=Mc(n);if(t!==Mc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kw(n).isEqual(Kw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Ac(r.timestampValue),l=Ac(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,dl(n.bytesValue).isEqual(dl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return pr(r.geoPointValue.latitude)===pr(i.geoPointValue.latitude)&&pr(r.geoPointValue.longitude)===pr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return pr(r.integerValue)===pr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=pr(r.doubleValue),l=pr(i.doubleValue);return a===l?qw(a)===qw(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Qg(n.arrayValue.values||[],e.arrayValue.values||[],su);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(DF(a)!==DF(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!su(a[h],l[h])))return!1;return!0}(n,e);default:return Ze()}var i}function Yw(n,e){return void 0!==(n.values||[]).find(t=>su(t,e))}function Rc(n,e){if(n===e)return 0;const t=Mc(n),r=Mc(e);if(t!==r)return bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return bt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=pr(i.integerValue||i.doubleValue),h=pr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return MF(n.timestampValue,e.timestampValue);case 4:return MF(Kw(n),Kw(e));case 5:return bt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=dl(i),h=dl(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let p=0;p<l.length&&p<h.length;p++){const _=bt(l[p],h[p]);if(0!==_)return _}return bt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=bt(pr(i.latitude),pr(a.latitude));return 0!==l?l:bt(pr(i.longitude),pr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let p=0;p<l.length&&p<h.length;++p){const _=Rc(l[p],h[p]);if(_)return _}return bt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===xc.mapValue&&a===xc.mapValue)return 0;if(i===xc.mapValue)return 1;if(a===xc.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),p=a.fields||{},_=Object.keys(p);h.sort(),_.sort();for(let b=0;b<h.length&&b<_.length;++b){const A=bt(h[b],_[b]);if(0!==A)return A;const L=Rc(l[h[b]],p[_[b]]);if(0!==L)return L}return bt(h.length,_.length)}(n.mapValue,e.mapValue);default:throw Ze()}}function MF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return bt(n,e);const t=Ac(n),r=Ac(e),i=bt(t.seconds,r.seconds);return 0!==i?i:bt(t.nanos,r.nanos)}function Jg(n){return hM(n)}function hM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ac(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?dl(n.bytesValue).toBase64():"referenceValue"in n?Le.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=hM(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${hM(r.fields[h])}`;return a+"}"}(n.mapValue):Ze();var e}function fM(n){return!!n&&"integerValue"in n}function Zw(n){return!!n&&"arrayValue"in n}function RF(n){return!!n&&"nullValue"in n}function NF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rb(n){return!!n&&"mapValue"in n}function Qw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Sc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PF(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Ei{constructor(e){this.value=e}static empty(){return new Ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qw(t)}setAll(e){let t=Tr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Qw(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Rb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return su(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Rb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Sc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ei(Qw(this.value))}}class Gn{constructor(e,t,r,i,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Gn(e,0,at.min(),at.min(),at.min(),Ei.empty(),0)}static newFoundDocument(e,t,r,i){return new Gn(e,1,t,at.min(),r,i,0)}static newNoDocument(e,t){return new Gn(e,2,t,at.min(),at.min(),Ei.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,at.min(),at.min(),Ei.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(at.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nc{constructor(e,t){this.position=e,this.inclusive=t}}function LF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Le.comparator(Le.fromName(l.referenceValue),t.key):Rc(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function VF(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!su(n.position[t],e.position[t]))return!1;return!0}class em{constructor(e,t="asc"){this.field=e,this.dir=t}}function ZH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class UF{}class Wt extends UF{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new QH(e,t,r):"array-contains"===t?new eG(e,r):"in"===t?new zF(e,r):"not-in"===t?new tG(e,r):"array-contains-any"===t?new nG(e,r):new Wt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new XH(e,r):new JH(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Rc(t,this.value)):null!==t&&Mc(this.value)===Mc(t)&&this.matchesComparison(Rc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ze()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class wn extends UF{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new wn(e,t)}matches(e){return tm(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function tm(n){return"and"===n.op}function gM(n){return function BF(n){for(const e of n.filters)if(e instanceof wn)return!1;return!0}(n)&&tm(n)}function mM(n){if(n instanceof Wt)return n.field.canonicalString()+n.op.toString()+Jg(n.value);if(gM(n))return n.filters.map(e=>mM(e)).join(",");{const e=n.filters.map(t=>mM(t)).join(",");return`${n.op}(${e})`}}function $F(n,e){return n instanceof Wt?(t=n,(r=e)instanceof Wt&&t.op===r.op&&t.field.isEqual(r.field)&&su(t.value,r.value)):n instanceof wn?function(t,r){return r instanceof wn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&$F(a,r.filters[l]),!0)}(n,e):void Ze();var t,r}function HF(n){return n instanceof Wt?`${(e=n).field.canonicalString()} ${e.op} ${Jg(e.value)}`:n instanceof wn?function(e){return e.op.toString()+" {"+e.getFilters().map(HF).join(" ,")+"}"}(n):"Filter";var e}class QH extends Wt{constructor(e,t,r){super(e,t,r),this.key=Le.fromName(r.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class XH extends Wt{constructor(e,t){super(e,"in",t),this.keys=GF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JH extends Wt{constructor(e,t){super(e,"not-in",t),this.keys=GF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function GF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Le.fromName(r.referenceValue))}class eG extends Wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zw(t)&&Yw(t.arrayValue,this.value)}}class zF extends Wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Yw(this.value.arrayValue,t)}}class tG extends Wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Yw(this.value.arrayValue,t)}}class nG extends Wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yw(this.value.arrayValue,r))}}class rG{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ft=null}}function _M(n,e=null,t=[],r=[],i=null,a=null,l=null){return new rG(n,e,t,r,i,a,l)}function Oh(n){const e=Ve(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>mM(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ww(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Jg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Jg(r)).join(",")),e.ft=t}return e.ft}function Xw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ZH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$F(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VF(n.startAt,e.startAt)&&VF(n.endAt,e.endAt)}function Nb(n){return Le.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class hl{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=p,this.dt=null,this._t=null}}function nm(n){return new hl(n)}function YF(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Fh(n){const e=Ve(n);if(null===e.dt){e.dt=[];const t=function kb(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),r=function yM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new em(t)),e.dt.push(new em(Tr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new em(Tr.keyField(),a))}}}return e.dt}function ls(n){const e=Ve(n);if(!e._t)if("F"===e.limitType)e._t=_M(e.path,e.collectionGroup,Fh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Fh(e))t.push(new em(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Nc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Nc(e.startAt.position,e.startAt.inclusive):null;e._t=_M(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Ob(n,e,t){return new hl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jw(n,e){return Xw(ls(n),ls(e))&&n.limitType===e.limitType}function ZF(n){return`${Oh(ls(n))}|lt:${n.limitType}`}function EM(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>HF(r)).join(", ")}]`),Ww(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Jg(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Jg(r)).join(",")),`Target(${t})`}(ls(n))}; limitType=${n.limitType})`}function eE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Le.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Fh(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=LF(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Fh(t),r)||t.endAt&&!function(i,a,l){const h=LF(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Fh(t),r)));var t,r}function XF(n){return(e,t)=>{let r=!1;for(const i of Fh(n)){const a=iG(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function iG(n,e,t){const r=n.field.isKeyField()?Le.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),p=l.data.field(i);return null!==h&&null!==p?Rc(h,p):Ze()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ze()}}class fl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return function SF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(this.inner)}size(){return this.innerSize}}const sG=new xn(Le.comparator);function Ls(){return sG}const JF=new xn(Le.comparator);function tE(...n){let e=JF;for(const t of n)e=e.insert(t.key,t);return e}function eL(n){let e=JF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ou(){return nE()}function tL(){return nE()}function nE(){return new fl(n=>n.toString(),(n,e)=>n.isEqual(e))}new xn(Le.comparator);const aG=new Hn(Le.comparator);function Rt(...n){let e=aG;for(const t of n)e=e.add(t);return e}const uG=new Hn(bt);class Fb{constructor(){this._=void 0}}function lG(n,e,t){return n instanceof rm?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Sb(i)&&(i=Ab(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Lh?oL(n,e):n instanceof Vh?aL(n,e):function(r,i){const a=function sL(n,e){return n instanceof im?fM(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}(r,i),l=uL(a)+uL(r.wt);return fM(a)&&fM(r.wt)?function rL(n){return{integerValue:""+n}}(l):function nL(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qw(e)?"-0":e}}(r.serializer,l)}(n,e)}function cG(n,e,t){return n instanceof Lh?oL(n,e):n instanceof Vh?aL(n,e):t}class rm extends Fb{}class Lh extends Fb{constructor(e){super(),this.elements=e}}function oL(n,e){const t=lL(e);for(const r of n.elements)t.some(i=>su(i,r))||t.push(r);return{arrayValue:{values:t}}}class Vh extends Fb{constructor(e){super(),this.elements=e}}function aL(n,e){let t=lL(e);for(const r of n.elements)t=t.filter(i=>!su(i,r));return{arrayValue:{values:t}}}class im extends Fb{constructor(e,t){super(),this.serializer=e,this.wt=t}}function uL(n){return pr(n.integerValue||n.doubleValue)}function lL(n){return Zw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lb(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class CM{}function cL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new om(n.key,Jn.none()):new sm(n.key,n.data,Jn.none());{const t=n.data,r=Ei.empty();let i=new Hn(Tr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new pl(n.key,r,new Fs(i.toArray()),Jn.none())}}function fG(n,e,t){n instanceof sm?function(r,i,a){const l=r.value.clone(),h=fL(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof pl?function(r,i,a){if(!Lb(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=fL(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(hL(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function iE(n,e,t,r){return n instanceof sm?function(i,a,l,h){if(!Lb(i.precondition,a))return l;const p=i.value.clone(),_=pL(i.fieldTransforms,h,a);return p.setAll(_),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof pl?function(i,a,l,h){if(!Lb(i.precondition,a))return l;const p=pL(i.fieldTransforms,h,a),_=a.data;return _.setAll(hL(i)),_.setAll(p),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,Lb(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function dL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Qg(t,r,(i,a)=>function dG(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Lh&&r instanceof Lh||t instanceof Vh&&r instanceof Vh?Qg(t.elements,r.elements,su):t instanceof im&&r instanceof im?su(t.wt,r.wt):t instanceof rm&&r instanceof rm);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class sm extends CM{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class pl extends CM{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function hL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function fL(n,e,t){const r=new Map;ot(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,cG(l,h,t[i]))}return r}function pL(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,lG(a,l,e))}return r}class om extends CM{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&fG(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=iE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=iE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tL();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const p=cL(l,h);null!==p&&r.set(i.key,p),l.isValidDocument()||l.convertToNoDocument(at.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Rt())}isEqual(e){return this.batchId===e.batchId&&Qg(this.mutations,e.mutations,(t,r)=>dL(t,r))&&Qg(this.baseMutations,e.baseMutations,(t,r)=>dL(t,r))}}class SM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mG{constructor(e,t){this.count=e,this.unchangedNames=t}}var Fr,Xt;function mL(n){if(void 0===n)return br("GRPC error has no .code"),te.UNKNOWN;switch(n){case Fr.OK:return te.OK;case Fr.CANCELLED:return te.CANCELLED;case Fr.UNKNOWN:return te.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return te.INTERNAL;case Fr.UNAVAILABLE:return te.UNAVAILABLE;case Fr.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Fr.NOT_FOUND:return te.NOT_FOUND;case Fr.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Fr.ABORTED:return te.ABORTED;case Fr.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Fr.DATA_LOSS:return te.DATA_LOSS;default:return Ze()}}(Xt=Fr||(Fr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class AM{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Vb}static getOrCreateInstance(){return null===Vb&&(Vb=new AM),Vb}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Vb=null;const _G=new Yg([4294967295,4294967295],0);function yL(n){const e=function _L(){return new TextEncoder}().encode(n),t=new hH;return t.update(e),new Uint8Array(t.digest())}function vL(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Yg([t,r],0),new Yg([i,a],0)]}class xM{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new sE(`Invalid padding: ${t}`);if(r<0)throw new sE(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new sE(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new sE(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=Yg.fromNumber(this.yt)}Tt(e,t,r){let i=e.add(t.multiply(Yg.fromNumber(r)));return 1===i.compare(_G)&&(i=new Yg([i.getBits(0),i.getBits(1)],0)),i.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=yL(e),[r,i]=vL(t);for(let a=0;a<this.hashCount;a++){const l=this.Tt(r,i,a);if(!this.Et(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new xM(a,i,t);return r.forEach(h=>l.insert(h)),l}insert(e){if(0===this.yt)return;const t=yL(e),[r,i]=vL(t);for(let a=0;a<this.hashCount;a++){const l=this.Tt(r,i,a);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class sE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class oE{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,aE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new oE(at.min(),i,new xn(bt),Ls(),Rt())}}class aE{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new aE(r,t,Rt(),Rt(),Rt())}}class Ub{constructor(e,t,r,i){this.vt=e,this.removedTargetIds=t,this.key=r,this.Pt=i}}class wL{constructor(e,t){this.targetId=e,this.bt=t}}class EL{constructor(e,t,r=ei.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class IL{constructor(){this.Vt=0,this.St=bL(),this.Dt=ei.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=Rt(),t=Rt(),r=Rt();return this.St.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ze()}}),new aE(this.Dt,this.Ct,e,t,r)}$t(){this.xt=!1,this.St=bL()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class yG{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=Ls(),this.jt=CL(),this.zt=new xn(bt)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const r=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&r.Mt(e.resumeToken);break;case 1:r.qt(),r.Nt||r.$t(),r.Mt(e.resumeToken);break;case 2:r.qt(),r.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(r.Ut(),r.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),r.Mt(e.resumeToken));break;default:Ze()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((r,i)=>{this.Zt(i)&&t(i)})}ee(e){var t;const r=e.targetId,i=e.bt.count,a=this.ne(r);if(a){const l=a.target;if(Nb(l))if(0===i){const h=new Le(l.path);this.Jt(r,h,Gn.newNoDocument(h,at.min()))}else ot(1===i);else{const h=this.se(r);if(h!==i){const p=this.ie(e,h);0!==p&&(this.te(r),this.zt=this.zt.insert(r,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=AM.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(_,b,A){var L,$,W,re,fe,He;const ut={localCacheCount:b,existenceFilterCount:A.count},qe=A.unchangedNames;return qe&&(ut.bloomFilter={applied:0===_,hashCount:null!==(L=qe?.hashCount)&&void 0!==L?L:0,bitmapLength:null!==(re=null===(W=null===($=qe?.bits)||void 0===$?void 0:$.bitmap)||void 0===W?void 0:W.length)&&void 0!==re?re:0,padding:null!==(He=null===(fe=qe?.bits)||void 0===fe?void 0:fe.padding)&&void 0!==He?He:0}),ut}(p,h,e.bt))}}}}ie(e,t){const{unchangedNames:r,count:i}=e.bt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:l=0},hashCount:h=0}=r;let p,_;try{p=dl(a).toUint8Array()}catch(b){if(b instanceof xF)return aa("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{_=new xM(p,l,h)}catch(b){return aa(b instanceof sE?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===_.yt?1:i!==t-this.re(e.targetId,_)?2:0}re(e,t){const r=this.Kt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const l=this.Kt.oe(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.At(h)||(this.Jt(e,a,null),i++)}),i}ue(e){const t=new Map;this.Gt.forEach((a,l)=>{const h=this.ne(l);if(h){if(a.current&&Nb(h.target)){const p=new Le(h.target.path);null!==this.Qt.get(p)||this.ce(l,p)||this.Jt(l,p,Gn.newNoDocument(p,e))}a.kt&&(t.set(l,a.Ot()),a.$t())}});let r=Rt();this.jt.forEach((a,l)=>{let h=!0;l.forEachWhile(p=>{const _=this.ne(p);return!_||"TargetPurposeLimboResolution"===_.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Qt.forEach((a,l)=>l.setReadTime(e));const i=new oE(e,t,this.zt,this.Qt,r);return this.Qt=Ls(),this.jt=CL(),this.zt=new xn(bt),i}Ht(e,t){if(!this.Zt(e))return;const r=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,r),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,r){if(!this.Zt(e))return;const i=this.Xt(e);this.ce(e,t)?i.Ft(t,1):i.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),r&&(this.Qt=this.Qt.insert(t,r))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new IL,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new Hn(bt),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new IL),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function CL(){return new xn(Le.comparator)}function bL(){return new xn(Le.comparator)}const vG={asc:"ASCENDING",desc:"DESCENDING"},wG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EG={and:"AND",or:"OR"};class IG{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function MM(n,e){return n.useProto3Json||Ww(e)?e:{value:e}}function Dr(n){return ot(!!n),at.fromTimestamp(function(e){const t=Ac(e);return new sr(t.seconds,t.nanos)}(n))}function DL(n){const e=Qt.fromString(n);return ot(OL(e)),e}function au(n,e){const t=DL(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Le(AL(t))}function NM(n,e){return function RM(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}(n.databaseId,e)}function lE(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AL(n){return ot(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function RL(n,e){return{documents:[NM(n,e.path)]}}function kM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=NM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=NM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0!==p.length)return kL(wn.create(p,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(p){if(0!==p.length)return p.map(_=>{return{field:Pc((b=_).field),direction:AG(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=MM(n,e.limit);var h,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function NL(n){let e=function SL(n){const e=DL(n);return 4===e.length?Qt.emptyPath():AL(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ot(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(b){const A=PL(b);return A instanceof wn&&gM(A)?A.getFilters():[A]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new em(um((A=b).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let h=null;t.limit&&(h=function(b){let A;return A="object"==typeof b?b.value:b,Ww(A)?null:A}(t.limit));let p=null;var b;t.startAt&&(p=new Nc((b=t.startAt).values||[],!!b.before));let _=null;return t.endAt&&(_=function(b){return new Nc(b.values||[],!b.before)}(t.endAt)),function KF(n,e,t,r,i,a,l,h){return new hl(n,e,t,r,i,a,l,h)}(e,i,l,a,h,"F",p,_)}function PL(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=um(e.unaryFilter.field);return Wt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=um(e.unaryFilter.field);return Wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=um(e.unaryFilter.field);return Wt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=um(e.unaryFilter.field);return Wt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ze()}}(n):void 0!==n.fieldFilter?Wt.create(um((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ze()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return wn.create(e.compositeFilter.filters.map(t=>PL(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ze()}}(e.compositeFilter.op))}(n):Ze();var e}function AG(n){return vG[n]}function xG(n){return wG[n]}function MG(n){return EG[n]}function Pc(n){return{fieldPath:n.canonicalString()}}function um(n){return Tr.fromServerFormat(n.fieldPath)}function kL(n){return n instanceof Wt?function(e){if("=="===e.op){if(NF(e.value))return{unaryFilter:{field:Pc(e.field),op:"IS_NAN"}};if(RF(e.value))return{unaryFilter:{field:Pc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(NF(e.value))return{unaryFilter:{field:Pc(e.field),op:"IS_NOT_NAN"}};if(RF(e.value))return{unaryFilter:{field:Pc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pc(e.field),op:xG(e.op),value:e.value}}}(n):n instanceof wn?function(e){const t=e.getFilters().map(r=>kL(r));return 1===t.length?t[0]:{compositeFilter:{op:MG(e.op),filters:t}}}(n):Ze()}function OL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class gl{constructor(e,t,r,i,a=at.min(),l=at.min(),h=ei.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new gl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class FL{constructor(e){this.le=e}}function OM(n){const e=NL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ob(e,e.limit,"L"):e}class jh{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(pr(e.integerValue));else if("doubleValue"in e){const r=pr(e.doubleValue);isNaN(r)?this.ge(t,13):(this.ge(t,15),qw(r)?t.ye(0):t.ye(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ge(t,20),"string"==typeof r?t.pe(r):(t.pe(`${r.seconds||""}`),t.ye(r.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(dl(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ge(t,45),t.ye(r.latitude||0),t.ye(r.longitude||0)}else"mapValue"in e?PF(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):Ze()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const r=e.fields||{};this.ge(t,55);for(const i of Object.keys(r))this.Ie(i,t),this.we(r[i],t)}ve(e,t){const r=e.values||[];this.ge(t,50);for(const i of r)this.we(i,t)}Ae(e,t){this.ge(t,37),Le.fromName(e).path.forEach(r=>{this.ge(t,60),this.Pe(r,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}jh.be=new jh;class BG{constructor(){this.sn=new $M}addToCollectionParentIndex(e,t){return this.sn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(ro.min())}updateCollectionGroup(e,t,r){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class $M{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Hn(Qt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hn(Qt.comparator)).toArray()}}new Uint8Array(0);class ji{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ji(e,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}ji.DEFAULT_COLLECTION_PERCENTILE=10,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ji.DEFAULT=new ji(41943040,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ji.DISABLED=new ji(-1,0,0);class Gh{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new Gh(0)}static kn(){return new Gh(-1)}}class WG{constructor(){this.changes=new fl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YG{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class u2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&iE(r.mutation,i,Fs.empty(),sr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Rt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Rt()){const i=ou();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=tE();return a.forEach((h,p)=>{l=l.insert(h,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ou();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Rt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=Ls();const l=nE(),h=nE();return t.forEach((p,_)=>{const b=r.get(_.key);i.has(_.key)&&(void 0===b||b.mutation instanceof pl)?a=a.insert(_.key,_):void 0!==b?(l.set(_.key,b.mutation.getFieldMask()),iE(b.mutation,_,b.mutation.getFieldMask(),sr.now())):l.set(_.key,Fs.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((_,b)=>l.set(_,b)),t.forEach((_,b)=>{var A;return h.set(_,new YG(b,null!==(A=l.get(_))&&void 0!==A?A:null))}),h))}recalculateAndSaveOverlays(e,t){const r=nE();let i=new xn((l,h)=>l-h),a=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(p=>{const _=t.get(p);if(null===_)return;let b=r.get(p)||Fs.empty();b=h.applyToLocalView(_,b),r.set(p,b);const A=(i.get(h.batchId)||Rt()).add(p);i=i.insert(h.batchId,A)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),_=p.key,b=p.value,A=tL();b.forEach(L=>{if(!a.has(L)){const $=cL(t.get(L),r.get(L));null!==$&&A.set(L,$),a=a.add(L)}}),l.push(this.documentOverlayCache.saveOverlays(e,_,A))}return Q.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Le.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function vM(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):Q.resolve(ou());let h=-1,p=a;return l.next(_=>Q.forEach(_,(b,A)=>(h<A.largestBatchId&&(h=A.largestBatchId),a.get(b)?Q.resolve():this.remoteDocumentCache.getEntry(e,b).next(L=>{p=p.insert(b,L)}))).next(()=>this.populateOverlays(e,_,a)).next(()=>this.computeViews(e,p,_,Rt())).next(b=>({batchId:h,changes:eL(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next(r=>{let i=tE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=tE();return this.indexManager.getCollectionParents(e,i).next(l=>Q.forEach(l,h=>{const p=(_=t,b=h.child(i),new hl(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,b;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(_=>{_.forEach((b,A)=>{a=a.insert(b,A)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((h,p)=>{const _=p.getKey();null===a.get(_)&&(a=a.insert(_,Gn.newInvalidDocument(_)))});let l=tE();return a.forEach((h,p)=>{const _=i.get(h);void 0!==_&&iE(_.mutation,p,Fs.empty(),sr.now()),eE(t,p)&&(l=l.insert(h,p))}),l})}}class ZG{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return Q.resolve(this.us.get(t))}saveBundleMetadata(e,t){var r;return this.us.set(t.id,{id:(r=t).id,version:r.version,createTime:Dr(r.createTime)}),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(r=t).name,query:OM(r.bundledQuery),readTime:Dr(r.readTime)}),Q.resolve();var r}}class QG{constructor(){this.overlays=new xn(Le.comparator),this.hs=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ou();return Q.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.de(e,t,a)}),Q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hs.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.hs.delete(r)),Q.resolve()}getOverlaysForCollection(e,t,r){const i=ou(),a=t.length+1,l=new Le(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const p=h.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===a&&p.largestBatchId>r&&i.set(p.getKey(),p)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new xn((_,b)=>_-b);const l=this.overlays.getIterator();for(;l.hasNext();){const _=l.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let b=a.get(_.largestBatchId);null===b&&(b=ou(),a=a.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const h=ou(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,b)=>h.set(_,b)),!(h.size()>=i)););return Q.resolve(h)}de(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.hs.get(i.largestBatchId).delete(r.key);this.hs.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new SM(t,r));let a=this.hs.get(t);void 0===a&&(a=Rt(),this.hs.set(t,a)),this.hs.set(t,a.add(r.key))}}class jM{constructor(){this.ls=new Hn(ci.fs),this.ds=new Hn(ci._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const r=new ci(e,t);this.ls=this.ls.add(r),this.ds=this.ds.add(r)}ws(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gs(new ci(e,t))}ys(e,t){e.forEach(r=>this.removeReference(r,t))}ps(e){const t=new Le(new Qt([])),r=new ci(t,e),i=new ci(t,e+1),a=[];return this.ds.forEachInRange([r,i],l=>{this.gs(l),a.push(l.key)}),a}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new Le(new Qt([])),r=new ci(t,e),i=new ci(t,e+1);let a=Rt();return this.ds.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new ci(e,0),r=this.ls.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ci{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return Le.comparator(e.key,t.key)||bt(e.Es,t.Es)}static _s(e,t){return bt(e.Es,t.Es)||Le.comparator(e.key,t.key)}}class XG{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new Hn(ci.fs)}checkEmpty(e){return Q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.As;this.As++;const l=new TM(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.Rs=this.Rs.add(new ci(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Q.resolve(l)}lookupMutationBatch(e,t){return Q.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ps(t+1),a=i<0?0:i;return Q.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ci(t,0),i=new ci(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],l=>{const h=this.vs(l.Es);a.push(h)}),Q.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(bt);return t.forEach(i=>{const a=new ci(i,0),l=new ci(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,l],h=>{r=r.add(h.Es)})}),Q.resolve(this.bs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Le.isDocumentKey(a)||(a=a.child(""));const l=new ci(new Le(a),0);let h=new Hn(bt);return this.Rs.forEachWhile(p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(h=h.add(p.Es)),!0)},l),Q.resolve(this.bs(h))}bs(e){const t=[];return e.forEach(r=>{const i=this.vs(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ot(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return Q.forEach(t.mutations,i=>{const a=new ci(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Dn(e){}containsKey(e,t){const r=new ci(t,0),i=this.Rs.firstAfterOrEqual(r);return Q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Q.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class JG{constructor(e){this.Ss=e,this.docs=new xn(Le.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Ss(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Q.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let r=Ls();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Gn.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Ls();const l=t.path,h=new Le(l.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:_,value:{document:b}}=p.getNext();if(!l.isPrefixOf(_.path))break;_.path.length>l.length+1||uM(mF(b),r)<=0||(i.has(b.key)||eE(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return Q.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Ze()}Ds(e,t){return Q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ez(this)}getSize(e){return Q.resolve(this.size)}}class ez extends WG{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.rs.addEntry(e,i)):this.rs.removeEntry(r)}),Q.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class tz{constructor(e){this.persistence=e,this.Cs=new fl(t=>Oh(t),Xw),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.xs=0,this.Ns=new jM,this.targetCount=0,this.ks=Gh.Nn()}forEachTarget(e,t){return this.Cs.forEach((r,i)=>t(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.xs&&(this.xs=t),Q.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new Gh(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.$n(t),Q.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Cs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Cs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),Q.waitFor(a).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Cs.get(t)||null;return Q.resolve(r)}addMatchingKeys(e,t,r){return this.Ns.ws(t,r),Q.resolve()}removeMatchingKeys(e,t,r){this.Ns.ys(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),Q.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ns.Ts(t);return Q.resolve(r)}containsKey(e,t){return Q.resolve(this.Ns.containsKey(t))}}class HM{constructor(e,t){this.Ms={},this.overlays={},this.Os=new io(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new tz(this),this.indexManager=new BG,this.remoteDocumentCache=new JG(r=>this.referenceDelegate.Bs(r)),this.serializer=new FL(t),this.Ls=new ZG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new QG,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ms[e.toKey()];return r||(r=new XG(t,this.referenceDelegate),this.Ms[e.toKey()]=r),r}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,r){Ie("MemoryPersistence","Starting transaction:",e);const i=new nz(this.Os.next());return this.referenceDelegate.qs(),r(i).next(a=>this.referenceDelegate.Us(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ks(e,t){return Q.or(Object.values(this.Ms).map(r=>()=>r.containsKey(e,t)))}}class nz extends CH{constructor(e){super(),this.currentSequenceNumber=e}}class Kb{constructor(e){this.persistence=e,this.Gs=new jM,this.Qs=null}static js(e){return new Kb(e)}get zs(){if(this.Qs)return this.Qs;throw Ze()}addReference(e,t,r){return this.Gs.addReference(r,t),this.zs.delete(r.toString()),Q.resolve()}removeReference(e,t,r){return this.Gs.removeReference(r,t),this.zs.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(i=>this.zs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.zs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.zs,r=>{const i=Le.fromPath(r);return this.Ws(e,i).next(a=>{a||t.removeEntry(i,at.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(r=>{r?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return Q.or([()=>Q.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class qM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Fi=i}static Bi(e,t){let r=Rt(),i=Rt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new qM(e,t.fromCache,r,i)}}class c2{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ui(e,t).next(a=>a||this.Ki(e,t,i,r)).next(a=>a||this.Gi(e,t))}Ui(e,t){if(YF(t))return Q.resolve(null);let r=ls(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ob(t,null,"F"),r=ls(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Rt(...a);return this.qi.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{const _=this.Qi(t,h);return this.ji(t,_,l,p.readTime)?this.Ui(e,Ob(t,null,"F")):this.zi(e,_,t,p)}))})))}Ki(e,t,r,i){return YF(t)||i.isEqual(at.min())?this.Gi(e,t):this.qi.getDocuments(e,r).next(a=>{const l=this.Qi(t,a);return this.ji(t,l,r,i)?this.Gi(e,t):(sM()<=he.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),EM(t)),this.zi(e,l,t,function gF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=at.fromTimestamp(1e9===r?new sr(t+1,0):new sr(t,r));return new ro(i,Le.empty(),e)}(i,-1)))})}Qi(e,t){let r=new Hn(XF(e));return t.forEach((i,a)=>{eE(e,a)&&(r=r.add(a))}),r}ji(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Gi(e,t){return sM()<=he.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",EM(t)),this.qi.getDocumentsMatchingQuery(e,t,ro.min())}zi(e,t,r,i){return this.qi.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class iz{constructor(e,t,r,i){this.persistence=e,this.Wi=t,this.serializer=i,this.Hi=new xn(bt),this.Ji=new fl(a=>Oh(a),Xw),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(r)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u2(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function h2(n,e){return KM.apply(this,arguments)}function KM(){return KM=(0,O.Z)(function*(n,e){const t=Ve(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Zi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let p=Rt();for(const _ of i){l.push(_.batchId);for(const b of _.mutations)p=p.add(b.key)}for(const _ of a){h.push(_.batchId);for(const b of _.mutations)p=p.add(b.key)}return t.localDocuments.getDocuments(r,p).next(_=>({tr:_,removedBatchIds:l,addedBatchIds:h}))})})}),KM.apply(this,arguments)}function f2(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function hm(n,e,t){return YM.apply(this,arguments)}function YM(){return YM=(0,O.Z)(function*(n,e,t){const r=Ve(n),i=r.Hi.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Dc(l))throw l;Ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Hi=r.Hi.remove(e),r.Ji.delete(i.target)}),YM.apply(this,arguments)}function Qb(n,e,t){const r=Ve(n);let i=at.min(),a=Rt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,p,_){const b=Ve(h),A=b.Ji.get(_);return void 0!==A?Q.resolve(b.Hi.get(A)):b.Fs.getTargetData(p,_)}(r,l,ls(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Fs.getMatchingKeysForTargetId(l,h.targetId).next(p=>{a=p})}).next(()=>r.Wi.getDocumentsMatchingQuery(l,e,t?i:at.min(),t?a:Rt())).next(h=>(function _2(n,e,t){let r=n.Yi.get(e)||at.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Yi.set(e,r)}(r,function QF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),h),{documents:h,sr:a})))}class eR{constructor(){this.activeTargetIds=function IM(){return uG}()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class w2{constructor(){this.Wr=new eR,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,r){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new eR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cz{Jr(e){}shutdown(){}}class E2{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){Ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){Ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let eT=null;function nR(){return null===eT?eT=268435456+Math.round(2147483648*Math.random()):eT++,"0x"+eT.toString(16)}const dz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hz{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const Hi="WebChannelConnection";class fz extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,r,i,a){const l=nR(),h=this.Io(e,t);Ie("RestConnection",`Sending RPC '${e}' ${l}:`,h,r);const p={};return this.To(p,i,a),this.Eo(e,h,p,r).then(_=>(Ie("RestConnection",`Received RPC '${e}' ${l}: `,_),_),_=>{throw aa("RestConnection",`RPC '${e}' ${l} failed with error: `,_,"url: ",h,"request:",r),_})}Ao(e,t,r,i,a,l){return this.po(e,t,r,i,a)}To(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Io(e,t){return`${this.wo}/v1/${t}:${dz[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,r,i){const a=nR();return new Promise((l,h)=>{const p=new dH;p.setWithCredentials(!0),p.listenOnce(uH.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case iM.NO_ERROR:const b=p.getResponseJson();Ie(Hi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),l(b);break;case iM.TIMEOUT:Ie(Hi,`RPC '${e}' ${a} timed out`),h(new Ee(te.DEADLINE_EXCEEDED,"Request time out"));break;case iM.HTTP_ERROR:const A=p.getStatus();if(Ie(Hi,`RPC '${e}' ${a} failed with status:`,A,"response text:",p.getResponseText()),A>0){let L=p.getResponseJson();Array.isArray(L)&&(L=L[0]);const $=L?.error;if($&&$.status&&$.message){const W=function(re){const fe=re.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(fe)>=0?fe:te.UNKNOWN}($.status);h(new Ee(W,$.message))}else h(new Ee(te.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new Ee(te.UNAVAILABLE,"Connection failed."));break;default:Ze()}}finally{Ie(Hi,`RPC '${e}' ${a} completed.`)}});const _=JSON.stringify(i);Ie(Hi,`RPC '${e}' ${a} sending request:`,i),p.send(t,"POST",_,r,15)})}Ro(e,t,r){const i=nR(),a=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=oH(),h=aH(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new cH({})),this.To(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const _=a.join("");Ie(Hi,`Creating RPC '${e}' stream ${i}: ${_}`,p);const b=l.createWebChannel(_,p);let A=!1,L=!1;const $=new hz({io:re=>{L?Ie(Hi,`Not sending because RPC '${e}' stream ${i} is closed:`,re):(A||(Ie(Hi,`Opening RPC '${e}' stream ${i} transport.`),b.open(),A=!0),Ie(Hi,`RPC '${e}' stream ${i} sending:`,re),b.send(re))},ro:()=>b.close()}),W=(re,fe,He)=>{re.listen(fe,ut=>{try{He(ut)}catch(qe){setTimeout(()=>{throw qe},0)}})};return W(b,Eb.EventType.OPEN,()=>{L||Ie(Hi,`RPC '${e}' stream ${i} transport opened.`)}),W(b,Eb.EventType.CLOSE,()=>{L||(L=!0,Ie(Hi,`RPC '${e}' stream ${i} transport closed`),$.fo())}),W(b,Eb.EventType.ERROR,re=>{L||(L=!0,aa(Hi,`RPC '${e}' stream ${i} transport errored:`,re),$.fo(new Ee(te.UNAVAILABLE,"The operation could not be completed")))}),W(b,Eb.EventType.MESSAGE,re=>{var fe;if(!L){const He=re.data[0];ot(!!He);const qe=He.error||(null===(fe=He[0])||void 0===fe?void 0:fe.error);if(qe){Ie(Hi,`RPC '${e}' stream ${i} received error:`,qe);const jt=qe.status;let hn=function(Vr){const Wi=Fr[Vr];if(void 0!==Wi)return mL(Wi)}(jt),Zt=qe.message;void 0===hn&&(hn=te.INTERNAL,Zt="Unknown error status: "+jt+" with message "+qe.message),L=!0,$.fo(new Ee(hn,Zt)),b.close()}else Ie(Hi,`RPC '${e}' stream ${i} received:`,He),$._o(He)}}),W(h,lH.STAT_EVENT,re=>{re.stat===lF.PROXY?Ie(Hi,`RPC '${e}' stream ${i} detected buffering proxy`):re.stat===lF.NOPROXY&&Ie(Hi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{$.lo()},0),$}}function tT(){return typeof document<"u"?document:null}function vE(n){return new IG(n,!0)}class rR{constructor(e,t,r=1e3,i=1.5,a=6e4){this.si=e,this.timerId=t,this.vo=r,this.Po=i,this.bo=a,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),r=Math.max(0,Date.now()-this.Do),i=Math.max(0,t-r);i>0&&Ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class pz{constructor(e,t,r,i,a,l,h,p){this.si=e,this.Mo=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new rR(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,O.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,O.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var r=this;return(0,O.Z)(function*(){r.Wo(),r.Ho(),r.Lo.cancel(),r.$o++,4!==e?r.Lo.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),r.Lo.Co()):t&&t.code===te.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Jo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.$o===t&&this.Xo(r,i)},r=>{e(()=>{const i=new Ee(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Zo(i)})})}Xo(e,t){const r=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{r(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(i=>{r(()=>this.Zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,O.Z)(function*(){e.state=0,e.start()}))}Zo(e){return Ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(Ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gz extends pz{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function TG(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:Ze(),i=e.targetChange.targetIds||[],a=function(p,_){return p.useProto3Json?(ot(void 0===_||"string"==typeof _),ei.fromBase64String(_||"")):(ot(void 0===_||_ instanceof Uint8Array),ei.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const _=void 0===p.code?te.UNKNOWN:mL(p.code);return new Ee(_,p.message||"")}(l);t=new EL(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=au(n,r.document.name),a=Dr(r.document.updateTime),l=r.document.createTime?Dr(r.document.createTime):at.min(),h=new Ei({mapValue:{fields:r.document.fields}}),p=Gn.newFoundDocument(i,a,l,h);t=new Ub(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=au(n,r.document),a=r.readTime?Dr(r.readTime):at.min(),l=Gn.newNoDocument(i,a);t=new Ub([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=au(n,r.document);t=new Ub([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ze();{const r=e.filter,{count:i=0,unchangedNames:a}=r,l=new mG(i,a);t=new wL(r.targetId,l)}}var p;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return at.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?at.min():a.readTime?Dr(a.readTime):at.min()}(e);return this.listener.eu(t,r)}nu(e){const t={};t.database=lE(this.serializer),t.addTarget=function(i,a){let l;const h=a.target;if(l=Nb(h)?{documents:RL(i,h)}:{query:kM(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=function TL(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}(i,a.resumeToken);const p=MM(i,a.expectedCount);null!==p&&(l.expectedCount=p)}else if(a.snapshotVersion.compareTo(at.min())>0){l.readTime=function am(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}(i,a.snapshotVersion.toTimestamp());const p=MM(i,a.expectedCount);null!==p&&(l.expectedCount=p)}return l}(this.serializer,e);const r=function SG(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.zo(t)}su(e){const t={};t.database=lE(this.serializer),t.removeTarget=e,this.zo(t)}}class _z extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.hu=!1}lu(){if(this.hu)throw new Ee(te.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.po(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ee(te.UNKNOWN,i.toString())})}Ao(e,t,r,i){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ao(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(te.UNKNOWN,a.toString())})}terminate(){this.hu=!0}}class vz{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(br(t),this.wu=!1):Ie("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class wz{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=a,this.vu.Jr(h=>{r.enqueueAndForget((0,O.Z)(function*(){var p;Lc(l)&&(Ie("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,O.Z)(function*(_){const b=Ve(_);b.Au.add(4),yield fm(b),b.Pu.set("Unknown"),b.Au.delete(4),yield wE(b)}),function(_){return p.apply(this,arguments)})(l))}))}),this.Pu=new vz(r,i)}}function wE(n){return sR.apply(this,arguments)}function sR(){return sR=(0,O.Z)(function*(n){if(Lc(n))for(const e of n.Ru)yield e(!0)}),sR.apply(this,arguments)}function fm(n){return oR.apply(this,arguments)}function oR(){return oR=(0,O.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),oR.apply(this,arguments)}function nT(n,e){const t=Ve(n);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),lR(t)?uR(t):gm(t).Uo()&&aR(t,e))}function EE(n,e){const t=Ve(n),r=gm(t);t.Eu.delete(e),r.Uo()&&C2(t,e),0===t.Eu.size&&(r.Uo()?r.Qo():Lc(t)&&t.Pu.set("Unknown"))}function aR(n,e){if(n.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gm(n).nu(e)}function C2(n,e){n.bu.Lt(e),gm(n).su(e)}function uR(n){n.bu=new yG({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),he:e=>n.Eu.get(e)||null,oe:()=>n.datastore.serializer.databaseId}),gm(n).start(),n.Pu.mu()}function lR(n){return Lc(n)&&!gm(n).qo()&&n.Eu.size>0}function Lc(n){return 0===Ve(n).Au.size}function b2(n){n.bu=void 0}function Ez(n){return cR.apply(this,arguments)}function cR(){return cR=(0,O.Z)(function*(n){n.Eu.forEach((e,t)=>{aR(n,e)})}),cR.apply(this,arguments)}function Iz(n,e){return dR.apply(this,arguments)}function dR(){return dR=(0,O.Z)(function*(n,e){b2(n),lR(n)?(n.Pu.pu(e),uR(n)):n.Pu.set("Unknown")}),dR.apply(this,arguments)}function Cz(n,e,t){return hR.apply(this,arguments)}function hR(){return hR=(0,O.Z)(function*(n,e,t){if(n.Pu.set("Online"),e instanceof EL&&2===e.state&&e.cause)try{yield(r=(0,O.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.Eu.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.Eu.delete(h),i.bu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rT(n,r)}else if(e instanceof Ub?n.bu.Wt(e):e instanceof wL?n.bu.ee(e):n.bu.Yt(e),!t.isEqual(at.min()))try{const r=yield f2(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.bu.ue(a);return l.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const _=i.Eu.get(p);_&&i.Eu.set(p,_.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach((h,p)=>{const _=i.Eu.get(h);if(!_)return;i.Eu.set(h,_.withResumeToken(ei.EMPTY_BYTE_STRING,_.snapshotVersion)),C2(i,h);const b=new gl(_.target,h,p,_.sequenceNumber);aR(i,b)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ie("RemoteStore","Failed to raise snapshot:",r),yield rT(n,r)}var r}),hR.apply(this,arguments)}function rT(n,e,t){return fR.apply(this,arguments)}function fR(){return fR=(0,O.Z)(function*(n,e,t){if(!Dc(e))throw e;n.Au.add(1),yield fm(n),n.Pu.set("Offline"),t||(t=()=>f2(n.localStore)),n.asyncQueue.enqueueRetryable((0,O.Z)(function*(){Ie("RemoteStore","Retrying IndexedDB access"),yield t(),n.Au.delete(1),yield wE(n)}))}),fR.apply(this,arguments)}function A2(n,e){return vR.apply(this,arguments)}function vR(){return vR=(0,O.Z)(function*(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),Ie("RemoteStore","RemoteStore received new credentials");const r=Lc(t);t.Au.add(3),yield fm(t),r&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield wE(t)}),vR.apply(this,arguments)}function ER(){return ER=(0,O.Z)(function*(n,e){const t=Ve(n);e?(t.Au.delete(2),yield wE(t)):e||(t.Au.add(2),yield fm(t),t.Pu.set("Unknown"))}),ER.apply(this,arguments)}function gm(n){return n.Vu||(n.Vu=function(e,t,r){const i=Ve(e);return i.lu(),new gz(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{oo:Ez.bind(null,n),co:Iz.bind(null,n),eu:Cz.bind(null,n)}),n.Ru.push(function(){var e=(0,O.Z)(function*(t){t?(n.Vu.Go(),lR(n)?uR(n):n.Pu.set("Unknown")):(yield n.Vu.stop(),b2(n))});return function(t){return e.apply(this,arguments)}}())),n.Vu}class IR{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new IR(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ee(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mm(n,e){if(br("AsyncQueue",`${e}: ${n}`),Dc(n))return new Ee(te.UNAVAILABLE,`${e}: ${n}`);throw n}class _m{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Le.comparator(t.key,r.key):(t,r)=>Le.comparator(t.key,r.key),this.keyedMap=tE(),this.sortedSet=new xn(this.comparator)}static emptySet(e){return new _m(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _m)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new _m;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class x2{constructor(){this.Du=new xn(Le.comparator)}track(e){const t=e.doc.key,r=this.Du.get(t);r?0!==e.type&&3===r.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==r.type?this.Du=this.Du.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Du=this.Du.remove(t):1===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):Ze():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,r)=>{e.push(r)}),e}}class ym{constructor(e,t,r,i,a,l,h,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new ym(e,t,_m.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Mz{constructor(){this.xu=void 0,this.listeners=[]}}class Rz{constructor(){this.queries=new fl(e=>ZF(e),Jw),this.onlineState="Unknown",this.Nu=new Set}}function bR(){return bR=(0,O.Z)(function*(n,e){const t=Ve(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new Mz),i)try{a.xu=yield t.onListen(r)}catch(l){const h=mm(l,`Initialization of query '${EM(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.ku(t.onlineState),a.xu&&e.Mu(a.xu)&&SR(t)}),bR.apply(this,arguments)}function DR(){return DR=(0,O.Z)(function*(n,e){const t=Ve(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),DR.apply(this,arguments)}function Nz(n,e){const t=Ve(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Mu(i)&&(r=!0);l.xu=i}}r&&SR(t)}function Pz(n,e,t){const r=Ve(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function SR(n){n.Nu.forEach(e=>{e.next()})}class AR{constructor(e,t,r){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=r||{}}Mu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ym(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=ym.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class N2{constructor(e){this.key=e}}class P2{constructor(e){this.key=e}}class k2{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=Rt(),this.mutatedKeys=Rt(),this.Zu=XF(e),this.tc=new _m(this.Zu)}get ec(){return this.Ju}nc(e,t){const r=t?t.sc:new x2,i=t?t.tc:this.tc;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,A)=>{const L=i.get(b),$=eE(this.query,A)?A:null,W=!!L&&this.mutatedKeys.has(L.key),re=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let fe=!1;L&&$?L.data.isEqual($.data)?W!==re&&(r.track({type:3,doc:$}),fe=!0):this.ic(L,$)||(r.track({type:2,doc:$}),fe=!0,(p&&this.Zu($,p)>0||_&&this.Zu($,_)<0)&&(h=!0)):!L&&$?(r.track({type:0,doc:$}),fe=!0):L&&!$&&(r.track({type:1,doc:L}),fe=!0,(p||_)&&(h=!0)),fe&&($?(l=l.add($),a=re?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{tc:l,sc:r,ji:h,mutatedKeys:a}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const a=e.sc.Cu();a.sort((_,b)=>function(A,L){const $=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze()}};return $(A)-$(L)}(_.type,b.type)||this.Zu(_.doc,b.doc)),this.rc(r);const l=t?this.oc():[],h=0===this.Xu.size&&this.current?1:0,p=h!==this.Yu;return this.Yu=h,0!==a.length||p?{snapshot:new ym(this.query,e.tc,i,a,e.mutatedKeys,0===h,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),uc:l}:{uc:l}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new x2,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=Rt(),this.tc.forEach(r=>{this.cc(r.key)&&(this.Xu=this.Xu.add(r.key))});const t=[];return e.forEach(r=>{this.Xu.has(r)||t.push(new P2(r))}),this.Xu.forEach(r=>{e.has(r)||t.push(new N2(r))}),t}ac(e){this.Ju=e.sr,this.Xu=Rt();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return ym.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class Fz{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Lz{constructor(e){this.key=e,this.lc=!1}}class Vz{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.fc={},this.dc=new fl(h=>ZF(h),Jw),this._c=new Map,this.wc=new Set,this.mc=new xn(Le.comparator),this.gc=new Map,this.yc=new jM,this.Ic={},this.Tc=new Map,this.Ec=Gh.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function Uz(n,e){return xR.apply(this,arguments)}function xR(){return xR=(0,O.Z)(function*(n,e){const t=function XR(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=O2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jz.bind(null,e),e.fc.eu=Nz.bind(null,e.eventManager),e.fc.vc=Pz.bind(null,e.eventManager),e}(n);let r,i;const a=t.dc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.hc();else{const l=yield function dm(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Fs.getTargetData(r,e).next(a=>a?(i=a,Q.resolve(i)):t.Fs.allocateTargetId(r).next(l=>(i=new gl(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Hi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(r.targetId,r),t.Ji.set(e,r.targetId)),r})}(t.localStore,ls(e)),h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield function MR(n,e,t,r,i){return RR.apply(this,arguments)}(t,e,r,"current"===h,l.resumeToken),t.isPrimaryClient&&nT(t.remoteStore,l)}return i}),xR.apply(this,arguments)}function RR(){return RR=(0,O.Z)(function*(n,e,t,r,i){n.Rc=(A,L,$)=>{return(W=(0,O.Z)(function*(re,fe,He,ut){let qe=fe.view.nc(He);qe.ji&&(qe=yield Qb(re.localStore,fe.query,!1).then(({documents:Zt})=>fe.view.nc(Zt,qe)));const jt=ut&&ut.targetChanges.get(fe.targetId),hn=fe.view.applyChanges(qe,re.isPrimaryClient,jt);return $R(re,fe.targetId,hn.uc),hn.snapshot}),function(re,fe,He,ut){return W.apply(this,arguments)})(n,A,L,$);var W};const a=yield Qb(n.localStore,e,!0),l=new k2(e,a.sr),h=l.nc(a.documents),p=aE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),_=l.applyChanges(h,n.isPrimaryClient,p);$R(n,t,_.uc);const b=new Fz(e,t,l);return n.dc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),_.snapshot}),RR.apply(this,arguments)}function Bz(n,e){return NR.apply(this,arguments)}function NR(){return NR=(0,O.Z)(function*(n,e){const t=Ve(n),r=t.dc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!Jw(a,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield hm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),EE(t.remoteStore,r.targetId),vm(t,r.targetId)}).catch(Tc))):(vm(t,r.targetId),yield hm(t.localStore,r.targetId,!0))}),NR.apply(this,arguments)}function O2(n,e){return kR.apply(this,arguments)}function kR(){return kR=(0,O.Z)(function*(n,e){const t=Ve(n);try{const r=yield function oz(n,e){const t=Ve(n),r=e.snapshotVersion;let i=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Xi.newChangeBuffer({trackRemovals:!0});i=t.Hi;const h=[];e.targetChanges.forEach((b,A)=>{const L=i.get(A);if(!L)return;h.push(t.Fs.removeMatchingKeys(a,b.removedDocuments,A).next(()=>t.Fs.addMatchingKeys(a,b.addedDocuments,A)));let $=L.withSequenceNumber(a.currentSequenceNumber);var W,re,fe;null!==e.targetMismatches.get(A)?$=$.withResumeToken(ei.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):b.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(b.resumeToken,r)),i=i.insert(A,$),re=$,fe=b,(0===(W=L).resumeToken.approximateByteSize()||re.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0)&&h.push(t.Fs.updateTargetData(a,$))});let p=Ls(),_=Rt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),h.push(function p2(n,e,t){let r=Rt(),i=Rt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Ls();return t.forEach((h,p)=>{const _=a.get(h);p.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(at.min())?(e.removeEntry(h,p.readTime),l=l.insert(h,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),l=l.insert(h,p)):Ie("LocalStore","Ignoring outdated watch update for ",h,". Current version:",_.version," Watch version:",p.version)}),{er:l,nr:i}})}(a,l,e.documentUpdates).next(b=>{p=b.er,_=b.nr})),!r.isEqual(at.min())){const b=t.Fs.getLastRemoteSnapshotVersion(a).next(A=>t.Fs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(b)}return Q.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,_)).next(()=>p)}).then(a=>(t.Hi=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.gc.get(a);l&&(ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.lc=!0:i.modifiedDocuments.size>0?ot(l.lc):i.removedDocuments.size>0&&(ot(l.lc),l.lc=!1))}),yield ml(t,r,e)}catch(r){yield Tc(r)}}),kR.apply(this,arguments)}function F2(n,e,t){const r=Ve(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.dc.forEach((a,l)=>{const h=l.view.ku(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=Ve(a);h.onlineState=l;let p=!1;h.queries.forEach((_,b)=>{for(const A of b.listeners)A.ku(l)&&(p=!0)}),p&&SR(h)}(r.eventManager,e),i.length&&r.fc.eu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jz(n,e,t){return OR.apply(this,arguments)}function OR(){return OR=(0,O.Z)(function*(n,e,t){const r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.gc.get(e),a=i&&i.key;if(a){let l=new xn(Le.comparator);l=l.insert(a,Gn.newNoDocument(a,at.min()));const h=Rt().add(a),p=new oE(at.min(),new Map,new xn(bt),l,h);yield O2(r,p),r.mc=r.mc.remove(a),r.gc.delete(e),jR(r)}else yield hm(r.localStore,e,!1).then(()=>vm(r,e,t)).catch(Tc)}),OR.apply(this,arguments)}function vm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.dc.delete(r),t&&n.fc.vc(r,t);n._c.delete(e),n.isPrimaryClient&&n.yc.ps(e).forEach(r=>{n.yc.containsKey(r)||L2(n,r)})}function L2(n,e){n.wc.delete(e.path.canonicalString());const t=n.mc.get(e);null!==t&&(EE(n.remoteStore,t),n.mc=n.mc.remove(e),n.gc.delete(t),jR(n))}function $R(n,e,t){for(const r of t)r instanceof N2?(n.yc.addReference(r.key,e),Wz(n,r)):r instanceof P2?(Ie("SyncEngine","Document no longer in limbo: "+r.key),n.yc.removeReference(r.key,e),n.yc.containsKey(r.key)||L2(n,r.key)):Ze()}function Wz(n,e){const t=e.key,r=t.path.canonicalString();n.mc.get(t)||n.wc.has(r)||(Ie("SyncEngine","New document in limbo: "+t),n.wc.add(r),jR(n))}function jR(n){for(;n.wc.size>0&&n.mc.size<n.maxConcurrentLimboResolutions;){const e=n.wc.values().next().value;n.wc.delete(e);const t=new Le(Qt.fromString(e)),r=n.Ec.next();n.gc.set(r,new Lz(t)),n.mc=n.mc.insert(t,r),nT(n.remoteStore,new gl(ls(nm(t.path)),r,"TargetPurposeLimboResolution",io.ct))}}function ml(n,e,t){return HR.apply(this,arguments)}function HR(){return HR=(0,O.Z)(function*(n,e,t){const r=Ve(n),i=[],a=[],l=[];var h;r.dc.isEmpty()||(r.dc.forEach((h,p)=>{l.push(r.Rc(p,e,t).then(_=>{if((_||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,_?.fromCache?"not-current":"current"),_){i.push(_);const b=qM.Bi(p.targetId,_);a.push(b)}}))}),yield Promise.all(l),r.fc.eu(i),yield(h=(0,O.Z)(function*(p,_){const b=Ve(p);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Q.forEach(_,L=>Q.forEach(L.$i,$=>b.persistence.referenceDelegate.addReference(A,L.targetId,$)).next(()=>Q.forEach(L.Fi,$=>b.persistence.referenceDelegate.removeReference(A,L.targetId,$)))))}catch(A){if(!Dc(A))throw A;Ie("LocalStore","Failed to update sequence numbers: "+A)}for(const A of _){const L=A.targetId;if(!A.fromCache){const $=b.Hi.get(L),re=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);b.Hi=b.Hi.insert(L,re)}}}),function(p,_){return h.apply(this,arguments)})(r.localStore,a))}),HR.apply(this,arguments)}function qz(n,e){return GR.apply(this,arguments)}function GR(){return GR=(0,O.Z)(function*(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){Ie("SyncEngine","User change. New user:",e.toKey());const r=yield h2(t.localStore,e);t.currentUser=e,(i=t).Tc.forEach(l=>{l.forEach(h=>{h.reject(new Ee(te.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Tc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ml(t,r.tr)}var i}),GR.apply(this,arguments)}function Kz(n,e){const t=Ve(n),r=t.gc.get(e);if(r&&r.lc)return Rt().add(r.key);{let i=Rt();const a=t._c.get(e);if(!a)return i;for(const l of a){const h=t.dc.get(l);i=i.unionWith(h.view.ec)}return i}}class iT{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,O.Z)(function*(){t.serializer=vE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function d2(n,e,t,r){return new iz(n,e,t,r)}(this.persistence,new c2,e.initialUser,this.serializer)}createPersistence(e){return new HM(Kb.js,this.serializer)}createSharedClientState(e){return new w2}terminate(){var e=this;return(0,O.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wm{initialize(e,t){var r=this;return(0,O.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>F2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=qz.bind(null,r.syncEngine),yield function wR(n,e){return ER.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Rz}createDatastore(e){const t=vE(e.databaseInfo.databaseId),r=new fz(e.databaseInfo);return new _z(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>F2(this.syncEngine,h,0),l=E2.D()?new E2:new cz,new wz(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,p,_){const b=new Vz(r,i,a,l,h,p);return _&&(b.Ac=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,O.Z)(function*(t){const r=Ve(t);Ie("RemoteStore","RemoteStore shutting down."),r.Au.add(5),yield fm(r),r.vu.shutdown(),r.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class sT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class a4{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ui.UNAUTHENTICATED,this.clientId=fF.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,O.Z)(function*(h){Ie("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ie("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,O.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ee(te.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,O.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=mm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function oT(n,e){return eN.apply(this,arguments)}function eN(){return eN=(0,O.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ie("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,O.Z)(function*(a){r.isEqual(a)||(yield h2(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),eN.apply(this,arguments)}function tN(n,e){return nN.apply(this,arguments)}function nN(){return nN=(0,O.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function rN(n){return iN.apply(this,arguments)}(n);Ie("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>A2(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>A2(e.remoteStore,a)),n._onlineComponents=e}),nN.apply(this,arguments)}function iN(){return iN=(0,O.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie("FirestoreClient","Using user provided OfflineComponentProvider");try{yield oT(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function H2(n){return"FirebaseError"===n.name?n.code===te.FAILED_PRECONDITION||n.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;aa("Error using user provided cache. Falling back to memory cache: "+t),yield oT(n,new iT)}}else Ie("FirestoreClient","Using default OfflineComponentProvider"),yield oT(n,new iT);return n._offlineComponents}),iN.apply(this,arguments)}function sN(){return sN=(0,O.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie("FirestoreClient","Using user provided OnlineComponentProvider"),yield tN(n,n._uninitializedComponentsProvider._online)):(Ie("FirestoreClient","Using default OnlineComponentProvider"),yield tN(n,new wm))),n._onlineComponents}),sN.apply(this,arguments)}function Em(n){return aN.apply(this,arguments)}function aN(){return aN=(0,O.Z)(function*(n){const e=yield function aT(n){return sN.apply(this,arguments)}(n),t=e.eventManager;return t.onListen=Uz.bind(null,e.syncEngine),t.onUnlisten=Bz.bind(null,e.syncEngine),t}),aN.apply(this,arguments)}const Y2=new Map;function uN(n,e,t){if(!t)throw new Ee(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Z2(n){if(!Le.isDocumentKey(n))throw new Ee(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Q2(n){if(Le.isDocumentKey(n))throw new Ee(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=function lT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Ze()}(n);throw new Ee(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class J2{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ee(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ee(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function m4(n,e,t,r){if(!0===e&&!0===r)throw new Ee(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class IE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ee(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ee(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J2(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new fH;switch(t.type){case"firstParty":return new _H(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ee(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Y2.get(e);t&&(Ie("ComponentProvider","Removing Datastore"),Y2.delete(e),t.terminate())}(this),Promise.resolve()}}class Sr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sr(this.firestore,e,this._key)}}class Ii{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ii(this.firestore,e,this._query)}}class uu extends Ii{constructor(e,t,r){super(e,t,nm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sr(this.firestore,null,new Le(e))}withConverter(e){return new uu(this.firestore,e,this._path)}}function y4(n,e,...t){if(n=nn(n),uN("collection","path",e),n instanceof IE){const r=Qt.fromString(e,...t);return Q2(r),new uu(n,null,r)}{if(!(n instanceof Sr||n instanceof uu))throw new Ee(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return Q2(r),new uu(n.firestore,null,r)}}function eV(n,e,...t){if(n=nn(n),1===arguments.length&&(e=fF.A()),uN("doc","path",e),n instanceof IE){const r=Qt.fromString(e,...t);return Z2(r),new Sr(n,null,new Le(r))}{if(!(n instanceof Sr||n instanceof uu))throw new Ee(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return Z2(r),new Sr(n.firestore,n instanceof uu?n.converter:null,new Le(r))}}class v4{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new rR(this,"async_queue_retry"),this.Yc=()=>{const t=tT();t&&Ie("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=tT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=tT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new Jr;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,O.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!Dc(t))throw t;Ie("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(r=>{throw this.zc=r,this.Wc=!1,br("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Wc=!1,r))));return this.Kc=t,t}enqueueAfterDelay(e,t,r){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const i=IR.createAndSchedule(this,e,t,r,a=>this.ea(a));return this.jc.push(i),i}Xc(){this.zc&&Ze()}verifyOperationInProgress(){}na(){var e=this;return(0,O.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function lN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class zn extends IE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new v4,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||nV(this),this._firestoreClient.terminate()}}function E4(n,e){const r="string"==typeof n?n:e||"(default)",i=jr("object"==typeof n?n:js(),"firestore").getImmediate({identifier:r});if(!i._initialized){const a=Je("firestore");a&&function _4(n,e,t,r={}){var i;const a=(n=Yt(n,IE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&aa("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=ui.MOCK_USER;else{l=Xe(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ee(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ui(p)}n._authCredentials=new pH(new dF(l,h))}}(i,...a)}return i}function nV(n){var e,t,r;const i=n._freezeSettings(),a=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new qH(n._databaseId,h,n._persistenceKey,(_=i).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var h,_;n._firestoreClient=new a4(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Wh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wh(ei.fromBase64String(e))}catch(t){throw new Ee(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wh(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Im{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ee(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cN{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}}const x4=new RegExp("[~\\*/\\[\\]]");function hT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(a||l)&&(p+=" (found",a&&(p+=` in field ${r}`),l&&(p+=` in document ${i}`),p+=")"),new Ee(te.INVALID_ARGUMENT,h+n+p)}class pN{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Sr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new M4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class M4 extends pN{data(){return super.data()}}function fT(n,e){return"string"==typeof e?function dT(n,e,t){if(e.search(x4)>=0)throw hT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Im(...e.split("."))._internalPath}catch{throw hT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}(n,e):e instanceof Im?e._internalPath:e._delegate._internalPath}class N4{convertValue(e,t="none"){switch(Mc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ze()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Sc(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new cN(pr(e.latitude),pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ab(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Kw(e));default:return null}}convertTimestamp(e){const t=Ac(e);return new sr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);ot(OL(r));const i=new Ph(r.get(1),r.get(3)),a=new Le(r.popFirst(5));return i.isEqual(t)||br(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}class Kh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tm extends pN{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _T(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class _T extends Tm{data(e={}){return super.data(e)}}class Dm{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Kh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _T(this._firestore,this._userDataWriter,r.key,r,new Kh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new _T(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Kh(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new _T(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Kh(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return 0!==l.type&&(p=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),_=a.indexOf(l.doc.key)),{type:k4(l.type),doc:h,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function k4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze()}}class Uc extends N4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sr(this.firestore,null,t)}}!function(n,e=!0){Zg=ws,lr(new rn("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new zn(new gH(t.getProvider("auth-internal")),new yH(t.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ee(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ph(h.options.projectId,p)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),kt(cF,"3.11.0",n),kt(cF,"3.11.0","esm2017")}();var yN=j(4),q4={includeMetadataChanges:!1};function vN(n,e){return void 0===e&&(e=q4),new Wa.y(function(t){var r=function O4(n,...e){var t,r,i;n=nn(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||lN(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(lN(e[l])){const A=e[l];e[l]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[l+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[l+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let p,_,b;if(n instanceof Sr)_=Yt(n.firestore,zn),b=nm(n._key.path),p={next:A=>{e[l]&&e[l](function _N(n,e,t){const r=t.docs.get(e._key),i=new Uc(n);return new Tm(n,i,e._key,r,new Kh(t.hasPendingWrites,t.fromCache),e.converter)}(_,n,A))},error:e[l+1],complete:e[l+2]};else{const A=Yt(n,Ii);_=Yt(A.firestore,zn),b=A._query;const L=new Uc(_);p={next:$=>{e[l]&&e[l](new Dm(_,L,A,$))},error:e[l+1],complete:e[l+2]},function gV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ee(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query)}return function(A,L,$,W){const re=new sT(W),fe=new AR(L,re,$);return A.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return function CR(n,e){return bR.apply(this,arguments)}(yield Em(A),fe)})),()=>{re.Sc(),A.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return function TR(n,e){return DR.apply(this,arguments)}(yield Em(A),fe)}))}}(function Lr(n){return n._firestoreClient||nV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}(_),b,h,p)}(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Y4(n,e){return void 0===e&&(e={}),function K4(n){return vN(n,{includeMetadataChanges:!0})}(n).pipe((0,yN.U)(function(t){return function CV(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}(t,e)}))}class vT{constructor(e){return e}}const SV="firestore",IN=new w.OlP("angularfire2.firestore-instances");function r3(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new vT(r)}}const i3={provide:class t3{constructor(){return Ka(SV)}},deps:[[new w.FiY,IN]]},s3={provide:vT,useFactory:function n3(n,e){const t=zu(SV,n,e);return t&&new vT(t)},deps:[[new w.FiY,IN],Zs]};let o3=(()=>{class n{constructor(){kt("angularfire",ki.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({providers:[s3,i3]}),n})();function a3(n,...e){return{ngModule:o3,providers:[{provide:IN,useFactory:r3(n),multi:!0,deps:[w.R0b,w.zs3,Wu,Ya,[new w.FiY,mc],[new w.FiY,Xl],...e]}]}}const u3=Oi(Y4,!0),l3=Oi(y4,!0),c3=Oi(eV,!0),d3=Oi(E4,!0);var h3=j(646);let CN=(()=>{class n{constructor(t,r){this.auth=t,this.firestore=r,this.user$=ow(this.auth),this.usuario$=ow(this.auth).pipe((0,yN.U)(i=>i?(console.log(i),i):(0,h3.of)(null)))}registro(t,r){var i=this;return(0,O.Z)(function*(){try{return yield GC(i.auth,t,r)}catch{return null}})()}login(t,r){var i=this;return(0,O.Z)(function*(){try{return yield hO(i.auth,t,r)}catch{return null}})()}logout(){return pO(this.auth)}getUsuario(){const t=this.auth.currentUser;if(console.log(t),t){const r=c3(this.firestore,`user/${t.uid}`);return l3(this.firestore,`user/${t.uid}`),u3(r,{idField:"uid"})}return t}getUsuarioFire(){return this.auth.currentUser}}return n.\u0275fac=function(t){return new(t||n)(w.LFG(_h),w.LFG(vT))},n.\u0275prov=w.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var AE=j(895);function f3(n,e){if(1&n){const t=w.EpF();w.TgZ(0,"nav")(1,"a",2),w._uU(2,"Home"),w.qZA(),w.TgZ(3,"a",3),w._uU(4,"Juegos"),w.qZA(),w.TgZ(5,"a",4),w._uU(6,"Quien Soy"),w.qZA(),w.TgZ(7,"a",5),w.NdJ("click",function(){w.CHM(t);const i=w.oxw();return w.KtG(i.logOut())}),w._uU(8,"Logout"),w.qZA(),w.TgZ(9,"a"),w._uU(10),w.qZA(),w._UZ(11,"div",6),w.qZA()}if(2&n){const t=w.oxw();w.xp6(10),w.Oqu(t.usuario.email)}}function p3(n,e){1&n&&(w.TgZ(0,"nav")(1,"a",2),w._uU(2,"Home"),w.qZA(),w.TgZ(3,"a",7),w._uU(4,"Login"),w.qZA(),w.TgZ(5,"a",8),w._uU(6,"Registro"),w.qZA(),w._UZ(7,"div",6),w.qZA())}let g3=(()=>{class n{constructor(t,r){this.authSvc=t,this.router=r}ngOnInit(){this.user$=this.authSvc.user$,this.authSvc.user$.subscribe(t=>{this.usuario=t,console.log("menu",this.usuario.email)}),console.log("menu",this.usuario.email),console.log("user$",this.user$)}logOut(){var t=this;return(0,O.Z)(function*(){try{yield t.authSvc.logout(),t.router.navigate(["/login"])}catch(r){console.log(r)}})()}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(CN),w.Y36(X.F0))},n.\u0275cmp=w.Xpm({type:n,selectors:[["app-menu"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["login",""],["routerLink","/home"],["routerLink","/juegos"],["routerLink","/quiensoy"],[3,"click"],[1,"animation","start-home"],["routerLink","/login"],["routerLink","/registro"]],template:function(t,r){if(1&t&&(w.YNc(0,f3,12,1,"nav",0),w.ALo(1,"async"),w.YNc(2,p3,8,0,"ng-template",null,1,w.W1O)),2&t){const i=w.MAs(3);w.Q6J("ngIf",w.lcZ(1,2,r.user$))("ngIfElse",i)}},dependencies:[AE.O5,X.rH,AE.Ov],styles:["nav[_ngcontent-%COMP%]{margin:27px auto 0;position:relative;width:700px;height:50px;background-color:#34495e;border-radius:8px;font-size:0}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{line-height:50px;height:100%;font-size:15px;display:inline-block;position:relative;z-index:1;text-decoration:none;text-transform:uppercase;text-align:center;color:#fff;cursor:pointer}nav[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:50px;height:100%;font-size:15px;display:inline-block;position:relative;z-index:1;text-decoration:none;text-transform:uppercase;text-align:center;color:#fff;cursor:pointer}nav[_ngcontent-%COMP%]   .animation[_ngcontent-%COMP%]{position:absolute;height:100%;top:0;z-index:0;transition:all .5s ease 0s;border-radius:8px}a[_ngcontent-%COMP%]:nth-child(1){width:100px}a[_ngcontent-%COMP%]:nth-child(2){width:110px}a[_ngcontent-%COMP%]:nth-child(3){width:100px}a[_ngcontent-%COMP%]:nth-child(4){width:160px}a[_ngcontent-%COMP%]:nth-child(5){width:120px}nav[_ngcontent-%COMP%]   .start-home[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:nth-child(1):hover ~ .animation[_ngcontent-%COMP%]{width:100px;left:0;background-color:#1abc9c}nav[_ngcontent-%COMP%]   .start-about[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:nth-child(2):hover ~ .animation[_ngcontent-%COMP%]{width:110px;left:100px;background-color:#e74c3c}nav[_ngcontent-%COMP%]   .start-blog[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:nth-child(3):hover ~ .animation[_ngcontent-%COMP%]{width:100px;left:210px;background-color:#3498db}nav[_ngcontent-%COMP%]   .start-portefolio[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:nth-child(4):hover ~ .animation[_ngcontent-%COMP%]{width:160px;left:310px;background-color:#9b59b6}body[_ngcontent-%COMP%]{font-size:12px;font-family:sans-serif;background:#2c3e50}h1[_ngcontent-%COMP%]{margin:40px 0;text-align:center;font-size:30px;color:#ecf0f1;text-shadow:2px 2px 4px #000000;font-family:Cherry Swash,cursive}p[_ngcontent-%COMP%]{position:absolute;bottom:20px;width:100%;text-align:center;color:#ecf0f1;font-family:Cherry Swash,cursive;font-size:16px}span[_ngcontent-%COMP%]{color:#2bd6b4}"]}),n})(),m3=(()=>{class n{constructor(){this.title="saladejuegos"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=w.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&w._UZ(0,"app-menu")(1,"router-outlet")},dependencies:[X.lC,g3]}),n})();const _3_firebase={projectId:"tplab4-45942",appId:"1:544089026720:web:12140e7d4d8c437ea759c5",databaseURL:"https://tplab4-45942.firebaseio.com",storageBucket:"tplab4-45942.appspot.com",locationId:"us-central",apiKey:"AIzaSyDaDxkZHkwvJy0N7o_DVcmMXIx_6vPSZ7I",authDomain:"tplab4-45942.firebaseapp.com",messagingSenderId:"544089026720"},AV="@firebase/database";let bN="";class v3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),cn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:gr(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class w3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Wn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const MV=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new v3(e)}}catch{}return new w3},Yh=MV("localStorage"),TN=MV("sessionStorage"),Sm=new Ar("@firebase/database"),RV=function(){let n=1;return function(){return n++}}(),NV=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const a=i-55296;r++,Z(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new Pn;t.update(e);const r=t.digest();return ye.encodeByteArray(r)},xE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=xE.apply(null,r):e+="object"==typeof r?cn(r):r,e+=" "}return e};let Zh=null,PV=!0;const di=function(...n){if(!0===PV&&(PV=!1,null===Zh&&!0===TN.get("logging_enabled")&&function(n,e){Z(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Sm.logLevel=he.VERBOSE,Zh=Sm.log.bind(Sm),e&&TN.set("logging_enabled",!0)):"function"==typeof n?Zh=n:(Zh=null,TN.remove("logging_enabled"))}(!0)),Zh){const e=xE.apply(null,n);Zh(e)}},ME=function(n){return function(...e){di(n,...e)}},DN=function(...n){const e="FIREBASE INTERNAL ERROR: "+xE(...n);Sm.error(e)},lu=function(...n){const e=`FIREBASE FATAL ERROR: ${xE(...n)}`;throw Sm.error(e),new Error(e)},Gi=function(...n){const e="FIREBASE WARNING: "+xE(...n);Sm.warn(e)},wT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Bc="[MIN_NAME]",_l="[MAX_NAME]",Qh=function(n,e){if(n===e)return 0;if(n===Bc||e===_l)return-1;if(e===Bc||n===_l)return 1;{const t=LV(n),r=LV(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},C3=function(n,e){return n===e?0:n<e?-1:1},RE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+cn(e))},SN=function(n){if("object"!=typeof n||null===n)return cn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=cn(e[r]),t+=":",t+=SN(n[e[r]]);return t+="}",t},OV=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function hi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const FV=function(n){Z(!wT(n),"Invalid JSON number");const r=1023;let i,a,l,h,p;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)_.push(a%2?1:0),a=Math.floor(a/2);_.push(i?1:0),_.reverse();const b=_.join("");let A="";for(p=0;p<64;p+=8){let L=parseInt(b.substr(p,8),2).toString(16);1===L.length&&(L="0"+L),A+=L}return A.toLowerCase()},S3=new RegExp("^-?(0*)\\d{1,10}$"),LV=function(n){if(S3.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Am=function(n){try{n()}catch(e){setTimeout(()=>{throw Gi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},M3=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},NE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class R3{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Gi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class N3{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(di("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gi(e)}}let PE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const jV=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zV="websocket",WV="long_polling";class xN{constructor(e,t,r,i,a=!1,l="",h=!1,p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Yh.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Yh.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qV(n,e,t){let r;if(Z("string"==typeof e,"typeof type must == string"),Z("object"==typeof t,"typeof params must == object"),e===zV)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==WV)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function P3(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return hi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class k3{constructor(){this.counters_={}}incrementCounter(e,t=1){Wn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ye(this.counters_)}}const MN={},RN={};function NN(n){const e=n.toString();return MN[e]||(MN[e]=new k3),MN[e]}class F3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Am(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class $c{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ME(e),this.stats_=NN(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),qV(t,WV,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new F3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if(Be()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new PN((...a)=>{const[l,h,p,_,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&jV.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$c.forceAllow_=!0}static forceDisallow(){$c.forceDisallow_=!0}static isAvailable(){return!(Be()||!$c.forceAllow_&&($c.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=cn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=Ae(t),i=OV(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Be())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=cn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class PN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Be())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=RV(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=PN.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){di("frame writing exception"),h.stack&&di(h.stack),di(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||di("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){Be()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{di("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let IT=null;typeof MozWebSocket<"u"?IT=MozWebSocket:typeof WebSocket<"u"&&(IT=WebSocket);let xm=(()=>{class n{constructor(t,r,i,a,l,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ME(this.connId),this.stats_=NN(r),this.connURL=n.connectionURL_(r,h,p,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!Be()&&typeof location<"u"&&location.hostname&&jV.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),qV(t,zV,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Yh.set("previous_websocket_failure",!0);try{let i;if(Be()){i={headers:{"User-Agent":`Firebase/5/${bN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new IT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==IT&&!n.forceDisallow_}static previouslyFailed(){return Yh.isInMemoryStorage||!0===Yh.get("previous_websocket_failure")}markConnectionHealthy(){Yh.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=gr(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Z(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=cn(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=OV(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),eU=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[$c,xm]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=xm&&xm.isAvailable();let i=r&&!xm.previouslyFailed();if(t.webSocketOnly&&(r||Gi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[xm];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class aU{constructor(e,t,r,i,a,l,h,p,_,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ME("c:"+this.id+":"),this.transportManager_=new eU(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=NE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=RE("t",e),r=RE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=RE("t",e),r=RE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=RE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?DN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):DN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Gi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),NE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):NE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Yh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class uU{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class lU{constructor(e){this.allowedEvents_=e,this.listeners_={},Z(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){Z(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class CT extends lU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ht()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new CT}getInitialEvent(e){return Z("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const cU=32,dU=768;class gn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ln(){return new gn("")}function Ft(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function jc(n){return n.pieces_.length-n.pieceNum_}function bn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new gn(n.pieces_,e)}function ON(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function kE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function hU(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new gn(e,0)}function er(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof gn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new gn(t,0)}function Lt(n){return n.pieceNum_>=n.pieces_.length}function cs(n,e){const t=Ft(n),r=Ft(e);if(null===t)return e;if(t===r)return cs(bn(n),bn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function FN(n,e){if(jc(n)!==jc(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Mo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(jc(n)>jc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class s6{constructor(e,t){this.errorPrefix_=t,this.parts_=kE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=mr(this.parts_[r]);fU(this)}}function fU(n){if(n.byteLength_>dU)throw new Error(n.errorPrefix_+"has a key path longer than "+dU+" bytes ("+n.byteLength_+").");if(n.parts_.length>cU)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+cU+") or object contains a cycle "+Xh(n))}function Xh(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class LN extends lU{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new LN}getInitialEvent(e){return Z("visible"===e,"Unknown event type: "+e),[this.visible_]}}const OE=1e3;let TT,Jh=(()=>{class n extends uU{constructor(t,r,i,a,l,h,p,_){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=ME("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=OE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!Be())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");LN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&CT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_(cn(l)),Z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new Ce,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const p=h.d;"ok"===h.s?r.resolve(p):r.reject(p)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),Z(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Z(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const p={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const _=p.d,b=p.s;n.warnOnListenWarnings_(_,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",p),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,_))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&Wn(t,"w")){const i=Ci(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Gi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=ao(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=ao(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),Z(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+cn(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):DN("Unrecognized action received from server: "+cn(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=OE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=OE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=OE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,O.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,_=null;const b=function(){_?_.close():(p=!0,a())};t.realtime_={close:b,sendRequest:function($){Z(_,"sendRequest call when we're not connected not allowed."),_.sendRequest($)}};const L=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[$,W]=yield Promise.all([t.authTokenProvider_.getToken(L),t.appCheckTokenProvider_.getToken(L)]);p?di("getToken() completed but was canceled"):(di("getToken() completed. Creating connection."),t.authToken_=$&&$.accessToken,t.appCheckToken_=W&&W.token,_=new aU(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,re=>{Gi(re+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch($){t.log_("Failed to get token: "+$),p||(t.repoInfo_.nodeAdmin&&Gi($),b())}}})()}interrupt(t){di("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){di("Resuming connection for reason: "+t),delete this.interruptReasons_[t],bi(this.interruptReasons_)&&(this.reconnectDelay_=OE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>SN(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new gn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){di("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){di("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";Be()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+bN.replace(/\./g,"-")]=1,Ht()?t["framework.cordova"]=1:ce()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=CT.getInstance().currentlyOnline();return bi(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Bt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Bt(e,t)}}class bT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Bt(Bc,e),i=new Bt(Bc,t);return 0!==this.compare(r,i)}minPost(){return Bt.MIN}}class mU extends bT{static get __EMPTY_NODE(){return TT}static set __EMPTY_NODE(e){TT=e}compare(e,t){return Qh(e.name,t.name)}isDefinedOn(e){throw De("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Bt.MIN}maxPost(){return new Bt(_l,TT)}makePost(e,t){return Z("string"==typeof e,"KeyIndex indexValue must always be a string."),new Bt(e,TT)}toString(){return".key"}}const cu=new mU;class DT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let UN,la=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Vs.EMPTY_NODE,this.right=l??Vs.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Vs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Vs{constructor(e,t=Vs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Vs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,la.BLACK,null,null))}remove(e){return new Vs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,la.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new DT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new DT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new DT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new DT(this.root_,null,this.comparator_,!0,e)}}function f6(n,e){return Qh(n.name,e.name)}function VN(n,e){return Qh(n,e)}Vs.EMPTY_NODE=new class h6{copy(e,t,r,i,a){return this}insert(e,t,r){return new la(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const _U=function(n){return"number"==typeof n?"number:"+FV(n):"string:"+n},yU=function(n){if(n.isLeafNode()){const e=n.val();Z("string"==typeof e||"number"==typeof e||"object"==typeof e&&Wn(e,".sv"),"Priority must be a string or number.")}else Z(n===UN||n.isEmpty(),"priority of unexpected type.");Z(n===UN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let vU,wU,EU,Mm=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,Z(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),yU(this.priorityNode_)}static set __childrenNodeConstructor(t){vU=t}static get __childrenNodeConstructor(){return vU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Lt(t)?this:".priority"===Ft(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Ft(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(Z(".priority"!==i||1===jc(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(bn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+_U(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?FV(this.value_):this.value_,this.lazyHash_=NV(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(Z(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return Z(a>=0,"Unknown leaf type: "+r),Z(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Mn=new class _6 extends bT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Qh(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Bt.MIN}maxPost(){return new Bt(_l,new Mm("[PRIORITY-POST]",EU))}makePost(e,t){const r=wU(e);return new Bt(t,new Mm("[PRIORITY-POST]",r))}toString(){return".priority"}},y6=Math.log(2);class v6{constructor(e){this.count=parseInt(Math.log(e+1)/y6,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ST=function(n,e,t,r){n.sort(e);const i=function(p,_){const b=_-p;let A,L;if(0===b)return null;if(1===b)return A=n[p],L=t?t(A):A,new la(L,A.node,la.BLACK,null,null);{const $=parseInt(b/2,10)+p,W=i(p,$),re=i($+1,_);return A=n[$],L=t?t(A):A,new la(L,A.node,la.BLACK,W,re)}},h=function(p){let _=null,b=null,A=n.length;const L=function(W,re){const fe=A-W,He=A;A-=W;const ut=i(fe+1,He),qe=n[fe],jt=t?t(qe):qe;$(new la(jt,qe.node,re,null,ut))},$=function(W){_?(_.left=W,_=W):(b=W,_=W)};for(let W=0;W<p.count;++W){const re=p.nextBitIsOne(),fe=Math.pow(2,p.count-(W+1));re?L(fe,la.BLACK):(L(fe,la.BLACK),L(fe,la.RED))}return b}(new v6(n.length));return new Vs(r||e,h)};let BN;const Rm={};class yl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Z(Rm&&Mn,"ChildrenNode.ts has not been loaded"),BN=BN||new yl({".priority":Rm},{".priority":Mn}),BN}get(e){const t=Ci(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Vs?t:null}hasIndex(e){return Wn(this.indexSet_,e.toString())}addIndex(e,t){Z(e!==cu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Bt.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?ST(r,e.getCompare()):Rm;const p=e.toString(),_=Object.assign({},this.indexSet_);_[p]=e;const b=Object.assign({},this.indexes_);return b[p]=h,new yl(b,_)}addToIndexes(e,t){const r=uo(this.indexes_,(i,a)=>{const l=Ci(this.indexSet_,a);if(Z(l,"Missing index implementation for "+a),i===Rm){if(l.isDefinedOn(e.node)){const h=[],p=t.getIterator(Bt.Wrap);let _=p.getNext();for(;_;)_.name!==e.name&&h.push(_),_=p.getNext();return h.push(e),ST(h,l.getCompare())}return Rm}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new Bt(e.name,h))),p.insert(e,e.node)}});return new yl(r,this.indexSet_)}removeFromIndexes(e,t){const r=uo(this.indexes_,i=>{if(i===Rm)return i;{const a=t.get(e.name);return a?i.remove(new Bt(e.name,a)):i}});return new yl(r,this.indexSet_)}}let FE,St=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&yU(this.priorityNode_),this.children_.isEmpty()&&Z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return FE||(FE=new n(new Vs(VN),null,yl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||FE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?FE:r}}getChild(t){const r=Ft(t);return null===r?this:this.getImmediateChild(r).getChild(bn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(Z(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Bt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?FE:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Ft(t);if(null===i)return r;{Z(".priority"!==Ft(t)||1===jc(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(bn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Mn,(h,p)=>{r[h]=p.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+_U(this.getPriority().val())+":"),this.forEachChild(Mn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":NV(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Bt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Bt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Bt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Bt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Bt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===LE?-1:0}withIndex(t){if(t===cu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===cu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Mn),a=r.getIterator(Mn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===cu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const LE=new class w6 extends St{constructor(){super(new Vs(VN),St.EMPTY_NODE,yl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return St.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Bt,{MIN:{value:new Bt(Bc,St.EMPTY_NODE)},MAX:{value:new Bt(_l,LE)}}),mU.__EMPTY_NODE=St.EMPTY_NODE,Mm.__childrenNodeConstructor=St,function p6(n){UN=n}(LE),function m6(n){EU=n}(LE);const E6=!0;function or(n,e=null){if(null===n)return St.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),Z(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Mm(n,or(e));if(n instanceof Array||!E6){let t=St.EMPTY_NODE;return hi(n,(r,i)=>{if(Wn(n,r)&&"."!==r.substring(0,1)){const a=or(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(or(e))}{const t=[];let r=!1;if(hi(n,(l,h)=>{if("."!==l.substring(0,1)){const p=or(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new Bt(l,p)))}}),0===t.length)return St.EMPTY_NODE;const a=ST(t,f6,l=>l.name,VN);if(r){const l=ST(t,Mn.getCompare());return new St(a,or(e),new yl({".priority":l},{".priority":Mn}))}return new St(a,or(e),yl.Default)}}!function g6(n){wU=n}(or);class $N extends bT{constructor(e){super(),this.indexPath_=e,Z(!Lt(e)&&".priority"!==Ft(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Qh(e.name,t.name):a}makePost(e,t){const r=or(e),i=St.EMPTY_NODE.updateChild(this.indexPath_,r);return new Bt(t,i)}maxPost(){const e=St.EMPTY_NODE.updateChild(this.indexPath_,LE);return new Bt(_l,e)}toString(){return kE(this.indexPath_,0).join("/")}}const jN=new class I6 extends bT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Qh(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Bt.MIN}maxPost(){return Bt.MAX}makePost(e,t){const r=or(e);return new Bt(t,r)}toString(){return".value"}};function UE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class GN{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bc}hasEnd(){return this.endSet_}getIndexEndValue(){return Z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_l}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mn}copy(){const e=new GN;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function CU(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Mn?t="$priority":n.index_===jN?t="$value":n.index_===cu?t="$key":(Z(n.index_ instanceof $N,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=cn(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=cn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+cn(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=cn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+cn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function bU(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Mn&&(e.i=n.index_.toString()),e}class xT extends uU{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ME("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Z(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=xT.getListenId_(e,r),h={};this.listens_[l]=h;const p=CU(e._queryParams);this.restRequest_(a+".json",p,(_,b)=>{let A=b;if(404===_&&(A=null,_=null),null===_&&this.onDataUpdate_(a,A,!1,r),Ci(this.listens_,l)===h){let L;L=_?401===_?"permission_denied":"rest_error:"+_:"ok",i(L,null)}})}unlisten(e,t){const r=xT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=CU(e._queryParams),r=e._path.toString(),i=new Ce;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+en(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=gr(h.responseText)}catch{Gi("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&Gi("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class M6{constructor(){this.rootNode_=St.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function MT(){return{value:null,children:new Map}}function Pm(n,e,t){if(Lt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ft(e);n.children.has(r)||n.children.set(r,MT()),Pm(n.children.get(r),e=bn(e),t)}}function KN(n,e,t){null!==n.value?t(e,n.value):function R6(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{KN(i,new gn(e.toString()+"/"+r),t)})}class N6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&hi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class O6{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new N6(e);const r=1e4+2e4*Math.random();NE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;hi(e,(i,a)=>{a>0&&Wn(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),NE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ro=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ro||(Ro={})),Ro))();function QN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class RT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ro.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Lt(this.path)){if(null!=this.affectedTree.value)return Z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new gn(e));return new RT(ln(),t,this.revert)}}return Z(Ft(this.path)===e,"operationForChild called for unrelated child."),new RT(bn(this.path),this.affectedTree,this.revert)}}class ef{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ro.OVERWRITE}operationForChild(e){return Lt(this.path)?new ef(this.source,ln(),this.snap.getImmediateChild(e)):new ef(this.source,bn(this.path),this.snap)}}class km{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ro.MERGE}operationForChild(e){if(Lt(this.path)){const t=this.children.subtree(new gn(e));return t.isEmpty()?null:t.value?new ef(this.source,ln(),t.value):new km(this.source,ln(),t)}return Z(Ft(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new km(this.source,bn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Hc{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Lt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ft(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function jE(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,p)=>function U6(n,e,t){if(null==e.childName||null==t.childName)throw De("Should only compare child_ events.");const r=new Bt(e.childName,e.snapshotNode),i=new Bt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),l.forEach(h=>{const p=function V6(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(_=>{_.respondsTo(h.type)&&e.push(_.createEvent(p,n.query_))})})}function NT(n,e){return{eventCache:n,serverCache:e}}function HE(n,e,t,r){return NT(new Hc(e,t,r),n.serverCache)}function DU(n,e,t,r){return NT(n.eventCache,new Hc(e,t,r))}function PT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function tf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let XN;class Rn{constructor(e,t=(()=>(XN||(XN=new Vs(C3)),XN))()){this.value=e,this.children=t}static fromObject(e){let t=new Rn(null);return hi(e,(r,i)=>{t=t.set(new gn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ln(),value:this.value};if(Lt(e))return null;{const r=Ft(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(bn(e),t);return null!=a?{path:er(new gn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Lt(e))return this;{const t=Ft(e),r=this.children.get(t);return null!==r?r.subtree(bn(e)):new Rn(null)}}set(e,t){if(Lt(e))return new Rn(t,this.children);{const r=Ft(e),a=(this.children.get(r)||new Rn(null)).set(bn(e),t),l=this.children.insert(r,a);return new Rn(this.value,l)}}remove(e){if(Lt(e))return this.children.isEmpty()?new Rn(null):new Rn(null,this.children);{const t=Ft(e),r=this.children.get(t);if(r){const i=r.remove(bn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Rn(null):new Rn(this.value,a)}return this}}get(e){if(Lt(e))return this.value;{const t=Ft(e),r=this.children.get(t);return r?r.get(bn(e)):null}}setTree(e,t){if(Lt(e))return t;{const r=Ft(e),a=(this.children.get(r)||new Rn(null)).setTree(bn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Rn(this.value,l)}}fold(e){return this.fold_(ln(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(er(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ln(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Lt(e))return null;{const a=Ft(e),l=this.children.get(a);return l?l.findOnPath_(bn(e),er(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ln(),t)}foreachOnPath_(e,t,r){if(Lt(e))return this;{this.value&&r(t,this.value);const i=Ft(e),a=this.children.get(i);return a?a.foreachOnPath_(bn(e),er(t,i),r):new Rn(null)}}foreach(e){this.foreach_(ln(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(er(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ca{constructor(e){this.writeTree_=e}static empty(){return new ca(new Rn(null))}}function GE(n,e,t){if(Lt(e))return new ca(new Rn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=cs(i,e);return a=a.updateChild(l,t),new ca(n.writeTree_.set(i,a))}{const i=new Rn(t),a=n.writeTree_.setTree(e,i);return new ca(a)}}}function JN(n,e,t){let r=n;return hi(t,(i,a)=>{r=GE(r,er(e,i),a)}),r}function SU(n,e){if(Lt(e))return ca.empty();{const t=n.writeTree_.setTree(e,new Rn(null));return new ca(t)}}function eP(n,e){return null!=nf(n,e)}function nf(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(cs(t.path,e)):null}function AU(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Mn,(r,i)=>{e.push(new Bt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Bt(r,i.value))}),e}function Gc(n,e){if(Lt(e))return n;{const t=nf(n,e);return new ca(null!=t?new Rn(t):n.writeTree_.subtree(e))}}function tP(n){return n.writeTree_.isEmpty()}function Om(n,e){return xU(ln(),n.writeTree_,e)}function xU(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?(Z(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=xU(er(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(er(n,".priority"),r)),t}}function kT(n,e){return kU(e,n)}function z6(n,e){if(n.snap)return Mo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Mo(er(n.path,t),e))return!0;return!1}function q6(n){return n.visible}function MU(n,e,t){let r=ca.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Mo(t,l)?(h=cs(t,l),r=GE(r,h,a.snap)):Mo(l,t)&&(h=cs(l,t),r=GE(r,ln(),a.snap.getChild(h)));else{if(!a.children)throw De("WriteRecord should have .snap or .children");if(Mo(t,l))h=cs(t,l),r=JN(r,h,a.children);else if(Mo(l,t))if(h=cs(l,t),Lt(h))r=JN(r,ln(),a.children);else{const p=Ci(a.children,Ft(h));if(p){const _=p.getChild(bn(h));r=GE(r,ln(),_)}}}}}return r}function RU(n,e,t,r,i){if(r||i){const a=Gc(n.visibleWrites,e);return!i&&tP(a)?t:i||null!=t||eP(a,ln())?Om(MU(n.allWrites,function(_){return(_.visible||i)&&(!r||!~r.indexOf(_.writeId))&&(Mo(_.path,e)||Mo(e,_.path))},e),t||St.EMPTY_NODE):null}{const a=nf(n.visibleWrites,e);if(null!=a)return a;{const l=Gc(n.visibleWrites,e);return tP(l)?t:null!=t||eP(l,ln())?Om(l,t||St.EMPTY_NODE):null}}}function OT(n,e,t,r){return RU(n.writeTree,n.treePath,e,t,r)}function nP(n,e){return function K6(n,e,t){let r=St.EMPTY_NODE;const i=nf(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Mn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Gc(n.visibleWrites,e);return t.forEachChild(Mn,(l,h)=>{const p=Om(Gc(a,new gn(l)),h);r=r.updateImmediateChild(l,p)}),AU(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return AU(Gc(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function NU(n,e,t,r){return function Y6(n,e,t,r,i){Z(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=er(e,t);if(eP(n.visibleWrites,a))return null;{const l=Gc(n.visibleWrites,a);return tP(l)?i.getChild(t):Om(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function FT(n,e){return function Q6(n,e){return nf(n.visibleWrites,e)}(n.writeTree,er(n.treePath,e))}function rP(n,e,t){return function Z6(n,e,t,r){const i=er(e,t),a=nf(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Om(Gc(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function PU(n,e){return kU(er(n.treePath,e),n.writeTree)}function kU(n,e){return{treePath:n,writeTree:e}}class tW{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;Z("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Z(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,UE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function VE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function Nm(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw De("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,UE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const OU=new class nW{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class iP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Hc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:tf(this.viewCache_),a=function eW(n,e,t,r,i,a){return function X6(n,e,t,r,i,a,l){let h;const p=Gc(n.visibleWrites,e),_=nf(p,ln());if(null!=_)h=_;else{if(null==t)return[];h=Om(p,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const b=[],A=l.getCompare(),L=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let $=L.getNext();for(;$&&b.length<i;)0!==A($,r)&&b.push($),$=L.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function FU(n,e,t,r,i,a){const l=e.eventCache;if(null!=FT(r,t))return e;{let h,p;if(Lt(t))if(Z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=tf(e),A=nP(r,_ instanceof St?_:St.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),A,a)}else{const _=OT(r,tf(e));h=n.filter.updateFullNode(e.eventCache.getNode(),_,a)}else{const _=Ft(t);if(".priority"===_){Z(1===jc(t),"Can't have a priority with additional path components");const b=l.getNode();p=e.serverCache.getNode();const A=NU(r,t,b,p);h=null!=A?n.filter.updatePriority(b,A):l.getNode()}else{const b=bn(t);let A;if(l.isCompleteForChild(_)){p=e.serverCache.getNode();const L=NU(r,t,l.getNode(),p);A=null!=L?l.getNode().getImmediateChild(_).updateChild(b,L):l.getNode().getImmediateChild(_)}else A=rP(r,_,e.serverCache);h=null!=A?n.filter.updateChild(l.getNode(),_,A,b,i,a):l.getNode()}}return HE(e,h,l.isFullyInitialized()||Lt(t),n.filter.filtersNodes())}}function LT(n,e,t,r,i,a,l,h){const p=e.serverCache;let _;const b=l?n.filter:n.filter.getIndexedFilter();if(Lt(t))_=b.updateFullNode(p.getNode(),r,null);else if(b.filtersNodes()&&!p.isFiltered()){const $=p.getNode().updateChild(t,r);_=b.updateFullNode(p.getNode(),$,null)}else{const $=Ft(t);if(!p.isCompleteForPath(t)&&jc(t)>1)return e;const W=bn(t),fe=p.getNode().getImmediateChild($).updateChild(W,r);_=".priority"===$?b.updatePriority(p.getNode(),fe):b.updateChild(p.getNode(),$,fe,W,OU,null)}const A=DU(e,_,p.isFullyInitialized()||Lt(t),b.filtersNodes());return FU(n,A,t,i,new iP(i,A,a),h)}function sP(n,e,t,r,i,a,l){const h=e.eventCache;let p,_;const b=new iP(i,e,a);if(Lt(t))_=n.filter.updateFullNode(e.eventCache.getNode(),r,l),p=HE(e,_,!0,n.filter.filtersNodes());else{const A=Ft(t);if(".priority"===A)_=n.filter.updatePriority(e.eventCache.getNode(),r),p=HE(e,_,h.isFullyInitialized(),h.isFiltered());else{const L=bn(t),$=h.getNode().getImmediateChild(A);let W;if(Lt(L))W=r;else{const re=b.getCompleteChild(A);W=null!=re?".priority"===ON(L)&&re.getChild(hU(L)).isEmpty()?re:re.updateChild(L,r):St.EMPTY_NODE}p=$.equals(W)?e:HE(e,n.filter.updateChild(h.getNode(),A,W,L,b,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function LU(n,e){return n.eventCache.isCompleteForChild(e)}function VU(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function oP(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let _,p=e;_=Lt(t)?r:new Rn(null).setTree(t,r);const b=e.serverCache.getNode();return _.children.inorderTraversal((A,L)=>{if(b.hasChild(A)){const W=VU(0,e.serverCache.getNode().getImmediateChild(A),L);p=LT(n,p,new gn(A),W,i,a,l,h)}}),_.children.inorderTraversal((A,L)=>{const $=!e.serverCache.isCompleteForChild(A)&&null===L.value;if(!b.hasChild(A)&&!$){const re=VU(0,e.serverCache.getNode().getImmediateChild(A),L);p=LT(n,p,new gn(A),re,i,a,l,h)}}),p}function pW(n,e){const t=tf(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Lt(e)&&!t.getImmediateChild(Ft(e)).isEmpty())?t.getChild(e):null}function $U(n,e,t,r){e.type===Ro.MERGE&&null!==e.source.queryId&&(Z(tf(n.viewCache_),"We should always have a full cache before handling merges"),Z(PT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function sW(n,e,t,r,i){const a=new tW;let l,h;if(t.type===Ro.OVERWRITE){const _=t;_.source.fromUser?l=sP(n,e,_.path,_.snap,r,i,a):(Z(_.source.fromServer,"Unknown source."),h=_.source.tagged||e.serverCache.isFiltered()&&!Lt(_.path),l=LT(n,e,_.path,_.snap,r,i,h,a))}else if(t.type===Ro.MERGE){const _=t;_.source.fromUser?l=function aW(n,e,t,r,i,a,l){let h=e;return r.foreach((p,_)=>{const b=er(t,p);LU(e,Ft(b))&&(h=sP(n,h,b,_,i,a,l))}),r.foreach((p,_)=>{const b=er(t,p);LU(e,Ft(b))||(h=sP(n,h,b,_,i,a,l))}),h}(n,e,_.path,_.children,r,i,a):(Z(_.source.fromServer,"Unknown source."),h=_.source.tagged||e.serverCache.isFiltered(),l=oP(n,e,_.path,_.children,r,i,h,a))}else if(t.type===Ro.ACK_USER_WRITE){const _=t;l=_.revert?function cW(n,e,t,r,i,a){let l;if(null!=FT(r,t))return e;{const h=new iP(r,e,i),p=e.eventCache.getNode();let _;if(Lt(t)||".priority"===Ft(t)){let b;if(e.serverCache.isFullyInitialized())b=OT(r,tf(e));else{const A=e.serverCache.getNode();Z(A instanceof St,"serverChildren would be complete if leaf node"),b=nP(r,A)}_=n.filter.updateFullNode(p,b,a)}else{const b=Ft(t);let A=rP(r,b,e.serverCache);null==A&&e.serverCache.isCompleteForChild(b)&&(A=p.getImmediateChild(b)),_=null!=A?n.filter.updateChild(p,b,A,bn(t),h,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(p,b,St.EMPTY_NODE,bn(t),h,a):p,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=OT(r,tf(e)),l.isLeafNode()&&(_=n.filter.updateFullNode(_,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=FT(r,ln()),HE(e,_,l,n.filter.filtersNodes())}}(n,e,_.path,r,i,a):function uW(n,e,t,r,i,a,l){if(null!=FT(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(Lt(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return LT(n,e,t,p.getNode().getChild(t),i,a,h,l);if(Lt(t)){let _=new Rn(null);return p.getNode().forEachChild(cu,(b,A)=>{_=_.set(new gn(b),A)}),oP(n,e,t,_,i,a,h,l)}return e}{let _=new Rn(null);return r.foreach((b,A)=>{const L=er(t,b);p.isCompleteForPath(L)&&(_=_.set(b,p.getNode().getChild(L)))}),oP(n,e,t,_,i,a,h,l)}}(n,e,_.path,_.affectedTree,r,i,a)}else{if(t.type!==Ro.LISTEN_COMPLETE)throw De("Unknown operation type: "+t.type);l=function lW(n,e,t,r,i){const a=e.serverCache;return FU(n,DU(e,a.getNode(),a.isFullyInitialized()||Lt(t),a.isFiltered()),t,r,OU,i)}(n,e,t.path,r,a)}const p=a.getChanges();return function oW(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=PT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function IU(n){return{type:"value",snapshotNode:n}}(PT(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,i,e,t,r);return function iW(n,e){Z(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Z(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),Z(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function jU(n,e,t,r){return function L6(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function C6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),jE(n,i,"child_removed",e,r,t),jE(n,i,"child_added",e,r,t),jE(n,i,"child_moved",a,r,t),jE(n,i,"child_changed",e,r,t),jE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let VT,BT;function aP(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return Z(null!=a,"SyncTree gave us an op for an invalid query."),$U(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat($U(l,e,t,r));return a}}function zc(n,e){let t=null;for(const r of n.views.values())t=t||pW(r,e);return t}class KU{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Rn(null),this.pendingWriteTree_=function J6(){return{visibleWrites:ca.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function uP(n,e,t,r,i){return function $6(n,e,t,r,i){Z(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=GE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Fm(n,new ef({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function qc(n,e,t=!1){const r=function H6(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function G6(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);Z(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&z6(h,r.path)?i=!1:Mo(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function W6(n){n.visibleWrites=MU(n.allWrites,q6,ln()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=SU(n.visibleWrites,r.path):hi(r.children,p=>{n.visibleWrites=SU(n.visibleWrites,er(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let a=new Rn(null);return null!=r.snap?a=a.set(ln(),!0):hi(r.children,l=>{a=a.set(new gn(l),!0)}),Fm(n,new RT(r.path,a,t))}return[]}function zE(n,e,t){return Fm(n,new ef({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function jT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const _=zc(h,cs(l,e));if(_)return _});return RU(i,e,a,t,!0)}function Fm(n,e){return ZU(e,n.syncPointTree_,null,kT(n.pendingWriteTree_,ln()))}function ZU(n,e,t,r){if(Lt(n.path))return QU(n,e,t,r);{const i=e.get(ln());null==t&&null!=i&&(t=zc(i,ln()));let a=[];const l=Ft(n.path),h=n.operationForChild(l),p=e.children.get(l);if(p&&h){const _=t?t.getImmediateChild(l):null,b=PU(r,l);a=a.concat(ZU(h,p,_,b))}return i&&(a=a.concat(aP(i,n,r,t))),a}}function QU(n,e,t,r){const i=e.get(ln());null==t&&null!=i&&(t=zc(i,ln()));let a=[];return e.children.inorderTraversal((l,h)=>{const p=t?t.getImmediateChild(l):null,_=PU(r,l),b=n.operationForChild(l);b&&(a=a.concat(QU(b,h,p,_)))}),i&&(a=a.concat(aP(i,n,r,t))),a}function cP(n,e){return n.tagToQueryMap.get(e)}function dP(n){const e=n.indexOf("$");return Z(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new gn(n.substr(0,e))}}function hP(n,e,t){const r=n.syncPointTree_.get(e);return Z(r,"Missing sync point for query tag that we're tracking"),aP(r,t,kT(n.pendingWriteTree_,e),null)}class fP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new fP(t)}node(){return this.node_}}class pP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=er(this.path_,e);return new pP(this.syncTree_,t)}node(){return jT(this.syncTree_,this.path_)}}const OW=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},JU=function(n,e,t){return n&&"object"==typeof n?(Z(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?FW(n[".sv"],e,t):"object"==typeof n[".sv"]?LW(n[".sv"],e):void Z(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},FW=function(n,e,t){if("timestamp"===n)return t.timestamp;Z(!1,"Unexpected server value: "+n)},LW=function(n,e,t){n.hasOwnProperty("increment")||Z(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&Z(!1,"Unexpected increment value: "+r);const i=e.node();if(Z(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},eB=function(n,e,t,r){return mP(e,new pP(t,n),r)},gP=function(n,e,t){return mP(n,new fP(e),t)};function mP(n,e,t){const r=n.getPriority().val(),i=JU(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=JU(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new Mm(h,or(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Mm(i))),l.forEachChild(Mn,(h,p)=>{const _=mP(p,e.getImmediateChild(h),t);_!==p&&(a=a.updateImmediateChild(h,_))}),a}}class _P{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function GT(n,e){let t=e instanceof gn?e:new gn(e),r=n,i=Ft(t);for(;null!==i;){const a=Ci(r.node.children,i)||{children:{},childCount:0};r=new _P(i,r,a),t=bn(t),i=Ft(t)}return r}function rf(n){return n.node.value}function yP(n,e){n.node.value=e,vP(n)}function tB(n){return n.node.childCount>0}function zT(n,e){hi(n.node.children,(t,r)=>{e(new _P(t,n,r))})}function nB(n,e,t,r){t&&!r&&e(n),zT(n,i=>{nB(i,e,!0,r)}),t&&r&&e(n)}function KE(n){return new gn(null===n.parent?n.name:KE(n.parent)+"/"+n.name)}function vP(n){null!==n.parent&&function BW(n,e,t){const r=function VW(n){return void 0===rf(n)&&!tB(n)}(t),i=Wn(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,vP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,vP(n))}(n.parent,n.name,n)}const $W=/[\[\].#$\/\u0000-\u001F\u007F]/,jW=/[\[\].#$\u0000-\u001F\u007F]/,wP=10485760,WT=function(n){return"string"==typeof n&&0!==n.length&&!$W.test(n)},ZE=function(n,e,t){const r=t instanceof gn?new s6(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Xh(r));if("function"==typeof e)throw new Error(n+"contains a function "+Xh(r)+" with contents = "+e.toString());if(wT(e))throw new Error(n+"contains "+e.toString()+" "+Xh(r));if("string"==typeof e&&e.length>wP/3&&mr(e)>wP)throw new Error(n+"contains a string greater than "+wP+" utf8 bytes "+Xh(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(hi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!WT(l)))throw new Error(n+" contains an invalid key ("+l+") "+Xh(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function o6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=mr(e),fU(n)})(r,l),ZE(n,h,r),function a6(n){const e=n.parts_.pop();n.byteLength_-=mr(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Xh(r)+" in addition to actual children.")}},sB=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!WT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!jW.test(n)}(n)}(t))throw new Error(function lo(n,e){return`${n} failed: ${e} argument `}(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class WW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function so(n,e,t){(function qT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!FN(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function aB(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(qW(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Mo(r,e)||Mo(e,r))}function qW(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Zh&&di("event: "+t.toString()),Am(r)}}}const uB="repo_interrupt",KW=25;class YW{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new WW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=MT(),this.transactionQueueTree_=new _P,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function lB(n){const t=n.infoData_.getNode(new gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function XE(n){return OW({timestamp:lB(n)})}function cB(n,e,t,r,i){n.dataUpdateCount++;const a=new gn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const p=uo(t,_=>or(_));l=function xW(n,e,t,r){const i=cP(n,r);if(i){const a=dP(i),l=a.path,h=a.queryId,p=cs(l,e),_=Rn.fromObject(t);return hP(n,l,new km(QN(h),p,_))}return[]}(n.serverSyncTree_,a,p,i)}else{const p=or(t);l=function YU(n,e,t,r){const i=cP(n,r);if(null!=i){const a=dP(i),l=a.path,h=a.queryId,p=cs(l,e);return hP(n,l,new ef(QN(h),p,t))}return[]}(n.serverSyncTree_,a,p,i)}else if(r){const p=uo(t,_=>or(_));l=function DW(n,e,t){const r=Rn.fromObject(t);return Fm(n,new km({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,p)}else{const p=or(t);l=zE(n.serverSyncTree_,a,p)}let h=a;l.length>0&&(h=Vm(n,a)),so(n.eventQueue_,h,l)}function dB(n,e){CP(n,"connected",e),!1===e&&function eq(n){Lm(n,"onDisconnectEvents");const e=XE(n),t=MT();KN(n.onDisconnect_,ln(),(i,a)=>{const l=eB(i,a,n.serverSyncTree_,e);Pm(t,i,l)});let r=[];KN(t,ln(),(i,a)=>{r=r.concat(zE(n.serverSyncTree_,i,a));const l=function SP(n,e){const t=KE(pB(n,e)),r=GT(n.transactionQueueTree_,e);return function UW(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{AP(n,i)}),AP(n,r),nB(r,i=>{AP(n,i)}),t}(n,i);Vm(n,l)}),n.onDisconnect_=MT(),so(n.eventQueue_,ln(),r)}(n)}function CP(n,e,t){const r=new gn("/.info/"+e),i=or(t);n.infoData_.updateSnapshot(r,i);const a=zE(n.infoSyncTree_,r,i);so(n.eventQueue_,r,a)}function KT(n){return n.nextWriteId_++}function Lm(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),di(t,...e)}function DP(n,e,t){return jT(n.serverSyncTree_,e,t)||St.EMPTY_NODE}function YT(n,e=n.transactionQueueTree_){if(e||ZT(n,e),rf(e)){const t=gB(n,e);Z(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function aq(n,e,t){const r=t.map(_=>_.currentWriteId),i=DP(n,e,r);let a=i;const l=i.hash();for(let _=0;_<t.length;_++){const b=t[_];Z(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const A=cs(e,b.path);a=a.updateChild(A,b.currentOutputSnapshotRaw)}const h=a.val(!0),p=e;n.server_.put(p.toString(),h,_=>{Lm(n,"transaction put response",{path:p.toString(),status:_});let b=[];if("ok"===_){const A=[];for(let L=0;L<t.length;L++)t[L].status=2,b=b.concat(qc(n.serverSyncTree_,t[L].currentWriteId)),t[L].onComplete&&A.push(()=>t[L].onComplete(null,!0,t[L].currentOutputSnapshotResolved)),t[L].unwatcher();ZT(n,GT(n.transactionQueueTree_,e)),YT(n,n.transactionQueueTree_),so(n.eventQueue_,e,b);for(let L=0;L<A.length;L++)Am(A[L])}else{if("datastale"===_)for(let A=0;A<t.length;A++)t[A].status=3===t[A].status?4:0;else{Gi("transaction at "+p.toString()+" failed: "+_);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=_}Vm(n,e)}},l)}(n,KE(e),t)}else tB(e)&&zT(e,t=>{YT(n,t)})}function Vm(n,e){const t=pB(n,e),r=KE(t);return function uq(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],_=cs(t,p.path);let A,b=!1;if(Z(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)b=!0,A=p.abortReason,i=i.concat(qc(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=KW)b=!0,A="maxretry",i=i.concat(qc(n.serverSyncTree_,p.currentWriteId,!0));else{const L=DP(n,p.path,l);p.currentInputSnapshot=L;const $=e[h].update(L.val());if(void 0!==$){ZE("transaction failed: Data returned ",$,p.path);let W=or($);"object"==typeof $&&null!=$&&Wn($,".priority")||(W=W.updatePriority(L.getPriority()));const fe=p.currentWriteId,He=XE(n),ut=gP(W,L,He);p.currentOutputSnapshotRaw=W,p.currentOutputSnapshotResolved=ut,p.currentWriteId=KT(n),l.splice(l.indexOf(fe),1),i=i.concat(uP(n.serverSyncTree_,p.path,ut,p.currentWriteId,p.applyLocally)),i=i.concat(qc(n.serverSyncTree_,fe,!0))}else b=!0,A="nodata",i=i.concat(qc(n.serverSyncTree_,p.currentWriteId,!0))}so(n.eventQueue_,t,i),i=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===A?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(A),!1,null)))}ZT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Am(r[h]);YT(n,n.transactionQueueTree_)}(n,gB(n,t),r),r}function pB(n,e){let t,r=n.transactionQueueTree_;for(t=Ft(e);null!==t&&void 0===rf(r);)r=GT(r,t),t=Ft(e=bn(e));return r}function gB(n,e){const t=[];return mB(n,e,t),t.sort((r,i)=>r.order-i.order),t}function mB(n,e,t){const r=rf(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);zT(e,i=>{mB(n,i,t)})}function ZT(n,e){const t=rf(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,yP(e,t.length>0?t:void 0)}zT(e,r=>{ZT(n,r)})}function AP(n,e){const t=rf(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?(Z(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):(Z(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(qc(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?yP(e,void 0):t.length=a+1,so(n.eventQueue_,KE(e),i);for(let l=0;l<r.length;l++)Am(r[l])}}const xP=function(n,e){const t=dq(n),r=t.namespace;return"firebase.com"===t.domain&&lu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&lu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Gi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new xN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new gn(t.pathString)}},dq=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(h=n.substring(0,_-1),n=n.substring(_+2));let b=n.indexOf("/");-1===b&&(b=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),e=n.substring(0,Math.min(b,A)),b<A&&(i=function lq(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,A)));const L=function cq(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Gi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,A)));_=e.indexOf(":"),_>=0?(l="https"===h||"wss"===h,p=parseInt(e.substring(_+1),10)):_=e.length;const $=e.slice(0,_);if("localhost"===$.toLowerCase())t="localhost";else if($.split(".").length<=2)t=$;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),t=e.substring(W+1),a=r}"ns"in L&&(a=L.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class oo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Lt(this._path)?null:ON(this._path)}get ref(){return new da(this._repo,this._path)}get _queryIdentifier(){const e=bU(this._queryParams),t=SN(e);return"{}"===t?"default":t}get _queryObject(){return bU(this._queryParams)}isEqual(e){if(!((e=nn(e))instanceof oo))return!1;const t=this._repo===e._repo,r=FN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function r6(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class da extends oo{constructor(e,t){super(e,t,new GN,!1)}get parent(){const e=hU(this._path);return null===e?null:new da(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function _W(n){Z(!VT,"__referenceConstructor has already been defined"),VT=n})(da),function IW(n){Z(!BT,"__referenceConstructor has already been defined"),BT=n}(da);const Tq="FIREBASE_DATABASE_EMULATOR_HOST",RP={};let CB=!1;class Rq{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function ZW(n,e,t){if(n.stats_=NN(n.repoInfo_),n.forceRestClient_||M3())n.server_=new xT(n.repoInfo_,(r,i,a,l)=>{cB(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>dB(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{cn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Jh(n.repoInfo_,e,(r,i,a,l)=>{cB(n,r,i,a,l)},r=>{dB(n,r)},r=>{!function QW(n,e){hi(e,(t,r)=>{CP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function O3(n,e){const t=n.toString();return RN[t]||(RN[t]=e()),RN[t]}(n.repoInfo_,()=>new O6(n.stats_,n.server_)),n.infoData_=new M6,n.infoSyncTree_=new KU({startListening:(r,i,a,l)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=zE(n.infoSyncTree_,r._path,p),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),CP(n,"connected",!1),n.serverSyncTree_=new KU({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,p)=>{const _=l(h,p);so(n.eventQueue_,r._path,_)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new da(this._repo,ln())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Aq(n,e){const t=RP[e];(!t||t[n.key]!==n)&&lu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function fB(n){n.persistentConnection_&&n.persistentConnection_.interrupt(uB)}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&lu("Cannot call "+e+" on a deleted database.")}}function Nq(n=js(),e){const t=jr(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=Je("database");r&&function Pq(n,e,t,r={}){(n=nn(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&lu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&lu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new PE(PE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:Xe(r.mockUserToken,n.app.options.projectId);a=new PE(l)}!function Dq(n,e,t,r){n.repoInfo_=new xN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(t,...r)}return t}Jh.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Jh.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function kq(n){(function y3(n){bN=n})(ws),lr(new rn("database",(e,{instanceIdentifier:t})=>function Sq(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||lu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),di("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,l=xP(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(_=process.env[Tq]),_?(p=!0,a=`http://${_}?ns=${h.namespace}`,l=xP(a,i),h=l.repoInfo):p=!l.repoInfo.secure;const b=i&&p?new PE(PE.OWNER):new N3(n.name,n.options,e);sB("Invalid Firebase Database URL",l),Lt(l.path)||lu("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function xq(n,e,t,r){let i=RP[e.name];i||(i={},RP[e.name]=i);let a=i[n.toURLString()];return a&&lu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new YW(n,CB,t,r),i[n.toURLString()]=a,a}(h,n,b,new R3(n.name,t));return new Rq(A,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),kt(AV,"0.14.4",n),kt(AV,"0.14.4","esm2017")}();class NP{constructor(e){return e}}const TB="database",PP=new w.OlP("angularfire2.database-instances");function Uq(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new NP(r)}}const Bq={provide:class Lq{constructor(){return Ka(TB)}},deps:[[new w.FiY,PP]]},$q={provide:NP,useFactory:function Vq(n,e){const t=zu(TB,n,e);return t&&new NP(t)},deps:[[new w.FiY,PP],Zs]};let jq=(()=>{class n{constructor(){kt("angularfire",ki.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({providers:[$q,Bq]}),n})();function Hq(n,...e){return{ngModule:jq,providers:[{provide:PP,useFactory:Uq(n),multi:!0,deps:[w.R0b,w.zs3,Wu,Ya,[new w.FiY,mc],[new w.FiY,Xl],...e]}]}}const Gq=Oi(Nq,!0),OP="functions";class Yq{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return(0,O.Z)(function*(){if(e.auth)try{return(yield e.auth.getToken())?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return(0,O.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(){var e=this;return(0,O.Z)(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return(0,O.Z)(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const FP="us-central1";class Qq{constructor(e,t,r,i,a=FP,l){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new Yq(t,r,i),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(a);this.customDomain=h.origin,this.region=FP}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const xB="@firebase/functions";function a5(n=js(),e=FP){const r=jr(nn(n),OP).getImmediate({identifier:e}),i=Je("functions");return i&&function u5(n,e,t){!function Xq(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}(nn(n),e,t)}(r,...i),r}!function o5(n,e){lr(new rn(OP,(r,{instanceIdentifier:i})=>{const a=r.getProvider("app").getImmediate(),l=r.getProvider("auth-internal"),h=r.getProvider("messaging-internal"),p=r.getProvider("app-check-internal");return new Qq(a,l,h,p,i,n)},"PUBLIC").setMultipleInstances(!0)),kt(xB,"0.9.4",e),kt(xB,"0.9.4","esm2017")}(fetch.bind(self));class UP{constructor(e){return e}}const RB="functions",BP=new w.OlP("angularfire2.functions-instances");function d5(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new UP(r)}}const h5={provide:class l5{constructor(){return Ka(RB)}},deps:[[new w.FiY,BP]]},f5={provide:UP,useFactory:function c5(n,e){const t=zu(RB,n,e);return t&&new UP(t)},deps:[[new w.FiY,BP],Zs]};let p5=(()=>{class n{constructor(){kt("angularfire",ki.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({providers:[f5,h5]}),n})();function g5(n,...e){return{ngModule:p5,providers:[{provide:BP,useFactory:d5(n),multi:!0,deps:[w.R0b,w.zs3,Wu,Ya,[new w.FiY,mc],[new w.FiY,Xl],...e]}]}}const m5=Oi(a5,!0);class $P{constructor(e){return e}}const NB="messaging",jP=new w.OlP("angularfire2.messaging-instances");function v5(n){return(e,t)=>{if(!lp.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new $P(r)}}const w5={provide:class _5{constructor(){return Ka(NB)}},deps:[[new w.FiY,jP]]},E5={provide:$P,useFactory:function y5(n,e){if(!lp.sync())return null;const t=zu(NB,n,e);return t&&new $P(t)},deps:[[new w.FiY,jP],Zs]};let I5=(()=>{class n{constructor(){kt("angularfire",ki.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({providers:[E5,w5,{provide:w.ip1,useValue:lp.async,multi:!0}]}),n})();function C5(n,...e){return{ngModule:I5,providers:[{provide:jP,useFactory:v5(n),multi:!0,deps:[w.R0b,w.zs3,Wu,Ya,...e]}]}}const b5=Oi(Kf,!0),PB="firebasestorage.googleapis.com",kB="storageBucket";class ar extends st{constructor(e,t,r=0){super(HP(e),`Firebase Storage: ${t} (${HP(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ar.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return HP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Nn=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Nn||(Nn={})),Nn))();function HP(n){return"storage/"+n}function zP(n){return new ar(Nn.INVALID_ARGUMENT,n)}function VB(){return new ar(Nn.APP_DELETED,"The Firebase app was deleted.")}class ds{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ds.makeFromUrl(e,t)}catch{return new ds(e,"")}if(""===r.path)return r;throw function k5(n){return new ar(Nn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(jt){jt.path_=decodeURIComponent(jt.path)}const A=t.replace(/[.]/g,"\\."),qe=[{regex:h,indices:{bucket:1,path:3},postModify:function a(jt){"/"===jt.path.charAt(jt.path.length-1)&&(jt.path_=jt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===PB?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let jt=0;jt<qe.length;jt++){const hn=qe[jt],Zt=hn.regex.exec(e);if(Zt){let Wi=Zt[hn.indices.path];Wi||(Wi=""),r=new ds(Zt[hn.indices.bucket],Wi),hn.postModify(r);break}}if(null==r)throw function P5(n){return new ar(Nn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class B5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function qP(n,e,t,r){if(r<e)throw zP(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw zP(`Invalid value for '${n}'. Expected ${t} or less.`)}var Zc=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Zc||(Zc={})),Zc))();class W5{constructor(e,t,r,i,a,l,h,p,_,b,A,L=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=b,this.connectionFactory_=A,this.retry=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(($,W)=>{this.resolve_=$,this.reject_=W,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function H5(n){return void 0!==n}(p)?a():a(p)}catch(p){l(p)}else if(null!==h){const p=function GP(){return new ar(Nn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();p.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,p):p)}else l(i.canceled?this.appDelete_?VB():function FB(){return new ar(Nn.CANCELED,"User canceled the upload/download.")}():function OB(){return new ar(Nn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new nD(!1,null,!0)):this.backoffId_=function $5(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function p(){return 2===h}let _=!1;function b(...fe){_||(_=!0,e.apply(null,fe))}function A(fe){i=setTimeout(()=>{i=null,n($,p())},fe)}function L(){a&&clearTimeout(a)}function $(fe,...He){if(_)return void L();if(fe)return L(),void b.call(null,fe,...He);if(p()||l)return L(),void b.call(null,fe,...He);let qe;r<64&&(r*=2),1===h?(h=2,qe=0):qe=1e3*(r+Math.random()),A(qe)}let W=!1;function re(fe){W||(W=!0,L(),!_&&(null!==i?(fe||(h=2),clearTimeout(i),A(0)):fe||(h=1)))}return A(0),a=setTimeout(()=>{l=!0,re(!0)},t),re}((r,i)=>{if(i)return void r(!1,new nD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===Zc.NO_ERROR,p=a.getStatus();if(!h||function $B(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}(p,this.additionalRetryCodes_)&&this.retry){const b=a.getErrorCode()===Zc.ABORT;return void r(!1,new nD(!1,null,b))}const _=-1!==this.successCodes_.indexOf(p);r(!0,new nD(_,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function j5(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class nD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class af{constructor(e,t){this._service=e,this._location=t instanceof ds?t:ds.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new af(e,t)}get root(){const e=new ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function WB(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function o7(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ds(this._location.bucket,e);return new af(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function U5(n){return new ar(Nn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function a$(n,e){const t=e?.[kB];return null==t?null:ds.makeFromBucketSpec(t,n)}class e1{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=PB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ds.makeFromBucketSpec(i,this._host):a$(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ds.makeFromBucketSpec(this._url,e):a$(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,O.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,O.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new af(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new B5(VB());{const l=function Q5(n,e,t,r,i,a,l=!0){const h=function BB(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),p=n.url+h,_=Object.assign({},n.headers);return function Y5(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function q5(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function K5(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(_,a),function Z5(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new W5(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,O.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const u$="@firebase/storage",c$="storage";function z7(n=js(),e){const r=jr(n=nn(n),c$).getImmediate({identifier:e}),i=Je("storage");return i&&function W7(n,e,t,r={}){!function G7(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:Xe(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function q7(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new e1(t,r,i,e,ws)}!function K7(){lr(new rn(c$,q7,"PUBLIC").setMultipleInstances(!0)),kt(u$,"0.11.2",""),kt(u$,"0.11.2","esm2017")}();class t1{constructor(e){return e}}const d$="storage",n1=new w.OlP("angularfire2.storage-instances");function Q7(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new t1(r)}}const X7={provide:class Y7{constructor(){return Ka(d$)}},deps:[[new w.FiY,n1]]},J7={provide:t1,useFactory:function Z7(n,e){const t=zu(d$,n,e);return t&&new t1(t)},deps:[[new w.FiY,n1],Zs]};let e9=(()=>{class n{constructor(){kt("angularfire",ki.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({providers:[J7,X7]}),n})();function t9(n,...e){return{ngModule:e9,providers:[{provide:n1,useFactory:Q7(n),multi:!0,deps:[w.R0b,w.zs3,Wu,Ya,[new w.FiY,mc],[new w.FiY,Xl],...e]}]}}const n9=Oi(z7,!0);let h$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=w.Xpm({type:n,selectors:[["app-home"]],decls:11,vars:0,consts:[[1,"body"],[1,"background-one"],[1,"link-container"],["routerLink","/",1,"link-one"],[1,"background-two","link-container"],["routerLink","/juegos",1,"link-two"],[1,"background-three","link-container"],["routerLink","/",1,"link-three"]],template:function(t,r){1&t&&(w.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),w._uU(4,"Algo"),w.qZA()()(),w.TgZ(5,"div",4)(6,"a",5),w._uU(7,"Juegos"),w.qZA()(),w.TgZ(8,"div",6)(9,"a",7),w._uU(10,"Otra cosa"),w.qZA()()())},dependencies:[X.rH],styles:['.body[_ngcontent-%COMP%]{margin:0;height:100vh;display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:1fr}.background-one[_ngcontent-%COMP%], .background-two[_ngcontent-%COMP%], .background-three[_ngcontent-%COMP%]{background-color:#151515}.link-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;position:relative;z-index:0}a[_ngcontent-%COMP%]{font-family:Bungee,cursive;font-size:2.5em}.link-one[_ngcontent-%COMP%]{color:#53d9d1;transition:color 1s cubic-bezier(.32,0,.67,0);line-height:1em}.link-one[_ngcontent-%COMP%]:hover{color:#111;transition:color 1s cubic-bezier(.33,1,.68,1)}.link-one[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:-1;width:100%;height:100%;top:0;right:0;background-color:#53d9d1;clip-path:circle(0% at 50% 50%);transition:clip-path 1s cubic-bezier(.65,0,.35,1)}.link-one[_ngcontent-%COMP%]:hover:before{clip-path:circle(100% at 50% 50%)}.link-one[_ngcontent-%COMP%]:after{content:"";position:absolute;z-index:-1;width:100%;height:100%;top:0;right:0;background-color:#151515;clip-path:polygon(40% 0%,60% 0%,60% 0%,40% 0%,40% 100%,60% 100%,60% 100%,40% 100%);transition:clip-path 1s cubic-bezier(.65,0,.35,1)}.link-one[_ngcontent-%COMP%]:hover:after{clip-path:polygon(40% 10%,60% 10%,60% 35%,40% 35%,40% 90%,60% 90%,60% 65%,40% 65%)}.link-two[_ngcontent-%COMP%]{color:#f27b9b;transition:color 1s cubic-bezier(.32,0,.67,0)}.link-two[_ngcontent-%COMP%]:hover{color:#111;transition:color 1s cubic-bezier(.33,1,.68,1)}.link-two[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:-2;width:100%;height:100%;top:0;right:0;clip-path:polygon(0% -20%,100% -30%,100% -10%,0% 0%,0% 130%,100% 120%,100% 100%,0% 110%);background-color:#f27b9b;transition:clip-path 1s cubic-bezier(.25,1,.5,1)}.link-two[_ngcontent-%COMP%]:hover:before{clip-path:polygon(0% 10%,100% 0%,100% 20%,0% 30%,0% 100%,100% 90%,100% 70%,0% 80%)}.link-two[_ngcontent-%COMP%]:after{content:"";position:absolute;z-index:-1;width:5ch;height:5ch;top:50%;right:50%;transform:translate(50%,-50%) rotate(0) scale(0);transition:transform 1s ease;background-color:#f27b9b}.link-two[_ngcontent-%COMP%]:hover:after{transform:translate(50%,-50%) rotate(135deg) scale(1)}.link-three[_ngcontent-%COMP%]{color:#eb7132}.link-three[_ngcontent-%COMP%]:after{content:"";position:absolute;z-index:2;width:50%;height:100%;top:0%;left:0%;transform:translateY(-50%) scaleY(0);transition:transform 1s ease;mix-blend-mode:difference;clip-path:polygon(20% 60%,100% 60%,100% 40%,20% 40%,20% 0%,60% 0%,60% 20%,20% 20%);background-color:#eb7132}.link-three[_ngcontent-%COMP%]:hover:after{transform:translate(0) scaleY(1)}.link-three[_ngcontent-%COMP%]:before{content:"";position:absolute;z-index:2;width:50%;height:100%;bottom:0%;right:0%;transform:translateY(50%) scaleY(0);transition:transform 1s ease;mix-blend-mode:difference;clip-path:polygon(80% 40%,0% 40%,0% 60%,80% 60%,80% 100%,40% 100%,40% 80%,80% 80%);background-color:#eb7132}.link-three[_ngcontent-%COMP%]:hover:before{transform:translate(0) scaleY(1)}']}),n})();var r9=j(996),i9=j(742),s9=j(421),o9=j(669),a9=j(403),u9=j(268),l9=j(810);let f$=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(w.Qsj),w.Y36(w.SBq))},n.\u0275dir=w.lG2({type:n}),n})(),uf=(()=>{class n extends f${}return n.\u0275fac=function(){let e;return function(r){return(e||(e=w.n5z(n)))(r||n)}}(),n.\u0275dir=w.lG2({type:n,features:[w.qOj]}),n})();const gu=new w.OlP("NgValueAccessor"),h9={provide:gu,useExisting:(0,w.Gpc)(()=>o0),multi:!0},p9=new w.OlP("CompositionEventMode");let o0=(()=>{class n extends f${constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function f9(){const n=(0,AE.q)()?(0,AE.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(p9,8))},n.\u0275dir=w.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&w.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[w._Bn([h9]),w.qOj]}),n})();const g9=!1;function Qc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function g$(n){return null!=n&&"number"==typeof n.length}const zi=new w.OlP("NgValidators"),Xc=new w.OlP("NgAsyncValidators"),m9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class mu{static min(e){return function m$(n){return e=>{if(Qc(e.value)||Qc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function _$(n){return e=>{if(Qc(e.value)||Qc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function y$(n){return Qc(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function v$(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function w$(n){return Qc(n.value)||m9.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function E$(n){return e=>Qc(e.value)||!g$(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function I$(n){return e=>g$(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function C$(n){if(!n)return oD;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Qc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return x$(e)}static composeAsync(e){return M$(e)}}function oD(n){return null}function b$(n){return null!=n}function T$(n){const e=(0,w.QGY)(n)?(0,r9.D)(n):n;if(g9&&!(0,w.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new w.vHH(-1101,t)}return e}function D$(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function S$(n,e){return e.map(t=>t(n))}function A$(n){return n.map(e=>function _9(n){return!n.validate}(e)?e:t=>e.validate(t))}function x$(n){if(!n)return null;const e=n.filter(b$);return 0==e.length?null:function(t){return D$(S$(t,e))}}function r1(n){return null!=n?x$(A$(n)):null}function M$(n){if(!n)return null;const e=n.filter(b$);return 0==e.length?null:function(t){return function c9(...n){const e=(0,o9.jO)(n),{args:t,keys:r}=(0,i9.D)(n),i=new Wa.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let p=l,_=l;for(let b=0;b<l;b++){let A=!1;(0,s9.Xf)(t[b]).subscribe((0,a9.x)(a,L=>{A||(A=!0,_--),h[b]=L},()=>p--,void 0,()=>{(!p||!A)&&(_||a.next(r?(0,l9.n)(r,h):h),a.complete())}))}});return e?i.pipe((0,u9.Z)(e)):i}(S$(t,e).map(T$)).pipe((0,yN.U)(D$))}}function i1(n){return null!=n?M$(A$(n)):null}function R$(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function N$(n){return n._rawValidators}function P$(n){return n._rawAsyncValidators}function s1(n){return n?Array.isArray(n)?n:[n]:[]}function aD(n,e){return Array.isArray(n)?n.includes(e):n===e}function k$(n,e){const t=s1(e);return s1(n).forEach(i=>{aD(t,i)||t.push(i)}),t}function O$(n,e){return s1(e).filter(t=>!aD(n,t))}class F${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=r1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=i1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class fs extends F${get formDirective(){return null}get path(){return null}}class Jc extends F${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class L${constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let o1=(()=>{class n extends L${constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(Jc,2))},n.\u0275dir=w.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&w.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[w.qOj]}),n})(),a1=(()=>{class n extends L${constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(fs,10))},n.\u0275dir=w.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&w.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[w.qOj]}),n})();function V$(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const c1=!1,a0="VALID",lD="INVALID",Hm="PENDING",u0="DISABLED";function d1(n){return(cD(n)?n.validators:n)||null}function h1(n,e){return(cD(e)?e.asyncValidators:n)||null}function cD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function U$(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new w.vHH(1e3,c1?function E9(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new w.vHH(1001,c1?function I9(n,e){return`Cannot find form control ${V$(n,e)}`}(e,t):"")}function B$(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new w.vHH(1002,c1?function C9(n,e){return`Must supply a value for form control ${V$(n,e)}`}(e,i):"")})}class dD{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===a0}get invalid(){return this.status===lD}get pending(){return this.status==Hm}get disabled(){return this.status===u0}get enabled(){return this.status!==u0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(k$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(k$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(O$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(O$(e,this._rawAsyncValidators))}hasValidator(e){return aD(this._rawValidators,e)}hasAsyncValidator(e){return aD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Hm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=u0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=a0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===a0||this.status===Hm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?u0:a0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Hm,this._hasOwnPendingAsyncValidator=!0;const t=T$(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new w.vpe,this.statusChanges=new w.vpe}_calculateStatus(){return this._allControlsDisabled()?u0:this.errors?lD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hm)?Hm:this._anyControlsHaveStatus(lD)?lD:a0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){cD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function b9(n){return Array.isArray(n)?r1(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function T9(n){return Array.isArray(n)?i1(n):n||null}(this._rawAsyncValidators)}}class l0 extends dD{constructor(e,t,r){super(d1(t),h1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){B$(this,!0,e),Object.keys(e).forEach(r=>{U$(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class $$ extends l0{}const lf=new w.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>c0}),c0="always";function hD(n,e){return[...e.path,n]}function d0(n,e,t=c0){f1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function S9(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&j$(n,e)})}(n,e),function x9(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function A9(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&j$(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function D9(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function fD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),gD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function pD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function f1(n,e){const t=N$(n);null!==e.validator?n.setValidators(R$(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=P$(n);null!==e.asyncValidator?n.setAsyncValidators(R$(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();pD(e._rawValidators,i),pD(e._rawAsyncValidators,i)}function gD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=N$(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=P$(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return pD(e._rawValidators,r),pD(e._rawAsyncValidators,r),t}function j$(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function g1(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function m1(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===o0?t=a:function N9(n){return Object.getPrototypeOf(n.constructor)===uf}(a)?r=a:i=a}),i||r||t||null}function z$(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function W$(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ed=class extends dD{constructor(e=null,t,r){super(d1(t),h1(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=W$(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){z$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){z$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){W$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},L9={provide:Jc,useExisting:(0,w.Gpc)(()=>y1)},Y$=(()=>Promise.resolve())();let y1=(()=>{class n extends Jc{constructor(t,r,i,a,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new ed,this._registered=!1,this.update=new w.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=m1(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),g1(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){d0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Y$.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,w.D6c)(r);Y$.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?hD(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(fs,9),w.Y36(zi,10),w.Y36(Xc,10),w.Y36(gu,10),w.Y36(w.sBO,8),w.Y36(lf,8))},n.\u0275dir=w.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[w._Bn([L9]),w.qOj,w.TTD]}),n})(),v1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=w.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Q$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({}),n})();const w1=new w.OlP("NgModelWithFormControlWarning"),H9={provide:fs,useExisting:(0,w.Gpc)(()=>f0)};let f0=(()=>{class n extends fs{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new w.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return d0(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){fD(t.control||null,t,!1),function P9(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function G$(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(fD(r||null,t),(n=>n instanceof ed)(i)&&(d0(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function H$(n,e){f1(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function M9(n,e){return gD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){f1(this.form,this),this._oldForm&&gD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(zi,10),w.Y36(Xc,10),w.Y36(lf,8))},n.\u0275dir=w.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&w.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([H9]),w.qOj,w.TTD]}),n})();const W9={provide:Jc,useExisting:(0,w.Gpc)(()=>mD)};let mD=(()=>{class n extends Jc{set isDisabled(t){}constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new w.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=m1(0,a)}ngOnChanges(t){this._added||this._setUpControl(),g1(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return hD(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(w.Y36(fs,13),w.Y36(zi,10),w.Y36(Xc,10),w.Y36(gu,10),w.Y36(w1,8))},n.\u0275dir=w.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[w._Bn([W9]),w.qOj,w.TTD]}),n})();const q9={provide:gu,useExisting:(0,w.Gpc)(()=>_D),multi:!0};function nj(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let _D=(()=>{class n extends uf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=nj(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function K9(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=w.n5z(n)))(r||n)}}(),n.\u0275dir=w.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&w.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[w._Bn([q9]),w.qOj]}),n})(),rj=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(nj(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(_D,9))},n.\u0275dir=w.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Y9={provide:gu,useExisting:(0,w.Gpc)(()=>C1),multi:!0};function ij(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let C1=(()=>{class n extends uf{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,l)=>{a._setSelected(i.indexOf(l.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const l=a;for(let h=0;h<l.length;h++){const _=this._getOptionValue(l[h].value);i.push(_)}}else{const l=r.options;for(let h=0;h<l.length;h++){const p=l[h];if(p.selected){const _=this._getOptionValue(p.value);i.push(_)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Z9(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=w.n5z(n)))(r||n)}}(),n.\u0275dir=w.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&w.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[w._Bn([Y9]),w.qOj]}),n})(),sj=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(ij(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ij(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(C1,9))},n.\u0275dir=w.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),gj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({imports:[Q$]}),n})();class mj extends dD{constructor(e,t,r){super(d1(t),h1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){B$(this,!1,e),e.forEach((r,i)=>{U$(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function _j(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let yj=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let a={};return _j(r)?a=r:null!==r&&(a.validators=r.validator,a.asyncValidators=r.asyncValidator),new l0(i,a)}record(t,r=null){const i=this._reduceControls(t);return new $$(i,r)}control(t,r,i){let a={};return this.useNonNullable?(_j(r)?a=r:(a.validators=r,a.asyncValidators=i),new ed(t,{...a,nonNullable:!0})):new ed(t,r,i)}array(t,r,i){const a=t.map(l=>this._createControl(l));return new mj(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof ed||t instanceof dD?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=w.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),s8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:lf,useValue:t.callSetDisabledState??c0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({imports:[gj]}),n})(),o8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:w1,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:lf,useValue:t.callSetDisabledState??c0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({imports:[gj]}),n})(),a8=(()=>{class n{constructor(t,r,i){this.fb=t,this.authService=r,this.router=i,this.message="",this.seleccion="",this.usuario="",this.clave=""}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}ngOnInit(){this.loginForm=this.fb.group({email:["",[mu.required,mu.email]],password:["",[mu.required,mu.minLength(6)]]})}onLogin(){var t=this;return(0,O.Z)(function*(){const{email:r,password:i}=t.loginForm.value;try{const a=yield t.authService.login(r,i);a&&(t.message="Bienvenido "+r,console.log("pagina 2"+JSON.stringify(a)),setTimeout(()=>{t.router.navigate(["/home"])},1e3))}catch(a){console.log("pagina error "+a),console.log("error.message "+a.message),t.message=a.message}})()}onChange(t){switch(console.log(t),this.message="",t){case"admin":this.loginForm.setValue({email:"admin@admin.com",password:"111111"}),console.log(this.loginForm.value);break;case"usuario":this.loginForm.setValue({email:"usuario@usuario.com",password:"123456"}),console.log(this.loginForm.value);break;case"fulanito":this.loginForm.setValue({email:"mail@hola.com",password:"clave123"})}}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(yj),w.Y36(CN),w.Y36(X.F0))},n.\u0275cmp=w.Xpm({type:n,selectors:[["app-login"]],decls:34,vars:5,consts:[[1,"row"],[1,"col-md-6","mx-auto","mt-5"],[1,"car"],[1,"card-body"],[1,"tetx-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","formControlName","email",1,"form-control",3,"value"],["for","password"],["type","password","formControlName","password",1,"form-control",3,"value"],["type","submit",1,"fill","btn-lg","btn-block"],[1,"form-group","mt-3"],["routerLink","/registro",1,"button"],["for","usuarios"],["value","seleccione","okText","Seleccionar","name","usuarios","cancelText","Cancelar",1,"form-control",3,"ngModel","ngModelChange","change"],["value","admin"],["value","usuario"],["value","fulanito"]],template:function(t,r){1&t&&(w.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),w._uU(5,"Login"),w.qZA(),w.TgZ(6,"form",5),w.NdJ("ngSubmit",function(){return r.onLogin()}),w.TgZ(7,"H2"),w._uU(8),w.qZA(),w.TgZ(9,"div",6)(10,"label",7),w._uU(11,"Email"),w.qZA(),w._UZ(12,"input",8),w.qZA(),w.TgZ(13,"div",6)(14,"label",9),w._uU(15,"Clave"),w.qZA(),w._UZ(16,"input",10),w.qZA(),w.TgZ(17,"button",11),w._uU(18,"Ingresar"),w.qZA()(),w.TgZ(19,"div",12)(20,"p"),w._uU(21," \xbfNo tienes una cuenta? "),w.TgZ(22,"a",13),w._uU(23,"Registro de usuario"),w.qZA()()(),w.TgZ(24,"div",12)(25,"label",14),w._uU(26,"Seleccione usuario "),w.qZA(),w.TgZ(27,"select",15),w.NdJ("ngModelChange",function(a){return r.seleccion=a})("change",function(){return r.onChange(r.seleccion)}),w.TgZ(28,"option",16),w._uU(29,"admin"),w.qZA(),w.TgZ(30,"option",17),w._uU(31,"usuario"),w.qZA(),w.TgZ(32,"option",18),w._uU(33,"Fulanito"),w.qZA()()()()()()()),2&t&&(w.xp6(6),w.Q6J("formGroup",r.loginForm),w.xp6(2),w.Oqu(r.message),w.xp6(4),w.s9C("value",r.usuario),w.xp6(4),w.s9C("value",r.clave),w.xp6(11),w.Q6J("ngModel",r.seleccion))},dependencies:[X.rH,v1,rj,sj,o0,_D,o1,a1,y1,f0,mD],styles:['@import"https://fonts.googleapis.com/css2?family=Grandstander:ital,wght@1,900&display=swap";@import"http://fonts.cdnfonts.com/css/pastel-colors";.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;outline:0;border:1px solid #04049d;cursor:pointer;position:relative;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#2acdc1;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0;left:0}h1[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:3.1em}h2[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:3.1em;color:red}.row[_ngcontent-%COMP%]{color:#f0f8ff}']}),n})();function u8(n,e){1&n&&(w.TgZ(0,"span",17),w._uU(1," El email es requerido "),w.qZA())}function l8(n,e){1&n&&(w.TgZ(0,"span",17),w._uU(1," No cumple el formato de email. "),w.qZA())}function c8(n,e){1&n&&(w.TgZ(0,"span",17),w._uU(1," La contrase\xf1a es requerida. "),w.qZA())}function d8(n,e){1&n&&(w.TgZ(0,"span",17),w._uU(1," La contrase\xf1a tiene que tener minimo 6 caracteres "),w.qZA())}function h8(n,e){1&n&&(w.TgZ(0,"span",17),w._uU(1," Repetir la contrase\xf1a es requerido. "),w.qZA())}function f8(n,e){1&n&&(w.TgZ(0,"span",17),w._uU(1," La contrase\xf1a tiene que tener minimo 6 caracteres "),w.qZA())}const p8=[{path:"home",component:h$},{path:"",component:h$},{path:"login",component:a8},{path:"registro",component:(()=>{class n{constructor(t,r,i){this.authSvc=t,this.router=r,this.fb=i,this.message=""}ngOnInit(){this.registerForm=this.fb.group({email:new ed("",[mu.required,mu.email]),password:new ed("",[mu.required,mu.minLength(6)]),passwordR:new ed("",[mu.required,mu.minLength(6)])})}onRegister(){var t=this;return(0,O.Z)(function*(){const{email:r,password:i}=t.registerForm.value;try{(yield t.authSvc.registro(r,i))&&t.router.navigate(["/home"])}catch(a){console.log(a),t.message=a.message}})()}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(CN),w.Y36(X.F0),w.Y36(yj))},n.\u0275cmp=w.Xpm({type:n,selectors:[["app-registro"]],decls:34,vars:9,consts:[[1,"row"],[1,"col-md-6","mx-auto","mt-5"],[1,"car"],[1,"card-body"],[1,"tetx-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","formControlName","email",1,"form-control"],["class","error ion-padding",4,"ngIf"],["for","password"],["type","password","formControlName","password",1,"form-control"],["for","passwordR"],["type","password","formControlName","passwordR",1,"form-control"],["type","submit",1,"fill","btn-primary","btn-lg","btn-block",3,"disabled"],[1,"form-group","mt-3"],["routerLink","/",1,"button"],[1,"error","ion-padding"]],template:function(t,r){1&t&&(w.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),w._uU(5,"Registro de Usuario"),w.qZA(),w.TgZ(6,"H2"),w._uU(7),w.qZA(),w.TgZ(8,"form",5),w.NdJ("ngSubmit",function(){return r.onRegister()}),w.TgZ(9,"div",6)(10,"label",7),w._uU(11,"Email"),w.qZA(),w._UZ(12,"input",8),w.YNc(13,u8,2,0,"span",9),w.YNc(14,l8,2,0,"span",9),w.qZA(),w.TgZ(15,"div",6)(16,"label",10),w._uU(17,"Contrase\xf1a"),w.qZA(),w._UZ(18,"input",11),w.qZA(),w.YNc(19,c8,2,0,"span",9),w.YNc(20,d8,2,0,"span",9),w.TgZ(21,"div",6)(22,"label",12),w._uU(23,"Repetir Contrase\xf1a"),w.qZA(),w._UZ(24,"input",13),w.YNc(25,h8,2,0,"span",9),w.YNc(26,f8,2,0,"span",9),w.qZA(),w.TgZ(27,"button",14),w._uU(28," Registrar "),w.qZA()(),w.TgZ(29,"div",15)(30,"p"),w._uU(31," \xbfYa tienes una cuenta? "),w.TgZ(32,"a",16),w._uU(33,"Login"),w.qZA()()()()()()()),2&t&&(w.xp6(7),w.Oqu(r.message),w.xp6(1),w.Q6J("formGroup",r.registerForm),w.xp6(5),w.Q6J("ngIf",(null==r.registerForm.get("email").errors?null:r.registerForm.get("email").errors.required)&&r.registerForm.get("email").touched),w.xp6(1),w.Q6J("ngIf",null==r.registerForm.get("email").errors?null:r.registerForm.get("email").errors.email),w.xp6(5),w.Q6J("ngIf",(null==r.registerForm.get("password").errors?null:r.registerForm.get("password").errors.required)&&r.registerForm.get("password").touched),w.xp6(1),w.Q6J("ngIf",r.registerForm.get("password").hasError("minLength")&&r.registerForm.get("password").touched),w.xp6(5),w.Q6J("ngIf",(null==r.registerForm.get("passwordR").errors?null:r.registerForm.get("passwordR").errors.required)&&r.registerForm.get("passwordR").touched),w.xp6(1),w.Q6J("ngIf",r.registerForm.get("passwordR").hasError("minLength")&&r.registerForm.get("passwordR").touched),w.xp6(1),w.Q6J("disabled",r.registerForm.invalid))},dependencies:[AE.O5,X.rH,v1,o0,o1,a1,f0,mD],styles:['.fill[_ngcontent-%COMP%]{font-size:20px;font-weight:200;letter-spacing:1px;padding:13px 50px;outline:0;border:1px solid black;cursor:pointer;position:relative;background-color:#0000;margin:20px}.fill[_ngcontent-%COMP%]:after{content:"";background-color:#ffe54c;width:100%;z-index:-1;position:absolute;height:100%;top:7px;left:7px;transition:.2s}.fill[_ngcontent-%COMP%]:hover:after{top:0;left:0}h1[_ngcontent-%COMP%]{font-family:Pastel Colors,sans-serif;font-size:3.1em}span[_ngcontent-%COMP%]{color:red}']}),n})()},{path:"quiensoy",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=w.Xpm({type:n,selectors:[["app-quiensoy"]],decls:39,vars:0,consts:[[1,"row"],["id","quiwn",1,"col-md-6","text-center"],[1,"margin"],["href","https://github.com/Vaninaquezada/salaJuegos.git","target","_blank"],[1,"fa","fa-github"],["src","./assets/imagenes/quiensoy.jpeg","alt","Bird","width","350","height","350",1,"img-responsive","img-circle","margin",2,"display","inline"],["id","que",1,"col-md-6","text-center"],["id","donde",1,"container-fluid","bg-3","text-center"],[1,"col-sm-4"],["src","./assets/imagenes/quiensoy1.jpg","alt","Image",1,"img-responsive","margin","imagenDeQuienSoy"],["src","./assets/imagenes/quiensoy2.jpg","alt","Image",1,"img-responsive","margin","imagenDeQuienSoy"],["src","./assets/imagenes/quiensoy3.png","alt","Image",1,"img-responsive","margin","imagenDeQuienSoy"],[1,"container-fluid","bg-4","text-center"],["href","https://www.blablabla.com.ar"]],template:function(t,r){1&t&&(w.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),w._uU(3,"\xbfQui\xe9n Soy?"),w.qZA(),w.TgZ(4,"a",3),w._uU(5,"en GitHub "),w._UZ(6,"i",4),w.qZA(),w.TgZ(7,"p"),w._uU(8,"Vanina Quezada"),w.qZA(),w._UZ(9,"img",5),w.TgZ(10,"h3"),w._uU(11,"Soy Un alumno de la UTN FRA, Vanina Quezada"),w.qZA()(),w.TgZ(12,"div",6)(13,"h2",2),w._uU(14,"Juego: Nombre Juego"),w.qZA(),w.TgZ(15,"p"),w._uU(16," El objetivo del juego es Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores odit itaque nulla rem, asperiores quod in mollitia minima fugit? Est provident delectus mollitia ipsa! Quis nisi aspernatur perspiciatis officiis quas. "),w.qZA()()(),w.TgZ(17,"div",7)(18,"h3",2),w._uU(19,"\xbfD\xf3nde Funciona?"),w.qZA(),w._UZ(20,"br"),w.TgZ(21,"div",0)(22,"div",8),w._UZ(23,"img",9),w.TgZ(24,"p"),w._uU(25," Con las tecnologias WEB que permiten desarrollar aplicaciones multiplataforma "),w.qZA()(),w.TgZ(26,"div",8),w._UZ(27,"img",10),w.TgZ(28,"p"),w._uU(29," Principalmente orientada a la experiencia del usuario, garantizando que su funcionamieto sea fluido y pensado en el comportamiento del usuario y en la funcionalidad. "),w.qZA()(),w.TgZ(30,"div",8),w._UZ(31,"img",11),w.TgZ(32,"p"),w._uU(33," Para los sistemas operativos lideres en el mercado del consumo masivo "),w.qZA()()()(),w.TgZ(34,"footer",12)(35,"p"),w._uU(36," Modificado por "),w.TgZ(37,"a",13),w._uU(38,"https://www.blablabla.com.ar"),w.qZA()()())},styles:[".imagenDeQuienSoy[_ngcontent-%COMP%]{width:400px;height:250px}body[_ngcontent-%COMP%]{font:20px Montserrat,sans-serif;line-height:1.8;color:#f5f6f7}p[_ngcontent-%COMP%]{font-size:16px}.margin[_ngcontent-%COMP%]{margin-bottom:45px}.bg-1[_ngcontent-%COMP%]{background-color:#1abc9c;color:#fff}.bg-2[_ngcontent-%COMP%]{background-color:#474e5d;color:#fff}.bg-3[_ngcontent-%COMP%]{background-color:#fff;color:#555}.bg-4[_ngcontent-%COMP%]{background-color:#3a0447;color:#fff;height:20%}.container-fluid[_ngcontent-%COMP%]{padding-top:70px;padding-bottom:70px}.navbar[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px;border:0;border-radius:0;margin-bottom:0;font-size:12px;letter-spacing:5px}.navbar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1abc9c!important}nav[_ngcontent-%COMP%]{display:flex;background-color:#0e3aff;color:#fff}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px}.active[_ngcontent-%COMP%]{background-color:#f3f3f3;border:solid;border-radius:25px;border-color:#328afd;color:#fff}a[_ngcontent-%COMP%]{color:#fff}.row[_ngcontent-%COMP%]{background-color:#151515;padding:30px;color:#fff}#que[_ngcontent-%COMP%]{margin-top:60px}.juego[_ngcontent-%COMP%]{height:250px}.flecha[_ngcontent-%COMP%]{height:80px;margin:15px}"]}),n})()},{path:"juegos",loadChildren:()=>j.e(817).then(j.bind(j,817)).then(n=>n.JuegosModule)}];let g8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({imports:[X.Bz.forRoot(p8),X.Bz]}),n})(),m8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n,bootstrap:[m3]}),n.\u0275inj=w.cJS({imports:[M.b2,sS(()=>oS(_3_firebase)),lx(()=>zC()),Hq(()=>Gq()),a3(()=>d3()),g5(()=>m5()),C5(()=>b5()),t9(()=>n9()),g8,s8,o8]}),n})();M.q6().bootstrapModule(m8).catch(n=>console.error(n))},751:(yt,Te,j)=>{j.d(Te,{y:()=>Ke});var M=j(961),w=j(727),X=j(822),O=j(635),ue=j(416),Z=j(576),De=j(806);let Ke=(()=>{class Ae{constructor(de){de&&(this._subscribe=de)}lift(de){const Ye=new Ae;return Ye.source=this,Ye.operator=de,Ye}subscribe(de,Ye,rt){const Nt=function le(Ae){return Ae&&Ae instanceof M.Lv||function ye(Ae){return Ae&&(0,Z.m)(Ae.next)&&(0,Z.m)(Ae.error)&&(0,Z.m)(Ae.complete)}(Ae)&&(0,w.Nn)(Ae)}(de)?de:new M.Hp(de,Ye,rt);return(0,De.x)(()=>{const{operator:Pt,source:qt}=this;Nt.add(Pt?Pt.call(Nt,qt):qt?this._subscribe(Nt):this._trySubscribe(Nt))}),Nt}_trySubscribe(de){try{return this._subscribe(de)}catch(Ye){de.error(Ye)}}forEach(de,Ye){return new(Ye=Re(Ye))((rt,Nt)=>{const Pt=new M.Hp({next:qt=>{try{de(qt)}catch(ze){Nt(ze),Pt.unsubscribe()}},error:Nt,complete:rt});this.subscribe(Pt)})}_subscribe(de){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(de)}[X.L](){return this}pipe(...de){return(0,O.U)(de)(this)}toPromise(de){return new(de=Re(de))((Ye,rt)=>{let Nt;this.subscribe(Pt=>Nt=Pt,Pt=>rt(Pt),()=>Ye(Nt))})}}return Ae.create=mt=>new Ae(mt),Ae})();function Re(Ae){var mt;return null!==(mt=Ae??ue.v.Promise)&&void 0!==mt?mt:Promise}},579:(yt,Te,j)=>{j.d(Te,{x:()=>De});var M=j(751),w=j(727);const O=(0,j(888).d)(Re=>function(){Re(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=j(737),Z=j(806);let De=(()=>{class Re extends M.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(le){const Ae=new Ke(this,this);return Ae.operator=le,Ae}_throwIfClosed(){if(this.closed)throw new O}next(le){(0,Z.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ae of this.currentObservers)Ae.next(le)}})}error(le){(0,Z.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=le;const{observers:Ae}=this;for(;Ae.length;)Ae.shift().error(le)}})}complete(){(0,Z.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:le}=this;for(;le.length;)le.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var le;return(null===(le=this.observers)||void 0===le?void 0:le.length)>0}_trySubscribe(le){return this._throwIfClosed(),super._trySubscribe(le)}_subscribe(le){return this._throwIfClosed(),this._checkFinalizedStatuses(le),this._innerSubscribe(le)}_innerSubscribe(le){const{hasError:Ae,isStopped:mt,observers:de}=this;return Ae||mt?w.Lc:(this.currentObservers=null,de.push(le),new w.w0(()=>{this.currentObservers=null,(0,ue.P)(de,le)}))}_checkFinalizedStatuses(le){const{hasError:Ae,thrownError:mt,isStopped:de}=this;Ae?le.error(mt):de&&le.complete()}asObservable(){const le=new M.y;return le.source=this,le}}return Re.create=(ye,le)=>new Ke(ye,le),Re})();class Ke extends De{constructor(ye,le){super(),this.destination=ye,this.source=le}next(ye){var le,Ae;null===(Ae=null===(le=this.destination)||void 0===le?void 0:le.next)||void 0===Ae||Ae.call(le,ye)}error(ye){var le,Ae;null===(Ae=null===(le=this.destination)||void 0===le?void 0:le.error)||void 0===Ae||Ae.call(le,ye)}complete(){var ye,le;null===(le=null===(ye=this.destination)||void 0===ye?void 0:ye.complete)||void 0===le||le.call(ye)}_subscribe(ye){var le,Ae;return null!==(Ae=null===(le=this.source)||void 0===le?void 0:le.subscribe(ye))&&void 0!==Ae?Ae:w.Lc}}},961:(yt,Te,j)=>{j.d(Te,{Hp:()=>rt,Lv:()=>Ae});var M=j(576),w=j(727),X=j(416),O=j(849);function ue(){}const Z=Re("C",void 0,void 0);function Re(Ue,be,xe){return{kind:Ue,value:be,error:xe}}var ye=j(410),le=j(806);class Ae extends w.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,w.Nn)(be)&&be.add(this)):this.destination=ze}static create(be,xe,Je){return new rt(be,xe,Je)}next(be){this.isStopped?qt(function Ke(Ue){return Re("N",Ue,void 0)}(be),this):this._next(be)}error(be){this.isStopped?qt(function De(Ue){return Re("E",void 0,Ue)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?qt(Z,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function de(Ue,be){return mt.call(Ue,be)}class Ye{constructor(be){this.partialObserver=be}next(be){const{partialObserver:xe}=this;if(xe.next)try{xe.next(be)}catch(Je){Nt(Je)}}error(be){const{partialObserver:xe}=this;if(xe.error)try{xe.error(be)}catch(Je){Nt(Je)}else Nt(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(xe){Nt(xe)}}}class rt extends Ae{constructor(be,xe,Je){let Se;if(super(),(0,M.m)(be)||!be)Se={next:be??void 0,error:xe??void 0,complete:Je??void 0};else{let et;this&&X.v.useDeprecatedNextContext?(et=Object.create(be),et.unsubscribe=()=>this.unsubscribe(),Se={next:be.next&&de(be.next,et),error:be.error&&de(be.error,et),complete:be.complete&&de(be.complete,et)}):Se=be}this.destination=new Ye(Se)}}function Nt(Ue){X.v.useDeprecatedSynchronousErrorHandling?(0,le.O)(Ue):(0,O.h)(Ue)}function qt(Ue,be){const{onStoppedNotification:xe}=X.v;xe&&ye.z.setTimeout(()=>xe(Ue,be))}const ze={closed:!0,next:ue,error:function Pt(Ue){throw Ue},complete:ue}},727:(yt,Te,j)=>{j.d(Te,{Lc:()=>Z,w0:()=>ue,Nn:()=>De});var M=j(576);const X=(0,j(888).d)(Re=>function(le){Re(this),this.message=le?`${le.length} errors occurred during unsubscription:\n${le.map((Ae,mt)=>`${mt+1}) ${Ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=le});var O=j(737);class ue{constructor(ye){this.initialTeardown=ye,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ye;if(!this.closed){this.closed=!0;const{_parentage:le}=this;if(le)if(this._parentage=null,Array.isArray(le))for(const de of le)de.remove(this);else le.remove(this);const{initialTeardown:Ae}=this;if((0,M.m)(Ae))try{Ae()}catch(de){ye=de instanceof X?de.errors:[de]}const{_finalizers:mt}=this;if(mt){this._finalizers=null;for(const de of mt)try{Ke(de)}catch(Ye){ye=ye??[],Ye instanceof X?ye=[...ye,...Ye.errors]:ye.push(Ye)}}if(ye)throw new X(ye)}}add(ye){var le;if(ye&&ye!==this)if(this.closed)Ke(ye);else{if(ye instanceof ue){if(ye.closed||ye._hasParent(this))return;ye._addParent(this)}(this._finalizers=null!==(le=this._finalizers)&&void 0!==le?le:[]).push(ye)}}_hasParent(ye){const{_parentage:le}=this;return le===ye||Array.isArray(le)&&le.includes(ye)}_addParent(ye){const{_parentage:le}=this;this._parentage=Array.isArray(le)?(le.push(ye),le):le?[le,ye]:ye}_removeParent(ye){const{_parentage:le}=this;le===ye?this._parentage=null:Array.isArray(le)&&(0,O.P)(le,ye)}remove(ye){const{_finalizers:le}=this;le&&(0,O.P)(le,ye),ye instanceof ue&&ye._removeParent(this)}}ue.EMPTY=(()=>{const Re=new ue;return Re.closed=!0,Re})();const Z=ue.EMPTY;function De(Re){return Re instanceof ue||Re&&"closed"in Re&&(0,M.m)(Re.remove)&&(0,M.m)(Re.add)&&(0,M.m)(Re.unsubscribe)}function Ke(Re){(0,M.m)(Re)?Re():Re.unsubscribe()}},416:(yt,Te,j)=>{j.d(Te,{v:()=>M});const M={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(yt,Te,j)=>{j.d(Te,{E:()=>w});const w=new(j(751).y)(ue=>ue.complete())},996:(yt,Te,j)=>{j.d(Te,{D:()=>be});var M=j(421),w=j(363),X=j(468),Z=j(751),Ke=j(202),Re=j(576),ye=j(672);function Ae(xe,Je){if(!xe)throw new Error("Iterable cannot be null");return new Z.y(Se=>{(0,ye.f)(Se,Je,()=>{const et=xe[Symbol.asyncIterator]();(0,ye.f)(Se,Je,()=>{et.next().then(Ce=>{Ce.done?Se.complete():Se.next(Ce.value)})},0,!0)})})}var mt=j(670),de=j(239),Ye=j(144),rt=j(495),Nt=j(206),Pt=j(532),qt=j(260);function be(xe,Je){return Je?function Ue(xe,Je){if(null!=xe){if((0,mt.c)(xe))return function O(xe,Je){return(0,M.Xf)(xe).pipe((0,X.R)(Je),(0,w.Q)(Je))}(xe,Je);if((0,Ye.z)(xe))return function De(xe,Je){return new Z.y(Se=>{let et=0;return Je.schedule(function(){et===xe.length?Se.complete():(Se.next(xe[et++]),Se.closed||this.schedule())})})}(xe,Je);if((0,de.t)(xe))return function ue(xe,Je){return(0,M.Xf)(xe).pipe((0,X.R)(Je),(0,w.Q)(Je))}(xe,Je);if((0,Nt.D)(xe))return Ae(xe,Je);if((0,rt.T)(xe))return function le(xe,Je){return new Z.y(Se=>{let et;return(0,ye.f)(Se,Je,()=>{et=xe[Ke.h](),(0,ye.f)(Se,Je,()=>{let Ce,Xe;try{({value:Ce,done:Xe}=et.next())}catch(Fe){return void Se.error(Fe)}Xe?Se.complete():Se.next(Ce)},0,!0)}),()=>(0,Re.m)(et?.return)&&et.return()})}(xe,Je);if((0,qt.L)(xe))return function ze(xe,Je){return Ae((0,qt.Q)(xe),Je)}(xe,Je)}throw(0,Pt.z)(xe)}(xe,Je):(0,M.Xf)(xe)}},421:(yt,Te,j)=>{j.d(Te,{Xf:()=>mt});var M=j(655),w=j(144),X=j(239),O=j(751),ue=j(670),Z=j(206),De=j(532),Ke=j(495),Re=j(260),ye=j(576),le=j(849),Ae=j(822);function mt(Ue){if(Ue instanceof O.y)return Ue;if(null!=Ue){if((0,ue.c)(Ue))return function de(Ue){return new O.y(be=>{const xe=Ue[Ae.L]();if((0,ye.m)(xe.subscribe))return xe.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ue);if((0,w.z)(Ue))return function Ye(Ue){return new O.y(be=>{for(let xe=0;xe<Ue.length&&!be.closed;xe++)be.next(Ue[xe]);be.complete()})}(Ue);if((0,X.t)(Ue))return function rt(Ue){return new O.y(be=>{Ue.then(xe=>{be.closed||(be.next(xe),be.complete())},xe=>be.error(xe)).then(null,le.h)})}(Ue);if((0,Z.D)(Ue))return Pt(Ue);if((0,Ke.T)(Ue))return function Nt(Ue){return new O.y(be=>{for(const xe of Ue)if(be.next(xe),be.closed)return;be.complete()})}(Ue);if((0,Re.L)(Ue))return function qt(Ue){return Pt((0,Re.Q)(Ue))}(Ue)}throw(0,De.z)(Ue)}function Pt(Ue){return new O.y(be=>{(function ze(Ue,be){var xe,Je,Se,et;return(0,M.mG)(this,void 0,void 0,function*(){try{for(xe=(0,M.KL)(Ue);!(Je=yield xe.next()).done;)if(be.next(Je.value),be.closed)return}catch(Ce){Se={error:Ce}}finally{try{Je&&!Je.done&&(et=xe.return)&&(yield et.call(xe))}finally{if(Se)throw Se.error}}be.complete()})})(Ue,be).catch(xe=>be.error(xe))})}},646:(yt,Te,j)=>{j.d(Te,{of:()=>X});var M=j(669),w=j(996);function X(...O){const ue=(0,M.yG)(O);return(0,w.D)(O,ue)}},403:(yt,Te,j)=>{j.d(Te,{x:()=>w});var M=j(961);function w(O,ue,Z,De,Ke){return new X(O,ue,Z,De,Ke)}class X extends M.Lv{constructor(ue,Z,De,Ke,Re,ye){super(ue),this.onFinalize=Re,this.shouldUnsubscribe=ye,this._next=Z?function(le){try{Z(le)}catch(Ae){ue.error(Ae)}}:super._next,this._error=Ke?function(le){try{Ke(le)}catch(Ae){ue.error(Ae)}finally{this.unsubscribe()}}:super._error,this._complete=De?function(){try{De()}catch(le){ue.error(le)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Z}=this;super.unsubscribe(),!Z&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4:(yt,Te,j)=>{j.d(Te,{U:()=>X});var M=j(482),w=j(403);function X(O,ue){return(0,M.e)((Z,De)=>{let Ke=0;Z.subscribe((0,w.x)(De,Re=>{De.next(O.call(ue,Re,Ke++))}))})}},189:(yt,Te,j)=>{j.d(Te,{J:()=>X});var M=j(577),w=j(671);function X(O=1/0){return(0,M.z)(w.y,O)}},577:(yt,Te,j)=>{j.d(Te,{z:()=>Ke});var M=j(4),w=j(421),X=j(482),O=j(672),ue=j(403),De=j(576);function Ke(Re,ye,le=1/0){return(0,De.m)(ye)?Ke((Ae,mt)=>(0,M.U)((de,Ye)=>ye(Ae,de,mt,Ye))((0,w.Xf)(Re(Ae,mt))),le):("number"==typeof ye&&(le=ye),(0,X.e)((Ae,mt)=>function Z(Re,ye,le,Ae,mt,de,Ye,rt){const Nt=[];let Pt=0,qt=0,ze=!1;const Ue=()=>{ze&&!Nt.length&&!Pt&&ye.complete()},be=Je=>Pt<Ae?xe(Je):Nt.push(Je),xe=Je=>{de&&ye.next(Je),Pt++;let Se=!1;(0,w.Xf)(le(Je,qt++)).subscribe((0,ue.x)(ye,et=>{mt?.(et),de?be(et):ye.next(et)},()=>{Se=!0},void 0,()=>{if(Se)try{for(Pt--;Nt.length&&Pt<Ae;){const et=Nt.shift();Ye?(0,O.f)(ye,Ye,()=>xe(et)):xe(et)}Ue()}catch(et){ye.error(et)}}))};return Re.subscribe((0,ue.x)(ye,be,()=>{ze=!0,Ue()})),()=>{rt?.()}}(Ae,mt,Re,le)))}},363:(yt,Te,j)=>{j.d(Te,{Q:()=>O});var M=j(672),w=j(482),X=j(403);function O(ue,Z=0){return(0,w.e)((De,Ke)=>{De.subscribe((0,X.x)(Ke,Re=>(0,M.f)(Ke,ue,()=>Ke.next(Re),Z),()=>(0,M.f)(Ke,ue,()=>Ke.complete(),Z),Re=>(0,M.f)(Ke,ue,()=>Ke.error(Re),Z)))})}},468:(yt,Te,j)=>{j.d(Te,{R:()=>w});var M=j(482);function w(X,O=0){return(0,M.e)((ue,Z)=>{Z.add(X.schedule(()=>ue.subscribe(Z),O))})}},505:(yt,Te,j)=>{j.d(Te,{b:()=>ue});var M=j(576),w=j(482),X=j(403),O=j(671);function ue(Z,De,Ke){const Re=(0,M.m)(Z)||De||Ke?{next:Z,error:De,complete:Ke}:Z;return Re?(0,w.e)((ye,le)=>{var Ae;null===(Ae=Re.subscribe)||void 0===Ae||Ae.call(Re);let mt=!0;ye.subscribe((0,X.x)(le,de=>{var Ye;null===(Ye=Re.next)||void 0===Ye||Ye.call(Re,de),le.next(de)},()=>{var de;mt=!1,null===(de=Re.complete)||void 0===de||de.call(Re),le.complete()},de=>{var Ye;mt=!1,null===(Ye=Re.error)||void 0===Ye||Ye.call(Re,de),le.error(de)},()=>{var de,Ye;mt&&(null===(de=Re.unsubscribe)||void 0===de||de.call(Re)),null===(Ye=Re.finalize)||void 0===Ye||Ye.call(Re)}))}):O.y}},410:(yt,Te,j)=>{j.d(Te,{z:()=>M});const M={setTimeout(w,X,...O){const{delegate:ue}=M;return ue?.setTimeout?ue.setTimeout(w,X,...O):setTimeout(w,X,...O)},clearTimeout(w){const{delegate:X}=M;return(X?.clearTimeout||clearTimeout)(w)},delegate:void 0}},202:(yt,Te,j)=>{j.d(Te,{h:()=>w});const w=function M(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},822:(yt,Te,j)=>{j.d(Te,{L:()=>M});const M="function"==typeof Symbol&&Symbol.observable||"@@observable"},669:(yt,Te,j)=>{j.d(Te,{_6:()=>Z,jO:()=>O,yG:()=>ue});var M=j(576);function X(De){return De[De.length-1]}function O(De){return(0,M.m)(X(De))?De.pop():void 0}function ue(De){return function w(De){return De&&(0,M.m)(De.schedule)}(X(De))?De.pop():void 0}function Z(De,Ke){return"number"==typeof X(De)?De.pop():Ke}},742:(yt,Te,j)=>{j.d(Te,{D:()=>ue});const{isArray:M}=Array,{getPrototypeOf:w,prototype:X,keys:O}=Object;function ue(De){if(1===De.length){const Ke=De[0];if(M(Ke))return{args:Ke,keys:null};if(function Z(De){return De&&"object"==typeof De&&w(De)===X}(Ke)){const Re=O(Ke);return{args:Re.map(ye=>Ke[ye]),keys:Re}}}return{args:De,keys:null}}},737:(yt,Te,j)=>{function M(w,X){if(w){const O=w.indexOf(X);0<=O&&w.splice(O,1)}}j.d(Te,{P:()=>M})},888:(yt,Te,j)=>{function M(w){const O=w(ue=>{Error.call(ue),ue.stack=(new Error).stack});return O.prototype=Object.create(Error.prototype),O.prototype.constructor=O,O}j.d(Te,{d:()=>M})},810:(yt,Te,j)=>{function M(w,X){return w.reduce((O,ue,Z)=>(O[ue]=X[Z],O),{})}j.d(Te,{n:()=>M})},806:(yt,Te,j)=>{j.d(Te,{O:()=>O,x:()=>X});var M=j(416);let w=null;function X(ue){if(M.v.useDeprecatedSynchronousErrorHandling){const Z=!w;if(Z&&(w={errorThrown:!1,error:null}),ue(),Z){const{errorThrown:De,error:Ke}=w;if(w=null,De)throw Ke}}else ue()}function O(ue){M.v.useDeprecatedSynchronousErrorHandling&&w&&(w.errorThrown=!0,w.error=ue)}},672:(yt,Te,j)=>{function M(w,X,O,ue=0,Z=!1){const De=X.schedule(function(){O(),Z?w.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(w.add(De),!Z)return De}j.d(Te,{f:()=>M})},671:(yt,Te,j)=>{function M(w){return w}j.d(Te,{y:()=>M})},144:(yt,Te,j)=>{j.d(Te,{z:()=>M});const M=w=>w&&"number"==typeof w.length&&"function"!=typeof w},206:(yt,Te,j)=>{j.d(Te,{D:()=>w});var M=j(576);function w(X){return Symbol.asyncIterator&&(0,M.m)(X?.[Symbol.asyncIterator])}},576:(yt,Te,j)=>{function M(w){return"function"==typeof w}j.d(Te,{m:()=>M})},670:(yt,Te,j)=>{j.d(Te,{c:()=>X});var M=j(822),w=j(576);function X(O){return(0,w.m)(O[M.L])}},495:(yt,Te,j)=>{j.d(Te,{T:()=>X});var M=j(202),w=j(576);function X(O){return(0,w.m)(O?.[M.h])}},239:(yt,Te,j)=>{j.d(Te,{t:()=>w});var M=j(576);function w(X){return(0,M.m)(X?.then)}},260:(yt,Te,j)=>{j.d(Te,{L:()=>O,Q:()=>X});var M=j(655),w=j(576);function X(ue){return(0,M.FC)(this,arguments,function*(){const De=ue.getReader();try{for(;;){const{value:Ke,done:Re}=yield(0,M.qq)(De.read());if(Re)return yield(0,M.qq)(void 0);yield yield(0,M.qq)(Ke)}}finally{De.releaseLock()}})}function O(ue){return(0,w.m)(ue?.getReader)}},482:(yt,Te,j)=>{j.d(Te,{A:()=>w,e:()=>X});var M=j(576);function w(O){return(0,M.m)(O?.lift)}function X(O){return ue=>{if(w(ue))return ue.lift(function(Z){try{return O(Z,this)}catch(De){this.error(De)}});throw new TypeError("Unable to lift unknown Observable type")}}},268:(yt,Te,j)=>{j.d(Te,{Z:()=>O});var M=j(4);const{isArray:w}=Array;function O(ue){return(0,M.U)(Z=>function X(ue,Z){return w(Z)?ue(...Z):ue(Z)}(ue,Z))}},635:(yt,Te,j)=>{j.d(Te,{U:()=>X,z:()=>w});var M=j(671);function w(...O){return X(O)}function X(O){return 0===O.length?M.y:1===O.length?O[0]:function(Z){return O.reduce((De,Ke)=>Ke(De),Z)}}},849:(yt,Te,j)=>{j.d(Te,{h:()=>X});var M=j(416),w=j(410);function X(O){w.z.setTimeout(()=>{const{onUnhandledError:ue}=M.v;if(!ue)throw O;ue(O)})}},532:(yt,Te,j)=>{function M(w){return new TypeError(`You provided ${null!==w&&"object"==typeof w?"an invalid object":`'${w}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(Te,{z:()=>M})},655:(yt,Te,j)=>{function O(ne,K){var ce={};for(var me in ne)Object.prototype.hasOwnProperty.call(ne,me)&&K.indexOf(me)<0&&(ce[me]=ne[me]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(me=Object.getOwnPropertySymbols(ne);Ne<me.length;Ne++)K.indexOf(me[Ne])<0&&Object.prototype.propertyIsEnumerable.call(ne,me[Ne])&&(ce[me[Ne]]=ne[me[Ne]])}return ce}function Ae(ne,K,ce,me){return new(ce||(ce=Promise))(function(ve,Be){function Vt(Tt){try{lt(me.next(Tt))}catch(At){Be(At)}}function sn(Tt){try{lt(me.throw(Tt))}catch(At){Be(At)}}function lt(Tt){Tt.done?ve(Tt.value):function Ne(ve){return ve instanceof ce?ve:new ce(function(Be){Be(ve)})}(Tt.value).then(Vt,sn)}lt((me=me.apply(ne,K||[])).next())})}function Ue(ne){return this instanceof Ue?(this.v=ne,this):new Ue(ne)}function be(ne,K,ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,me=ce.apply(ne,K||[]),ve=[];return Ne={},Be("next"),Be("throw"),Be("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function Be(st){me[st]&&(Ne[st]=function(Jt){return new Promise(function(En,vt){ve.push([st,Jt,En,vt])>1||Vt(st,Jt)})})}function Vt(st,Jt){try{!function sn(st){st.value instanceof Ue?Promise.resolve(st.value.v).then(lt,Tt):At(ve[0][2],st)}(me[st](Jt))}catch(En){At(ve[0][3],En)}}function lt(st){Vt("next",st)}function Tt(st){Vt("throw",st)}function At(st,Jt){st(Jt),ve.shift(),ve.length&&Vt(ve[0][0],ve[0][1])}}function Je(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,K=ne[Symbol.asyncIterator];return K?K.call(ne):(ne=function rt(ne){var K="function"==typeof Symbol&&Symbol.iterator,ce=K&&ne[K],me=0;if(ce)return ce.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&me>=ne.length&&(ne=void 0),{value:ne&&ne[me++],done:!ne}}};throw new TypeError(K?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),ce={},me("next"),me("throw"),me("return"),ce[Symbol.asyncIterator]=function(){return this},ce);function me(ve){ce[ve]=ne[ve]&&function(Be){return new Promise(function(Vt,sn){!function Ne(ve,Be,Vt,sn){Promise.resolve(sn).then(function(lt){ve({value:lt,done:Vt})},Be)}(Vt,sn,(Be=ne[ve](Be)).done,Be.value)})}}}j.d(Te,{FC:()=>be,KL:()=>Je,_T:()=>O,mG:()=>Ae,qq:()=>Ue})},895:(yt,Te,j)=>{j.d(Te,{Do:()=>qt,EM:()=>Sa,HT:()=>O,JF:()=>Es,K0:()=>Z,Mx:()=>Il,O5:()=>wt,Ov:()=>ho,S$:()=>rt,V_:()=>Re,Ye:()=>ze,b0:()=>Pt,bD:()=>gf,ez:()=>pf,q:()=>X,sg:()=>Uo,w_:()=>ue});var M=j(256);let w=null;function X(){return w}function O(C){w||(w=C)}class ue{}const Z=new M.OlP("DocumentToken");let De=(()=>{class C{historyGo(D){throw new Error("Not implemented")}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=M.Yz7({token:C,factory:function(){return function Ke(){return(0,M.LFG)(ye)}()},providedIn:"platform"}),C})();const Re=new M.OlP("Location Initialized");let ye=(()=>{class C extends De{constructor(D){super(),this._doc=D,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return X().getBaseHref(this._doc)}onPopState(D){const P=X().getGlobalEventTarget(this._doc,"window");return P.addEventListener("popstate",D,!1),()=>P.removeEventListener("popstate",D)}onHashChange(D){const P=X().getGlobalEventTarget(this._doc,"window");return P.addEventListener("hashchange",D,!1),()=>P.removeEventListener("hashchange",D)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(D){this._location.pathname=D}pushState(D,P,B){le()?this._history.pushState(D,P,B):this._location.hash=B}replaceState(D,P,B){le()?this._history.replaceState(D,P,B):this._location.hash=B}forward(){this._history.forward()}back(){this._history.back()}historyGo(D=0){this._history.go(D)}getState(){return this._history.state}}return C.\u0275fac=function(D){return new(D||C)(M.LFG(Z))},C.\u0275prov=M.Yz7({token:C,factory:function(){return function Ae(){return new ye((0,M.LFG)(Z))}()},providedIn:"platform"}),C})();function le(){return!!window.history.pushState}function mt(C,R){if(0==C.length)return R;if(0==R.length)return C;let D=0;return C.endsWith("/")&&D++,R.startsWith("/")&&D++,2==D?C+R.substring(1):1==D?C+R:C+"/"+R}function de(C){const R=C.match(/#|\?|$/),D=R&&R.index||C.length;return C.slice(0,D-("/"===C[D-1]?1:0))+C.slice(D)}function Ye(C){return C&&"?"!==C[0]?"?"+C:C}let rt=(()=>{class C{historyGo(D){throw new Error("Not implemented")}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=M.Yz7({token:C,factory:function(){return(0,M.f3M)(Pt)},providedIn:"root"}),C})();const Nt=new M.OlP("appBaseHref");let Pt=(()=>{class C extends rt{constructor(D,P){super(),this._platformLocation=D,this._removeListenerFns=[],this._baseHref=P??this._platformLocation.getBaseHrefFromDOM()??(0,M.f3M)(Z).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(D){this._removeListenerFns.push(this._platformLocation.onPopState(D),this._platformLocation.onHashChange(D))}getBaseHref(){return this._baseHref}prepareExternalUrl(D){return mt(this._baseHref,D)}path(D=!1){const P=this._platformLocation.pathname+Ye(this._platformLocation.search),B=this._platformLocation.hash;return B&&D?`${P}${B}`:P}pushState(D,P,B,ee){const se=this.prepareExternalUrl(B+Ye(ee));this._platformLocation.pushState(D,P,se)}replaceState(D,P,B,ee){const se=this.prepareExternalUrl(B+Ye(ee));this._platformLocation.replaceState(D,P,se)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(D=0){this._platformLocation.historyGo?.(D)}}return C.\u0275fac=function(D){return new(D||C)(M.LFG(De),M.LFG(Nt,8))},C.\u0275prov=M.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})(),qt=(()=>{class C extends rt{constructor(D,P){super(),this._platformLocation=D,this._baseHref="",this._removeListenerFns=[],null!=P&&(this._baseHref=P)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(D){this._removeListenerFns.push(this._platformLocation.onPopState(D),this._platformLocation.onHashChange(D))}getBaseHref(){return this._baseHref}path(D=!1){let P=this._platformLocation.hash;return null==P&&(P="#"),P.length>0?P.substring(1):P}prepareExternalUrl(D){const P=mt(this._baseHref,D);return P.length>0?"#"+P:P}pushState(D,P,B,ee){let se=this.prepareExternalUrl(B+Ye(ee));0==se.length&&(se=this._platformLocation.pathname),this._platformLocation.pushState(D,P,se)}replaceState(D,P,B,ee){let se=this.prepareExternalUrl(B+Ye(ee));0==se.length&&(se=this._platformLocation.pathname),this._platformLocation.replaceState(D,P,se)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(D=0){this._platformLocation.historyGo?.(D)}}return C.\u0275fac=function(D){return new(D||C)(M.LFG(De),M.LFG(Nt,8))},C.\u0275prov=M.Yz7({token:C,factory:C.\u0275fac}),C})(),ze=(()=>{class C{constructor(D){this._subject=new M.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=D;const P=this._locationStrategy.getBaseHref();this._basePath=function Je(C){if(new RegExp("^(https?:)?//").test(C)){const[,D]=C.split(/\/\/[^\/]+/);return D}return C}(de(xe(P))),this._locationStrategy.onPopState(B=>{this._subject.emit({url:this.path(!0),pop:!0,state:B.state,type:B.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(D=!1){return this.normalize(this._locationStrategy.path(D))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(D,P=""){return this.path()==this.normalize(D+Ye(P))}normalize(D){return C.stripTrailingSlash(function be(C,R){if(!C||!R.startsWith(C))return R;const D=R.substring(C.length);return""===D||["/",";","?","#"].includes(D[0])?D:R}(this._basePath,xe(D)))}prepareExternalUrl(D){return D&&"/"!==D[0]&&(D="/"+D),this._locationStrategy.prepareExternalUrl(D)}go(D,P="",B=null){this._locationStrategy.pushState(B,"",D,P),this._notifyUrlChangeListeners(this.prepareExternalUrl(D+Ye(P)),B)}replaceState(D,P="",B=null){this._locationStrategy.replaceState(B,"",D,P),this._notifyUrlChangeListeners(this.prepareExternalUrl(D+Ye(P)),B)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(D=0){this._locationStrategy.historyGo?.(D)}onUrlChange(D){return this._urlChangeListeners.push(D),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(P=>{this._notifyUrlChangeListeners(P.url,P.state)})),()=>{const P=this._urlChangeListeners.indexOf(D);this._urlChangeListeners.splice(P,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(D="",P){this._urlChangeListeners.forEach(B=>B(D,P))}subscribe(D,P,B){return this._subject.subscribe({next:D,error:P,complete:B})}}return C.normalizeQueryParams=Ye,C.joinWithSlash=mt,C.stripTrailingSlash=de,C.\u0275fac=function(D){return new(D||C)(M.LFG(rt))},C.\u0275prov=M.Yz7({token:C,factory:function(){return function Ue(){return new ze((0,M.LFG)(rt))}()},providedIn:"root"}),C})();function xe(C){return C.replace(/\/index.html$/,"")}function Il(C,R){R=encodeURIComponent(R);for(const D of C.split(";")){const P=D.indexOf("="),[B,ee]=-1==P?[D,""]:[D.slice(0,P),D.slice(P+1)];if(B.trim()===R)return decodeURIComponent(ee)}return null}class Zi{constructor(R,D,P,B){this.$implicit=R,this.ngForOf=D,this.index=P,this.count=B}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Uo=(()=>{class C{set ngForOf(D){this._ngForOf=D,this._ngForOfDirty=!0}set ngForTrackBy(D){this._trackByFn=D}get ngForTrackBy(){return this._trackByFn}constructor(D,P,B){this._viewContainer=D,this._template=P,this._differs=B,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(D){D&&(this._template=D)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const D=this._ngForOf;!this._differ&&D&&(this._differ=this._differs.find(D).create(this.ngForTrackBy))}if(this._differ){const D=this._differ.diff(this._ngForOf);D&&this._applyChanges(D)}}_applyChanges(D){const P=this._viewContainer;D.forEachOperation((B,ee,se)=>{if(null==B.previousIndex)P.createEmbeddedView(this._template,new Zi(B.item,this._ngForOf,-1,-1),null===se?void 0:se);else if(null==se)P.remove(null===ee?void 0:ee);else if(null!==ee){const We=P.get(ee);P.move(We,se),Qi(We,B)}});for(let B=0,ee=P.length;B<ee;B++){const We=P.get(B).context;We.index=B,We.count=ee,We.ngForOf=this._ngForOf}D.forEachIdentityChange(B=>{Qi(P.get(B.currentIndex),B)})}static ngTemplateContextGuard(D,P){return!0}}return C.\u0275fac=function(D){return new(D||C)(M.Y36(M.s_b),M.Y36(M.Rgc),M.Y36(M.ZZ4))},C.\u0275dir=M.lG2({type:C,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),C})();function Qi(C,R){C.context.$implicit=R.item}let wt=(()=>{class C{constructor(D,P){this._viewContainer=D,this._context=new on,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=P}set ngIf(D){this._context.$implicit=this._context.ngIf=D,this._updateView()}set ngIfThen(D){Kn("ngIfThen",D),this._thenTemplateRef=D,this._thenViewRef=null,this._updateView()}set ngIfElse(D){Kn("ngIfElse",D),this._elseTemplateRef=D,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(D,P){return!0}}return C.\u0275fac=function(D){return new(D||C)(M.Y36(M.s_b),M.Y36(M.Rgc))},C.\u0275dir=M.lG2({type:C,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),C})();class on{constructor(){this.$implicit=null,this.ngIf=null}}function Kn(C,R){if(R&&!R.createEmbeddedView)throw new Error(`${C} must be a TemplateRef, but received '${(0,M.AaK)(R)}'.`)}class Yn{createSubscription(R,D){return R.subscribe({next:D,error:P=>{throw P}})}dispose(R){R.unsubscribe()}}class Bo{createSubscription(R,D){return R.then(D,P=>{throw P})}dispose(R){}}const co=new Bo,Ai=new Yn;let ho=(()=>{class C{constructor(D){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=D}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(D){return this._obj?D!==this._obj?(this._dispose(),this.transform(D)):this._latestValue:(D&&this._subscribe(D),this._latestValue)}_subscribe(D){this._obj=D,this._strategy=this._selectStrategy(D),this._subscription=this._strategy.createSubscription(D,P=>this._updateLatestValue(D,P))}_selectStrategy(D){if((0,M.QGY)(D))return co;if((0,M.F4k)(D))return Ai;throw function Fn(C,R){return new M.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(D,P){D===this._obj&&(this._latestValue=P,this._ref.markForCheck())}}return C.\u0275fac=function(D){return new(D||C)(M.Y36(M.sBO,16))},C.\u0275pipe=M.Yjl({name:"async",type:C,pure:!1,standalone:!0}),C})(),pf=(()=>{class C{}return C.\u0275fac=function(D){return new(D||C)},C.\u0275mod=M.oAB({type:C}),C.\u0275inj=M.cJS({}),C})();const gf="browser";let Sa=(()=>{class C{}return C.\u0275prov=(0,M.Yz7)({token:C,providedIn:"root",factory:()=>new kt((0,M.LFG)(Z),window)}),C})();class kt{constructor(R,D){this.document=R,this.window=D,this.offset=()=>[0,0]}setOffset(R){this.offset=Array.isArray(R)?()=>R:R}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(R){this.supportsScrolling()&&this.window.scrollTo(R[0],R[1])}scrollToAnchor(R){if(!this.supportsScrolling())return;const D=function _f(C,R){const D=C.getElementById(R)||C.getElementsByName(R)[0];if(D)return D;if("function"==typeof C.createTreeWalker&&C.body&&(C.body.createShadowRoot||C.body.attachShadow)){const P=C.createTreeWalker(C.body,NodeFilter.SHOW_ELEMENT);let B=P.currentNode;for(;B;){const ee=B.shadowRoot;if(ee){const se=ee.getElementById(R)||ee.querySelector(`[name="${R}"]`);if(se)return se}B=P.nextNode()}}return null}(this.document,R);D&&(this.scrollToElement(D),D.focus())}setHistoryScrollRestoration(R){if(this.supportScrollRestoration()){const D=this.window.history;D&&D.scrollRestoration&&(D.scrollRestoration=R)}}scrollToElement(R){const D=R.getBoundingClientRect(),P=D.left+this.window.pageXOffset,B=D.top+this.window.pageYOffset,ee=this.offset();this.window.scrollTo(P-ee[0],B-ee[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const R=Al(this.window.history)||Al(Object.getPrototypeOf(this.window.history));return!(!R||!R.writable&&!R.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Al(C){return Object.getOwnPropertyDescriptor(C,"scrollRestoration")}class Es{}},256:(yt,Te,j)=>{j.d(Te,{tb:()=>YC,AFp:()=>vx,ip1:()=>yx,CZH:()=>uw,hGG:()=>sb,z2F:()=>kg,sBO:()=>Ew,Sil:()=>vO,_Vd:()=>Ys,EJc:()=>_O,Xts:()=>eI,SBq:()=>cp,lqb:()=>ki,qLn:()=>Pd,vpe:()=>Ps,XFs:()=>_e,OlP:()=>pn,zs3:()=>Jo,ZZ4:()=>$g,aQg:()=>Nw,soG:()=>lw,YKP:()=>pg,h0i:()=>ph,PXZ:()=>ZC,R0b:()=>ks,FiY:()=>Kr,Lbi:()=>fO,g9A:()=>Ex,Qsj:()=>tS,FYo:()=>aI,JOm:()=>Eo,tp0:()=>Yo,Rgc:()=>gc,dDg:()=>bx,eoX:()=>wh,q4F:()=>Ya,GfV:()=>Zs,s_b:()=>Cg,ifc:()=>he,MMx:()=>Fv,Lck:()=>zk,eFA:()=>Pg,Gpc:()=>qt,f3M:()=>_u,$WT:()=>Bs,_c5:()=>al,c2e:()=>gO,zSh:()=>sI,wAp:()=>ht,vHH:()=>Se,lri:()=>gw,rWj:()=>Qr,D6c:()=>jg,cg1:()=>sC,kL8:()=>tA,dqk:()=>$t,Z0I:()=>Wn,eJc:()=>iw,CqO:()=>Hy,QGY:()=>jy,F4k:()=>HI,RDi:()=>k_,AaK:()=>rt,qOj:()=>Zu,TTD:()=>Hs,_Bn:()=>fg,jDz:()=>CC,xp6:()=>hI,uIk:()=>el,Gre:()=>Zp,ekj:()=>tv,Suo:()=>OC,Xpm:()=>Lo,lG2:()=>Ea,Yz7:()=>tr,cJS:()=>No,oAB:()=>Yi,Yjl:()=>Il,Y36:()=>Ql,_UZ:()=>Op,qZA:()=>Yd,TgZ:()=>nc,EpF:()=>jI,n5z:()=>ni,LFG:()=>tn,$8M:()=>jl,$Z:()=>CI,NdJ:()=>bo,CRH:()=>Tg,oxw:()=>zI,ALo:()=>wg,lcZ:()=>Wv,Q6J:()=>Uy,s9C:()=>zy,iGM:()=>nw,MAs:()=>Vy,KtG:()=>Rl,CHM:()=>od,LSH:()=>G_,P3R:()=>ZD,YNc:()=>Ly,W1O:()=>nx,_uU:()=>ov,Oqu:()=>eC,hij:()=>uc,AsE:()=>ih});var M=j(579),w=j(727),X=j(751),O=j(189),ue=j(421),Z=j(515),De=j(669),Ke=j(996),ye=j(961),le=j(482);function mt(s,o,...u){if(!0===o)return void s();if(!1===o)return;const c=new ye.Hp({next:()=>{c.unsubscribe(),s()}});return(0,ue.Xf)(o(...u)).subscribe(c)}function de(s){for(let o in s)if(s[o]===de)return o;throw Error("Could not find renamed property on target object.")}function Ye(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function rt(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(rt).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Nt(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Pt=de({__forward_ref__:de});function qt(s){return s.__forward_ref__=qt,s.toString=function(){return rt(this())},s}function ze(s){return Ue(s)?s():s}function Ue(s){return"function"==typeof s&&s.hasOwnProperty(Pt)&&s.__forward_ref__===qt}function be(s){return s&&!!s.\u0275providers}const Je="https://g.co/ng/security#xss";class Se extends Error{constructor(o,u){super(et(o,u)),this.code=o}}function et(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function Ce(s){return"string"==typeof s?s:null==s?"":String(s)}function ne(s,o){throw new Se(-201,!1)}function En(s,o){null==s&&function vt(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function tr(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function No(s){return{providers:s.providers||[],imports:s.imports||[]}}function Qe(s){return Ci(s,qi)||Ci(s,ga)}function Wn(s){return null!==Qe(s)}function Ci(s,o){return s.hasOwnProperty(o)?s[o]:null}function uo(s){return s&&(s.hasOwnProperty(qn)||s.hasOwnProperty(en))?s[qn]:null}const qi=de({\u0275prov:de}),qn=de({\u0275inj:de}),ga=de({ngInjectableDef:de}),en=de({ngInjectorDef:de});var _e=(()=>((_e=_e||{})[_e.Default=0]="Default",_e[_e.Host=1]="Host",_e[_e.Self=2]="Self",_e[_e.SkipSelf=4]="SkipSelf",_e[_e.Optional=8]="Optional",_e))();let it;function fn(s){const o=it;return it=s,o}function nr(s,o,u){const c=Qe(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&_e.Optional?null:void 0!==o?o:void ne(rt(s))}const $t=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Gt={},_a="__NG_DI_FLAG__",ps="ngTempTokenPath",ko="ngTokenPath",mr=/\n/gm,It="\u0275",gs="__source";let ms;function ur(s){const o=ms;return ms=s,o}function ya(s,o=_e.Default){if(void 0===ms)throw new Se(-203,!1);return null===ms?nr(s,void 0,o):ms.get(s,o&_e.Optional?null:void 0,o)}function tn(s,o=_e.Default){return(function Pn(){return it}()||ya)(ze(s),o)}function _u(s,o=_e.Default){return tn(s,nn(o))}function nn(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function rn(s){const o=[];for(let u=0;u<s.length;u++){const c=ze(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Se(900,!1);let d,f=_e.Default;for(let m=0;m<c.length;m++){const E=c[m],T=J(E);"number"==typeof T?-1===T?d=E.token:f|=T:d=E}o.push(tn(d,f))}else o.push(tn(c))}return o}function Ur(s,o){return s[_a]=o,s.prototype[_a]=o,s}function J(s){return s[_a]}function Y(s){return{toString:s}.toString()}var ae=(()=>((ae=ae||{})[ae.OnPush=0]="OnPush",ae[ae.Default=1]="Default",ae))(),he=(()=>{return(s=he||(he={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",he;var s})();const ft={},ct=[],In=de({\u0275cmp:de}),Ki=de({\u0275dir:de}),Ar=de({\u0275pipe:de}),td=de({\u0275mod:de}),_s=de({\u0275fac:de}),Fo=de({__NG_ELEMENT_ID__:de});let va=0;function Lo(s){return Y(()=>{const o=fi(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===ae.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||he.Emulated,id:"c"+va++,styles:s.styles||ct,_:null,schemas:s.schemas||null,tView:null};Zi(u);const c=s.dependencies;return u.directiveDefs=Uo(c,!1),u.pipeDefs=Uo(c,!0),u})}function nd(s){return xt(s)||mn(s)}function Ti(s){return null!==s}function Yi(s){return Y(()=>({type:s.type,bootstrap:s.bootstrap||ct,declarations:s.declarations||ct,imports:s.imports||ct,exports:s.exports||ct,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Vo(s,o){if(null==s)return ft;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=c,o&&(o[d]=f)}return u}function Ea(s){return Y(()=>{const o=fi(s);return Zi(o),o})}function Il(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function xt(s){return s[In]||null}function mn(s){return s[Ki]||null}function On(s){return s[Ar]||null}function Bs(s){const o=xt(s)||mn(s)||On(s);return null!==o&&o.standalone}function _r(s,o){const u=s[td]||null;if(!u&&!0===o)throw new Error(`Type ${rt(s)} does not have '\u0275mod' property.`);return u}function fi(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||ct,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Vo(s.inputs,o),outputs:Vo(s.outputs)}}function Zi(s){s.features?.forEach(o=>o(s))}function Uo(s,o){if(!s)return null;const u=o?On:nd;return()=>("function"==typeof s?s():s).map(c=>u(c)).filter(Ti)}const Qi=0,$e=1,wt=2,on=3,Kn=4,Xi=5,Tn=6,ys=7,_n=8,Di=9,Ji=10,pt=11,Ia=12,Si=13,Ca=14,Fn=15,Yn=16,Bo=17,co=18,Ai=19,ho=20,Cl=21,dn=22,yu=1,bl=2,ba=7,Ta=8,$s=9,yr=10;function Br(s){return Array.isArray(s)&&"object"==typeof s[yu]}function pi(s){return Array.isArray(s)&&!0===s[yu]}function vu(s){return 0!=(4&s.flags)}function fo(s){return s.componentOffset>-1}function xi(s){return 1==(1&s.flags)}function $r(s){return!!s.template}function vr(s){return 0!=(256&s[wt])}function Es(s,o){return s.hasOwnProperty(_s)?s[_s]:null}class $o{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Hs(){return po}function po(s){return s.type.prototype.ngOnChanges&&(s.setInput=jo),Aa}function Aa(){const s=Gs(this),o=s?.current;if(o){const u=s.previous;if(u===ft)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function jo(s,o,u,c){const d=this.declaredInputs[u],f=Gs(s)||function xa(s,o){return s[Iu]=o}(s,{previous:ft,current:null}),m=f.current||(f.current={}),E=f.previous,T=E[d];m[d]=new $o(T&&T.currentValue,o,E===ft),s[c]=o}Hs.ngInherit=!0;const Iu="__ngSimpleChanges__";function Gs(s){return s[Iu]||null}const gi=function(s,o,u){};function Ln(s){for(;Array.isArray(s);)s=s[Qi];return s}function Ma(s,o){return Ln(o[s])}function ti(s,o){return Ln(o[s.index])}function Hr(s,o){return s.data[o]}function Is(s,o){return s[o]}function Vn(s,o){const u=o[s];return Br(u)?u:u[Qi]}function Ra(s){return 64==(64&s[wt])}function Gr(s,o){return null==o?null:s[o]}function Tu(s){s[co]=0}function Na(s,o){s[Xi]+=o;let u=s,c=s[on];for(;null!==c&&(1===o&&1===u[Xi]||-1===o&&0===u[Xi]);)c[Xi]+=o,u=c,c=c[on]}const dt={lFrame:zo(null),bindingsEnabled:!0};function sd(){return dt.bindingsEnabled}function pe(){return dt.lFrame.lView}function Ut(){return dt.lFrame.tView}function od(s){return dt.lFrame.contextLView=s,s[_n]}function Rl(s){return dt.lFrame.contextLView=null,s}function Un(){let s=Ho();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ho(){return dt.lFrame.currentTNode}function Cn(s,o){const u=dt.lFrame;u.currentTNode=s,u.isParent=o}function Su(){return dt.lFrame.isParent}function zr(){return dt.lFrame.bindingIndex++}function Mi(s){const o=dt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function Ru(s,o){const u=dt.lFrame;u.bindingIndex=u.bindingRootIndex=s,go(o)}function go(s){dt.lFrame.currentDirectiveIndex=s}function Pu(){return dt.lFrame.currentQueryIndex}function La(s){dt.lFrame.currentQueryIndex=s}function ld(s){const o=s[$e];return 2===o.type?o.declTNode:1===o.type?s[Tn]:null}function Va(s,o,u){if(u&_e.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&_e.Host||(d=ld(f),null===d||(f=f[Fn],10&d.type))););if(null===d)return!1;o=d,s=f}const c=dt.lFrame=Go();return c.currentTNode=o,c.lView=s,!0}function Ua(s){const o=Go(),u=s[$e];dt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Go(){const s=dt.lFrame,o=null===s?null:s.child;return null===o?zo(s):o}function zo(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ba(){const s=dt.lFrame;return dt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Pl=Ba;function Cs(){const s=Ba();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Bn(){return dt.lFrame.selectedIndex}function _i(s){dt.lFrame.selectedIndex=s}function yn(){const s=dt.lFrame;return Hr(s.tView,s.selectedIndex)}function ee(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:x,ngOnDestroy:k}=f;m&&(s.contentHooks??(s.contentHooks=[])).push(-u,m),E&&((s.contentHooks??(s.contentHooks=[])).push(u,E),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(u,E)),T&&(s.viewHooks??(s.viewHooks=[])).push(-u,T),x&&((s.viewHooks??(s.viewHooks=[])).push(u,x),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(u,x)),null!=k&&(s.destroyHooks??(s.destroyHooks=[])).push(u,k)}}function se(s,o,u){zt(s,o,3,u)}function We(s,o,u,c){(3&s[wt])===u&&zt(s,o,u,c)}function Mt(s,o){let u=s[wt];(3&u)===o&&(u&=2047,u+=1,s[wt]=u)}function zt(s,o,u,c){const f=c??-1,m=o.length-1;let E=0;for(let T=void 0!==c?65535&s[co]:0;T<m;T++)if("number"==typeof o[T+1]){if(E=o[T],null!=c&&E>=c)break}else o[T]<0&&(s[co]+=65536),(E<f||-1==f)&&(Ot(s,u,o,T),s[co]=(4294901760&s[co])+T+2),T++}function Ot(s,o,u,c){const d=u[c]<0,f=u[c+1],E=s[d?-u[c]:u[c]];if(d){if(s[wt]>>11<s[co]>>16&&(3&s[wt])===o){s[wt]+=2048,gi(4,E,f);try{f.call(E)}finally{gi(5,E,f)}}}else{gi(4,E,f);try{f.call(E)}finally{gi(5,E,f)}}}const gt=-1;class un{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function ns(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const f=u[c++],m=u[c++],E=u[c++];s.setAttribute(o,m,E,f)}else{const f=d,m=u[++c];dd(f)?s.setProperty(o,f,m):s.setAttribute(o,f,m),c++}}return c}function $a(s){return 3===s||4===s||6===s}function dd(s){return 64===s.charCodeAt(0)}function Ni(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||ku(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function ku(s,o,u,c,d){let f=0,m=s.length;if(-1===o)m=-1;else for(;f<s.length;){const E=s[f++];if("number"==typeof E){if(E===o){m=-1;break}if(E>o){m=f-1;break}}}for(;f<s.length;){const E=s[f];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[f+1]=d));if(c===s[f+1])return void(s[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==m&&(s.splice(m,0,o),f=m+1),s.splice(f++,0,u),null!==c&&s.splice(f++,0,c),null!==d&&s.splice(f++,0,d)}function hd(s){return s!==gt}function Ou(s){return 32767&s}function qs(s,o){let u=function kl(s){return s>>16}(s),c=o;for(;u>0;)c=c[Fn],u--;return c}let Ol=!0;function Wo(s){const o=Ol;return Ol=s,o}const bf=255,Fl=5;let Tf=0;const Ts={};function Fu(s,o){const u=Ll(s,o);if(-1!==u)return u;const c=o[$e];c.firstCreatePass&&(s.injectorIndex=o.length,fd(c.data,s),fd(o,null),fd(c.blueprint,null));const d=pd(s,o),f=s.injectorIndex;if(hd(d)){const m=Ou(d),E=qs(d,o),T=E[$e].data;for(let x=0;x<8;x++)o[f+x]=E[m+x]|T[m+x]}return o[f+8]=d,f}function fd(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ll(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function pd(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=qm(d),null===c)return gt;if(u++,d=d[Fn],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return gt}function gd(s,o,u){!function ja(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Fo)&&(c=u[Fo]),null==c&&(c=u[Fo]=Tf++);const d=c&bf;o.data[s+(d>>Fl)]|=1<<d}(s,o,u)}function Vl(s,o,u){if(u&_e.Optional||void 0!==s)return s;ne()}function qr(s,o,u,c){if(u&_e.Optional&&void 0===c&&(c=null),!(u&(_e.Self|_e.Host))){const d=s[Di],f=fn(void 0);try{return d?d.get(o,c,u&_e.Optional):nr(o,c,u&_e.Optional)}finally{fn(f)}}return Vl(c,0,u)}function Ul(s,o,u,c=_e.Default,d){if(null!==s){if(1024&o[wt]){const m=function Ko(s,o,u,c,d){let f=s,m=o;for(;null!==f&&null!==m&&1024&m[wt]&&!(256&m[wt]);){const E=Lu(f,m,u,c|_e.Self,Ts);if(E!==Ts)return E;let T=f.parent;if(!T){const x=m[Cl];if(x){const k=x.get(u,Ts,c);if(k!==Ts)return k}T=qm(m),m=m[Fn]}f=T}return d}(s,o,u,c,Ts);if(m!==Ts)return m}const f=Lu(s,o,u,c,Ts);if(f!==Ts)return f}return qr(o,u,c,d)}function Lu(s,o,u,c,d){const f=function p0(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Fo)?s[Fo]:void 0;return"number"==typeof o?o>=0?o&bf:Wm:o}(u);if("function"==typeof f){if(!Va(o,s,c))return c&_e.Host?Vl(d,0,c):qr(o,u,c,d);try{const m=f(c);if(null!=m||c&_e.Optional)return m;ne()}finally{Pl()}}else if("number"==typeof f){let m=null,E=Ll(s,o),T=gt,x=c&_e.Host?o[Yn][Tn]:null;for((-1===E||c&_e.SkipSelf)&&(T=-1===E?pd(s,o):o[E+8],T!==gt&&$l(c,!1)?(m=o[$e],E=Ou(T),o=qs(T,o)):E=-1);-1!==E;){const k=o[$e];if(g0(f,E,k.data)){const V=md(E,o,u,m,c,x);if(V!==Ts)return V}T=o[E+8],T!==gt&&$l(c,o[$e].data[E+8]===x)&&g0(f,E,o)?(m=k,E=Ou(T),o=qs(T,o)):E=-1}}return d}function md(s,o,u,c,d,f){const m=o[$e],E=m.data[s+8],k=Bl(E,m,u,null==c?fo(E)&&Ol:c!=m&&0!=(3&E.type),d&_e.Host&&f===E);return null!==k?Ds(o,m,k,E):Ts}function Bl(s,o,u,c,d){const f=s.providerIndexes,m=o.data,E=1048575&f,T=s.directiveStart,k=f>>20,H=d?E+k:s.directiveEnd;for(let q=c?E:E+k;q<H;q++){const oe=m[q];if(q<T&&u===oe||q>=T&&oe.type===u)return q}if(d){const q=m[T];if(q&&$r(q)&&q.type===u)return T}return null}function Ds(s,o,u,c){let d=s[u];const f=o.data;if(function Kt(s){return s instanceof un}(d)){const m=d;m.resolving&&function Fe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Se(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Xe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ce(s)}(f[u]));const E=Wo(m.canSeeViewProviders);m.resolving=!0;const T=m.injectImpl?fn(m.injectImpl):null;Va(s,c,_e.Default);try{d=s[u]=m.factory(void 0,f,s,c),o.firstCreatePass&&u>=c.directiveStart&&function B(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const m=po(o);(u.preOrderHooks??(u.preOrderHooks=[])).push(s,m),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,m)}d&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-s,d),f&&((u.preOrderHooks??(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==T&&fn(T),Wo(E),m.resolving=!1,Pl()}}return d}function g0(s,o,u){return!!(u[o+(s>>Fl)]&1<<s)}function $l(s,o){return!(s&_e.Self||s&_e.Host&&o)}class qo{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Ul(this._tNode,this._lView,o,nn(c),u)}}function Wm(){return new qo(Un(),pe())}function ni(s){return Y(()=>{const o=s.prototype.constructor,u=o[_s]||Vu(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const f=d[_s]||Vu(d);if(f&&f!==u)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Vu(s){return Ue(s)?()=>{const o=Vu(ze(s));return o&&o()}:Es(s)}function qm(s){const o=s[$e],u=o.type;return 2===u?o.declTNode:1===u?s[Tn]:null}function jl(s){return function zm(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const f=u[d];if($a(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(Un(),s)}const yo="__parameters__";function wo(s,o,u){return Y(()=>{const c=function Sf(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const m=new d(...f);return E.annotation=m,E;function E(T,x,k){const V=T.hasOwnProperty(yo)?T[yo]:Object.defineProperty(T,yo,{value:[]})[yo];for(;V.length<=k;)V.push(null);return(V[k]=V[k]||[]).push(m),T}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class pn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=tr({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ss(s,o){s.forEach(u=>Array.isArray(u)?Ss(u,o):o(u))}function Qm(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Gl(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function g(s,o,u){let c=S(s,o);return c>=0?s[1|c]=u:(c=~c,function y(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function I(s,o){const u=S(s,o);if(u>=0)return s[1|u]}function S(s,o){return function F(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const f=c+(d-c>>1),m=s[f<<u];if(o===m)return f<<u;m>o?d=f:c=f+1}return~(d<<u)}(s,o,1)}const Kr=Ur(wo("Optional"),8),Yo=Ur(wo("SkipSelf"),4);var Eo=(()=>((Eo=Eo||{})[Eo.Important=1]="Important",Eo[Eo.DashCase=2]="DashCase",Eo))();const Lf=new Map;let u_=0;const Ed="__ngContext__";function ri(s,o){Br(o)?(s[Ed]=o[ho],function c_(s){Lf.set(s[ho],s)}(o)):s[Ed]=o}let Id;function y_(s,o){return Id(s,o)}function zl(s){const o=s[on];return pi(o)?o[on]:o}function Cd(s){return I_(s[Si])}function E_(s){return I_(s[Kn])}function I_(s){for(;null!==s&&!pi(s);)s=s[Kn];return s}function Wl(s,o,u,c,d){if(null!=c){let f,m=!1;pi(c)?f=c:Br(c)&&(m=!0,c=c[Qi]);const E=Ln(c);0===s&&null!==u?null==d?zf(o,u,E):ju(o,u,E,d||null,!0):1===s&&null!==u?ju(o,u,E,d||null,!0):2===s?function V0(s,o,u){const c=Wf(s,o);c&&function k0(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,E,m):3===s&&o.destroyNode(E),null!=f&&function LD(s,o,u,c,d){const f=u[ba];f!==Ln(u)&&Wl(o,s,c,f,d);for(let E=yr;E<u.length;E++){const T=u[E];Td(T[$e],T,s,o,c,f)}}(o,s,f,u,d)}}function Bf(s,o,u){return s.createElement(o,u)}function $f(s,o){const u=s[$s],c=u.indexOf(o),d=o[on];512&o[wt]&&(o[wt]&=-513,Na(d,-1)),u.splice(c,1)}function D_(s,o){if(s.length<=yr)return;const u=yr+o,c=s[u];if(c){const d=c[Bo];null!==d&&d!==s&&$f(d,c),o>0&&(s[u-1][Kn]=c[Kn]);const f=Gl(s,yr+o);!function RD(s,o){Td(s,o,o[pt],2,null,null),o[Qi]=null,o[Tn]=null}(c[$e],c);const m=f[Ai];null!==m&&m.detachView(f[$e]),c[on]=null,c[Kn]=null,c[wt]&=-65}return c}function jf(s,o){if(!(128&o[wt])){const u=o[pt];u.destroyNode&&Td(s,o,u,3,null,null),function N0(s){let o=s[Si];if(!o)return Hf(s[$e],s);for(;o;){let u=null;if(Br(o))u=o[Si];else{const c=o[yr];c&&(u=c)}if(!u){for(;o&&!o[Kn]&&o!==s;)Br(o)&&Hf(o[$e],o),o=o[on];null===o&&(o=s),Br(o)&&Hf(o[$e],o),u=o&&o[Kn]}o=u}}(o)}}function Hf(s,o){if(!(128&o[wt])){o[wt]&=-65,o[wt]|=128,function kD(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof un)){const f=u[c+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const E=d[f[m]],T=f[m+1];gi(4,E,T);try{T.call(E)}finally{gi(5,E,T)}}else{gi(4,d,f);try{f.call(d)}finally{gi(5,d,f)}}}}}(s,o),function S_(s,o){const u=s.cleanup,c=o[ys];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const m=u[f+3];m>=0?c[d=m]():c[d=-m].unsubscribe(),f+=2}else{const m=c[d=u[f+1]];u[f].call(m)}if(null!==c){for(let f=d+1;f<c.length;f++)(0,c[f])();o[ys]=null}}(s,o),1===o[$e].type&&o[pt].destroy();const u=o[Bo];if(null!==u&&pi(o[on])){u!==o[on]&&$f(u,o);const c=o[Ai];null!==c&&c.detachView(s)}!function d_(s){Lf.delete(s[ho])}(o)}}function Gf(s,o,u){return function P0(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[Qi];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=s.data[c.directiveStart+d];if(f===he.None||f===he.Emulated)return null}return ti(c,u)}}(s,o.parent,u)}function ju(s,o,u,c,d){s.insertBefore(o,u,c,d)}function zf(s,o,u){s.appendChild(o,u)}function A_(s,o,u,c,d){null!==c?ju(s,o,u,c,d):zf(s,o,u)}function Wf(s,o){return s.parentNode(o)}let bd,P_,Xf,O0=function qf(s,o,u){return 40&s.type?ti(s,u):null};function Kf(s,o,u,c){const d=Gf(s,c,o),f=o[pt],E=function x_(s,o,u){return O0(s,o,u)}(c.parent||o[Tn],c,o);if(null!=d)if(Array.isArray(u))for(let T=0;T<u.length;T++)A_(f,d,u[T],E,!1);else A_(f,d,u,E,!1);void 0!==bd&&bd(f,c,o,u,d)}function M_(s,o){if(null!==o){const u=o.type;if(3&u)return ti(o,s);if(4&u)return L0(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return M_(s,c);{const d=s[o.index];return pi(d)?L0(-1,d):Ln(d)}}if(32&u)return y_(o,s)()||Ln(s[o.index]);{const c=Yf(s,o);return null!==c?Array.isArray(c)?c[0]:M_(zl(s[Yn]),c):M_(s,o.next)}}return null}function Yf(s,o){return null!==o?s[Yn][Tn].projection[o.projection]:null}function L0(s,o){const u=yr+s+1;if(u<o.length){const c=o[u],d=c[$e].firstChild;if(null!==d)return M_(c,d)}return o[ba]}function ql(s,o,u,c,d,f,m){for(;null!=u;){const E=c[u.index],T=u.type;if(m&&0===o&&(E&&ri(Ln(E),c),u.flags|=2),32!=(32&u.flags))if(8&T)ql(s,o,u.child,c,d,f,!1),Wl(o,s,d,E,f);else if(32&T){const x=y_(u,c);let k;for(;k=x();)Wl(o,s,d,k,f);Wl(o,s,d,E,f)}else 16&T?U0(s,o,c,u,d,f):Wl(o,s,d,E,f);u=m?u.projectionNext:u.next}}function Td(s,o,u,c,d,f){ql(u,c,s.firstChild,o,d,f,!1)}function U0(s,o,u,c,d,f){const m=u[Yn],T=m[Tn].projection[c.projection];if(Array.isArray(T))for(let x=0;x<T.length;x++)Wl(o,s,d,T[x],f);else ql(s,o,T,m[on],d,f,!0)}function B0(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function ii(s,o,u){const{mergedAttrs:c,classes:d,styles:f}=u;null!==c&&ns(s,o,c),null!==d&&B0(s,o,d),null!==f&&function Nr(s,o,u){s.setAttribute(o,"style",u)}(s,o,f)}function k_(s){P_=s}function G0(s){return function O_(){if(void 0===Xf&&(Xf=null,$t.trustedTypes))try{Xf=$t.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Xf}()?.createScriptURL(s)||s}class F_{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Je})`}}function Qo(s){return s instanceof F_?s.changingThisBreaksApplicationSecurity:s}function Hu(s,o){const u=function HD(s){return s instanceof F_&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${Je})`)}return u===o}const zD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var dr=(()=>((dr=dr||{})[dr.NONE=0]="NONE",dr[dr.HTML=1]="HTML",dr[dr.STYLE=2]="STYLE",dr[dr.SCRIPT=3]="SCRIPT",dr[dr.URL=4]="URL",dr[dr.RESOURCE_URL=5]="RESOURCE_URL",dr))();function G_(s){const o=Ad();return o?o.sanitize(dr.URL,s)||"":Hu(s,"URL")?Qo(s):function Dd(s){return(s=String(s)).match(zD)?s:"unsafe:"+s}(Ce(s))}function np(s){const o=Ad();if(o)return G0(o.sanitize(dr.RESOURCE_URL,s)||"");if(Hu(s,"ResourceURL"))return G0(Qo(s));throw new Se(904,!1)}function ZD(s,o,u){return function j1(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?np:G_}(o,u)(s)}function Ad(){const s=pe();return s&&s[Ia]}const eI=new pn("ENVIRONMENT_INITIALIZER"),W_=new pn("INJECTOR",-1),q_=new pn("INJECTOR_DEF_TYPES");class tI{get(o,u=Gt){if(u===Gt){const c=new Error(`NullInjectorError: No provider for ${rt(o)}!`);throw c.name="NullInjectorError",c}return u}}function QD(...s){return{\u0275providers:xd(0,s),\u0275fromNgModule:!0}}function xd(s,...o){const u=[],c=new Set;let d;return Ss(o,f=>{const m=f;rp(m,u,[],c)&&(d||(d=[]),d.push(m))}),void 0!==d&&nI(d,u),u}function nI(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];ip(d,f=>{o.push(f)})}}function rp(s,o,u,c){if(!(s=ze(s)))return!1;let d=null,f=uo(s);const m=!f&&xt(s);if(f||m){if(m&&!m.standalone)return!1;d=s}else{const T=s.ngModule;if(f=uo(T),!f)return!1;d=T}const E=c.has(d);if(m){if(E)return!1;if(c.add(d),m.dependencies){const T="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const x of T)rp(x,o,u,c)}}else{if(!f)return!1;{if(null!=f.imports&&!E){let x;c.add(d);try{Ss(f.imports,k=>{rp(k,o,u,c)&&(x||(x=[]),x.push(k))})}finally{}void 0!==x&&nI(x,o)}if(!E){const x=Es(d)||(()=>new d);o.push({provide:d,useFactory:x,deps:ct},{provide:q_,useValue:d,multi:!0},{provide:eI,useValue:()=>tn(d),multi:!0})}const T=f.providers;null==T||E||ip(T,k=>{o.push(k)})}}return d!==s&&void 0!==s.providers}function ip(s,o){for(let u of s)be(u)&&(u=u.\u0275providers),Array.isArray(u)?ip(u,o):o(u)}const Md=de({provide:String,useValue:de});function sp(s){return null!==s&&"object"==typeof s&&Md in s}function Yl(s){return"function"==typeof s}const sI=new pn("Set Injector scope."),Wa={},JD={};let op;function Rd(){return void 0===op&&(op=new tI),op}class ki{}class ap extends ki{get destroyed(){return this._destroyed}constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,oI(o,m=>this.processProvider(m)),this.records.set(W_,qa(void 0,this)),d.has("environment")&&this.records.set(ki,qa(void 0,this));const f=this.records.get(sI);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(q_.multi,ct,_e.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=ur(this),c=fn(void 0);try{return o()}finally{ur(u),fn(c)}}get(o,u=Gt,c=_e.Default){this.assertNotDestroyed(),c=nn(c);const d=ur(this),f=fn(void 0);try{if(!(c&_e.SkipSelf)){let E=this.records.get(o);if(void 0===E){const T=function z1(s){return"function"==typeof s||"object"==typeof s&&s instanceof pn}(o)&&Qe(o);E=T&&this.injectableDefInScope(T)?qa(Nd(o),Wa):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&_e.Self?Rd():this.parent).get(o,u=c&_e.Optional&&u===Gt?null:u)}catch(m){if("NullInjectorError"===m.name){if((m[ps]=m[ps]||[]).unshift(rt(o)),d)throw m;return function z(s,o,u,c){const d=s[ps];throw o[gs]&&d.unshift(o[gs]),s.message=function U(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==It?s.slice(2):s;let d=rt(o);if(Array.isArray(o))d=o.map(rt).join(" -> ");else if("object"==typeof o){let f=[];for(let m in o)if(o.hasOwnProperty(m)){let E=o[m];f.push(m+":"+("string"==typeof E?JSON.stringify(E):rt(E)))}d=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(mr,"\n  ")}`}("\n"+s.message,d,u,c),s[ko]=d,s[ps]=null,s}(m,o,"R3InjectorError",this.source)}throw m}finally{fn(f),ur(d)}}resolveInjectorInitializers(){const o=ur(this),u=fn(void 0);try{const c=this.get(eI.multi,ct,_e.Self);for(const d of c)d()}finally{ur(o),fn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(rt(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(o){let u=Yl(o=ze(o))?o:ze(o&&o.provide);const c=function Y_(s){return sp(s)?qa(void 0,s.useValue):qa(up(s),Wa)}(o);if(Yl(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=qa(void 0,Wa,!0),d.factory=()=>rn(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===Wa&&(u.value=JD,u.value=u.factory()),"object"==typeof u.value&&u.value&&function lp(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ze(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Nd(s){const o=Qe(s),u=null!==o?o.factory:Es(s);if(null!==u)return u;if(s instanceof pn)throw new Se(204,!1);if(s instanceof Function)return function K_(s){const o=s.length;if(o>0)throw function Ha(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Se(204,!1);const u=function bi(s){return s&&(s[qi]||s[ga])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Se(204,!1)}function up(s,o,u){let c;if(Yl(s)){const d=ze(s);return Es(d)||Nd(d)}if(sp(s))c=()=>ze(s.useValue);else if(function iI(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...rn(s.deps||[]));else if(function rI(s){return!(!s||!s.useExisting)}(s))c=()=>tn(ze(s.useExisting));else{const d=ze(s&&(s.useClass||s.provide));if(!function Z_(s){return!!s.deps}(s))return Es(d)||Nd(d);c=()=>new d(...rn(s.deps))}return c}function qa(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function oI(s,o){for(const u of s)Array.isArray(u)?oI(u,o):u&&be(u)?oI(u.\u0275providers,o):o(u)}class zu{}class Ka{}class Wu{resolveComponentFactory(o){throw function Zl(s){const o=Error(`No component factory found for ${rt(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Ys=(()=>{class s{}return s.NULL=new Wu,s})();function eS(){return xs(Un(),pe())}function xs(s,o){return new cp(ti(s,o))}let cp=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=eS,s})();function q1(s){return s instanceof cp?s.nativeElement:s}class aI{}let tS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function nS(){const s=pe(),u=Vn(Un().index,s);return(Br(u)?u:s)[pt]}(),s})(),Oi=(()=>{class s{}return s.\u0275prov=tr({token:s,providedIn:"root",factory:()=>null}),s})();class Zs{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ya=new Zs("15.2.9"),uI={},X_="ngOriginalError";function ey(s){return s[X_]}class Pd{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&ey(o);for(;u&&ey(u);)u=ey(u);return u||null}}function Za(s){return s instanceof Function?s():s}function Od(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||s.charCodeAt(d+f)<=32)return d}u=d+1}}const dp="ng-template";function uS(s,o,u){let c=0,d=!0;for(;c<s.length;){let f=s[c++];if("string"==typeof f&&d){const m=s[c++];if(u&&"class"===f&&-1!==Od(m.toLowerCase(),o,0))return!0}else{if(1===f){for(;c<s.length&&"string"==typeof(f=s[c++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function lI(s){return 4===s.type&&s.value!==dp}function lS(s,o,u){return o===(4!==s.type||u?s.value:dp)}function cI(s,o,u){let c=4;const d=s.attrs||[],f=function Yr(s){for(let o=0;o<s.length;o++)if($a(s[o]))return o;return s.length}(d);let m=!1;for(let E=0;E<o.length;E++){const T=o[E];if("number"!=typeof T){if(!m)if(4&c){if(c=2|1&c,""!==T&&!lS(s,T,u)||""===T&&1===o.length){if(Qs(c))return!1;m=!0}}else{const x=8&c?T:o[++E];if(8&c&&null!==s.attrs){if(!uS(s.attrs,x,u)){if(Qs(c))return!1;m=!0}continue}const V=cS(8&c?"class":T,d,lI(s),u);if(-1===V){if(Qs(c))return!1;m=!0;continue}if(""!==x){let H;H=V>f?"":d[V+1].toLowerCase();const q=8&c?H:null;if(q&&-1!==Od(q,x,0)||2&c&&x!==H){if(Qs(c))return!1;m=!0}}}}else{if(!m&&!Qs(c)&&!Qs(T))return!1;if(m&&Qs(T))continue;m=!1,c=T|1&c}}return Qs(c)||m}function Qs(s){return 0==(1&s)}function cS(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let f=!1;for(;d<o.length;){const m=o[d];if(m===s)return d;if(3===m||6===m)f=!0;else{if(1===m||2===m){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===m)break;if(0===m){d+=4;continue}}d+=f?1:2}return-1}return function hp(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function dI(s,o,u=!1){for(let c=0;c<o.length;c++)if(cI(s,o[c],u))return!0;return!1}function fp(s,o){return s?":not("+o.trim()+")":o}function pp(s){let o=s[0],u=1,c=2,d="",f=!1;for(;u<s.length;){let m=s[u];if("string"==typeof m)if(2&c){const E=s[++u];d+="["+m+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+m:4&c&&(d+=" "+m);else""!==d&&!Qs(m)&&(o+=fp(f,d),d=""),c=m,f=f||!Qs(c);u++}return""!==d&&(o+=fp(f,d)),o}const Ct={};function hI(s){iy(Ut(),pe(),Bn()+s,!1)}function iy(s,o,u,c){if(!c)if(3==(3&o[wt])){const f=s.preOrderCheckHooks;null!==f&&se(o,f,u)}else{const f=s.preOrderHooks;null!==f&&We(o,f,0,u)}_i(u)}function pI(s,o=null,u=null,c){const d=ay(s,o,u,c);return d.resolveInjectorInitializers(),d}function ay(s,o=null,u=null,c,d=new Set){const f=[u||ct,QD(s)];return c=c||("object"==typeof s?void 0:rt(s)),new ap(f,o||Rd(),c||null,d)}let Jo=(()=>{class s{static create(u,c){if(Array.isArray(u))return pI({name:""},c,u,"");{const d=u.name??"";return pI({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=Gt,s.NULL=new tI,s.\u0275prov=tr({token:s,providedIn:"any",factory:()=>tn(W_)}),s.__NG_ELEMENT_ID__=-1,s})();function Ql(s,o=_e.Default){const u=pe();return null===u?tn(s,o):Ul(Un(),u,ze(s),o)}function CI(){throw new Error("invalid")}function bI(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const f=u[c+1];if(-1!==f){const m=s.data[f];La(u[c]),m.contentQueries(2,o[f],f)}}}function Ud(s,o,u,c,d,f,m,E,T,x,k){const V=o.blueprint.slice();return V[Qi]=d,V[wt]=76|c,(null!==k||s&&1024&s[wt])&&(V[wt]|=1024),Tu(V),V[on]=V[Fn]=s,V[_n]=u,V[Ji]=m||s&&s[Ji],V[pt]=E||s&&s[pt],V[Ia]=T||s&&s[Ia]||null,V[Di]=x||s&&s[Di]||null,V[Tn]=f,V[ho]=function l_(){return u_++}(),V[Cl]=k,V[Yn]=2==o.type?s[Yn]:V,V}function Xa(s,o,u,c,d){let f=s.data[o];if(null===f)f=function gy(s,o,u,c,d){const f=Ho(),m=Su(),T=s.data[o]=function ok(s,o,u,c,d,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=T),null!==f&&(m?null==f.child&&null!==T.parent&&(f.child=T):null===f.next&&(f.next=T,T.prev=f)),T}(s,o,u,c,d),function Nl(){return dt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=u,f.value=c,f.attrs=d;const m=function mi(){const s=dt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return Cn(f,!0),f}function Bd(s,o,u,c){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function my(s,o,u){Ua(o);try{const c=s.viewQuery;null!==c&&si(1,c,u);const d=s.template;null!==d&&_y(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&bI(s,o),s.staticViewQueries&&si(2,s.viewQuery,u);const f=s.components;null!==f&&function TI(s,o){for(let u=0;u<o.length;u++)SS(s,o[u])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[wt]&=-5,Cs()}}function $d(s,o,u,c){const d=o[wt];if(128!=(128&d)){Ua(o);try{Tu(o),function Mu(s){return dt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&_y(s,o,u,2,c);const m=3==(3&d);if(m){const x=s.preOrderCheckHooks;null!==x&&se(o,x,null)}else{const x=s.preOrderHooks;null!==x&&We(o,x,0,null),Mt(o,0)}if(function yk(s){for(let o=Cd(s);null!==o;o=E_(o)){if(!o[bl])continue;const u=o[$s];for(let c=0;c<u.length;c++){const d=u[c];512&d[wt]||Na(d[on],1),d[wt]|=512}}}(o),function _k(s){for(let o=Cd(s);null!==o;o=E_(o))for(let u=yr;u<o.length;u++){const c=o[u],d=c[$e];Ra(c)&&$d(d,c,d.template,c[_n])}}(o),null!==s.contentQueries&&bI(s,o),m){const x=s.contentCheckHooks;null!==x&&se(o,x)}else{const x=s.contentHooks;null!==x&&We(o,x,1),Mt(o,1)}!function vS(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)_i(~d);else{const f=d,m=u[++c],E=u[++c];Ru(m,f),E(2,o[f])}}}finally{_i(-1)}}(s,o);const E=s.components;null!==E&&function Ip(s,o){for(let u=0;u<o.length;u++)MI(s,o[u])}(o,E);const T=s.viewQuery;if(null!==T&&si(2,T,c),m){const x=s.viewCheckHooks;null!==x&&se(o,x)}else{const x=s.viewHooks;null!==x&&We(o,x,2),Mt(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[wt]&=-41,512&o[wt]&&(o[wt]&=-513,Na(o[on],-1))}finally{Cs()}}}function _y(s,o,u,c,d){const f=Bn(),m=2&c;try{_i(-1),m&&o.length>dn&&iy(s,o,dn,!1),gi(m?2:0,d),u(c,d)}finally{_i(f),gi(m?3:1,d)}}function Cp(s,o,u){if(vu(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const m=s.data[f];m.contentQueries&&m.contentQueries(1,u[f],f)}}}function bp(s,o,u){sd()&&(function TS(s,o,u,c){const d=u.directiveStart,f=u.directiveEnd;fo(u)&&function pk(s,o,u){const c=ti(o,s),d=wS(u),f=s[Ji],m=Ey(s,Ud(s,d,null,u.onPush?32:16,c,o,f,f.createRenderer(c,u),null,null,null));s[o.index]=m}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||Fu(u,o),ri(c,o);const m=u.initialInputs;for(let E=d;E<f;E++){const T=s.data[E],x=Ds(o,s,E,u);ri(x,o),null!==m&&gk(0,E-d,x,T,0,m),$r(T)&&(Vn(u.index,o)[_n]=Ds(o,s,E,u))}}(s,o,u,ti(u,o)),64==(64&u.flags)&&AI(s,o,u))}function Tp(s,o,u=ti){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const m=c[f+1],E=-1===m?u(o,s):s[m];s[d++]=E}}}function wS(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=yy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function yy(s,o,u,c,d,f,m,E,T,x){const k=dn+c,V=k+d,H=function ik(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ct);return u}(k,V),q="function"==typeof x?x():x;return H[$e]={type:s,blueprint:H,template:u,queries:null,viewQuery:E,declTNode:o,data:H.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:T,consts:q,incompleteFirstPass:!1}}function Dp(s,o,u,c){const d=Cy(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&Yu(s).push(c,d.length-1))}function ES(s,o,u,c){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const f=s[d];null===c?DI(u,o,d,f):c.hasOwnProperty(d)&&DI(u,o,c[d],f)}return u}function DI(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function Fi(s,o,u,c,d,f,m,E){const T=ti(o,u);let k,x=o.inputs;!E&&null!=x&&(k=x[c])?(Ms(s,u,k,c,d),fo(o)&&function vy(s,o){const u=Vn(o,s);16&u[wt]||(u[wt]|=32)}(u,o.index)):3&o.type&&(c=function IS(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=m?m(d,o.value||"",c):d,f.setProperty(T,c,d))}function jd(s,o,u,c){if(sd()){const d=null===c?null:{"":-1},f=function lk(s,o){const u=s.directiveRegistry;let c=null,d=null;if(u)for(let f=0;f<u.length;f++){const m=u[f];if(dI(o,m.selectors,!1))if(c||(c=[]),$r(m))if(null!==m.findHostDirectiveDefs){const E=[];d=d||new Map,m.findHostDirectiveDefs(m,E,d),c.unshift(...E,m),wy(s,o,E.length)}else c.unshift(m),wy(s,o,0);else d=d||new Map,m.findHostDirectiveDefs?.(m,c,d),c.push(m)}return null===c?null:[c,d]}(s,u);let m,E;null===f?m=E=null:[m,E]=f,null!==m&&CS(s,o,u,m,d,E),d&&function ck(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new Se(-301,!1);c.push(o[d],f)}}}(u,c,d)}u.mergedAttrs=Ni(u.mergedAttrs,u.attrs)}function CS(s,o,u,c,d,f){for(let x=0;x<c.length;x++)gd(Fu(u,o),s,c[x].type);!function hk(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let x=0;x<c.length;x++){const k=c[x];k.providersResolver&&k.providersResolver(k)}let m=!1,E=!1,T=Bd(s,o,c.length,null);for(let x=0;x<c.length;x++){const k=c[x];u.mergedAttrs=Ni(u.mergedAttrs,k.hostAttrs),fk(s,u,o,T,k),dk(T,k,d),null!==k.contentQueries&&(u.flags|=4),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(u.flags|=64);const V=k.type.prototype;!m&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(u.index),m=!0),!E&&(V.ngOnChanges||V.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(u.index),E=!0),T++}!function SI(s,o,u){const d=o.directiveEnd,f=s.data,m=o.attrs,E=[];let T=null,x=null;for(let k=o.directiveStart;k<d;k++){const V=f[k],H=u?u.get(V):null,oe=H?H.outputs:null;T=ES(V.inputs,k,T,H?H.inputs:null),x=ES(V.outputs,k,x,oe);const we=null===T||null===m||lI(o)?null:mk(T,k,m);E.push(we)}null!==T&&(T.hasOwnProperty("class")&&(o.flags|=8),T.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=T,o.outputs=x}(s,u,f)}function AI(s,o,u){const c=u.directiveStart,d=u.directiveEnd,f=u.index,m=function Fa(){return dt.lFrame.currentDirectiveIndex}();try{_i(f);for(let E=c;E<d;E++){const T=s.data[E],x=o[E];go(E),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&uk(T,x)}}finally{_i(-1),go(m)}}function uk(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function wy(s,o,u){o.componentOffset=u,(s.components??(s.components=[])).push(o.index)}function dk(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;$r(o)&&(u[""]=s)}}function fk(s,o,u,c,d){s.data[c]=d;const f=d.factory||(d.factory=Es(d.type)),m=new un(f,$r(d),Ql);s.blueprint[c]=m,u[c]=m,function bS(s,o,u,c,d){const f=d.hostBindings;if(f){let m=s.hostBindingOpCodes;null===m&&(m=s.hostBindingOpCodes=[]);const E=~o.index;(function ak(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(m)!=E&&m.push(E),m.push(u,c,f)}}(s,o,c,Bd(s,u,d.hostVars,Ct),d)}function Xs(s,o,u,c,d,f){const m=ti(s,o);!function xI(s,o,u,c,d,f,m){if(null==f)s.removeAttribute(o,d,u);else{const E=null==m?Ce(f):m(f,c||"",d);s.setAttribute(o,d,E,u)}}(o[pt],m,f,s.value,u,c,d)}function gk(s,o,u,c,d,f){const m=f[o];if(null!==m){const E=c.setInput;for(let T=0;T<m.length;){const x=m[T++],k=m[T++],V=m[T++];null!==E?c.setInput(u,V,x,k):u[k]=V}}}function mk(s,o,u){let c=null,d=0;for(;d<u.length;){const f=u[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(s.hasOwnProperty(f)){null===c&&(c=[]);const m=s[f];for(let E=0;E<m.length;E+=2)if(m[E]===o){c.push(f,m[E+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function DS(s,o,u,c){return[s,!0,!1,o,null,0,c,u,null,null]}function MI(s,o){const u=Vn(o,s);if(Ra(u)){const c=u[$e];48&u[wt]?$d(c,u,c.template,u[_n]):u[Xi]>0&&RI(u)}}function RI(s){for(let c=Cd(s);null!==c;c=E_(c))for(let d=yr;d<c.length;d++){const f=c[d];if(Ra(f))if(512&f[wt]){const m=f[$e];$d(m,f,m.template,f[_n])}else f[Xi]>0&&RI(f)}const u=s[$e].components;if(null!==u)for(let c=0;c<u.length;c++){const d=Vn(u[c],s);Ra(d)&&d[Xi]>0&&RI(d)}}function SS(s,o){const u=Vn(o,s),c=u[$e];(function NI(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),my(c,u,u[_n])}function Ey(s,o){return s[Si]?s[Ca][Kn]=o:s[Si]=o,s[Ca]=o,o}function Ku(s){for(;s;){s[wt]|=32;const o=zl(s);if(vr(s)&&!o)return s;s=o}return null}function Sp(s,o,u,c=!0){const d=o[Ji];d.begin&&d.begin();try{$d(s,o,s.template,u)}catch(m){throw c&&Me(o,m),m}finally{d.end&&d.end()}}function si(s,o,u){La(0),o(s,u)}function Cy(s){return s[ys]||(s[ys]=[])}function Yu(s){return s.cleanup||(s.cleanup=[])}function Me(s,o){const u=s[Di],c=u?u.get(Pd,null):null;c&&c.handleError(o)}function Ms(s,o,u,c,d){for(let f=0;f<u.length;){const m=u[f++],E=u[f++],T=o[m],x=s.data[m];null!==x.setInput?x.setInput(T,d,c,E):T[E]=d}}function oi(s,o,u){const c=Ma(o,s);!function R0(s,o,u){s.setValue(o,u)}(s[pt],c,u)}function Ja(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let m=0;m<o.length;m++){const E=o[m];"number"==typeof E?f=E:1==f?d=Nt(d,E):2==f&&(c=Nt(c,E+": "+o[++m]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function Jl(s,o,u,c,d=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&c.push(Ln(f)),pi(f))for(let E=yr;E<f.length;E++){const T=f[E],x=T[$e].firstChild;null!==x&&Jl(T[$e],T,x,c)}const m=u.type;if(8&m)Jl(s,o,u.child,c);else if(32&m){const E=y_(u,o);let T;for(;T=E();)c.push(T)}else if(16&m){const E=Yf(o,u);if(Array.isArray(E))c.push(...E);else{const T=zl(o[Yn]);Jl(T[$e],T,E,c,!0)}}u=d?u.projectionNext:u.next}return c}class ec{get rootNodes(){const o=this._lView,u=o[$e];return Jl(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_n]}set context(o){this._lView[_n]=o}get destroyed(){return 128==(128&this._lView[wt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[on];if(pi(o)){const u=o[Ta],c=u?u.indexOf(this):-1;c>-1&&(D_(o,c),Gl(u,c))}this._attachedToViewContainer=!1}jf(this._lView[$e],this._lView)}onDestroy(o){Dp(this._lView[$e],this._lView,null,o)}markForCheck(){Ku(this._cdRefInjectingView||this._lView)}detach(){this._lView[wt]&=-65}reattach(){this._lView[wt]|=64}detectChanges(){Sp(this._lView[$e],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ND(s,o){Td(s,o,o[pt],2,null,null)}(this._lView[$e],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=o}}class AS extends ec{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Sp(o[$e],o,o[_n],!1)}checkNoChanges(){}get context(){return null}}class PI extends Ys{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=xt(o);return new Hd(u,this.ngModule)}}function tc(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class kI{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=nn(c);const d=this.injector.get(o,uI,c);return d!==uI||u===uI?d:this.parentInjector.get(o,u,c)}}class Hd extends Ka{get inputs(){return tc(this.componentDef.inputs)}get outputs(){return tc(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function gp(s){return s.map(pp).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,c,d){let f=(d=d||this.ngModule)instanceof ki?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new kI(o,f):o,E=m.get(aI,null);if(null===E)throw new Se(407,!1);const T=m.get(Oi,null),x=E.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",V=c?function sk(s,o,u){return s.selectRootElement(o,u===he.ShadowDom)}(x,c,this.componentDef.encapsulation):Bf(x,k,function by(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(k)),H=this.componentDef.onPush?288:272,q=yy(0,null,null,1,0,null,null,null,null,null),oe=Ud(null,q,null,H,null,null,E,x,T,m,null);let we,ke;Ua(oe);try{const je=this.componentDef;let nt,ge=null;je.findHostDirectiveDefs?(nt=[],ge=new Map,je.findHostDirectiveDefs(je,nt,ge),nt.push(je)):nt=[je];const _t=function Qn(s,o){const u=s[$e],c=dn;return s[c]=o,Xa(u,c,2,"#host",null)}(oe,V),An=function Ty(s,o,u,c,d,f,m,E){const T=d[$e];!function OI(s,o,u,c){for(const d of s)o.mergedAttrs=Ni(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Ja(o,o.mergedAttrs,!0),null!==u&&ii(c,u,o))}(c,s,o,m);const x=f.createRenderer(o,u),k=Ud(d,wS(u),null,u.onPush?32:16,d[s.index],s,f,x,E||null,null,null);return T.firstCreatePass&&wy(T,s,c.length-1),Ey(d,k),d[s.index]=k}(_t,V,je,nt,oe,E,x);ke=Hr(q,dn),V&&function ta(s,o,u,c){if(c)ns(s,u,["ng-version",Ya.full]);else{const{attrs:d,classes:f}=function ry(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++c]):8===d&&u.push(f);else{if(!Qs(d))break;d=f}c++}return{attrs:o,classes:u}}(o.selectors[0]);d&&ns(s,u,d),f&&f.length>0&&B0(s,u,f.join(" "))}}(x,je,V,c),void 0!==u&&function Sy(s,o,u){const c=s.projection=[];for(let d=0;d<o.length;d++){const f=u[d];c.push(null!=f?Array.from(f):null)}}(ke,this.ngContentSelectors,u),we=function Dy(s,o,u,c,d,f){const m=Un(),E=d[$e],T=ti(m,d);CS(E,d,m,u,null,c);for(let k=0;k<u.length;k++)ri(Ds(d,E,m.directiveStart+k,m),d);AI(E,d,m),T&&ri(T,d);const x=Ds(d,E,m.directiveStart+m.componentOffset,m);if(s[_n]=d[_n]=x,null!==f)for(const k of f)k(x,o);return Cp(E,m,s),x}(An,je,nt,ge,oe,[FI]),my(q,oe,null)}finally{Cs()}return new xS(this.componentType,we,xs(ke,oe),oe,ke)}}class xS extends zu{constructor(o,u,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new AS(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const f=this._rootLView;Ms(f[$e],f,d,o,u),Ku(Vn(this._tNode.index,f))}}get injector(){return new qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function FI(){const s=Un();ee(pe()[$e],s)}function Zu(s){let o=function LI(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if($r(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Se(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const m=s;m.inputs=Gd(s.inputs),m.declaredInputs=Gd(s.declaredInputs),m.outputs=Gd(s.outputs);const E=d.hostBindings;E&&NS(s,E);const T=d.viewQuery,x=d.contentQueries;if(T&&RS(s,T),x&&Ay(s,x),Ye(s.inputs,d.inputs),Ye(s.declaredInputs,d.declaredInputs),Ye(s.outputs,d.outputs),$r(d)&&d.data.animation){const k=s.data;k.animation=(k.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let m=0;m<f.length;m++){const E=f[m];E&&E.ngInherit&&E(s),E===Zu&&(u=!1)}}o=Object.getPrototypeOf(o)}!function MS(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Ni(d.hostAttrs,u=Ni(u,d.hostAttrs))}}(c)}function Gd(s){return s===ft?{}:s===ct?[]:s}function RS(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function Ay(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,f)=>{o(c,d,f),u(c,d,f)}:o}function NS(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}function Np(s){return!!Qu(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Qu(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ai(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function el(s,o,u,c){const d=pe();return ai(d,zr(),o)&&(Ut(),Xs(yn(),d,s,o,u,c)),el}function Rs(s,o,u,c){return ai(s,zr(),u)?o+Ce(u)+c:Ct}function tl(s,o,u,c,d,f){const E=function Ju(s,o,u,c){const d=ai(s,o,u);return ai(s,o+1,c)||d}(s,function ts(){return dt.lFrame.bindingIndex}(),u,d);return Mi(2),E?o+Ce(u)+c+Ce(d)+f:Ct}function Ly(s,o,u,c,d,f,m,E){const T=pe(),x=Ut(),k=s+dn,V=x.firstCreatePass?function LS(s,o,u,c,d,f,m,E,T){const x=o.consts,k=Xa(o,s,4,m||null,Gr(x,E));jd(o,u,k,Gr(x,T)),ee(o,k);const V=k.tView=yy(2,k,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,k),V.queries=o.queries.embeddedTView(k)),k}(k,x,T,o,u,c,d,f,m):x.data[k];Cn(V,!1);const H=T[pt].createComment("");Kf(x,T,H,V),ri(H,T),Ey(T,T[k]=DS(H,T,H,V)),xi(V)&&bp(x,T,V),null!=m&&Tp(T,V,E)}function Vy(s){return Is(function xu(){return dt.lFrame.contextLView}(),dn+s)}function Uy(s,o,u){const c=pe();return ai(c,zr(),o)&&Fi(Ut(),yn(),c,s,o,c[pt],u,!1),Uy}function Kd(s,o,u,c,d){const m=d?"class":"style";Ms(s,u,o.inputs[m],m,c)}function nc(s,o,u,c){const d=pe(),f=Ut(),m=dn+s,E=d[pt],T=f.firstCreatePass?function BI(s,o,u,c,d,f){const m=o.consts,T=Xa(o,s,2,c,Gr(m,d));return jd(o,u,T,Gr(m,f)),null!==T.attrs&&Ja(T,T.attrs,!1),null!==T.mergedAttrs&&Ja(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(m,f,d,o,u,c):f.data[m],x=d[m]=Bf(E,o,function P(){return dt.lFrame.currentNamespace}()),k=xi(T);return Cn(T,!0),ii(E,x,T),32!=(32&T.flags)&&Kf(f,d,x,T),0===function Ml(){return dt.lFrame.elementDepthCount}()&&ri(x,d),function Pa(){dt.lFrame.elementDepthCount++}(),k&&(bp(f,d,T),Cp(f,T,d)),null!==c&&Tp(d,T),nc}function Yd(){let s=Un();Su()?function Au(){dt.lFrame.isParent=!1}():(s=s.parent,Cn(s,!1));const o=s;!function ka(){dt.lFrame.elementDepthCount--}();const u=Ut();return u.firstCreatePass&&(ee(u,s),vu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function bs(s){return 0!=(8&s.flags)}(o)&&Kd(u,o,pe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Wr(s){return 0!=(16&s.flags)}(o)&&Kd(u,o,pe(),o.stylesWithoutHost,!1),Yd}function Op(s,o,u,c){return nc(s,o,u,c),Yd(),Op}function jI(){return pe()}function jy(s){return!!s&&"function"==typeof s.then}function HI(s){return!!s&&"function"==typeof s.subscribe}const Hy=HI;function bo(s,o,u,c){const d=pe(),f=Ut(),m=Un();return function GI(s,o,u,c,d,f,m){const E=xi(c),x=s.firstCreatePass&&Yu(s),k=o[_n],V=Cy(o);let H=!0;if(3&c.type||m){const we=ti(c,o),ke=m?m(we):we,je=V.length,nt=m?_t=>m(Ln(_t[c.index])):c.index;let ge=null;if(!m&&E&&(ge=function US(s,o,u,c){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const m=d[f];if(m===u&&d[f+1]===c){const E=o[ys],T=d[f+2];return E.length>T?E[T]:null}"string"==typeof m&&(f+=2)}return null}(s,o,d,c.index)),null!==ge)(ge.__ngLastListenerFn__||ge).__ngNextListenerFn__=f,ge.__ngLastListenerFn__=f,H=!1;else{f=Gy(c,o,k,f,!1);const _t=u.listen(ke,d,f);V.push(f,_t),x&&x.push(d,nt,je,je+1)}}else f=Gy(c,o,k,f,!1);const q=c.outputs;let oe;if(H&&null!==q&&(oe=q[d])){const we=oe.length;if(we)for(let ke=0;ke<we;ke+=2){const An=o[oe[ke]][oe[ke+1]].subscribe(f),ir=V.length;V.push(f,An),x&&x.push(d,c.index,ir,-(ir+1))}}}(f,d,d[pt],m,s,o,c),bo}function Er(s,o,u,c){try{return gi(6,o,u),!1!==u(c)}catch(d){return Me(s,d),!1}finally{gi(7,o,u)}}function Gy(s,o,u,c,d){return function f(m){if(m===Function)return c;Ku(s.componentOffset>-1?Vn(s.index,o):o);let T=Er(o,u,c,m),x=f.__ngNextListenerFn__;for(;x;)T=Er(o,u,x,m)&&T,x=x.__ngNextListenerFn__;return d&&!1===T&&(m.preventDefault(),m.returnValue=!1),T}}function zI(s=1){return function cd(s){return(dt.lFrame.contextLView=function Ef(s,o){for(;s>0;)o=o[Fn],s--;return o}(s,dt.lFrame.contextLView))[_n]}(s)}function zy(s,o,u){return Lp(s,"",o,"",u),zy}function Lp(s,o,u,c,d){const f=pe(),m=Rs(f,o,u,c);return m!==Ct&&Fi(Ut(),yn(),f,s,m,f[pt],d,!1),Lp}function rc(s,o){return s<<17|o<<2}function To(s){return s>>17&32767}function Zy(s){return 2|s}function ra(s){return(131068&s)>>2}function Qd(s,o){return-131069&s|o<<2}function Xd(s){return 1|s}function jp(s,o,u,c,d){const f=s[u+1],m=null===o;let E=c?To(f):ra(f),T=!1;for(;0!==E&&(!1===T||m);){const k=s[E+1];HS(s[E],o)&&(T=!0,s[E+1]=c?Xd(k):Zy(k)),E=c?To(k):ra(k)}T&&(s[u+1]=c?Zy(f):Xd(f))}function HS(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&S(s,o)>=0}const rr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ic(s){return s.substring(rr.key,rr.keyEnd)}function ZI(s,o){const u=rr.textEnd;return u===o?-1:(o=rr.keyEnd=function ev(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,rr.key=o,u),sc(s,o,u))}function sc(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function tv(s,o){return function Pr(s,o,u,c){const d=pe(),f=Ut(),m=Mi(2);f.firstUpdatePass&&WS(f,s,m,c),o!==Ct&&ai(d,m,o)&&iv(f,f.data[Bn()],d,d[pt],s,d[m+1]=function zp(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=rt(Qo(s)))),s}(o,u),c,m)}(s,o,null,!0),tv}function eo(s,o){for(let u=function Jy(s){return function Hp(s){rr.key=0,rr.keyEnd=0,rr.value=0,rr.valueEnd=0,rr.textEnd=s.length}(s),ZI(s,sc(s,0,rr.textEnd))}(o);u>=0;u=ZI(o,u))g(s,ic(o),!0)}function th(s,o){return o>=s.expandoStartIndex}function WS(s,o,u,c){const d=s.data;if(null===d[u+1]){const f=d[Bn()],m=th(s,u);sv(f,c)&&null===o&&!m&&(o=!1),o=function Ck(s,o,u,c){const d=function Nu(s){const o=dt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let f=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=il(u=nv(null,s,o,u,c),o.attrs,c),f=null);else{const m=o.directiveStylingLast;if(-1===m||s[m]!==d)if(u=nv(d,s,o,u,c),null===f){let T=function bk(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==ra(c))return s[To(c)]}(s,o,c);void 0!==T&&Array.isArray(T)&&(T=nv(null,s,o,T[1],c),T=il(T,o.attrs,c),function qS(s,o,u,c){s[To(u?o.classBindings:o.styleBindings)]=c}(s,o,c,T))}else f=function nh(s,o,u){let c;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)c=il(c,s[f].hostAttrs,u);return il(c,o.attrs,u)}(s,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),u}(d,f,o,c),function Xy(s,o,u,c,d,f){let m=f?o.classBindings:o.styleBindings,E=To(m),T=ra(m);s[c]=u;let k,x=!1;if(Array.isArray(u)?(k=u[1],(null===k||S(u,k)>0)&&(x=!0)):k=u,d)if(0!==T){const H=To(s[E+1]);s[c+1]=rc(H,E),0!==H&&(s[H+1]=Qd(s[H+1],c)),s[E+1]=function Yy(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=rc(E,0),0!==E&&(s[E+1]=Qd(s[E+1],c)),E=c;else s[c+1]=rc(T,0),0===E?E=c:s[T+1]=Qd(s[T+1],c),T=c;x&&(s[c+1]=Zy(s[c+1])),jp(s,k,c,!0),jp(s,k,c,!1),function jS(s,o,u,c,d){const f=d?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&S(f,o)>=0&&(u[c+1]=Xd(u[c+1]))}(o,k,s,c,f),m=rc(E,T),f?o.classBindings=m:o.styleBindings=m}(d,f,o,u,m,c)}}function nv(s,o,u,c,d){let f=null;const m=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<m&&(f=o[E],c=il(c,f.hostAttrs,d),f!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function il(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const m=o[f];"number"==typeof m?d=m:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),g(s,m,!!u||o[++f]))}return void 0===s?null:s}function iv(s,o,u,c,d,f,m,E){if(!(3&o.type))return;const T=s.data,x=T[E+1],k=function Qy(s){return 1==(1&s)}(x)?KS(T,o,u,d,ra(x),m):void 0;ac(k)||(ac(f)||function $p(s){return 2==(2&s)}(x)&&(f=KS(T,null,u,d,E,m)),function R_(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let f=-1===c.indexOf("-")?void 0:Eo.DashCase;null==d?s.removeStyle(u,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Eo.Important),s.setStyle(u,c,d,f))}}(c,m,Ma(Bn(),u),d,f))}function KS(s,o,u,c,d,f){const m=null===o;let E;for(;d>0;){const T=s[d],x=Array.isArray(T),k=x?T[1]:T,V=null===k;let H=u[d+1];H===Ct&&(H=V?ct:void 0);let q=V?I(H,c):k===c?H:void 0;if(x&&!ac(q)&&(q=I(T,c)),ac(q)&&(E=q,m))return E;const oe=s[d+1];d=m?To(oe):ra(oe)}if(null!==o){let T=f?o.residualClasses:o.residualStyles;null!=T&&(E=I(T,c))}return E}function ac(s){return void 0!==s}function sv(s,o){return 0!=(s.flags&(o?8:16))}function ov(s,o=""){const u=pe(),c=Ut(),d=s+dn,f=c.firstCreatePass?Xa(c,d,1,o,null):c.data[d],m=u[d]=function C_(s,o){return s.createText(o)}(u[pt],o);Kf(c,u,m,f),Cn(f,!1)}function eC(s){return uc("",s,""),eC}function uc(s,o,u){const c=pe(),d=Rs(c,s,o,u);return d!==Ct&&oi(c,Bn(),d),uc}function ih(s,o,u,c,d){const f=pe(),m=tl(f,s,o,u,c,d);return m!==Ct&&oi(f,Bn(),m),ih}function Zp(s,o,u){!function to(s,o,u,c){const d=Ut(),f=Mi(2);d.firstUpdatePass&&WS(d,null,f,c);const m=pe();if(u!==Ct&&ai(m,f,u)){const E=d.data[Bn()];if(sv(E,c)&&!th(d,f)){let T=c?E.classesWithoutHost:E.stylesWithoutHost;null!==T&&(u=Nt(T,u||"")),Kd(d,E,m,u,c)}else!function Ns(s,o,u,c,d,f,m,E){d===Ct&&(d=ct);let T=0,x=0,k=0<d.length?d[0]:null,V=0<f.length?f[0]:null;for(;null!==k||null!==V;){const H=T<d.length?d[T+1]:void 0,q=x<f.length?f[x+1]:void 0;let we,oe=null;k===V?(T+=2,x+=2,H!==q&&(oe=V,we=q)):null===V||null!==k&&k<V?(T+=2,oe=k):(x+=2,oe=V,we=q),null!==oe&&iv(s,o,u,c,oe,we,m,E),k=T<d.length?d[T]:null,V=x<f.length?f[x]:null}}(d,E,m,m[pt],m[f+1],m[f+1]=function Tk(s,o,u){if(null==u||""===u)return ct;const c=[],d=Qo(u);if(Array.isArray(d))for(let f=0;f<d.length;f++)s(c,d[f],!0);else if("object"==typeof d)for(const f in d)d.hasOwnProperty(f)&&s(c,f,d[f]);else"string"==typeof d&&o(c,d);return c}(s,o,u),c,f)}}(g,eo,Rs(pe(),s,o,u),!0)}const cc=void 0;var vv=["en",[["a","p"],["AM","PM"],cc],[["AM","PM"],cc,cc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],cc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],cc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",cc,"{1} 'at' {0}",cc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function xk(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let dc={};function sC(s){const o=function nA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=ng(o);if(u)return u;const c=o.split("-")[0];if(u=ng(c),u)return u;if("en"===c)return vv;throw new Se(701,!1)}function tA(s){return sC(s)[ht.PluralCase]}function ng(s){return s in dc||(dc[s]=$t.ng&&$t.ng.common&&$t.ng.common.locales&&$t.ng.common.locales[s]),dc[s]}var ht=(()=>((ht=ht||{})[ht.LocaleId=0]="LocaleId",ht[ht.DayPeriodsFormat=1]="DayPeriodsFormat",ht[ht.DayPeriodsStandalone=2]="DayPeriodsStandalone",ht[ht.DaysFormat=3]="DaysFormat",ht[ht.DaysStandalone=4]="DaysStandalone",ht[ht.MonthsFormat=5]="MonthsFormat",ht[ht.MonthsStandalone=6]="MonthsStandalone",ht[ht.Eras=7]="Eras",ht[ht.FirstDayOfWeek=8]="FirstDayOfWeek",ht[ht.WeekendRange=9]="WeekendRange",ht[ht.DateFormat=10]="DateFormat",ht[ht.TimeFormat=11]="TimeFormat",ht[ht.DateTimeFormat=12]="DateTimeFormat",ht[ht.NumberSymbols=13]="NumberSymbols",ht[ht.NumberFormats=14]="NumberFormats",ht[ht.CurrencyCode=15]="CurrencyCode",ht[ht.CurrencySymbol=16]="CurrencySymbol",ht[ht.CurrencyName=17]="CurrencyName",ht[ht.Currencies=18]="Currencies",ht[ht.Directionality=19]="Directionality",ht[ht.PluralCase=20]="PluralCase",ht[ht.ExtraData=21]="ExtraData",ht))();const eu="en-US";let rg=eu;function hh(s,o,u,c,d){if(s=ze(s),Array.isArray(s))for(let f=0;f<s.length;f++)hh(s[f],o,u,c,d);else{const f=Ut(),m=pe();let E=Yl(s)?s:ze(s.provide),T=up(s);const x=Un(),k=1048575&x.providerIndexes,V=x.directiveStart,H=x.providerIndexes>>20;if(Yl(s)||!s.multi){const q=new un(T,d,Ql),oe=IC(E,o,d?k:k+H,V);-1===oe?(gd(Fu(x,m),f,E),EC(f,s,o.length),o.push(E),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),u.push(q),m.push(q)):(u[oe]=q,m[oe]=q)}else{const q=IC(E,o,k+H,V),oe=IC(E,o,k,k+H),ke=oe>=0&&u[oe];if(d&&!ke||!d&&!(q>=0&&u[q])){gd(Fu(x,m),f,E);const je=function kv(s,o,u,c,d){const f=new un(s,u,Ql);return f.multi=[],f.index=o,f.componentProviders=0,hg(f,d,c&&!u),f}(d?Gk:Pv,u.length,d,c,T);!d&&ke&&(u[oe].providerFactory=je),EC(f,s,o.length,0),o.push(E),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),u.push(je),m.push(je)}else EC(f,s,q>-1?q:oe,hg(u[d?oe:q],T,!d&&c));!d&&c&&ke&&u[oe].componentProviders++}}}function EC(s,o,u,c){const d=Yl(o),f=function XD(s){return!!s.useClass}(o);if(d||f){const T=(f?ze(o.useClass):o).prototype.ngOnDestroy;if(T){const x=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const k=x.indexOf(u);-1===k?x.push(u,[c,T]):x[k+1].push(c,T)}else x.push(u,T)}}}function hg(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function IC(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function Pv(s,o,u,c){return fh(this.multi,[])}function Gk(s,o,u,c){const d=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,E=Ds(u,u[$e],this.providerFactory.index,c);f=E.slice(0,m),fh(d,f);for(let T=m;T<E.length;T++)f.push(E[T])}else f=[],fh(d,f);return f}function fh(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function fg(s,o=[]){return u=>{u.providersResolver=(c,d)=>function RA(s,o,u){const c=Ut();if(c.firstCreatePass){const d=$r(s);hh(u,c.data,c.blueprint,d,!0),hh(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class ph{}class pg{}function zk(s,o){return new gg(s,o??null)}class gg extends ph{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new PI(this);const c=_r(o);this._bootstrapComponents=Za(c.bootstrap),this._r3Injector=ay(o,u,[{provide:ph,useValue:this},{provide:Ys,useValue:this.componentFactoryResolver}],rt(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Ov extends pg{constructor(o){super(),this.moduleType=o}create(o){return new gg(this.moduleType,o)}}class NA extends ph{constructor(o,u,c){super(),this.componentFactoryResolver=new PI(this),this.instance=null;const d=new ap([...o,{provide:ph,useValue:this},{provide:Ys,useValue:this.componentFactoryResolver}],u||Rd(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Fv(s,o,u=null){return new NA(s,o,u).injector}let Lv=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=xd(0,u.type),d=c.length>0?Fv([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=tr({token:s,providedIn:"environment",factory:()=>new s(tn(ki))}),s})();function CC(s){s.getStandaloneInjector=o=>o.get(Lv).getOrCreateStandaloneInjector(s)}function BA(s,o,u,c,d,f){const m=o+u;return ai(s,m,d)?function Co(s,o,u){return s[o]=u}(s,m+1,f?c.call(f,d):c(d)):function sl(s,o){const u=s[o];return u===Ct?void 0:u}(s,m+1)}function wg(s,o){const u=Ut();let c;const d=s+dn;u.firstCreatePass?(c=function $A(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}}(o,u.pipeRegistry),u.data[d]=c,c.onDestroy&&(u.destroyHooks??(u.destroyHooks=[])).push(d,c.onDestroy)):c=u.data[d];const f=c.factory||(c.factory=Es(c.type)),m=fn(Ql);try{const E=Wo(!1),T=f();return Wo(E),function VS(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,pe(),d,T),T}finally{fn(m)}}function Wv(s,o,u){const c=s+dn,d=pe(),f=Is(d,c);return function gh(s,o){return s[$e].data[o].pure}(d,c)?BA(d,function xr(){const s=dt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,f.transform,u,f):f.transform(u)}function Kv(s){return o=>{setTimeout(s,void 0,o)}}const Ps=class GA extends M.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,f=u||(()=>null),m=c;if(o&&"object"==typeof o){const T=o;d=T.next?.bind(T),f=T.error?.bind(T),m=T.complete?.bind(T)}this.__isAsync&&(f=Kv(f),d&&(d=Kv(d)),m&&(m=Kv(m)));const E=super.subscribe({next:d,error:f,complete:m});return o instanceof w.w0&&o.add(E),E}};function zA(){return this._results[Symbol.iterator]()}class Yv{get changes(){return this._changes||(this._changes=new Ps)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Yv.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=zA)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=function is(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function v0(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],f=o[c];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let gc=(()=>{class s{}return s.__NG_ELEMENT_ID__=qA,s})();const WA=gc,Eg=class extends WA{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tView,d=Ud(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[Bo]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[Ai];return null!==m&&(d[Ai]=m.createEmbeddedView(c)),my(c,d,o),new ec(d)}};function qA(){return Ig(Un(),pe())}function Ig(s,o){return 4&s.type?new Eg(o,s,xs(s,o)):null}let Cg=(()=>{class s{}return s.__NG_ELEMENT_ID__=KA,s})();function KA(){return bg(Un(),pe())}const YA=Cg,MC=class extends YA{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return xs(this._hostTNode,this._hostLView)}get injector(){return new qo(this._hostTNode,this._hostLView)}get parentInjector(){const o=pd(this._hostTNode,this._hostLView);if(hd(o)){const u=qs(o,this._hostLView),c=Ou(o);return new qo(u[$e].data[c+8],u)}return new qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=RC(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-yr}createEmbeddedView(o,u,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const m=o.createEmbeddedView(u||{},f);return this.insert(m,d),m}createComponent(o,u,c,d,f){const m=o&&!function Hl(s){return"function"==typeof s}(o);let E;if(m)E=u;else{const V=u||{};E=V.index,c=V.injector,d=V.projectableNodes,f=V.environmentInjector||V.ngModuleRef}const T=m?o:new Hd(xt(o)),x=c||this.parentInjector;if(!f&&null==T.ngModule){const H=(m?x:this.parentInjector).get(ki,null);H&&(f=H)}const k=T.create(x,d,void 0,f);return this.insert(k.hostView,E),k}insert(o,u){const c=o._lView,d=c[$e];if(function bu(s){return pi(s[on])}(c)){const k=this.indexOf(o);if(-1!==k)this.detach(k);else{const V=c[on],H=new MC(V,V[Tn],V[on]);H.detach(H.indexOf(o))}}const f=this._adjustIndex(u),m=this._lContainer;!function T_(s,o,u,c){const d=yr+c,f=u.length;c>0&&(u[d-1][Kn]=o),c<f-yr?(o[Kn]=u[d],Qm(u,yr+c,o)):(u.push(o),o[Kn]=null),o[on]=u;const m=o[Bo];null!==m&&u!==m&&function PD(s,o){const u=s[$s];o[Yn]!==o[on][on][Yn]&&(s[bl]=!0),null===u?s[$s]=[o]:u.push(o)}(m,o);const E=o[Ai];null!==E&&E.insertView(s),o[wt]|=64}(d,c,m,f);const E=L0(f,m),T=c[pt],x=Wf(T,m[ba]);return null!==x&&function b_(s,o,u,c,d,f){c[Qi]=d,c[Tn]=o,Td(s,c,u,1,d,f)}(d,m[Tn],T,c,x,E),o.attachToViewContainerRef(),Qm(Zv(m),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=RC(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=D_(this._lContainer,u);c&&(Gl(Zv(this._lContainer),u),jf(c[$e],c))}detach(o){const u=this._adjustIndex(o,-1),c=D_(this._lContainer,u);return c&&null!=Gl(Zv(this._lContainer),u)?new ec(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function RC(s){return s[Ta]}function Zv(s){return s[Ta]||(s[Ta]=[])}function bg(s,o){let u;const c=o[s.index];if(pi(c))u=c;else{let d;if(8&s.type)d=Ln(c);else{const f=o[pt];d=f.createComment("");const m=ti(s,o);ju(f,Wf(f,m),d,function OD(s,o){return s.nextSibling(o)}(f,m),!1)}o[s.index]=u=DS(c,o,d,s),Ey(o,u)}return new MC(u,s,o)}class Qv{constructor(o){this.queryList=o,this.matches=null}clone(){return new Qv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<c;f++){const m=u.getByIndex(f);d.push(this.queries[m.indexInDeclarationView].clone())}return new Xv(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==tx(o,u).matches&&this.queries[u].setDirty()}}class NC{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Jv{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new Jv(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ew{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new ew(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,u,PC(u,f)),this.matchTNodeWithReadOption(o,u,Bl(u,o,f,!1,!1))}else c===gc?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Bl(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===cp||d===Cg||d===gc&&4&u.type)this.addMatch(u.index,-2);else{const f=Bl(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function PC(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function QA(s,o,u,c){return-1===u?function ZA(s,o){return 11&s.type?xs(s,o):4&s.type?Ig(s,o):null}(o,s):-2===u?function XA(s,o,u){return u===cp?xs(o,s):u===gc?Ig(o,s):u===Cg?bg(o,s):void 0}(s,o,c):Ds(s,s[$e],u,o)}function kC(s,o,u,c){const d=o[Ai].queries[c];if(null===d.matches){const f=s.data,m=u.matches,E=[];for(let T=0;T<m.length;T+=2){const x=m[T];E.push(x<0?null:QA(o,f[x],m[T+1],u.metadata.read))}d.matches=E}return d.matches}function tw(s,o,u,c){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const m=kC(s,o,d,u);for(let E=0;E<f.length;E+=2){const T=f[E];if(T>0)c.push(m[E/2]);else{const x=f[E+1],k=o[-T];for(let V=yr;V<k.length;V++){const H=k[V];H[Bo]===H[on]&&tw(H[$e],H,x,c)}if(null!==k[$s]){const V=k[$s];for(let H=0;H<V.length;H++){const q=V[H];tw(q[$e],q,x,c)}}}}}return c}function nw(s){const o=pe(),u=Ut(),c=Pu();La(c+1);const d=tx(u,c);if(s.dirty&&function wf(s){return 4==(4&s[wt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?tw(u,o,c,[]):kC(u,o,d,c);s.reset(f,q1),s.notifyOnChanges()}return!0}return!1}function OC(s,o,u,c){const d=Ut();if(d.firstCreatePass){const f=Un();(function ex(s,o,u){null===s.queries&&(s.queries=new Jv),s.queries.track(new ew(o,u))})(d,new NC(o,u,c),f.index),function LC(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function FC(s,o,u){const c=new Yv(4==(4&u));Dp(s,o,c,c.destroy),null===o[Ai]&&(o[Ai]=new Xv),o[Ai].queries.push(new Qv(c))}(d,pe(),u)}function Tg(){return function JA(s,o){return s[Ai].queries[o].queryList}(pe(),Pu())}function tx(s,o){return s.queries.getByIndex(o)}function nx(s,o){return Ig(s,o)}function iw(s){return!!_r(s)}function aw(...s){}const yx=new pn("Application Initializer");let uw=(()=>{class s{constructor(u){this.appInits=u,this.resolve=aw,this.reject=aw,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(jy(f))u.push(f);else if(Hy(f)){const m=new Promise((E,T)=>{f.subscribe({complete:E,error:T})});u.push(m)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(tn(yx,8))},s.\u0275prov=tr({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const vx=new pn("AppId",{providedIn:"root",factory:function wx(){return`${WC()}${WC()}${WC()}`}});function WC(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ex=new pn("Platform Initializer"),fO=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let gO=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tr({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const lw=new pn("LocaleId",{providedIn:"root",factory:()=>_u(lw,_e.Optional|_e.SkipSelf)||function mO(){return typeof $localize<"u"&&$localize.locale||eu}()}),_O=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class yO{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let vO=(()=>{class s{compileModuleSync(u){return new Ov(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),f=Za(_r(u).declarations).reduce((m,E)=>{const T=xt(E);return T&&m.push(new Hd(T)),m},[]);return new yO(c,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tr({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const vh=(()=>Promise.resolve(0))();function dw(s){typeof Zone>"u"?vh.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ks{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ps(!1),this.onMicrotaskEmpty=new Ps(!1),this.onStable=new Ps(!1),this.onError=new Ps(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function hw(){let s=$t.requestAnimationFrame,o=$t.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Or(s){const o=()=>{!function Mg(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call($t,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Ao(s),s.isCheckStableRunning=!0,kr(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Ao(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,f,m,E)=>{try{return qC(s),u.invokeTask(d,f,m,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),fw(s)}},onInvoke:(u,c,d,f,m,E,T)=>{try{return qC(s),u.invoke(d,f,m,E,T)}finally{s.shouldCoalesceRunChangeDetection&&o(),fw(s)}},onHasTask:(u,c,d,f)=>{u.hasTask(d,f),c===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,Ao(s),kr(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ks.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(ks.isInAngularZone())throw new Se(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+d,o,Cx,aw,aw);try{return f.runTask(m,u,c)}finally{f.cancelTask(m)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Cx={};function kr(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Ao(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function qC(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function fw(s){s._nesting--,kr(s)}class pw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ps,this.onMicrotaskEmpty=new Ps,this.onStable=new Ps,this.onError=new Ps}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const gw=new pn(""),Qr=new pn("");let Eh,bx=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Eh||(function KC(s){Eh=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ks.assertNotInAngularZone(),dw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(tn(ks),tn(wh),tn(Qr))},s.\u0275prov=tr({token:s,factory:s.\u0275fac}),s})(),wh=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Eh?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tr({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Os=!1;let Xr=null;const Rg=new pn("AllowMultipleToken"),Ng=new pn("PlatformDestroyListeners"),YC=new pn("appBootstrapListener");class ZC{constructor(o,u){this.name=o,this.token=u}}function Pg(s,o,u=[]){const c=`Platform: ${o}`,d=new pn(c);return(f=[])=>{let m=Ch();if(!m||m.injector.get(Rg,!1)){const E=[...u,...f,{provide:d,useValue:!0}];s?s(E):function Dx(s){if(Xr&&!Xr.get(Rg,!1))throw new Se(400,!1);Xr=s;const o=s.get(yw);(function Ih(s){const o=s.get(Ex,null);o&&o.forEach(u=>u())})(s)}(function JC(s=[],o){return Jo.create({name:o,providers:[{provide:sI,useValue:"platform"},{provide:Ng,useValue:new Set([()=>Xr=null])},...s]})}(E,c))}return function _w(s){const o=Ch();if(!o)throw new Se(401,!1);return o}()}}function Ch(){return Xr?.get(yw)??null}let yw=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function vc(s,o){let u;return u="noop"===s?new pw:("zone.js"===s?void 0:s)||new ks(o),u}(c?.ngZone,function eb(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:ks,useValue:d}];return d.run(()=>{const m=Jo.create({providers:f,parent:this.injector,name:u.moduleType.name}),E=u.create(m),T=E.injector.get(Pd,null);if(!T)throw new Se(402,!1);return d.runOutsideAngular(()=>{const x=d.onError.subscribe({next:k=>{T.handleError(k)}});E.onDestroy(()=>{Og(this._modules,E),x.unsubscribe()})}),function tb(s,o,u){try{const c=u();return jy(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(T,d,()=>{const x=E.injector.get(uw);return x.runInitializers(),x.donePromise.then(()=>(function rA(s){En(s,"Expected localeId to be defined"),"string"==typeof s&&(rg=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(lw,eu)||eu),this._moduleDoBootstrap(E),E))})})}bootstrapModule(u,c=[]){const d=wc({},c);return function yc(s,o,u){const c=new Ov(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const c=u.injector.get(kg);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Se(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Ng,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(tn(Jo))},s.\u0275prov=tr({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function wc(s,o){return Array.isArray(o)?o.reduce(wc,s):{...s,...o}}let kg=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new X.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),m=new X.y(E=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{ks.assertNotInAngularZone(),dw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{ks.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{T.unsubscribe(),x.unsubscribe()}});this.isStable=function Re(...s){const o=(0,De.yG)(s),u=(0,De._6)(s,1/0),c=s;return c.length?1===c.length?(0,ue.Xf)(c[0]):(0,O.J)(u)((0,Ke.D)(c,o)):Z.E}(f,m.pipe(function Ae(s={}){const{connector:o=(()=>new M.x),resetOnError:u=!0,resetOnComplete:c=!0,resetOnRefCountZero:d=!0}=s;return f=>{let m,E,T,x=0,k=!1,V=!1;const H=()=>{E?.unsubscribe(),E=void 0},q=()=>{H(),m=T=void 0,k=V=!1},oe=()=>{const we=m;q(),we?.unsubscribe()};return(0,le.e)((we,ke)=>{x++,!V&&!k&&H();const je=T=T??o();ke.add(()=>{x--,0===x&&!V&&!k&&(E=mt(oe,d))}),je.subscribe(ke),!m&&x>0&&(m=new ye.Hp({next:nt=>je.next(nt),error:nt=>{V=!0,H(),E=mt(q,u,nt),je.error(nt)},complete:()=>{k=!0,H(),E=mt(q,c),je.complete()}}),(0,ue.Xf)(we).subscribe(m))})(f)}}()))}bootstrap(u,c){const d=u instanceof Ka;if(!this._injector.get(uw).done){!d&&Bs(u);throw new Se(405,Os)}let m;m=d?u:this._injector.get(Ys).resolveComponentFactory(u),this.componentTypes.push(m.componentType);const E=function mw(s){return s.isBoundToModule}(m)?void 0:this._injector.get(ph),x=m.create(Jo.NULL,[],c||m.selector,E),k=x.location.nativeElement,V=x.injector.get(gw,null);return V?.registerApplication(k),x.onDestroy(()=>{this.detachView(x.hostView),Og(this.components,x),V?.unregisterApplication(k)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Se(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Og(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(YC,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Og(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Se(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(tn(ks),tn(ki),tn(Pd))},s.\u0275prov=tr({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Og(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let Ew=(()=>{class s{}return s.__NG_ELEMENT_ID__=Iw,s})();function Iw(s){return function Cw(s,o,u){if(fo(s)&&!u){const c=Vn(s.index,o);return new ec(c,c)}return 47&s.type?new ec(o[Yn],o):null}(Un(),pe(),16==(16&s))}class rb{constructor(){}supports(o){return Np(o)}create(o){return new ib(o)}}const xw=(s,o)=>o;class ib{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||xw}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,f=null;for(;u||c;){const m=!c||u&&u.currentIndex<Bg(c,d,f)?u:c,E=Bg(m,d,f),T=m.currentIndex;if(m===c)d--,c=c._nextRemoved;else if(u=u._next,null==m.previousIndex)d++;else{f||(f=[]);const x=E-d,k=T-d;if(x!=k){for(let H=0;H<x;H++){const q=H<f.length?f[H]:f[H]=0,oe=q+H;k<=oe&&oe<x&&(f[H]=q+1)}f[m.previousIndex]=k-x}}E!==T&&o(m,E,T)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Np(o))throw new Se(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,m,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],m=this._trackByFn(E,f),null!==u&&Object.is(u.trackById,m)?(c&&(u=this._verifyReinsertion(u,f,m,E)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,m,E),c=!0),u=u._next}else d=0,function UI(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{m=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,m)?(c&&(u=this._verifyReinsertion(u,E,m,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,m,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new Fx(u,c),f,d),o}_verifyReinsertion(o,u,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ug),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ug),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Fx{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Vg{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Ug{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new Vg,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Bg(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class Mw{constructor(){}supports(o){return o instanceof Map||Qu(o)}create(){return new Lx}}class Lx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Qu(o)))throw new Se(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,m=d._next;return f&&(f._next=m),m&&(m._prev=f),d._next=null,d._prev=null,d}const c=new Sh(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Sh{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Rw(){return new $g([new rb])}let $g=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Rw()),deps:[[s,new Yo,new Kr]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Se(901,!1)}}return s.\u0275prov=tr({token:s,providedIn:"root",factory:Rw}),s})();function Ah(){return new Nw([new Mw])}let Nw=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Ah()),deps:[[s,new Yo,new Kr]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new Se(901,!1)}}return s.\u0275prov=tr({token:s,providedIn:"root",factory:Ah}),s})();const al=Pg(null,"core",[]);let sb=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(tn(kg))},s.\u0275mod=Yi({type:s}),s.\u0275inj=No({}),s})();function jg(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},481:(yt,Te,j)=>{j.d(Te,{Dx:()=>en,b2:()=>bi,q6:()=>No});var M=j(895),w=j(256);class X extends M.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class O extends X{static makeCurrent(){(0,M.HT)(new O)}onAndCancel(z,U,Y){return z.addEventListener(U,Y,!1),()=>{z.removeEventListener(U,Y,!1)}}dispatchEvent(z,U){z.dispatchEvent(U)}remove(z){z.parentNode&&z.parentNode.removeChild(z)}createElement(z,U){return(U=U||this.getDefaultDocument()).createElement(z)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(z){return z.nodeType===Node.ELEMENT_NODE}isShadowRoot(z){return z instanceof DocumentFragment}getGlobalEventTarget(z,U){return"window"===U?window:"document"===U?z:"body"===U?z.body:null}getBaseHref(z){const U=function Z(){return ue=ue||document.querySelector("base"),ue?ue.getAttribute("href"):null}();return null==U?null:function Ke(J){De=De||document.createElement("a"),De.setAttribute("href",J);const z=De.pathname;return"/"===z.charAt(0)?z:`/${z}`}(U)}resetBaseElement(){ue=null}getUserAgent(){return window.navigator.userAgent}getCookie(z){return(0,M.Mx)(document.cookie,z)}}let De,ue=null;const Re=new w.OlP("TRANSITION_ID"),le=[{provide:w.ip1,useFactory:function ye(J,z,U){return()=>{U.get(w.CZH).donePromise.then(()=>{const Y=(0,M.q)(),ae=z.querySelectorAll(`style[ng-transition="${J}"]`);for(let he=0;he<ae.length;he++)Y.remove(ae[he])})}},deps:[Re,M.K0,w.zs3],multi:!0}];let mt=(()=>{class J{build(){return new XMLHttpRequest}}return J.\u0275fac=function(U){return new(U||J)},J.\u0275prov=w.Yz7({token:J,factory:J.\u0275fac}),J})();const de=new w.OlP("EventManagerPlugins");let Ye=(()=>{class J{constructor(U,Y){this._zone=Y,this._eventNameToPlugin=new Map,U.forEach(ae=>{ae.manager=this}),this._plugins=U.slice().reverse()}addEventListener(U,Y,ae){return this._findPluginFor(Y).addEventListener(U,Y,ae)}addGlobalEventListener(U,Y,ae){return this._findPluginFor(Y).addGlobalEventListener(U,Y,ae)}getZone(){return this._zone}_findPluginFor(U){const Y=this._eventNameToPlugin.get(U);if(Y)return Y;const ae=this._plugins;for(let he=0;he<ae.length;he++){const ft=ae[he];if(ft.supports(U))return this._eventNameToPlugin.set(U,ft),ft}throw new Error(`No event manager plugin found for event ${U}`)}}return J.\u0275fac=function(U){return new(U||J)(w.LFG(de),w.LFG(w.R0b))},J.\u0275prov=w.Yz7({token:J,factory:J.\u0275fac}),J})();class rt{constructor(z){this._doc=z}addGlobalEventListener(z,U,Y){const ae=(0,M.q)().getGlobalEventTarget(this._doc,z);if(!ae)throw new Error(`Unsupported event target ${ae} for event ${U}`);return this.addEventListener(ae,U,Y)}}let Nt=(()=>{class J{constructor(){this.usageCount=new Map}addStyles(U){for(const Y of U)1===this.changeUsageCount(Y,1)&&this.onStyleAdded(Y)}removeStyles(U){for(const Y of U)0===this.changeUsageCount(Y,-1)&&this.onStyleRemoved(Y)}onStyleRemoved(U){}onStyleAdded(U){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(U,Y){const ae=this.usageCount;let he=ae.get(U)??0;return he+=Y,he>0?ae.set(U,he):ae.delete(U),he}ngOnDestroy(){for(const U of this.getAllStyles())this.onStyleRemoved(U);this.usageCount.clear()}}return J.\u0275fac=function(U){return new(U||J)},J.\u0275prov=w.Yz7({token:J,factory:J.\u0275fac}),J})(),Pt=(()=>{class J extends Nt{constructor(U){super(),this.doc=U,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(U){for(const Y of this.hostNodes)this.addStyleToHost(Y,U)}onStyleRemoved(U){const Y=this.styleRef;Y.get(U)?.forEach(he=>he.remove()),Y.delete(U)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(U){this.hostNodes.add(U);for(const Y of this.getAllStyles())this.addStyleToHost(U,Y)}removeHost(U){this.hostNodes.delete(U)}addStyleToHost(U,Y){const ae=this.doc.createElement("style");ae.textContent=Y,U.appendChild(ae);const he=this.styleRef.get(Y);he?he.push(ae):this.styleRef.set(Y,[ae])}resetHostNodes(){const U=this.hostNodes;U.clear(),U.add(this.doc.head)}}return J.\u0275fac=function(U){return new(U||J)(w.LFG(M.K0))},J.\u0275prov=w.Yz7({token:J,factory:J.\u0275fac}),J})();const qt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ze=/%COMP%/g,et=new w.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Fe(J,z){return z.flat(100).map(U=>U.replace(ze,J))}function Ht(J){return z=>{if("__ngUnwrap__"===z)return J;!1===J(z)&&(z.preventDefault(),z.returnValue=!1)}}let tt=(()=>{class J{constructor(U,Y,ae,he){this.eventManager=U,this.sharedStylesHost=Y,this.appId=ae,this.removeStylesOnCompDestory=he,this.rendererByCompId=new Map,this.defaultRenderer=new ne(U)}createRenderer(U,Y){if(!U||!Y)return this.defaultRenderer;const ae=this.getOrCreateRenderer(U,Y);return ae instanceof Be?ae.applyToHost(U):ae instanceof ve&&ae.applyStyles(),ae}getOrCreateRenderer(U,Y){const ae=this.rendererByCompId;let he=ae.get(Y.id);if(!he){const ft=this.eventManager,ct=this.sharedStylesHost,In=this.removeStylesOnCompDestory;switch(Y.encapsulation){case w.ifc.Emulated:he=new Be(ft,ct,Y,this.appId,In);break;case w.ifc.ShadowDom:return new Ne(ft,ct,U,Y);default:he=new ve(ft,ct,Y,In)}he.onDestroy=()=>ae.delete(Y.id),ae.set(Y.id,he)}return he}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return J.\u0275fac=function(U){return new(U||J)(w.LFG(Ye),w.LFG(Pt),w.LFG(w.AFp),w.LFG(et))},J.\u0275prov=w.Yz7({token:J,factory:J.\u0275fac}),J})();class ne{constructor(z){this.eventManager=z,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(z,U){return U?document.createElementNS(qt[U]||U,z):document.createElement(z)}createComment(z){return document.createComment(z)}createText(z){return document.createTextNode(z)}appendChild(z,U){(me(z)?z.content:z).appendChild(U)}insertBefore(z,U,Y){z&&(me(z)?z.content:z).insertBefore(U,Y)}removeChild(z,U){z&&z.removeChild(U)}selectRootElement(z,U){let Y="string"==typeof z?document.querySelector(z):z;if(!Y)throw new Error(`The selector "${z}" did not match any elements`);return U||(Y.textContent=""),Y}parentNode(z){return z.parentNode}nextSibling(z){return z.nextSibling}setAttribute(z,U,Y,ae){if(ae){U=ae+":"+U;const he=qt[ae];he?z.setAttributeNS(he,U,Y):z.setAttribute(U,Y)}else z.setAttribute(U,Y)}removeAttribute(z,U,Y){if(Y){const ae=qt[Y];ae?z.removeAttributeNS(ae,U):z.removeAttribute(`${Y}:${U}`)}else z.removeAttribute(U)}addClass(z,U){z.classList.add(U)}removeClass(z,U){z.classList.remove(U)}setStyle(z,U,Y,ae){ae&(w.JOm.DashCase|w.JOm.Important)?z.style.setProperty(U,Y,ae&w.JOm.Important?"important":""):z.style[U]=Y}removeStyle(z,U,Y){Y&w.JOm.DashCase?z.style.removeProperty(U):z.style[U]=""}setProperty(z,U,Y){z[U]=Y}setValue(z,U){z.nodeValue=U}listen(z,U,Y){return"string"==typeof z?this.eventManager.addGlobalEventListener(z,U,Ht(Y)):this.eventManager.addEventListener(z,U,Ht(Y))}}function me(J){return"TEMPLATE"===J.tagName&&void 0!==J.content}class Ne extends ne{constructor(z,U,Y,ae){super(z),this.sharedStylesHost=U,this.hostEl=Y,this.shadowRoot=Y.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const he=Fe(ae.id,ae.styles);for(const ft of he){const ct=document.createElement("style");ct.textContent=ft,this.shadowRoot.appendChild(ct)}}nodeOrShadowRoot(z){return z===this.hostEl?this.shadowRoot:z}appendChild(z,U){return super.appendChild(this.nodeOrShadowRoot(z),U)}insertBefore(z,U,Y){return super.insertBefore(this.nodeOrShadowRoot(z),U,Y)}removeChild(z,U){return super.removeChild(this.nodeOrShadowRoot(z),U)}parentNode(z){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(z)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ve extends ne{constructor(z,U,Y,ae,he=Y.id){super(z),this.sharedStylesHost=U,this.removeStylesOnCompDestory=ae,this.rendererUsageCount=0,this.styles=Fe(he,Y.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Be extends ve{constructor(z,U,Y,ae,he){const ft=ae+"-"+Y.id;super(z,U,Y,he,ft),this.contentAttr=function Ce(J){return"_ngcontent-%COMP%".replace(ze,J)}(ft),this.hostAttr=function Xe(J){return"_nghost-%COMP%".replace(ze,J)}(ft)}applyToHost(z){this.applyStyles(),this.setAttribute(z,this.hostAttr,"")}createElement(z,U){const Y=super.createElement(z,U);return super.setAttribute(Y,this.contentAttr,""),Y}}let Vt=(()=>{class J extends rt{constructor(U){super(U)}supports(U){return!0}addEventListener(U,Y,ae){return U.addEventListener(Y,ae,!1),()=>this.removeEventListener(U,Y,ae)}removeEventListener(U,Y,ae){return U.removeEventListener(Y,ae)}}return J.\u0275fac=function(U){return new(U||J)(w.LFG(M.K0))},J.\u0275prov=w.Yz7({token:J,factory:J.\u0275fac}),J})();const sn=["alt","control","meta","shift"],lt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tt={alt:J=>J.altKey,control:J=>J.ctrlKey,meta:J=>J.metaKey,shift:J=>J.shiftKey};let At=(()=>{class J extends rt{constructor(U){super(U)}supports(U){return null!=J.parseEventName(U)}addEventListener(U,Y,ae){const he=J.parseEventName(Y),ft=J.eventCallback(he.fullKey,ae,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,M.q)().onAndCancel(U,he.domEventName,ft))}static parseEventName(U){const Y=U.toLowerCase().split("."),ae=Y.shift();if(0===Y.length||"keydown"!==ae&&"keyup"!==ae)return null;const he=J._normalizeKey(Y.pop());let ft="",ct=Y.indexOf("code");if(ct>-1&&(Y.splice(ct,1),ft="code."),sn.forEach(Ki=>{const Ar=Y.indexOf(Ki);Ar>-1&&(Y.splice(Ar,1),ft+=Ki+".")}),ft+=he,0!=Y.length||0===he.length)return null;const In={};return In.domEventName=ae,In.fullKey=ft,In}static matchEventFullKeyCode(U,Y){let ae=lt[U.key]||U.key,he="";return Y.indexOf("code.")>-1&&(ae=U.code,he="code."),!(null==ae||!ae)&&(ae=ae.toLowerCase()," "===ae?ae="space":"."===ae&&(ae="dot"),sn.forEach(ft=>{ft!==ae&&(0,Tt[ft])(U)&&(he+=ft+".")}),he+=ae,he===Y)}static eventCallback(U,Y,ae){return he=>{J.matchEventFullKeyCode(he,U)&&ae.runGuarded(()=>Y(he))}}static _normalizeKey(U){return"esc"===U?"escape":U}}return J.\u0275fac=function(U){return new(U||J)(w.LFG(M.K0))},J.\u0275prov=w.Yz7({token:J,factory:J.\u0275fac}),J})();const No=(0,w.eFA)(w._c5,"browser",[{provide:w.Lbi,useValue:M.bD},{provide:w.g9A,useValue:function cn(){O.makeCurrent()},multi:!0},{provide:M.K0,useFactory:function tr(){return(0,w.RDi)(document),document},deps:[]}]),Qe=new w.OlP(""),Wn=[{provide:w.rWj,useClass:class Ae{addToWindow(z){w.dqk.getAngularTestability=(Y,ae=!0)=>{const he=z.findTestabilityInTree(Y,ae);if(null==he)throw new Error("Could not find testability for element.");return he},w.dqk.getAllAngularTestabilities=()=>z.getAllTestabilities(),w.dqk.getAllAngularRootElements=()=>z.getAllRootElements(),w.dqk.frameworkStabilizers||(w.dqk.frameworkStabilizers=[]),w.dqk.frameworkStabilizers.push(Y=>{const ae=w.dqk.getAllAngularTestabilities();let he=ae.length,ft=!1;const ct=function(In){ft=ft||In,he--,0==he&&Y(ft)};ae.forEach(function(In){In.whenStable(ct)})})}findTestabilityInTree(z,U,Y){return null==U?null:z.getTestability(U)??(Y?(0,M.q)().isShadowRoot(U)?this.findTestabilityInTree(z,U.host,!0):this.findTestabilityInTree(z,U.parentElement,!0):null)}},deps:[]},{provide:w.lri,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]},{provide:w.dDg,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]}],Ci=[{provide:w.zSh,useValue:"root"},{provide:w.qLn,useFactory:function ao(){return new w.qLn},deps:[]},{provide:de,useClass:Vt,multi:!0,deps:[M.K0,w.R0b,w.Lbi]},{provide:de,useClass:At,multi:!0,deps:[M.K0]},{provide:tt,useClass:tt,deps:[Ye,Pt,w.AFp,et]},{provide:w.FYo,useExisting:tt},{provide:Nt,useExisting:Pt},{provide:Pt,useClass:Pt,deps:[M.K0]},{provide:Ye,useClass:Ye,deps:[de,w.R0b]},{provide:M.JF,useClass:mt,deps:[]},[]];let bi=(()=>{class J{constructor(U){}static withServerTransition(U){return{ngModule:J,providers:[{provide:w.AFp,useValue:U.appId},{provide:Re,useExisting:w.AFp},le]}}}return J.\u0275fac=function(U){return new(U||J)(w.LFG(Qe,12))},J.\u0275mod=w.oAB({type:J}),J.\u0275inj=w.cJS({providers:[...Ci,...Wn],imports:[M.ez,w.hGG]}),J})(),en=(()=>{class J{constructor(U){this._doc=U}getTitle(){return this._doc.title}setTitle(U){this._doc.title=U||""}}return J.\u0275fac=function(U){return new(U||J)(w.LFG(M.K0))},J.\u0275prov=w.Yz7({token:J,factory:function(U){let Y=null;return Y=U?new U:function ga(){return new en((0,w.LFG)(M.K0))}(),Y},providedIn:"root"}),J})();typeof window<"u"&&window},872:(yt,Te,j)=>{j.d(Te,{F0:()=>qr,rH:()=>Lu,Bz:()=>Hl,lC:()=>jo});var M=j(256),w=j(996),X=j(646),O=j(579);class ue extends O.x{constructor(v){super(),this._value=v}get value(){return this.getValue()}_subscribe(v){const g=super._subscribe(v);return!g.closed&&v.next(this._value),g}getValue(){const{hasError:v,thrownError:g,_value:I}=this;if(v)throw g;return this._throwIfClosed(),I}next(v){super.next(this._value=v)}}const De=(0,j(888).d)(y=>function(){y(this),this.name="EmptyError",this.message="no elements in sequence"});var Ke=j(751),Re=j(742),ye=j(671),le=j(268),Ae=j(669),mt=j(810),de=j(403),Ye=j(672);function rt(...y){const v=(0,Ae.yG)(y),g=(0,Ae.jO)(y),{args:I,keys:S}=(0,Re.D)(y);if(0===I.length)return(0,w.D)([],v);const N=new Ke.y(function Nt(y,v,g=ye.y){return I=>{Pt(v,()=>{const{length:S}=y,N=new Array(S);let F=S,G=S;for(let ie=0;ie<S;ie++)Pt(v,()=>{const Pe=(0,w.D)(y[ie],v);let Oe=!1;Pe.subscribe((0,de.x)(I,Dt=>{N[ie]=Dt,Oe||(Oe=!0,G--),G||I.next(g(N.slice()))},()=>{--F||I.complete()}))},I)},I)}}(I,v,S?F=>(0,mt.n)(S,F):ye.y));return g?N.pipe((0,le.Z)(g)):N}function Pt(y,v,g){y?(0,Ye.f)(g,y,v):v()}var qt=j(189);function Ue(...y){return function ze(){return(0,qt.J)(1)}()((0,w.D)(y,(0,Ae.yG)(y)))}var be=j(421);function xe(y){return new Ke.y(v=>{(0,be.Xf)(y()).subscribe(v)})}var Je=j(635),Se=j(576);function et(y,v){const g=(0,Se.m)(y)?y:()=>y,I=S=>S.error(g());return new Ke.y(v?S=>v.schedule(I,0,S):I)}var Ce=j(515),Xe=j(727),Fe=j(482);function Ht(){return(0,Fe.e)((y,v)=>{let g=null;y._refCount++;const I=(0,de.x)(v,void 0,void 0,void 0,()=>{if(!y||y._refCount<=0||0<--y._refCount)return void(g=null);const S=y._connection,N=g;g=null,S&&(!N||S===N)&&S.unsubscribe(),v.unsubscribe()});y.subscribe(I),I.closed||(g=y.connect())})}class tt extends Ke.y{constructor(v,g){super(),this.source=v,this.subjectFactory=g,this._subject=null,this._refCount=0,this._connection=null,(0,Fe.A)(v)&&(this.lift=v.lift)}_subscribe(v){return this.getSubject().subscribe(v)}getSubject(){const v=this._subject;return(!v||v.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:v}=this;this._subject=this._connection=null,v?.unsubscribe()}connect(){let v=this._connection;if(!v){v=this._connection=new Xe.w0;const g=this.getSubject();v.add(this.source.subscribe((0,de.x)(g,void 0,()=>{this._teardown(),g.complete()},I=>{this._teardown(),g.error(I)},()=>this._teardown()))),v.closed&&(this._connection=null,v=Xe.w0.EMPTY)}return v}refCount(){return Ht()(this)}}var ne=j(895),K=j(4);function ce(y,v){return(0,Fe.e)((g,I)=>{let S=null,N=0,F=!1;const G=()=>F&&!S&&I.complete();g.subscribe((0,de.x)(I,ie=>{S?.unsubscribe();let Pe=0;const Oe=N++;(0,be.Xf)(y(ie,Oe)).subscribe(S=(0,de.x)(I,Dt=>I.next(v?v(ie,Dt,Oe,Pe++):Dt),()=>{S=null,G()}))},()=>{F=!0,G()}))})}function me(y){return y<=0?()=>Ce.E:(0,Fe.e)((v,g)=>{let I=0;v.subscribe((0,de.x)(g,S=>{++I<=y&&(g.next(S),y<=I&&g.complete())}))})}function ve(y,v){return(0,Fe.e)((g,I)=>{let S=0;g.subscribe((0,de.x)(I,N=>y.call(v,N,S++)&&I.next(N)))})}var Be=j(577);function Vt(y){return(0,Fe.e)((v,g)=>{let I=!1;v.subscribe((0,de.x)(g,S=>{I=!0,g.next(S)},()=>{I||g.next(y),g.complete()}))})}function sn(y=lt){return(0,Fe.e)((v,g)=>{let I=!1;v.subscribe((0,de.x)(g,S=>{I=!0,g.next(S)},()=>I?g.complete():g.error(y())))})}function lt(){return new De}function Tt(y,v){const g=arguments.length>=2;return I=>I.pipe(y?ve((S,N)=>y(S,N,I)):ye.y,me(1),g?Vt(v):sn(()=>new De))}function At(y,v){return(0,Se.m)(v)?(0,Be.z)(y,v,1):(0,Be.z)(y,1)}var st=j(505);function Jt(y){return(0,Fe.e)((v,g)=>{let N,I=null,S=!1;I=v.subscribe((0,de.x)(g,void 0,void 0,F=>{N=(0,be.Xf)(y(F,Jt(y)(v))),I?(I.unsubscribe(),I=null,N.subscribe(g)):S=!0})),S&&(I.unsubscribe(),I=null,N.subscribe(g))})}function vt(y,v){return(0,Fe.e)(function En(y,v,g,I,S){return(N,F)=>{let G=g,ie=v,Pe=0;N.subscribe((0,de.x)(F,Oe=>{const Dt=Pe++;ie=G?y(ie,Oe,Dt):(G=!0,Oe),I&&F.next(ie)},S&&(()=>{G&&F.next(ie),F.complete()})))}}(y,v,arguments.length>=2,!0))}function gr(y){return y<=0?()=>Ce.E:(0,Fe.e)((v,g)=>{let I=[];v.subscribe((0,de.x)(g,S=>{I.push(S),y<I.length&&I.shift()},()=>{for(const S of I)g.next(S);g.complete()},void 0,()=>{I=null}))})}function cn(y,v){const g=arguments.length>=2;return I=>I.pipe(y?ve((S,N)=>y(S,N,I)):ye.y,gr(1),g?Vt(v):sn(()=>new De))}function pa(y){return(0,Fe.e)((v,g)=>{try{v.subscribe(g)}finally{g.add(y)}})}var No=j(481);const Qe="primary",Wn=Symbol("RouteTitle");class Ci{constructor(v){this.params=v||{}}has(v){return Object.prototype.hasOwnProperty.call(this.params,v)}get(v){if(this.has(v)){const g=this.params[v];return Array.isArray(g)?g[0]:g}return null}getAll(v){if(this.has(v)){const g=this.params[v];return Array.isArray(g)?g:[g]}return[]}get keys(){return Object.keys(this.params)}}function bi(y){return new Ci(y)}function uo(y,v,g){const I=g.path.split("/");if(I.length>y.length||"full"===g.pathMatch&&(v.hasChildren()||I.length<y.length))return null;const S={};for(let N=0;N<I.length;N++){const F=I[N],G=y[N];if(F.startsWith(":"))S[F.substring(1)]=G;else if(F!==G.path)return null}return{consumed:y.slice(0,I.length),posParams:S}}function qn(y,v){const g=y?Object.keys(y):void 0,I=v?Object.keys(v):void 0;if(!g||!I||g.length!=I.length)return!1;let S;for(let N=0;N<g.length;N++)if(S=g[N],!ga(y[S],v[S]))return!1;return!0}function ga(y,v){if(Array.isArray(y)&&Array.isArray(v)){if(y.length!==v.length)return!1;const g=[...y].sort(),I=[...v].sort();return g.every((S,N)=>I[N]===S)}return y===v}function en(y){return Array.prototype.concat.apply([],y)}function _e(y){return y.length>0?y[y.length-1]:null}function Pn(y,v){for(const g in y)y.hasOwnProperty(g)&&v(y[g],g)}function fn(y){return(0,M.CqO)(y)?y:(0,M.QGY)(y)?(0,w.D)(Promise.resolve(y)):(0,X.of)(y)}const nr=!1,Po={exact:function lo(y,v,g){if(!ur(y.segments,v.segments)||!ko(y.segments,v.segments,g)||y.numberOfChildren!==v.numberOfChildren)return!1;for(const I in v.children)if(!y.children[I]||!lo(y.children[I],v.children[I],g))return!1;return!0},subset:_a},$t={exact:function kn(y,v){return qn(y,v)},subset:function Gt(y,v){return Object.keys(v).length<=Object.keys(y).length&&Object.keys(v).every(g=>ga(y[g],v[g]))},ignored:()=>!0};function ma(y,v,g){return Po[g.paths](y.root,v.root,g.matrixParams)&&$t[g.queryParams](y.queryParams,v.queryParams)&&!("exact"===g.fragment&&y.fragment!==v.fragment)}function _a(y,v,g){return ps(y,v,v.segments,g)}function ps(y,v,g,I){if(y.segments.length>g.length){const S=y.segments.slice(0,g.length);return!(!ur(S,g)||v.hasChildren()||!ko(S,g,I))}if(y.segments.length===g.length){if(!ur(y.segments,g)||!ko(y.segments,g,I))return!1;for(const S in v.children)if(!y.children[S]||!_a(y.children[S],v.children[S],I))return!1;return!0}{const S=g.slice(0,y.segments.length),N=g.slice(y.segments.length);return!!(ur(y.segments,S)&&ko(y.segments,S,I)&&y.children[Qe])&&ps(y.children[Qe],v,N,I)}}function ko(y,v,g){return v.every((I,S)=>$t[g](y[S].parameters,I.parameters))}class mr{constructor(v=new It([],{}),g={},I=null){this.root=v,this.queryParams=g,this.fragment=I}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bi(this.queryParams)),this._queryParamMap}toString(){return _u.serialize(this)}}class It{constructor(v,g){this.segments=v,this.children=g,this.parent=null,Pn(g,(I,S)=>I.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nn(this)}}class gs{constructor(v,g){this.path=v,this.parameters=g}get parameterMap(){return this._parameterMap||(this._parameterMap=bi(this.parameters)),this._parameterMap}toString(){return he(this)}}function ur(y,v){return y.length===v.length&&y.every((g,I)=>g.path===v[I].path)}let tn=(()=>{class y{}return y.\u0275fac=function(g){return new(g||y)},y.\u0275prov=M.Yz7({token:y,factory:function(){return new Oo},providedIn:"root"}),y})();class Oo{parse(v){const g=new va(v);return new mr(g.parseRootSegment(),g.parseQueryParams(),g.parseFragment())}serialize(v){const g=`/${rn(v.root,!0)}`,I=function ct(y){const v=Object.keys(y).map(g=>{const I=y[g];return Array.isArray(I)?I.map(S=>`${J(g)}=${J(S)}`).join("&"):`${J(g)}=${J(I)}`}).filter(g=>!!g);return v.length?`?${v.join("&")}`:""}(v.queryParams);return`${g}${I}${"string"==typeof v.fragment?`#${function z(y){return encodeURI(y)}(v.fragment)}`:""}`}}const _u=new Oo;function nn(y){return y.segments.map(v=>he(v)).join("/")}function rn(y,v){if(!y.hasChildren())return nn(y);if(v){const g=y.children[Qe]?rn(y.children[Qe],!1):"",I=[];return Pn(y.children,(S,N)=>{N!==Qe&&I.push(`${N}:${rn(S,!1)}`)}),I.length>0?`${g}(${I.join("//")})`:g}{const g=function ya(y,v){let g=[];return Pn(y.children,(I,S)=>{S===Qe&&(g=g.concat(v(I,S)))}),Pn(y.children,(I,S)=>{S!==Qe&&(g=g.concat(v(I,S)))}),g}(y,(I,S)=>S===Qe?[rn(y.children[Qe],!1)]:[`${S}:${rn(I,!1)}`]);return 1===Object.keys(y.children).length&&null!=y.children[Qe]?`${nn(y)}/${g[0]}`:`${nn(y)}/(${g.join("//")})`}}function Ur(y){return encodeURIComponent(y).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function J(y){return Ur(y).replace(/%3B/gi,";")}function U(y){return Ur(y).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Y(y){return decodeURIComponent(y)}function ae(y){return Y(y.replace(/\+/g,"%20"))}function he(y){return`${U(y.path)}${function ft(y){return Object.keys(y).map(v=>`;${U(v)}=${U(y[v])}`).join("")}(y.parameters)}`}const In=/^[^\/()?;=#]+/;function Ki(y){const v=y.match(In);return v?v[0]:""}const Ar=/^[^=?&#]+/,_s=/^[^&#]+/;class va{constructor(v){this.url=v,this.remaining=v}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new It([],{}):new It([],this.parseChildren())}parseQueryParams(){const v={};if(this.consumeOptional("?"))do{this.parseQueryParam(v)}while(this.consumeOptional("&"));return v}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const v=[];for(this.peekStartsWith("(")||v.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),v.push(this.parseSegment());let g={};this.peekStartsWith("/(")&&(this.capture("/"),g=this.parseParens(!0));let I={};return this.peekStartsWith("(")&&(I=this.parseParens(!1)),(v.length>0||Object.keys(g).length>0)&&(I[Qe]=new It(v,g)),I}parseSegment(){const v=Ki(this.remaining);if(""===v&&this.peekStartsWith(";"))throw new M.vHH(4009,nr);return this.capture(v),new gs(Y(v),this.parseMatrixParams())}parseMatrixParams(){const v={};for(;this.consumeOptional(";");)this.parseParam(v);return v}parseParam(v){const g=Ki(this.remaining);if(!g)return;this.capture(g);let I="";if(this.consumeOptional("=")){const S=Ki(this.remaining);S&&(I=S,this.capture(I))}v[Y(g)]=Y(I)}parseQueryParam(v){const g=function td(y){const v=y.match(Ar);return v?v[0]:""}(this.remaining);if(!g)return;this.capture(g);let I="";if(this.consumeOptional("=")){const F=function Fo(y){const v=y.match(_s);return v?v[0]:""}(this.remaining);F&&(I=F,this.capture(I))}const S=ae(g),N=ae(I);if(v.hasOwnProperty(S)){let F=v[S];Array.isArray(F)||(F=[F],v[S]=F),F.push(N)}else v[S]=N}parseParens(v){const g={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const I=Ki(this.remaining),S=this.remaining[I.length];if("/"!==S&&")"!==S&&";"!==S)throw new M.vHH(4010,nr);let N;I.indexOf(":")>-1?(N=I.slice(0,I.indexOf(":")),this.capture(N),this.capture(":")):v&&(N=Qe);const F=this.parseChildren();g[N]=1===Object.keys(F).length?F[Qe]:new It([],F),this.consumeOptional("//")}return g}peekStartsWith(v){return this.remaining.startsWith(v)}consumeOptional(v){return!!this.peekStartsWith(v)&&(this.remaining=this.remaining.substring(v.length),!0)}capture(v){if(!this.consumeOptional(v))throw new M.vHH(4011,nr)}}function Lo(y){return y.segments.length>0?new It([],{[Qe]:y}):y}function wa(y){const v={};for(const I of Object.keys(y.children)){const N=wa(y.children[I]);(N.segments.length>0||N.hasChildren())&&(v[I]=N)}return function nd(y){if(1===y.numberOfChildren&&y.children[Qe]){const v=y.children[Qe];return new It(y.segments.concat(v.segments),v.children)}return y}(new It(y.segments,v))}function Ti(y){return y instanceof mr}const Yi=!1;function Il(y,v,g,I,S){if(0===g.length)return On(v.root,v.root,v.root,I,S);const N=function fi(y){if("string"==typeof y[0]&&1===y.length&&"/"===y[0])return new _r(!0,0,y);let v=0,g=!1;const I=y.reduce((S,N,F)=>{if("object"==typeof N&&null!=N){if(N.outlets){const G={};return Pn(N.outlets,(ie,Pe)=>{G[Pe]="string"==typeof ie?ie.split("/"):ie}),[...S,{outlets:G}]}if(N.segmentPath)return[...S,N.segmentPath]}return"string"!=typeof N?[...S,N]:0===F?(N.split("/").forEach((G,ie)=>{0==ie&&"."===G||(0==ie&&""===G?g=!0:".."===G?v++:""!=G&&S.push(G))}),S):[...S,N]},[]);return new _r(g,v,I)}(g);return N.toRoot()?On(v.root,v.root,new It([],{}),I,S):function F(ie){const Pe=function Qi(y,v,g,I){if(y.isAbsolute)return new Zi(v.root,!0,0);if(-1===I)return new Zi(g,g===v.root,0);return function $e(y,v,g){let I=y,S=v,N=g;for(;N>S;){if(N-=S,I=I.parent,!I)throw new M.vHH(4005,Yi&&"Invalid number of '../'");S=I.segments.length}return new Zi(I,!1,S-N)}(g,I+(xt(y.commands[0])?0:1),y.numberOfDoubleDots)}(N,v,y.snapshot?._urlSegment,ie),Oe=Pe.processChildren?Kn(Pe.segmentGroup,Pe.index,N.commands):on(Pe.segmentGroup,Pe.index,N.commands);return On(v.root,Pe.segmentGroup,Oe,I,S)}(y.snapshot?._lastPathIndex)}function xt(y){return"object"==typeof y&&null!=y&&!y.outlets&&!y.segmentPath}function mn(y){return"object"==typeof y&&null!=y&&y.outlets}function On(y,v,g,I,S){let F,N={};I&&Pn(I,(ie,Pe)=>{N[Pe]=Array.isArray(ie)?ie.map(Oe=>`${Oe}`):`${ie}`}),F=y===v?g:Bs(y,v,g);const G=Lo(wa(F));return new mr(G,N,S)}function Bs(y,v,g){const I={};return Pn(y.children,(S,N)=>{I[N]=S===v?g:Bs(S,v,g)}),new It(y.segments,I)}class _r{constructor(v,g,I){if(this.isAbsolute=v,this.numberOfDoubleDots=g,this.commands=I,v&&I.length>0&&xt(I[0]))throw new M.vHH(4003,Yi&&"Root segment cannot have matrix parameters");const S=I.find(mn);if(S&&S!==_e(I))throw new M.vHH(4004,Yi&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zi{constructor(v,g,I){this.segmentGroup=v,this.processChildren=g,this.index=I}}function on(y,v,g){if(y||(y=new It([],{})),0===y.segments.length&&y.hasChildren())return Kn(y,v,g);const I=function Xi(y,v,g){let I=0,S=v;const N={match:!1,pathIndex:0,commandIndex:0};for(;S<y.segments.length;){if(I>=g.length)return N;const F=y.segments[S],G=g[I];if(mn(G))break;const ie=`${G}`,Pe=I<g.length-1?g[I+1]:null;if(S>0&&void 0===ie)break;if(ie&&Pe&&"object"==typeof Pe&&void 0===Pe.outlets){if(!Di(ie,Pe,F))return N;I+=2}else{if(!Di(ie,{},F))return N;I++}S++}return{match:!0,pathIndex:S,commandIndex:I}}(y,v,g),S=g.slice(I.commandIndex);if(I.match&&I.pathIndex<y.segments.length){const N=new It(y.segments.slice(0,I.pathIndex),{});return N.children[Qe]=new It(y.segments.slice(I.pathIndex),y.children),Kn(N,0,S)}return I.match&&0===S.length?new It(y.segments,{}):I.match&&!y.hasChildren()?Tn(y,v,g):I.match?Kn(y,0,S):Tn(y,v,g)}function Kn(y,v,g){if(0===g.length)return new It(y.segments,{});{const I=function wt(y){return mn(y[0])?y[0].outlets:{[Qe]:y}}(g),S={};if(!I[Qe]&&y.children[Qe]&&1===y.numberOfChildren&&0===y.children[Qe].segments.length){const N=Kn(y.children[Qe],v,g);return new It(y.segments,N.children)}return Pn(I,(N,F)=>{"string"==typeof N&&(N=[N]),null!==N&&(S[F]=on(y.children[F],v,N))}),Pn(y.children,(N,F)=>{void 0===I[F]&&(S[F]=N)}),new It(y.segments,S)}}function Tn(y,v,g){const I=y.segments.slice(0,v);let S=0;for(;S<g.length;){const N=g[S];if(mn(N)){const ie=ys(N.outlets);return new It(I,ie)}if(0===S&&xt(g[0])){I.push(new gs(y.segments[v].path,_n(g[0]))),S++;continue}const F=mn(N)?N.outlets[Qe]:`${N}`,G=S<g.length-1?g[S+1]:null;F&&G&&xt(G)?(I.push(new gs(F,_n(G))),S+=2):(I.push(new gs(F,{})),S++)}return new It(I,{})}function ys(y){const v={};return Pn(y,(g,I)=>{"string"==typeof g&&(g=[g]),null!==g&&(v[I]=Tn(new It([],{}),0,g))}),v}function _n(y){const v={};return Pn(y,(g,I)=>v[I]=`${g}`),v}function Di(y,v,g){return y==g.path&&qn(v,g.parameters)}const Ji="imperative";class pt{constructor(v,g){this.id=v,this.url=g}}class Ia extends pt{constructor(v,g,I="imperative",S=null){super(v,g),this.type=0,this.navigationTrigger=I,this.restoredState=S}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Si extends pt{constructor(v,g,I){super(v,g),this.urlAfterRedirects=I,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ca extends pt{constructor(v,g,I,S){super(v,g),this.reason=I,this.code=S,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Fn extends pt{constructor(v,g,I,S){super(v,g),this.reason=I,this.code=S,this.type=16}}class Yn extends pt{constructor(v,g,I,S){super(v,g),this.error=I,this.target=S,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Bo extends pt{constructor(v,g,I,S){super(v,g),this.urlAfterRedirects=I,this.state=S,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class co extends pt{constructor(v,g,I,S){super(v,g),this.urlAfterRedirects=I,this.state=S,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ai extends pt{constructor(v,g,I,S,N){super(v,g),this.urlAfterRedirects=I,this.state=S,this.shouldActivate=N,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ho extends pt{constructor(v,g,I,S){super(v,g),this.urlAfterRedirects=I,this.state=S,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cl extends pt{constructor(v,g,I,S){super(v,g),this.urlAfterRedirects=I,this.state=S,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dn{constructor(v){this.route=v,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hf{constructor(v){this.route=v,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yu{constructor(v){this.snapshot=v,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bl{constructor(v){this.snapshot=v,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ba{constructor(v){this.snapshot=v,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ta{constructor(v){this.snapshot=v,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $s{constructor(v,g,I){this.routerEvent=v,this.position=g,this.anchor=I,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Br=(()=>{class y{createUrlTree(g,I,S,N,F,G){return Il(g||I.root,S,N,F,G)}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac}),y})(),vu=(()=>{class y{}return y.\u0275fac=function(g){return new(g||y)},y.\u0275prov=M.Yz7({token:y,factory:function(v){return Br.\u0275fac(v)},providedIn:"root"}),y})();class fo{constructor(v){this._root=v}get root(){return this._root.value}parent(v){const g=this.pathFromRoot(v);return g.length>1?g[g.length-2]:null}children(v){const g=xi(v,this._root);return g?g.children.map(I=>I.value):[]}firstChild(v){const g=xi(v,this._root);return g&&g.children.length>0?g.children[0].value:null}siblings(v){const g=$r(v,this._root);return g.length<2?[]:g[g.length-2].children.map(S=>S.value).filter(S=>S!==v)}pathFromRoot(v){return $r(v,this._root).map(g=>g.value)}}function xi(y,v){if(y===v.value)return v;for(const g of v.children){const I=xi(y,g);if(I)return I}return null}function $r(y,v){if(y===v.value)return[v];for(const g of v.children){const I=$r(y,g);if(I.length)return I.unshift(v),I}return[]}class vr{constructor(v,g){this.value=v,this.children=g}toString(){return`TreeNode(${this.value})`}}function vs(y){const v={};return y&&y.children.forEach(g=>v[g.value.outlet]=g),v}class Da extends fo{constructor(v,g){super(v),this.snapshot=g,Tl(this,v)}toString(){return this.snapshot.toString()}}function wu(y,v){const g=function lr(y,v){const F=new Eu([],{},{},"",{},Qe,v,null,y.root,-1,{});return new es("",new vr(F,[]))}(y,v),I=new ue([new gs("",{})]),S=new ue({}),N=new ue({}),F=new ue({}),G=new ue(""),ie=new jr(I,S,F,G,N,Qe,v,g.root);return ie.snapshot=g.root,new Da(new vr(ie,[]),g)}class jr{constructor(v,g,I,S,N,F,G,ie){this.url=v,this.params=g,this.queryParams=I,this.fragment=S,this.data=N,this.outlet=F,this.component=G,this.title=this.data?.pipe((0,K.U)(Pe=>Pe[Wn]))??(0,X.of)(void 0),this._futureSnapshot=ie}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,K.U)(v=>bi(v)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,K.U)(v=>bi(v)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pf(y,v="emptyOnly"){const g=y.pathFromRoot;let I=0;if("always"!==v)for(I=g.length-1;I>=1;){const S=g[I],N=g[I-1];if(S.routeConfig&&""===S.routeConfig.path)I--;else{if(N.component)break;I--}}return function gf(y){return y.reduce((v,g)=>({params:{...v.params,...g.params},data:{...v.data,...g.data},resolve:{...g.data,...v.resolve,...g.routeConfig?.data,...g._resolvedData}}),{params:{},data:{},resolve:{}})}(g.slice(I))}class Eu{get title(){return this.data?.[Wn]}constructor(v,g,I,S,N,F,G,ie,Pe,Oe,Dt){this.url=v,this.params=g,this.queryParams=I,this.fragment=S,this.data=N,this.outlet=F,this.component=G,this.routeConfig=ie,this._urlSegment=Pe,this._lastPathIndex=Oe,this._resolve=Dt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(I=>I.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class es extends fo{constructor(v,g){super(g),this.url=v,Tl(this,g)}toString(){return ws(this._root)}}function Tl(y,v){v.value._routerState=y,v.children.forEach(g=>Tl(y,g))}function ws(y){const v=y.children.length>0?` { ${y.children.map(ws).join(", ")} } `:"";return`${y.value}${v}`}function Dl(y){if(y.snapshot){const v=y.snapshot,g=y._futureSnapshot;y.snapshot=g,qn(v.queryParams,g.queryParams)||y.queryParams.next(g.queryParams),v.fragment!==g.fragment&&y.fragment.next(g.fragment),qn(v.params,g.params)||y.params.next(g.params),function qi(y,v){if(y.length!==v.length)return!1;for(let g=0;g<y.length;++g)if(!qn(y[g],v[g]))return!1;return!0}(v.url,g.url)||y.url.next(g.url),qn(v.data,g.data)||y.data.next(g.data)}else y.snapshot=y._futureSnapshot,y.data.next(y._futureSnapshot.data)}function js(y,v){const g=qn(y.params,v.params)&&function ms(y,v){return ur(y,v)&&y.every((g,I)=>qn(g.parameters,v[I].parameters))}(y.url,v.url);return g&&!(!y.parent!=!v.parent)&&(!y.parent||js(y.parent,v.parent))}function Sl(y,v,g){if(g&&y.shouldReuseRoute(v.value,g.value.snapshot)){const I=g.value;I._futureSnapshot=v.value;const S=function Sa(y,v,g){return v.children.map(I=>{for(const S of g.children)if(y.shouldReuseRoute(I.value,S.value.snapshot))return Sl(y,I,S);return Sl(y,I)})}(y,v,g);return new vr(I,S)}{if(y.shouldAttach(v.value)){const N=y.retrieve(v.value);if(null!==N){const F=N.route;return F.value._futureSnapshot=v.value,F.children=v.children.map(G=>Sl(y,G)),F}}const I=function kt(y){return new jr(new ue(y.url),new ue(y.params),new ue(y.queryParams),new ue(y.fragment),new ue(y.data),y.outlet,y.component,y)}(v.value),S=v.children.map(N=>Sl(y,N));return new vr(I,S)}}const Al="ngNavigationCancelingError";function _f(y,v){const{redirectTo:g,navigationBehaviorOptions:I}=Ti(v)?{redirectTo:v,navigationBehaviorOptions:void 0}:v,S=yf(!1,0,v);return S.url=g,S.navigationBehaviorOptions=I,S}function yf(y,v,g){const I=new Error("NavigationCancelingError: "+(y||""));return I[Al]=!0,I.cancellationCode=v,g&&(I.url=g),I}function Es(y){return $o(y)&&Ti(y.url)}function $o(y){return y&&y[Al]}class Hs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new po,this.attachRef=null}}let po=(()=>{class y{constructor(){this.contexts=new Map}onChildOutletCreated(g,I){const S=this.getOrCreateContext(g);S.outlet=I,this.contexts.set(g,S)}onChildOutletDestroyed(g){const I=this.getContext(g);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const g=this.contexts;return this.contexts=new Map,g}onOutletReAttached(g){this.contexts=g}getOrCreateContext(g){let I=this.getContext(g);return I||(I=new Hs,this.contexts.set(g,I)),I}getContext(g){return this.contexts.get(g)||null}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();const Aa=!1;let jo=(()=>{class y{constructor(){this.activated=null,this._activatedRoute=null,this.name=Qe,this.activateEvents=new M.vpe,this.deactivateEvents=new M.vpe,this.attachEvents=new M.vpe,this.detachEvents=new M.vpe,this.parentContexts=(0,M.f3M)(po),this.location=(0,M.f3M)(M.s_b),this.changeDetector=(0,M.f3M)(M.sBO),this.environmentInjector=(0,M.f3M)(M.lqb)}ngOnChanges(g){if(g.name){const{firstChange:I,previousValue:S}=g.name;if(I)return;this.isTrackedInParentContexts(S)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(S)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(g){return this.parentContexts.getContext(g)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const g=this.parentContexts.getContext(this.name);g?.route&&(g.attachRef?this.attach(g.attachRef,g.route):this.activateWith(g.route,g.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M.vHH(4012,Aa);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M.vHH(4012,Aa);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M.vHH(4012,Aa);this.location.detach();const g=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(g.instance),g}attach(g,I){this.activated=g,this._activatedRoute=I,this.location.insert(g.hostView),this.attachEvents.emit(g.instance)}deactivate(){if(this.activated){const g=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(g)}}activateWith(g,I){if(this.isActivated)throw new M.vHH(4013,Aa);this._activatedRoute=g;const S=this.location,F=g.snapshot.component,G=this.parentContexts.getOrCreateContext(this.name).children,ie=new Iu(g,G,S.injector);if(I&&function Gs(y){return!!y.resolveComponentFactory}(I)){const Pe=I.resolveComponentFactory(F);this.activated=S.createComponent(Pe,S.length,ie)}else this.activated=S.createComponent(F,{index:S.length,injector:ie,environmentInjector:I??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275dir=M.lG2({type:y,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[M.TTD]}),y})();class Iu{constructor(v,g,I){this.route=v,this.childContexts=g,this.parent=I}get(v,g){return v===jr?this.route:v===po?this.childContexts:this.parent.get(v,g)}}let xa=(()=>{class y{}return y.\u0275fac=function(g){return new(g||y)},y.\u0275cmp=M.Xpm({type:y,selectors:[["ng-component"]],standalone:!0,features:[M.jDz],decls:1,vars:0,template:function(g,I){1&g&&M._UZ(0,"router-outlet")},dependencies:[jo],encapsulation:2}),y})();function zs(y,v){return y.providers&&!y._injector&&(y._injector=(0,M.MMx)(y.providers,v,`Route: ${y.path}`)),y._injector??v}function Cu(y){const v=y.children&&y.children.map(Cu),g=v?{...y,children:v}:{...y};return!g.component&&!g.loadComponent&&(v||g.loadChildren)&&g.outlet&&g.outlet!==Qe&&(g.component=xa),g}function Hr(y){return y.outlet||Qe}function Is(y,v){const g=y.filter(I=>Hr(I)===v);return g.push(...y.filter(I=>Hr(I)!==v)),g}function Vn(y){if(!y)return null;if(y.routeConfig?._injector)return y.routeConfig._injector;for(let v=y.parent;v;v=v.parent){const g=v.routeConfig;if(g?._loadedInjector)return g._loadedInjector;if(g?._injector)return g._injector}return null}class Ra{constructor(v,g,I,S){this.routeReuseStrategy=v,this.futureState=g,this.currState=I,this.forwardEvent=S}activate(v){const g=this.futureState._root,I=this.currState?this.currState._root:null;this.deactivateChildRoutes(g,I,v),Dl(this.futureState.root),this.activateChildRoutes(g,I,v)}deactivateChildRoutes(v,g,I){const S=vs(g);v.children.forEach(N=>{const F=N.value.outlet;this.deactivateRoutes(N,S[F],I),delete S[F]}),Pn(S,(N,F)=>{this.deactivateRouteAndItsChildren(N,I)})}deactivateRoutes(v,g,I){const S=v.value,N=g?g.value:null;if(S===N)if(S.component){const F=I.getContext(S.outlet);F&&this.deactivateChildRoutes(v,g,F.children)}else this.deactivateChildRoutes(v,g,I);else N&&this.deactivateRouteAndItsChildren(g,I)}deactivateRouteAndItsChildren(v,g){v.value.component&&this.routeReuseStrategy.shouldDetach(v.value.snapshot)?this.detachAndStoreRouteSubtree(v,g):this.deactivateRouteAndOutlet(v,g)}detachAndStoreRouteSubtree(v,g){const I=g.getContext(v.value.outlet),S=I&&v.value.component?I.children:g,N=vs(v);for(const F of Object.keys(N))this.deactivateRouteAndItsChildren(N[F],S);if(I&&I.outlet){const F=I.outlet.detach(),G=I.children.onOutletDeactivated();this.routeReuseStrategy.store(v.value.snapshot,{componentRef:F,route:v,contexts:G})}}deactivateRouteAndOutlet(v,g){const I=g.getContext(v.value.outlet),S=I&&v.value.component?I.children:g,N=vs(v);for(const F of Object.keys(N))this.deactivateRouteAndItsChildren(N[F],S);I&&(I.outlet&&(I.outlet.deactivate(),I.children.onOutletDeactivated()),I.attachRef=null,I.resolver=null,I.route=null)}activateChildRoutes(v,g,I){const S=vs(g);v.children.forEach(N=>{this.activateRoutes(N,S[N.value.outlet],I),this.forwardEvent(new Ta(N.value.snapshot))}),v.children.length&&this.forwardEvent(new bl(v.value.snapshot))}activateRoutes(v,g,I){const S=v.value,N=g?g.value:null;if(Dl(S),S===N)if(S.component){const F=I.getOrCreateContext(S.outlet);this.activateChildRoutes(v,g,F.children)}else this.activateChildRoutes(v,g,I);else if(S.component){const F=I.getOrCreateContext(S.outlet);if(this.routeReuseStrategy.shouldAttach(S.snapshot)){const G=this.routeReuseStrategy.retrieve(S.snapshot);this.routeReuseStrategy.store(S.snapshot,null),F.children.onOutletReAttached(G.contexts),F.attachRef=G.componentRef,F.route=G.route.value,F.outlet&&F.outlet.attach(G.componentRef,G.route.value),Dl(G.route.value),this.activateChildRoutes(v,null,F.children)}else{const G=Vn(S.snapshot),ie=G?.get(M._Vd)??null;F.attachRef=null,F.route=S,F.resolver=ie,F.injector=G,F.outlet&&F.outlet.activateWith(S,F.injector),this.activateChildRoutes(v,null,F.children)}}else this.activateChildRoutes(v,null,I)}}class bu{constructor(v){this.path=v,this.route=this.path[this.path.length-1]}}class Gr{constructor(v,g){this.component=v,this.route=g}}function Tu(y,v,g){const I=y._root;return an(I,v?v._root:null,g,[I.value])}function dt(y,v){const g=Symbol(),I=v.get(y,g);return I===g?"function"!=typeof y||(0,M.Z0I)(y)?v.get(y):y:I}function an(y,v,g,I,S={canDeactivateChecks:[],canActivateChecks:[]}){const N=vs(v);return y.children.forEach(F=>{(function Gm(y,v,g,I,S={canDeactivateChecks:[],canActivateChecks:[]}){const N=y.value,F=v?v.value:null,G=g?g.getContext(y.value.outlet):null;if(F&&N.routeConfig===F.routeConfig){const ie=function Ml(y,v,g){if("function"==typeof g)return g(y,v);switch(g){case"pathParamsChange":return!ur(y.url,v.url);case"pathParamsOrQueryParamsChange":return!ur(y.url,v.url)||!qn(y.queryParams,v.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!js(y,v)||!qn(y.queryParams,v.queryParams);default:return!js(y,v)}}(F,N,N.routeConfig.runGuardsAndResolvers);ie?S.canActivateChecks.push(new bu(I)):(N.data=F.data,N._resolvedData=F._resolvedData),an(y,v,N.component?G?G.children:null:g,I,S),ie&&G&&G.outlet&&G.outlet.isActivated&&S.canDeactivateChecks.push(new Gr(G.outlet.component,F))}else F&&Pa(v,G,S),S.canActivateChecks.push(new bu(I)),an(y,null,N.component?G?G.children:null:g,I,S)})(F,N[F.value.outlet],g,I.concat([F.value]),S),delete N[F.value.outlet]}),Pn(N,(F,G)=>Pa(F,g.getContext(G),S)),S}function Pa(y,v,g){const I=vs(y),S=y.value;Pn(I,(N,F)=>{Pa(N,S.component?v?v.children.getContext(F):null:v,g)}),g.canDeactivateChecks.push(new Gr(S.component&&v&&v.outlet&&v.outlet.isActivated?v.outlet.component:null,S))}function ka(y){return"function"==typeof y}function Ho(y){return y instanceof De||"EmptyError"===y?.name}const mi=Symbol("INITIAL_VALUE");function Cn(){return ce(y=>rt(y.map(v=>v.pipe(me(1),function Ne(...y){const v=(0,Ae.yG)(y);return(0,Fe.e)((g,I)=>{(v?Ue(y,g,v):Ue(y,g)).subscribe(I)})}(mi)))).pipe((0,K.U)(v=>{for(const g of v)if(!0!==g){if(g===mi)return mi;if(!1===g||g instanceof mr)return g}return!0}),ve(v=>v!==mi),me(1)))}function Mi(y){return(0,Je.z)((0,st.b)(v=>{if(Ti(v))throw _f(0,v)}),(0,K.U)(v=>!0===v))}const Oa={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ru(y,v,g,I,S){const N=Fa(y,v,g);return N.matched?function Nl(y,v,g,I){const S=v.canMatch;if(!S||0===S.length)return(0,X.of)(!0);const N=S.map(F=>{const G=dt(F,y);return fn(function od(y){return y&&ka(y.canMatch)}(G)?G.canMatch(v,g):y.runInContext(()=>G(v,g)))});return(0,X.of)(N).pipe(Cn(),Mi())}(I=zs(v,I),v,g).pipe((0,K.U)(F=>!0===F?N:{...Oa})):(0,X.of)(N)}function Fa(y,v,g){if(""===v.path)return"full"===v.pathMatch&&(y.hasChildren()||g.length>0)?{...Oa}:{matched:!0,consumedSegments:[],remainingSegments:g,parameters:{},positionalParamSegments:{}};const S=(v.matcher||uo)(g,y,v);if(!S)return{...Oa};const N={};Pn(S.posParams,(G,ie)=>{N[ie]=G.path});const F=S.consumed.length>0?{...N,...S.consumed[S.consumed.length-1].parameters}:N;return{matched:!0,consumedSegments:S.consumed,remainingSegments:g.slice(S.consumed.length),parameters:F,positionalParamSegments:S.posParams??{}}}function go(y,v,g,I){if(g.length>0&&function La(y,v,g){return g.some(I=>Va(y,v,I)&&Hr(I)!==Qe)}(y,g,I)){const N=new It(v,function Pu(y,v,g,I){const S={};S[Qe]=I,I._sourceSegment=y,I._segmentIndexShift=v.length;for(const N of g)if(""===N.path&&Hr(N)!==Qe){const F=new It([],{});F._sourceSegment=y,F._segmentIndexShift=v.length,S[Hr(N)]=F}return S}(y,v,I,new It(g,y.children)));return N._sourceSegment=y,N._segmentIndexShift=v.length,{segmentGroup:N,slicedSegments:[]}}if(0===g.length&&function ld(y,v,g){return g.some(I=>Va(y,v,I))}(y,g,I)){const N=new It(y.segments,function Nu(y,v,g,I,S){const N={};for(const F of I)if(Va(y,g,F)&&!S[Hr(F)]){const G=new It([],{});G._sourceSegment=y,G._segmentIndexShift=v.length,N[Hr(F)]=G}return{...S,...N}}(y,v,g,I,y.children));return N._sourceSegment=y,N._segmentIndexShift=v.length,{segmentGroup:N,slicedSegments:g}}const S=new It(y.segments,y.children);return S._sourceSegment=y,S._segmentIndexShift=v.length,{segmentGroup:S,slicedSegments:g}}function Va(y,v,g){return(!(y.hasChildren()||v.length>0)||"full"!==g.pathMatch)&&""===g.path}function Ua(y,v,g,I){return!!(Hr(y)===I||I!==Qe&&Va(v,g,y))&&("**"===y.path||Fa(v,y,g).matched)}function Go(y,v,g){return 0===v.length&&!y.children[g]}const zo=!1;class Ba{constructor(v){this.segmentGroup=v||null}}class Pl{constructor(v){this.urlTree=v}}function Cs(y){return et(new Ba(y))}function cd(y){return et(new Pl(y))}class yn{constructor(v,g,I,S,N){this.injector=v,this.configLoader=g,this.urlSerializer=I,this.urlTree=S,this.config=N,this.allowRedirects=!0}apply(){const v=go(this.urlTree.root,[],[],this.config).segmentGroup,g=new It(v.segments,v.children);return this.expandSegmentGroup(this.injector,this.config,g,Qe).pipe((0,K.U)(N=>this.createUrlTree(wa(N),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Jt(N=>{if(N instanceof Pl)return this.allowRedirects=!1,this.match(N.urlTree);throw N instanceof Ba?this.noMatchError(N):N}))}match(v){return this.expandSegmentGroup(this.injector,this.config,v.root,Qe).pipe((0,K.U)(S=>this.createUrlTree(wa(S),v.queryParams,v.fragment))).pipe(Jt(S=>{throw S instanceof Ba?this.noMatchError(S):S}))}noMatchError(v){return new M.vHH(4002,zo)}createUrlTree(v,g,I){const S=Lo(v);return new mr(S,g,I)}expandSegmentGroup(v,g,I,S){return 0===I.segments.length&&I.hasChildren()?this.expandChildren(v,g,I).pipe((0,K.U)(N=>new It([],N))):this.expandSegment(v,I,g,I.segments,S,!0)}expandChildren(v,g,I){const S=[];for(const N of Object.keys(I.children))"primary"===N?S.unshift(N):S.push(N);return(0,w.D)(S).pipe(At(N=>{const F=I.children[N],G=Is(g,N);return this.expandSegmentGroup(v,G,F,N).pipe((0,K.U)(ie=>({segment:ie,outlet:N})))}),vt((N,F)=>(N[F.outlet]=F.segment,N),{}),cn())}expandSegment(v,g,I,S,N,F){return(0,w.D)(I).pipe(At(G=>this.expandSegmentAgainstRoute(v,g,I,G,S,N,F).pipe(Jt(Pe=>{if(Pe instanceof Ba)return(0,X.of)(null);throw Pe}))),Tt(G=>!!G),Jt((G,ie)=>{if(Ho(G))return Go(g,S,N)?(0,X.of)(new It([],{})):Cs(g);throw G}))}expandSegmentAgainstRoute(v,g,I,S,N,F,G){return Ua(S,g,N,F)?void 0===S.redirectTo?this.matchSegmentAgainstRoute(v,g,S,N,F):G&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(v,g,I,S,N,F):Cs(g):Cs(g)}expandSegmentAgainstRouteUsingRedirect(v,g,I,S,N,F){return"**"===S.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(v,I,S,F):this.expandRegularSegmentAgainstRouteUsingRedirect(v,g,I,S,N,F)}expandWildCardWithParamsAgainstRouteUsingRedirect(v,g,I,S){const N=this.applyRedirectCommands([],I.redirectTo,{});return I.redirectTo.startsWith("/")?cd(N):this.lineralizeSegments(I,N).pipe((0,Be.z)(F=>{const G=new It(F,{});return this.expandSegment(v,G,g,F,S,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(v,g,I,S,N,F){const{matched:G,consumedSegments:ie,remainingSegments:Pe,positionalParamSegments:Oe}=Fa(g,S,N);if(!G)return Cs(g);const Dt=this.applyRedirectCommands(ie,S.redirectTo,Oe);return S.redirectTo.startsWith("/")?cd(Dt):this.lineralizeSegments(S,Dt).pipe((0,Be.z)(cr=>this.expandSegment(v,g,I,cr.concat(Pe),F,!1)))}matchSegmentAgainstRoute(v,g,I,S,N){return"**"===I.path?(v=zs(I,v),I.loadChildren?(I._loadedRoutes?(0,X.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):this.configLoader.loadChildren(v,I)).pipe((0,K.U)(G=>(I._loadedRoutes=G.routes,I._loadedInjector=G.injector,new It(S,{})))):(0,X.of)(new It(S,{}))):Ru(g,I,S,v).pipe(ce(({matched:F,consumedSegments:G,remainingSegments:ie})=>F?this.getChildConfig(v=I._injector??v,I,S).pipe((0,Be.z)(Oe=>{const Dt=Oe.injector??v,cr=Oe.routes,{segmentGroup:As,slicedSegments:ss}=go(g,G,ie,cr),os=new It(As.segments,As.children);if(0===ss.length&&os.hasChildren())return this.expandChildren(Dt,cr,os).pipe((0,K.U)(Mf=>new It(G,Mf)));if(0===cr.length&&0===ss.length)return(0,X.of)(new It(G,{}));const Kr=Hr(I)===N;return this.expandSegment(Dt,os,cr,ss,Kr?Qe:N,!0).pipe((0,K.U)(Yo=>new It(G.concat(Yo.segments),Yo.children)))})):Cs(g)))}getChildConfig(v,g,I){return g.children?(0,X.of)({routes:g.children,injector:v}):g.loadChildren?void 0!==g._loadedRoutes?(0,X.of)({routes:g._loadedRoutes,injector:g._loadedInjector}):function zr(y,v,g,I){const S=v.canLoad;if(void 0===S||0===S.length)return(0,X.of)(!0);const N=S.map(F=>{const G=dt(F,y);return fn(function Ws(y){return y&&ka(y.canLoad)}(G)?G.canLoad(v,g):y.runInContext(()=>G(v,g)))});return(0,X.of)(N).pipe(Cn(),Mi())}(v,g,I).pipe((0,Be.z)(S=>S?this.configLoader.loadChildren(v,g).pipe((0,st.b)(N=>{g._loadedRoutes=N.routes,g._loadedInjector=N.injector})):function Bn(y){return et(yf(zo,3))}())):(0,X.of)({routes:[],injector:v})}lineralizeSegments(v,g){let I=[],S=g.root;for(;;){if(I=I.concat(S.segments),0===S.numberOfChildren)return(0,X.of)(I);if(S.numberOfChildren>1||!S.children[Qe])return v.redirectTo,et(new M.vHH(4e3,zo));S=S.children[Qe]}}applyRedirectCommands(v,g,I){return this.applyRedirectCreateUrlTree(g,this.urlSerializer.parse(g),v,I)}applyRedirectCreateUrlTree(v,g,I,S){const N=this.createSegmentGroup(v,g.root,I,S);return new mr(N,this.createQueryParams(g.queryParams,this.urlTree.queryParams),g.fragment)}createQueryParams(v,g){const I={};return Pn(v,(S,N)=>{if("string"==typeof S&&S.startsWith(":")){const G=S.substring(1);I[N]=g[G]}else I[N]=S}),I}createSegmentGroup(v,g,I,S){const N=this.createSegments(v,g.segments,I,S);let F={};return Pn(g.children,(G,ie)=>{F[ie]=this.createSegmentGroup(v,G,I,S)}),new It(N,F)}createSegments(v,g,I,S){return g.map(N=>N.path.startsWith(":")?this.findPosParam(v,N,S):this.findOrReturn(N,I))}findPosParam(v,g,I){const S=I[g.path.substring(1)];if(!S)throw new M.vHH(4001,zo);return S}findOrReturn(v,g){let I=0;for(const S of g){if(S.path===v.path)return g.splice(I),S;I++}return v}}class R{}class B{constructor(v,g,I,S,N,F,G){this.injector=v,this.rootComponentType=g,this.config=I,this.urlTree=S,this.url=N,this.paramsInheritanceStrategy=F,this.urlSerializer=G}recognize(){const v=go(this.urlTree.root,[],[],this.config.filter(g=>void 0===g.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,v,Qe).pipe((0,K.U)(g=>{if(null===g)return null;const I=new Eu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qe,this.rootComponentType,null,this.urlTree.root,-1,{}),S=new vr(I,g),N=new es(this.url,S);return this.inheritParamsAndData(N._root),N}))}inheritParamsAndData(v){const g=v.value,I=pf(g,this.paramsInheritanceStrategy);g.params=Object.freeze(I.params),g.data=Object.freeze(I.data),v.children.forEach(S=>this.inheritParamsAndData(S))}processSegmentGroup(v,g,I,S){return 0===I.segments.length&&I.hasChildren()?this.processChildren(v,g,I):this.processSegment(v,g,I,I.segments,S)}processChildren(v,g,I){return(0,w.D)(Object.keys(I.children)).pipe(At(S=>{const N=I.children[S],F=Is(g,S);return this.processSegmentGroup(v,F,N,S)}),vt((S,N)=>S&&N?(S.push(...N),S):null),function ao(y,v=!1){return(0,Fe.e)((g,I)=>{let S=0;g.subscribe((0,de.x)(I,N=>{const F=y(N,S++);(F||v)&&I.next(N),!F&&I.complete()}))})}(S=>null!==S),Vt(null),cn(),(0,K.U)(S=>{if(null===S)return null;const N=Mt(S);return function ee(y){y.sort((v,g)=>v.value.outlet===Qe?-1:g.value.outlet===Qe?1:v.value.outlet.localeCompare(g.value.outlet))}(N),N}))}processSegment(v,g,I,S,N){return(0,w.D)(g).pipe(At(F=>this.processSegmentAgainstRoute(F._injector??v,F,I,S,N)),Tt(F=>!!F),Jt(F=>{if(Ho(F))return Go(I,S,N)?(0,X.of)([]):(0,X.of)(null);throw F}))}processSegmentAgainstRoute(v,g,I,S,N){if(g.redirectTo||!Ua(g,I,S,N))return(0,X.of)(null);let F;if("**"===g.path){const G=S.length>0?_e(S).parameters:{},ie=gt(I)+S.length,Pe=new Eu(S,G,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kt(g),Hr(g),g.component??g._loadedComponent??null,g,Ot(I),ie,Dn(g));F=(0,X.of)({snapshot:Pe,consumedSegments:[],remainingSegments:[]})}else F=Ru(I,g,S,v).pipe((0,K.U)(({matched:G,consumedSegments:ie,remainingSegments:Pe,parameters:Oe})=>{if(!G)return null;const Dt=gt(I)+ie.length;return{snapshot:new Eu(ie,Oe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kt(g),Hr(g),g.component??g._loadedComponent??null,g,Ot(I),Dt,Dn(g)),consumedSegments:ie,remainingSegments:Pe}}));return F.pipe(ce(G=>{if(null===G)return(0,X.of)(null);const{snapshot:ie,consumedSegments:Pe,remainingSegments:Oe}=G;v=g._injector??v;const Dt=g._loadedInjector??v,cr=function se(y){return y.children?y.children:y.loadChildren?y._loadedRoutes:[]}(g),{segmentGroup:As,slicedSegments:ss}=go(I,Pe,Oe,cr.filter(Kr=>void 0===Kr.redirectTo));if(0===ss.length&&As.hasChildren())return this.processChildren(Dt,cr,As).pipe((0,K.U)(Kr=>null===Kr?null:[new vr(ie,Kr)]));if(0===cr.length&&0===ss.length)return(0,X.of)([new vr(ie,[])]);const os=Hr(g)===N;return this.processSegment(Dt,cr,As,ss,os?Qe:N).pipe((0,K.U)(Kr=>null===Kr?null:[new vr(ie,Kr)]))}))}}function We(y){const v=y.value.routeConfig;return v&&""===v.path&&void 0===v.redirectTo}function Mt(y){const v=[],g=new Set;for(const I of y){if(!We(I)){v.push(I);continue}const S=v.find(N=>I.value.routeConfig===N.value.routeConfig);void 0!==S?(S.children.push(...I.children),g.add(S)):v.push(I)}for(const I of g){const S=Mt(I.children);v.push(new vr(I.value,S))}return v.filter(I=>!g.has(I))}function Ot(y){let v=y;for(;v._sourceSegment;)v=v._sourceSegment;return v}function gt(y){let v=y,g=v._segmentIndexShift??0;for(;v._sourceSegment;)v=v._sourceSegment,g+=v._segmentIndexShift??0;return g-1}function Kt(y){return y.data||{}}function Dn(y){return y.resolve||{}}function ns(y){return"string"==typeof y.title||null===y.title}function $a(y){return ce(v=>{const g=y(v);return g?(0,w.D)(g).pipe((0,K.U)(()=>v)):(0,X.of)(v)})}const Ni=new M.OlP("ROUTES");let ku=(()=>{class y{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,M.f3M)(M.Sil)}loadComponent(g){if(this.componentLoaders.get(g))return this.componentLoaders.get(g);if(g._loadedComponent)return(0,X.of)(g._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(g);const I=fn(g.loadComponent()).pipe((0,K.U)(Ou),(0,st.b)(N=>{this.onLoadEndListener&&this.onLoadEndListener(g),g._loadedComponent=N}),pa(()=>{this.componentLoaders.delete(g)})),S=new tt(I,()=>new O.x).pipe(Ht());return this.componentLoaders.set(g,S),S}loadChildren(g,I){if(this.childrenLoaders.get(I))return this.childrenLoaders.get(I);if(I._loadedRoutes)return(0,X.of)({routes:I._loadedRoutes,injector:I._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(I);const N=this.loadModuleFactoryOrRoutes(I.loadChildren).pipe((0,K.U)(G=>{this.onLoadEndListener&&this.onLoadEndListener(I);let ie,Pe,Oe=!1;Array.isArray(G)?Pe=G:(ie=G.create(g).injector,Pe=en(ie.get(Ni,[],M.XFs.Self|M.XFs.Optional)));return{routes:Pe.map(Cu),injector:ie}}),pa(()=>{this.childrenLoaders.delete(I)})),F=new tt(N,()=>new O.x).pipe(Ht());return this.childrenLoaders.set(I,F),F}loadModuleFactoryOrRoutes(g){return fn(g()).pipe((0,K.U)(Ou),(0,Be.z)(I=>I instanceof M.YKP||Array.isArray(I)?(0,X.of)(I):(0,w.D)(this.compiler.compileModuleAsync(I))))}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();function Ou(y){return function hd(y){return y&&"object"==typeof y&&"default"in y}(y)?y.default:y}let qs=(()=>{class y{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new O.x,this.configLoader=(0,M.f3M)(ku),this.environmentInjector=(0,M.f3M)(M.lqb),this.urlSerializer=(0,M.f3M)(tn),this.rootContexts=(0,M.f3M)(po),this.navigationId=0,this.afterPreactivation=()=>(0,X.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=S=>this.events.next(new hf(S)),this.configLoader.onLoadStartListener=S=>this.events.next(new dn(S))}complete(){this.transitions?.complete()}handleNavigationRequest(g){const I=++this.navigationId;this.transitions?.next({...this.transitions.value,...g,id:I})}setupNavigations(g){return this.transitions=new ue({id:0,targetPageId:0,currentUrlTree:g.currentUrlTree,currentRawUrl:g.currentUrlTree,extractedUrl:g.urlHandlingStrategy.extract(g.currentUrlTree),urlAfterRedirects:g.urlHandlingStrategy.extract(g.currentUrlTree),rawUrl:g.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ji,restoredState:null,currentSnapshot:g.routerState.snapshot,targetSnapshot:null,currentRouterState:g.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ve(I=>0!==I.id),(0,K.U)(I=>({...I,extractedUrl:g.urlHandlingStrategy.extract(I.rawUrl)})),ce(I=>{let S=!1,N=!1;return(0,X.of)(I).pipe((0,st.b)(F=>{this.currentNavigation={id:F.id,initialUrl:F.rawUrl,extractedUrl:F.extractedUrl,trigger:F.source,extras:F.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ce(F=>{const G=g.browserUrlTree.toString(),ie=!g.navigated||F.extractedUrl.toString()!==G||G!==g.currentUrlTree.toString();if(!ie&&"reload"!==(F.extras.onSameUrlNavigation??g.onSameUrlNavigation)){const Oe="";return this.events.next(new Fn(F.id,g.serializeUrl(I.rawUrl),Oe,0)),g.rawUrlTree=F.rawUrl,F.resolve(null),Ce.E}if(g.urlHandlingStrategy.shouldProcessUrl(F.rawUrl))return Ol(F.source)&&(g.browserUrlTree=F.extractedUrl),(0,X.of)(F).pipe(ce(Oe=>{const Dt=this.transitions?.getValue();return this.events.next(new Ia(Oe.id,this.urlSerializer.serialize(Oe.extractedUrl),Oe.source,Oe.restoredState)),Dt!==this.transitions?.getValue()?Ce.E:Promise.resolve(Oe)}),function If(y,v,g,I){return ce(S=>function _i(y,v,g,I,S){return new yn(y,v,g,I,S).apply()}(y,v,g,S.extractedUrl,I).pipe((0,K.U)(N=>({...S,urlAfterRedirects:N}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,g.config),(0,st.b)(Oe=>{this.currentNavigation={...this.currentNavigation,finalUrl:Oe.urlAfterRedirects},I.urlAfterRedirects=Oe.urlAfterRedirects}),function Mr(y,v,g,I,S){return(0,Be.z)(N=>function P(y,v,g,I,S,N,F="emptyOnly"){return new B(y,v,g,I,S,F,N).recognize().pipe(ce(G=>null===G?function D(y){return new Ke.y(v=>v.error(y))}(new R):(0,X.of)(G)))}(y,v,g,N.urlAfterRedirects,I.serialize(N.urlAfterRedirects),I,S).pipe((0,K.U)(F=>({...N,targetSnapshot:F}))))}(this.environmentInjector,this.rootComponentType,g.config,this.urlSerializer,g.paramsInheritanceStrategy),(0,st.b)(Oe=>{if(I.targetSnapshot=Oe.targetSnapshot,"eager"===g.urlUpdateStrategy){if(!Oe.extras.skipLocationChange){const cr=g.urlHandlingStrategy.merge(Oe.urlAfterRedirects,Oe.rawUrl);g.setBrowserUrl(cr,Oe)}g.browserUrlTree=Oe.urlAfterRedirects}const Dt=new Bo(Oe.id,this.urlSerializer.serialize(Oe.extractedUrl),this.urlSerializer.serialize(Oe.urlAfterRedirects),Oe.targetSnapshot);this.events.next(Dt)}));if(ie&&g.urlHandlingStrategy.shouldProcessUrl(g.rawUrlTree)){const{id:Oe,extractedUrl:Dt,source:cr,restoredState:As,extras:ss}=F,os=new Ia(Oe,this.urlSerializer.serialize(Dt),cr,As);this.events.next(os);const Kr=wu(Dt,this.rootComponentType).snapshot;return I={...F,targetSnapshot:Kr,urlAfterRedirects:Dt,extras:{...ss,skipLocationChange:!1,replaceUrl:!1}},(0,X.of)(I)}{const Oe="";return this.events.next(new Fn(F.id,g.serializeUrl(I.extractedUrl),Oe,1)),g.rawUrlTree=F.rawUrl,F.resolve(null),Ce.E}}),(0,st.b)(F=>{const G=new co(F.id,this.urlSerializer.serialize(F.extractedUrl),this.urlSerializer.serialize(F.urlAfterRedirects),F.targetSnapshot);this.events.next(G)}),(0,K.U)(F=>I={...F,guards:Tu(F.targetSnapshot,F.currentSnapshot,this.rootContexts)}),function Su(y,v){return(0,Be.z)(g=>{const{targetSnapshot:I,currentSnapshot:S,guards:{canActivateChecks:N,canDeactivateChecks:F}}=g;return 0===F.length&&0===N.length?(0,X.of)({...g,guardsResult:!0}):function Au(y,v,g,I){return(0,w.D)(y).pipe((0,Be.z)(S=>function Mu(y,v,g,I,S){const N=v&&v.routeConfig?v.routeConfig.canDeactivate:null;if(!N||0===N.length)return(0,X.of)(!0);const F=N.map(G=>{const ie=Vn(v)??S,Pe=dt(G,ie);return fn(function Ut(y){return y&&ka(y.canDeactivate)}(Pe)?Pe.canDeactivate(y,v,g,I):ie.runInContext(()=>Pe(y,v,g,I))).pipe(Tt())});return(0,X.of)(F).pipe(Cn())}(S.component,S.route,g,v,I)),Tt(S=>!0!==S,!0))}(F,I,S,y).pipe((0,Be.z)(G=>G&&function sd(y){return"boolean"==typeof y}(G)?function xu(y,v,g,I){return(0,w.D)(v).pipe(At(S=>Ue(function ud(y,v){return null!==y&&v&&v(new yu(y)),(0,X.of)(!0)}(S.route.parent,I),function ad(y,v){return null!==y&&v&&v(new ba(y)),(0,X.of)(!0)}(S.route,I),function ts(y,v,g){const I=v[v.length-1],N=v.slice(0,v.length-1).reverse().map(F=>function Na(y){const v=y.routeConfig?y.routeConfig.canActivateChild:null;return v&&0!==v.length?{node:y,guards:v}:null}(F)).filter(F=>null!==F).map(F=>xe(()=>{const G=F.guards.map(ie=>{const Pe=Vn(F.node)??g,Oe=dt(ie,Pe);return fn(function pe(y){return y&&ka(y.canActivateChild)}(Oe)?Oe.canActivateChild(I,y):Pe.runInContext(()=>Oe(I,y))).pipe(Tt())});return(0,X.of)(G).pipe(Cn())}));return(0,X.of)(N).pipe(Cn())}(y,S.path,g),function xr(y,v,g){const I=v.routeConfig?v.routeConfig.canActivate:null;if(!I||0===I.length)return(0,X.of)(!0);const S=I.map(N=>xe(()=>{const F=Vn(v)??g,G=dt(N,F);return fn(function Du(y){return y&&ka(y.canActivate)}(G)?G.canActivate(v,y):F.runInContext(()=>G(v,y))).pipe(Tt())}));return(0,X.of)(S).pipe(Cn())}(y,S.route,g))),Tt(S=>!0!==S,!0))}(I,N,y,v):(0,X.of)(G)),(0,K.U)(G=>({...g,guardsResult:G})))})}(this.environmentInjector,F=>this.events.next(F)),(0,st.b)(F=>{if(I.guardsResult=F.guardsResult,Ti(F.guardsResult))throw _f(0,F.guardsResult);const G=new Ai(F.id,this.urlSerializer.serialize(F.extractedUrl),this.urlSerializer.serialize(F.urlAfterRedirects),F.targetSnapshot,!!F.guardsResult);this.events.next(G)}),ve(F=>!!F.guardsResult||(g.restoreHistory(F),this.cancelNavigationTransition(F,"",3),!1)),$a(F=>{if(F.guards.canActivateChecks.length)return(0,X.of)(F).pipe((0,st.b)(G=>{const ie=new ho(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(G.urlAfterRedirects),G.targetSnapshot);this.events.next(ie)}),ce(G=>{let ie=!1;return(0,X.of)(G).pipe(function Ri(y,v){return(0,Be.z)(g=>{const{targetSnapshot:I,guards:{canActivateChecks:S}}=g;if(!S.length)return(0,X.of)(g);let N=0;return(0,w.D)(S).pipe(At(F=>function bs(y,v,g,I){const S=y.routeConfig,N=y._resolve;return void 0!==S?.title&&!ns(S)&&(N[Wn]=S.title),function Wr(y,v,g,I){const S=function mo(y){return[...Object.keys(y),...Object.getOwnPropertySymbols(y)]}(y);if(0===S.length)return(0,X.of)({});const N={};return(0,w.D)(S).pipe((0,Be.z)(F=>function _o(y,v,g,I){const S=Vn(v)??I,N=dt(y,S);return fn(N.resolve?N.resolve(v,g):S.runInContext(()=>N(v,g)))}(y[F],v,g,I).pipe(Tt(),(0,st.b)(G=>{N[F]=G}))),gr(1),function tr(y){return(0,K.U)(()=>y)}(N),Jt(F=>Ho(F)?Ce.E:et(F)))}(N,y,v,I).pipe((0,K.U)(F=>(y._resolvedData=F,y.data=pf(y,g).resolve,S&&ns(S)&&(y.data[Wn]=S.title),null)))}(F.route,I,y,v)),(0,st.b)(()=>N++),gr(1),(0,Be.z)(F=>N===S.length?(0,X.of)(g):Ce.E))})}(g.paramsInheritanceStrategy,this.environmentInjector),(0,st.b)({next:()=>ie=!0,complete:()=>{ie||(g.restoreHistory(G),this.cancelNavigationTransition(G,"",2))}}))}),(0,st.b)(G=>{const ie=new Cl(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(G.urlAfterRedirects),G.targetSnapshot);this.events.next(ie)}))}),$a(F=>{const G=ie=>{const Pe=[];ie.routeConfig?.loadComponent&&!ie.routeConfig._loadedComponent&&Pe.push(this.configLoader.loadComponent(ie.routeConfig).pipe((0,st.b)(Oe=>{ie.component=Oe}),(0,K.U)(()=>{})));for(const Oe of ie.children)Pe.push(...G(Oe));return Pe};return rt(G(F.targetSnapshot.root)).pipe(Vt(),me(1))}),$a(()=>this.afterPreactivation()),(0,K.U)(F=>{const G=function mf(y,v,g){const I=Sl(y,v._root,g?g._root:void 0);return new Da(I,v)}(g.routeReuseStrategy,F.targetSnapshot,F.currentRouterState);return I={...F,targetRouterState:G}}),(0,st.b)(F=>{g.currentUrlTree=F.urlAfterRedirects,g.rawUrlTree=g.urlHandlingStrategy.merge(F.urlAfterRedirects,F.rawUrl),g.routerState=F.targetRouterState,"deferred"===g.urlUpdateStrategy&&(F.extras.skipLocationChange||g.setBrowserUrl(g.rawUrlTree,F),g.browserUrlTree=F.urlAfterRedirects)}),((y,v,g)=>(0,K.U)(I=>(new Ra(v,I.targetRouterState,I.currentRouterState,g).activate(y),I)))(this.rootContexts,g.routeReuseStrategy,F=>this.events.next(F)),me(1),(0,st.b)({next:F=>{S=!0,this.lastSuccessfulNavigation=this.currentNavigation,g.navigated=!0,this.events.next(new Si(F.id,this.urlSerializer.serialize(F.extractedUrl),this.urlSerializer.serialize(g.currentUrlTree))),g.titleStrategy?.updateTitle(F.targetRouterState.snapshot),F.resolve(!0)},complete:()=>{S=!0}}),pa(()=>{S||N||this.cancelNavigationTransition(I,"",1),this.currentNavigation?.id===I.id&&(this.currentNavigation=null)}),Jt(F=>{if(N=!0,$o(F)){Es(F)||(g.navigated=!0,g.restoreHistory(I,!0));const G=new Ca(I.id,this.urlSerializer.serialize(I.extractedUrl),F.message,F.cancellationCode);if(this.events.next(G),Es(F)){const ie=g.urlHandlingStrategy.merge(F.url,g.rawUrlTree),Pe={skipLocationChange:I.extras.skipLocationChange,replaceUrl:"eager"===g.urlUpdateStrategy||Ol(I.source)};g.scheduleNavigation(ie,Ji,null,Pe,{resolve:I.resolve,reject:I.reject,promise:I.promise})}else I.resolve(!1)}else{g.restoreHistory(I,!0);const G=new Yn(I.id,this.urlSerializer.serialize(I.extractedUrl),F,I.targetSnapshot??void 0);this.events.next(G);try{I.resolve(g.errorHandler(F))}catch(ie){I.reject(ie)}}return Ce.E}))}))}cancelNavigationTransition(g,I,S){const N=new Ca(g.id,this.urlSerializer.serialize(g.extractedUrl),I,S);this.events.next(N),g.resolve(!1)}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();function Ol(y){return y!==Ji}let Wo=(()=>{class y{buildTitle(g){let I,S=g.root;for(;void 0!==S;)I=this.getResolvedTitleForRoute(S)??I,S=S.children.find(N=>N.outlet===Qe);return I}getResolvedTitleForRoute(g){return g.data[Wn]}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275prov=M.Yz7({token:y,factory:function(){return(0,M.f3M)(Cf)},providedIn:"root"}),y})(),Cf=(()=>{class y extends Wo{constructor(g){super(),this.title=g}updateTitle(g){const I=this.buildTitle(g);void 0!==I&&this.title.setTitle(I)}}return y.\u0275fac=function(g){return new(g||y)(M.LFG(No.Dx))},y.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})(),bf=(()=>{class y{}return y.\u0275fac=function(g){return new(g||y)},y.\u0275prov=M.Yz7({token:y,factory:function(){return(0,M.f3M)(Tf)},providedIn:"root"}),y})();class Fl{shouldDetach(v){return!1}store(v,g){}shouldAttach(v){return!1}retrieve(v){return null}shouldReuseRoute(v,g){return v.routeConfig===g.routeConfig}}let Tf=(()=>{class y extends Fl{}return y.\u0275fac=function(){let v;return function(I){return(v||(v=M.n5z(y)))(I||y)}}(),y.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();const ja=new M.OlP("",{providedIn:"root",factory:()=>({})});let Fu=(()=>{class y{}return y.\u0275fac=function(g){return new(g||y)},y.\u0275prov=M.Yz7({token:y,factory:function(){return(0,M.f3M)(fd)},providedIn:"root"}),y})(),fd=(()=>{class y{shouldProcessUrl(g){return!0}extract(g){return g}merge(g,I){return g}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();function pd(y){throw y}function gd(y,v,g){return v.parse("/")}const zm={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Vl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qr=(()=>{class y{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,M.f3M)(M.c2e),this.isNgZoneEnabled=!1,this.options=(0,M.f3M)(ja,{optional:!0})||{},this.errorHandler=this.options.errorHandler||pd,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||gd,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,M.f3M)(Fu),this.routeReuseStrategy=(0,M.f3M)(bf),this.urlCreationStrategy=(0,M.f3M)(vu),this.titleStrategy=(0,M.f3M)(Wo),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=en((0,M.f3M)(Ni,{optional:!0})??[]),this.navigationTransitions=(0,M.f3M)(qs),this.urlSerializer=(0,M.f3M)(tn),this.location=(0,M.f3M)(ne.Ye),this.isNgZoneEnabled=(0,M.f3M)(M.R0b)instanceof M.R0b&&M.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new mr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=wu(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(g=>{this.lastSuccessfulId=g.id,this.currentPageId=this.browserPageId??0},g=>{this.console.warn(`Unhandled Navigation Error: ${g}`)})}resetRootComponentType(g){this.routerState.root.component=g,this.navigationTransitions.rootComponentType=g}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const g=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ji,g)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(g=>{const I="popstate"===g.type?"popstate":"hashchange";"popstate"===I&&setTimeout(()=>{this.navigateToSyncWithBrowser(g.url,I,g.state)},0)}))}navigateToSyncWithBrowser(g,I,S){const N={replaceUrl:!0},F=S?.navigationId?S:null;if(S){const ie={...S};delete ie.navigationId,delete ie.\u0275routerPageId,0!==Object.keys(ie).length&&(N.state=ie)}const G=this.parseUrl(g);this.scheduleNavigation(G,I,F,N)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(g){this.config=g.map(Cu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(g,I={}){const{relativeTo:S,queryParams:N,fragment:F,queryParamsHandling:G,preserveFragment:ie}=I,Pe=ie?this.currentUrlTree.fragment:F;let Oe=null;switch(G){case"merge":Oe={...this.currentUrlTree.queryParams,...N};break;case"preserve":Oe=this.currentUrlTree.queryParams;break;default:Oe=N||null}return null!==Oe&&(Oe=this.removeEmptyProps(Oe)),this.urlCreationStrategy.createUrlTree(S,this.routerState,this.currentUrlTree,g,Oe,Pe??null)}navigateByUrl(g,I={skipLocationChange:!1}){const S=Ti(g)?g:this.parseUrl(g),N=this.urlHandlingStrategy.merge(S,this.rawUrlTree);return this.scheduleNavigation(N,Ji,null,I)}navigate(g,I={skipLocationChange:!1}){return function Ul(y){for(let v=0;v<y.length;v++){const g=y[v];if(null==g)throw new M.vHH(4008,false)}}(g),this.navigateByUrl(this.createUrlTree(g,I),I)}serializeUrl(g){return this.urlSerializer.serialize(g)}parseUrl(g){let I;try{I=this.urlSerializer.parse(g)}catch(S){I=this.malformedUriErrorHandler(S,this.urlSerializer,g)}return I}isActive(g,I){let S;if(S=!0===I?{...zm}:!1===I?{...Vl}:I,Ti(g))return ma(this.currentUrlTree,g,S);const N=this.parseUrl(g);return ma(this.currentUrlTree,N,S)}removeEmptyProps(g){return Object.keys(g).reduce((I,S)=>{const N=g[S];return null!=N&&(I[S]=N),I},{})}scheduleNavigation(g,I,S,N,F){if(this.disposed)return Promise.resolve(!1);let G,ie,Pe,Oe;return F?(G=F.resolve,ie=F.reject,Pe=F.promise):Pe=new Promise((Dt,cr)=>{G=Dt,ie=cr}),Oe="computed"===this.canceledNavigationResolution?S&&S.\u0275routerPageId?S.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Oe,source:I,restoredState:S,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:g,extras:N,resolve:G,reject:ie,promise:Pe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Pe.catch(Dt=>Promise.reject(Dt))}setBrowserUrl(g,I){const S=this.urlSerializer.serialize(g);if(this.location.isCurrentPathEqualTo(S)||I.extras.replaceUrl){const F={...I.extras.state,...this.generateNgRouterState(I.id,this.browserPageId)};this.location.replaceState(S,"",F)}else{const N={...I.extras.state,...this.generateNgRouterState(I.id,I.targetPageId)};this.location.go(S,"",N)}}restoreHistory(g,I=!1){if("computed"===this.canceledNavigationResolution){const N=this.currentPageId-(this.browserPageId??this.currentPageId);0!==N?this.location.historyGo(N):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===N&&(this.resetState(g),this.browserUrlTree=g.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(I&&this.resetState(g),this.resetUrlToCurrentUrlTree())}resetState(g){this.routerState=g.currentRouterState,this.currentUrlTree=g.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,g.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(g,I){return"computed"===this.canceledNavigationResolution?{navigationId:g,\u0275routerPageId:I}:{navigationId:g}}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})(),Lu=(()=>{class y{constructor(g,I,S,N,F,G){this.router=g,this.route=I,this.tabIndexAttribute=S,this.renderer=N,this.el=F,this.locationStrategy=G,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new O.x;const ie=F.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===ie||"area"===ie,this.isAnchorElement?this.subscription=g.events.subscribe(Pe=>{Pe instanceof Si&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(g){this._preserveFragment=(0,M.D6c)(g)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(g){this._skipLocationChange=(0,M.D6c)(g)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(g){this._replaceUrl=(0,M.D6c)(g)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(g){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",g)}ngOnChanges(g){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(g){null!=g?(this.commands=Array.isArray(g)?g:[g],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(g,I,S,N,F){return!!(null===this.urlTree||this.isAnchorElement&&(0!==g||I||S||N||F||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const g=null===this.href?null:(0,M.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",g)}applyAttributeValue(g,I){const S=this.renderer,N=this.el.nativeElement;null!==I?S.setAttribute(N,g,I):S.removeAttribute(N,g)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return y.\u0275fac=function(g){return new(g||y)(M.Y36(qr),M.Y36(jr),M.$8M("tabindex"),M.Y36(M.Qsj),M.Y36(M.SBq),M.Y36(ne.S$))},y.\u0275dir=M.lG2({type:y,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(g,I){1&g&&M.NdJ("click",function(N){return I.onClick(N.button,N.ctrlKey,N.shiftKey,N.altKey,N.metaKey)}),2&g&&M.uIk("target",I.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[M.TTD]}),y})();class Ds{}let $l=(()=>{class y{constructor(g,I,S,N,F){this.router=g,this.injector=S,this.preloadingStrategy=N,this.loader=F}setUpPreloading(){this.subscription=this.router.events.pipe(ve(g=>g instanceof Si),At(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(g,I){const S=[];for(const N of I){N.providers&&!N._injector&&(N._injector=(0,M.MMx)(N.providers,g,`Route: ${N.path}`));const F=N._injector??g,G=N._loadedInjector??F;(N.loadChildren&&!N._loadedRoutes&&void 0===N.canLoad||N.loadComponent&&!N._loadedComponent)&&S.push(this.preloadConfig(F,N)),(N.children||N._loadedRoutes)&&S.push(this.processRoutes(G,N.children??N._loadedRoutes))}return(0,w.D)(S).pipe((0,qt.J)())}preloadConfig(g,I){return this.preloadingStrategy.preload(I,()=>{let S;S=I.loadChildren&&void 0===I.canLoad?this.loader.loadChildren(g,I):(0,X.of)(null);const N=S.pipe((0,Be.z)(F=>null===F?(0,X.of)(void 0):(I._loadedRoutes=F.routes,I._loadedInjector=F.injector,this.processRoutes(F.injector??g,F.routes))));if(I.loadComponent&&!I._loadedComponent){const F=this.loader.loadComponent(I);return(0,w.D)([N,F]).pipe((0,qt.J)())}return N})}}return y.\u0275fac=function(g){return new(g||y)(M.LFG(qr),M.LFG(M.Sil),M.LFG(M.lqb),M.LFG(Ds),M.LFG(ku))},y.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();const qo=new M.OlP("");let Wm=(()=>{class y{constructor(g,I,S,N,F={}){this.urlSerializer=g,this.transitions=I,this.viewportScroller=S,this.zone=N,this.options=F,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},F.scrollPositionRestoration=F.scrollPositionRestoration||"disabled",F.anchorScrolling=F.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(g=>{g instanceof Ia?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=g.navigationTrigger,this.restoredId=g.restoredState?g.restoredState.navigationId:0):g instanceof Si&&(this.lastId=g.id,this.scheduleScrollEvent(g,this.urlSerializer.parse(g.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(g=>{g instanceof $s&&(g.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(g.position):g.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(g.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(g,I){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new $s(g,"popstate"===this.lastSource?this.store[this.restoredId]:null,I))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return y.\u0275fac=function(g){M.$Z()},y.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac}),y})();var ni=(()=>((ni=ni||{})[ni.COMPLETE=0]="COMPLETE",ni[ni.FAILED=1]="FAILED",ni[ni.REDIRECTING=2]="REDIRECTING",ni))();const Ko=!1;function yi(y,v){return{\u0275kind:y,\u0275providers:v}}const yo=new M.OlP("",{providedIn:"root",factory:()=>!1});function wo(){const y=(0,M.f3M)(M.zs3);return v=>{const g=y.get(M.z2F);if(v!==g.components[0])return;const I=y.get(qr),S=y.get(Km);1===y.get(Rr)&&I.initialNavigation(),y.get(Af,null,M.XFs.Optional)?.setUpPreloading(),y.get(qo,null,M.XFs.Optional)?.init(),I.resetRootComponentType(g.componentTypes[0]),S.closed||(S.next(),S.complete(),S.unsubscribe())}}const Km=new M.OlP(Ko?"bootstrap done indicator":"",{factory:()=>new O.x}),Rr=new M.OlP(Ko?"initial navigation":"",{providedIn:"root",factory:()=>1});function _0(){let y=[];return y=Ko?[{provide:M.Xts,multi:!0,useFactory:()=>{const v=(0,M.f3M)(qr);return()=>v.events.subscribe(g=>{console.group?.(`Router Event: ${g.constructor.name}`),console.log(function yr(y){if(!("type"in y))return`Unknown Router Event: ${y.constructor.name}`;switch(y.type){case 14:return`ActivationEnd(path: '${y.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${y.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${y.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${y.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${y.id}, url: '${y.url}', urlAfterRedirects: '${y.urlAfterRedirects}', state: ${y.state}, shouldActivate: ${y.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${y.id}, url: '${y.url}', urlAfterRedirects: '${y.urlAfterRedirects}', state: ${y.state})`;case 2:return`NavigationCancel(id: ${y.id}, url: '${y.url}')`;case 16:return`NavigationSkipped(id: ${y.id}, url: '${y.url}')`;case 1:return`NavigationEnd(id: ${y.id}, url: '${y.url}', urlAfterRedirects: '${y.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${y.id}, url: '${y.url}', error: ${y.error})`;case 0:return`NavigationStart(id: ${y.id}, url: '${y.url}')`;case 6:return`ResolveEnd(id: ${y.id}, url: '${y.url}', urlAfterRedirects: '${y.urlAfterRedirects}', state: ${y.state})`;case 5:return`ResolveStart(id: ${y.id}, url: '${y.url}', urlAfterRedirects: '${y.urlAfterRedirects}', state: ${y.state})`;case 10:return`RouteConfigLoadEnd(path: ${y.route.path})`;case 9:return`RouteConfigLoadStart(path: ${y.route.path})`;case 4:return`RoutesRecognized(id: ${y.id}, url: '${y.url}', urlAfterRedirects: '${y.urlAfterRedirects}', state: ${y.state})`;case 15:return`Scroll(anchor: '${y.anchor}', position: '${y.position?`${y.position[0]}, ${y.position[1]}`:null}')`}}(g)),console.log(g),console.groupEnd?.()})}}]:[],yi(1,y)}const Af=new M.OlP(Ko?"router preloader":"");function y0(y){return yi(0,[{provide:Af,useExisting:$l},{provide:Ds,useExisting:y}])}const rs=!1,Zm=new M.OlP(rs?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),$n=[ne.Ye,{provide:tn,useClass:Oo},qr,po,{provide:jr,useFactory:function jl(y){return y.routerState.root},deps:[qr]},ku,rs?{provide:yo,useValue:!0}:[]];function xf(){return new M.PXZ("Router",qr)}let Hl=(()=>{class y{constructor(g){}static forRoot(g,I){return{ngModule:y,providers:[$n,rs&&I?.enableTracing?_0().\u0275providers:[],{provide:Ni,multi:!0,useValue:g},{provide:Zm,useFactory:Qm,deps:[[qr,new M.FiY,new M.tp0]]},{provide:ja,useValue:I||{}},I?.useHash?{provide:ne.S$,useClass:ne.Do}:{provide:ne.S$,useClass:ne.b0},{provide:qo,useFactory:()=>{const y=(0,M.f3M)(ne.EM),v=(0,M.f3M)(M.R0b),g=(0,M.f3M)(ja),I=(0,M.f3M)(qs),S=(0,M.f3M)(tn);return g.scrollOffset&&y.setOffset(g.scrollOffset),new Wm(S,I,y,v,g)}},I?.preloadingStrategy?y0(I.preloadingStrategy).\u0275providers:[],{provide:M.PXZ,multi:!0,useFactory:xf},I?.initialNavigation?Gl(I):[],[{provide:Ha,useFactory:wo},{provide:M.tb,multi:!0,useExisting:Ha}]]}}static forChild(g){return{ngModule:y,providers:[{provide:Ni,multi:!0,useValue:g}]}}}return y.\u0275fac=function(g){return new(g||y)(M.LFG(Zm,8))},y.\u0275mod=M.oAB({type:y}),y.\u0275inj=M.cJS({imports:[xa]}),y})();function Qm(y){if(rs&&y)throw new M.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Gl(y){return["disabled"===y.initialNavigation?yi(3,[{provide:M.ip1,multi:!0,useFactory:()=>{const v=(0,M.f3M)(qr);return()=>{v.setUpLocationChangeListener()}}},{provide:Rr,useValue:2}]).\u0275providers:[],"enabledBlocking"===y.initialNavigation?yi(2,[{provide:Rr,useValue:0},{provide:M.ip1,multi:!0,deps:[M.zs3],useFactory:v=>{const g=v.get(ne.V_,Promise.resolve());return()=>g.then(()=>new Promise(I=>{const S=v.get(qr),N=v.get(Km);(function Vu(y,v){y.events.pipe(ve(g=>g instanceof Si||g instanceof Ca||g instanceof Yn||g instanceof Fn),(0,K.U)(g=>g instanceof Si||g instanceof Fn?ni.COMPLETE:g instanceof Ca&&(0===g.code||1===g.code)?ni.REDIRECTING:ni.FAILED),ve(g=>g!==ni.REDIRECTING),me(1)).subscribe(()=>{v()})})(S,()=>{I(!0)}),v.get(qs).afterPreactivation=()=>(I(!0),N.closed?(0,X.of)(void 0):N),S.initialNavigation()}))}}]).\u0275providers:[]]}const Ha=new M.OlP(rs?"Router Initializer":"")},861:(yt,Te,j)=>{function M(X,O,ue,Z,De,Ke,Re){try{var ye=X[Ke](Re),le=ye.value}catch(Ae){return void ue(Ae)}ye.done?O(le):Promise.resolve(le).then(Z,De)}function w(X){return function(){var O=this,ue=arguments;return new Promise(function(Z,De){var Ke=X.apply(O,ue);function Re(le){M(Ke,Z,De,Re,ye,"next",le)}function ye(le){M(Ke,Z,De,Re,ye,"throw",le)}Re(void 0)})}}j.d(Te,{Z:()=>w})}},yt=>{yt(yt.s=154)}]);